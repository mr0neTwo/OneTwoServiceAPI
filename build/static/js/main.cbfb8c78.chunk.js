(this["webpackJsonponetwoservice-react"]=this["webpackJsonponetwoservice-react"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),c=n(24),a=n.n(c),s=n(3),o=n(25),l=(n(70),n(12)),d=n(4),u=n.n(d),m=n(8),p=n(33),h=n(59),b=n(9),j=n(2),_=[{value:"create_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438"},{value:"do_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"},{value:"see_all_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"edit_all_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"}],f=[{value:"see_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"create_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"edit_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"delete_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}],O=[{value:"create_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"move_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"delete_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"assing_emploees",description:"\u041c\u043e\u0436\u0435\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u043a\u0430\u0437"},{value:"see_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"},{value:"see_calls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0432\u043e\u043d\u043a\u0438"},{value:"edit_info_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \xab\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435\xbb"},{value:"edit_operations_materials",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \xab\u0420\u0430\u0431\u043e\u0442\u044b \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b\xbb"},{value:"add_service_list",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u0438\u0437 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0430"},{value:"add_servece_not_list",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u0432 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0435"},{value:"add_materials_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441\u043e \u0441\u043a\u043b\u0430\u0434\u0430"},{value:"add_materials_not_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"},{value:"create_books",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u0439"},{value:"edit_service_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u0443\u0441\u043b\u0443\u0433"},{value:"edit_materials_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"},{value:"edit_closed_order",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"},{value:"generally_custom_filters",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b"},{value:"cteate_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"}],v=[{value:"make_sales",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{value:"delete_sales",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{value:"sale_service",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"edit_sale_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443"}],g=[{value:"make_income",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043d\u043e\u0441\u0438\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"move_money",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"make_expenditure",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"backdating",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043d\u043e\u0441\u0438\u0442\u044c, \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438 \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c"},{value:"see_moving_money",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433"},{value:"see_moving_money_all_time",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0434\u0430\u0442"},{value:"delete_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"see_delete_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"recover_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"print_moving_money",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433"},{value:"see_remains",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"edit_cash",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u0430\u0441\u0441\u044b"},{value:"choose_emploees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"},{value:"invoices",description:"\u0421\u0447\u0435\u0442\u0430"},{value:"see_clients_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0440\u0430\u0441\u0447\u0451\u0442\u044b"},{value:"create_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"delete_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"edit_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"},{value:"see_all_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"create_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0438\u044e/\u0432\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435"},{value:"see_seleted_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"},{value:"delete_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"},{value:"recover_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"}],x=[{value:"see_remaining_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438"},{value:"see_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"create_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"edit_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"write_of_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"combine_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"move_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"see_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"create_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"delete_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"write_of_warehouse",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{value:"move_warehouse",description:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"see_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"see_inventory_total",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u0442\u043e\u0433\u0438 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"create_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"delete_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"see_refund_to_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"create_refund_to_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"serial_accounting",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u0435\u0440\u0438\u0439\u043d\u044b\u0439 \u0443\u0447\u0435\u0442 \u0434\u043b\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"create_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"edit_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"see_deleted_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"delete_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"recover_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"create_new_part",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"edit_part",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"see_delete_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"delete_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"recover_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"delete_operation_of_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"}],y=[{value:"see_table_clients",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"},{value:"see_buyer",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u0435\u0439"},{value:"see_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432"},{value:"see_client_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"edit_client_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"edit_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"delete_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"recover_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u0430\u043b\u0438\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"see_client_call",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0432\u043e\u043d\u043a\u0438"},{value:"edit_client_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u043a\u0438\u0434\u043a\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}],E=[{value:"indicators",description:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438"},{value:"analytic",description:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u0447\u0435\u0442"},{value:"assortment",description:"\u0410\u043d\u0430\u043b\u0438\u0437 \u0430\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442\u0430"}],N=[{value:"print_report",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u0430"},{value:"report_all_date",description:"\u041c\u043e\u0436\u0435\u0442 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0434\u0430\u0442"},{value:"report_salary",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0435"},{value:"report_all_maney",description:"\u0412\u0441\u0435\u0433\u043e \u0434\u0435\u043d\u0435\u0433"},{value:"report_move_maney",description:"\u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432"},{value:"report_income_orders",description:"\u041f\u0440\u0438\u0431\u044b\u043b\u044c \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043c"},{value:"report_income_sale",description:"\u041f\u0440\u0438\u0431\u044b\u043b\u044c \u043e\u0442 \u043f\u0440\u043e\u0434\u0430\u0436"},{value:"report_create_order",description:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"report_close_order",description:"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"report_work_order",description:"\u0417\u0430\u043a\u0430\u0437\u044b \u0432 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"report_ad_campaign",description:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0435 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438"},{value:"report_engineer",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f\u043c"},{value:"report_service",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c \u0438 \u0443\u0441\u043b\u0443\u0433\u0430\u043c"},{value:"report_turnover_goods",description:"\u041e\u0431\u043e\u0440\u043e\u0442\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"report_remaining_warehouse",description:"\u041e\u0441\u0442\u0430\u0442\u043a\u0438 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"},{value:"report_write_of_warehouse",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0441\u043e \u0441\u043a\u043b\u0430\u0434\u0430"},{value:"report_good_need",description:"\u0422\u043e\u0432\u0430\u0440\u044b, \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"},{value:"report_send_sms",description:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 SMS"},{value:"report_last_sms",description:"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 SMS"},{value:"report_reviews",description:"\u041e\u0442\u0437\u044b\u0432\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"},{value:"report_to_email",description:"\u041e\u0442\u0447\u0435\u0442 \u043d\u0430 email"},{value:"history_login",description:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0445\u043e\u0434\u043e\u0432"},{value:"report_call",description:"\u0417\u0432\u043e\u043d\u043a\u0438"}],w=[{value:"setting_generally",description:"\u041e\u0431\u0449\u0438\u0435"},{value:"setting_roles",description:"\u0420\u043e\u043b\u0438"},{value:"setting_employees",description:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"},{value:"setting_see_employees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"setting_recover_employees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u0432\u0445 \u0441\u043e\u0442\u0440\u0434\u0443\u043d\u0438\u043a\u043e\u0432"},{value:"setting_branch",description:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_see_branch",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_recover_branch",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_warehouse",description:"\u0421\u043a\u043b\u0430\u0434\u044b"},{value:"setting_create_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_edit_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0430\u0434\u044b"},{value:"setting_delete_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_see_deleted_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_recover_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435"},{value:"see_setting_tax",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043d\u0430\u043b\u043e\u0433\u043e\u0432"},{value:"create_tax",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430\u043b\u043e\u0433\u0438"},{value:"create_tax_rules",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u043b\u043e\u0433\u043e\u0432\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"},{value:"setting_status",description:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b"},{value:"setting_tags",description:"\u0422\u0435\u0433\u0438"},{value:"setting_alert",description:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_create_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_edit_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_see_deleted_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_delete_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_recover_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_create_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_edit_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_see_deleted_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_delete_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_recover_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_service",description:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{value:"setting_create_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_see_deleted_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_edit_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_delete_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0433\u0438"},{value:"setting_recover_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0433\u0438"},{value:"setting_book",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"},{value:"setting_see_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_recover_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_join_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_template",description:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"},{value:"setting_price",description:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_create_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0446\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_edit_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_price_show_deleted",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_price_delete",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_price_recover_deleted",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_marketing",description:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433"}],k=[{permission:[{value:"to_lend",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0441\u0447\u0451\u0442 \u0434\u043e\u043b\u0433\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"see_purchase",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u043a\u0443\u043f\u043e\u0447\u043d\u0443\u044e \u0446\u0435\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"handle_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043a\u0438\u0434\u043a\u0438 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445"},{value:"handle_type_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0438\u043f \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"handle_cost_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445"},{value:"see_profit",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442\u043d\u0443\u044e \u043f\u0440\u0438\u0431\u044b\u043b\u044c"},{value:"in_list_managers",description:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432"},{value:"in_list_engineers",description:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439"},{value:"send_sms",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c SMS"},{value:"see_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"}],description:"\u041e\u0431\u0449\u0438\u0435"},{permission:_,description:"\u0417\u0430\u0434\u0430\u0447\u0438"},{permission:f,description:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{permission:O,description:"\u0417\u0430\u043a\u0430\u0437\u044b"},{permission:v,description:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"},{permission:g,description:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b"},{permission:x,description:"\u0421\u043a\u043b\u0430\u0434"},{permission:y,description:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"},{permission:E,description:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"},{permission:N,description:"\u041e\u0442\u0447\u0435\u0442\u044b"},{permission:w,description:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}],C=["show_cashbox_remains","show_cash_flow","incoming","incoming_move","outcoming","outcoming_move"],S=["show_warehouse_remains","warehouse_registration","move_in","return_from_client","write_off","move_out","add_to_order","add_to_sale","return_to_supplier"],T={ordersShow:[],count:0,menuRows:[{id:1,title:"\u0417\u0430\u0434\u0430\u0447\u0438",image:"task",url:"/tasks",group_name:"generally_menu",active:!1,permission_keys:_.map((function(e){return e.value}))},{id:2,title:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",image:"M 3.527 6.987 a 0.5 0.5 0 0 0 -0.432 0.751 l 0.733 1.263 a 0.5 0.5 0 0 0 0.432 0.25 h 7.48 a 0.5 0.5 0 0 0 0.432 -0.25 l 0.733 -1.263 a 0.5 0.5 0 0 0 -0.432 -0.75 H 3.527 Z m 2.56 4.431 a 0.5 0.5 0 0 0 -0.433 0.75 l 0.69 1.2 a 0.5 0.5 0 0 0 0.434 0.25 h 2.444 a 0.5 0.5 0 0 0 0.434 -0.25 l 0.69 -1.2 a 0.5 0.5 0 0 0 -0.433 -0.75 H 6.087 Z M 0.867 2.382 a 0.5 0.5 0 0 0 -0.433 0.75 l 0.83 1.437 a 0.5 0.5 0 0 0 0.433 0.25 h 12.606 a 0.5 0.5 0 0 0 0.433 -0.25 l 0.83 -1.437 a 0.5 0.5 0 0 0 -0.433 -0.75 H 0.867 Z",url:"/leans",group_name:"generally_menu",active:!1,permission_keys:f.map((function(e){return e.value}))},{id:3,title:"\u0417\u0430\u043a\u0430\u0437\u044b",image:"M 13.6 0 H 2.4 A 2.403 2.403 0 0 0 0 2.4 v 11.2 A 2.403 2.403 0 0 0 2.4 16 h 11.2 a 2.403 2.403 0 0 0 2.4 -2.4 V 2.4 A 2.403 2.403 0 0 0 13.6 0 Z M 2.4 1.6 h 11.2 a 0.801 0.801 0 0 1 0.8 0.8 v 7.2 h -1.972 a 1.598 1.598 0 0 0 -1.331 0.713 L 9.972 12 H 6.028 l -1.125 -1.688 A 1.598 1.598 0 0 0 3.572 9.6 H 1.6 V 2.4 a 0.8 0.8 0 0 1 0.8 -0.8 Z m 2.355 4.8 h 6.4 c 0.267 0 0.8 0.32 0.8 0.8 c 0 0.48 -0.533 0.8 -0.8 0.8 h -6.4 c -0.266 0 -0.8 -0.32 -0.8 -0.8 c 0 -0.48 0.534 -0.8 0.8 -0.8 Z m 6.4 -3.2 h -6.4 c -0.266 0 -0.8 0.32 -0.8 0.8 c 0 0.48 0.534 0.8 0.8 0.8 h 6.4 c 0.267 0 0.8 -0.32 0.8 -0.8 c 0 -0.48 -0.533 -0.8 -0.8 -0.8 Z",url:"/orders",group_name:"generally_menu",active:!1,permission_keys:O.map((function(e){return e.value}))},{id:4,title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438",image:"M 1.472 0 a 0.656 0.656 0 0 0 0 1.311 h 0.976 V 8.793 a 0.652 0.652 0 0 0 0 0.046 v 2.68 a 2.289 2.289 0 1 0 2.726 1.217 h 4.837 a 2.288 2.288 0 1 0 2.07 -1.312 H 3.76 V 9.473 h 9.952 c 0.327 0 0.603 -0.24 0.65 -0.563 l 0.816 -5.713 a 0.656 0.656 0 0 0 -0.603 -0.746 L 3.76 1.677 V 0.656 A 0.656 0.656 0 0 0 3.104 0 H 1.472 Z m 10.593 12.736 h 0.025 a 0.976 0.976 0 1 1 -0.025 0 Z m -8.97 0 h 0.024 a 0.976 0.976 0 1 1 -0.024 0 Z",url:"/shops",group_name:"generally_menu",active:!1,permission_keys:v.map((function(e){return e.value}))},{id:5,title:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b",image:"M 3.555 1.348 a 8 8 0 1 1 8.89 13.304 a 8 8 0 0 1 -8.89 -13.304 Z m 3.203 4.683 a 0.727 0.727 0 0 1 0.515 -0.213 h 2.909 a 0.727 0.727 0 1 0 0 -1.454 H 8.727 v -0.728 a 0.727 0.727 0 1 0 -1.454 0 v 0.728 a 2.182 2.182 0 1 0 0 4.363 h 1.454 a 0.727 0.727 0 1 1 0 1.455 H 5.818 a 0.727 0.727 0 0 0 0 1.454 h 1.455 v 0.728 a 0.727 0.727 0 0 0 1.454 0 v -0.728 a 2.182 2.182 0 0 0 0 -4.363 H 7.273 a 0.727 0.727 0 0 1 -0.515 -1.242 Z",url:"/payments",group_name:"generally_menu",active:!1,permission_keys:g.map((function(e){return e.value}))},{id:6,title:"\u0421\u043a\u043b\u0430\u0434",image:"M5.5 0a1 1 0 00-1 1v5a1 1 0 001 1h5a1 1 0 001-1V1a1 1 0 00-1-1h-5zm1.2 1a.2.2 0 00-.2.2v1c0 .11.09.2.2.2h2.6a.2.2 0 00.2-.2v-1a.2.2 0 00-.2-.2H6.7zM1 9a1 1 0 00-1 1v5a1 1 0 001 1h5a1 1 0 001-1v-5a1 1 0 00-1-1H1zm1.2 1a.2.2 0 00-.2.2v1c0 .11.09.2.2.2h2.6a.2.2 0 00.2-.2v-1a.2.2 0 00-.2-.2H2.2zM9 10a1 1 0 011-1h5a1 1 0 011 1v5a1 1 0 01-1 1h-5a1 1 0 01-1-1v-5zm2 .2c0-.11.09-.2.2-.2h2.6c.11 0 .2.09.2.2v1a.2.2 0 01-.2.2h-2.6a.2.2 0 01-.2-.2v-1z",url:"/wherehouse",group_name:"generally_menu",active:!1,permission_keys:x.map((function(e){return e.value}))},{id:7,title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",image:"M14.4 6.4c0 1.323-1.077 2.4-2.4 2.4a2.403 2.403 0 01-2.4-2.4C9.6 5.077 10.677 4 12 4s2.4 1.077 2.4 2.4zM8.8 4c0 1.765-1.435 3.2-3.2 3.2A3.203 3.203 0 012.4 4C2.4 2.235 3.835.8 5.6.8 7.365.8 8.8 2.235 8.8 4zM12 9.6c-.897 0-1.753.3-2.448.837A5.583 5.583 0 005.6 8.8 5.607 5.607 0 000 14.4a.8.8 0 00.8.8h9.6a.8.8 0 00.8-.8h4a.8.8 0 00.8-.8c0-2.206-1.794-4-4-4z",url:"/clients",group_name:"generally_menu",active:!1,permission_keys:y.map((function(e){return e.value}))},{id:8,title:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430",image:"M12.184.705a.889.889 0 00-1.311.06L6.879 5.556 3.953 4.094a.889.889 0 00-1.109.262L.178 7.91A.889.889 0 101.6 8.978l2.222-2.962 2.892 1.446a.889.889 0 001.08-.226l3.821-4.586 2.868 2.867A.889.889 0 0015.74 4.26L12.184.705zm-.678 5.074a.889.889 0 01.678.26l3.556 3.555c.166.166.26.392.26.628v4.445a.889.889 0 01-.889.889H.89a.889.889 0 01-.74-1.382L3.705 8.84a.889.889 0 011.137-.302l2.913 1.457L10.86 6.11a.889.889 0 01.645-.332z",url:"analytics",group_name:"report_menu",active:!1,permission_keys:E.map((function(e){return e.value}))},{id:9,title:"\u041e\u0442\u0447\u0435\u0442\u044b",image:"M0 2a2 2 0 012-2h2v5H0V2zm0 5v7a2 2 0 002 2h2V7H0zm6 0v9h8a2 2 0 002-2V7H6zm10-2V2a2 2 0 00-2-2H6v5h10z",url:"/reports",group_name:"report_menu",active:!1,permission_keys:N.map((function(e){return e.value}))},{id:10,title:"\u0417\u0432\u043e\u043d\u043a\u0438",image:"M1.882 0h3.765L7.53 4.706 5.176 6.118a10.353 10.353 0 004.706 4.705l1.412-2.352L16 10.353v3.765A1.882 1.882 0 0114.118 16 15.059 15.059 0 010 1.882 1.882 1.882 0 011.882 0z",url:"/telephony",group_name:"report_menu",active:!1,permission_keys:["report_call"]},{id:11,title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",image:"M15.456 6.04l-1.512-.504.712-1.424a.8.8 0 00-.152-.912L12.8 1.496a.8.8 0 00-.92-.152l-1.424.712L9.952.544A.8.8 0 009.2 0H6.8a.8.8 0 00-.76.544l-.504 1.512-1.424-.712a.8.8 0 00-.912.152L1.496 3.2a.8.8 0 00-.152.92l.712 1.424-1.512.504A.8.8 0 000 6.8v2.4a.8.8 0 00.544.76l1.512.504-.712 1.424a.8.8 0 00.152.912L3.2 14.504a.8.8 0 00.92.152l1.424-.712.504 1.512a.8.8 0 00.76.544h2.4a.8.8 0 00.76-.544l.504-1.512 1.424.712a.8.8 0 00.904-.152l1.704-1.704a.8.8 0 00.152-.92l-.712-1.424 1.512-.504A.8.8 0 0016 9.2V6.8a.8.8 0 00-.544-.76zM8 11a3 3 0 100-6 3 3 0 000 6z",url:"/settings",group_name:"setting_menu",active:!1,permission_keys:w.map((function(e){return e.value}))}],settingMenu:[{id:1,title:"\u041e\u0431\u0449\u0438\u0435",url:"/settings/generally",group_name:"generally_setting",active:!1,permission_key:"setting_generally"},{id:2,title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",url:"/settings/employees",group_name:"generally_setting",active:!1,permission_key:"setting_employees"},{id:3,title:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",url:"/settings/branches",group_name:"generally_setting",active:!1,permission_key:"setting_branch"},{id:4,title:"\u0421\u043a\u043b\u0430\u0434\u044b",url:"/settings/wherehouse",group_name:"generally_setting",active:!1,permission_key:"setting_warehouse"},{id:5,title:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b",url:"/settings/status",group_name:"app_setting",active:!1,permission_key:"setting_status"},{id:6,title:"\u0422\u0435\u0433\u0438",url:"/settings/tags",group_name:"app_setting",active:!1,permission_key:"setting_tags"},{id:7,title:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f",url:"/settings/alerts",group_name:"app_setting",active:!1,permission_key:"setting_alert"},{id:8,title:"\u041f\u0435\u0440\u0435\u0447\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",url:"/settings/services_pricelist",group_name:"app_setting",active:!1,permission_key:"setting_service"},{id:9,title:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438",url:"/settings/books",group_name:"app_setting",active:!1,permission_key:"setting_book"},{id:10,title:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",url:"/settings/document-templates",group_name:"app_setting",active:!1,permission_key:"setting_template"},{id:11,title:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438",url:"/settings/prices",group_name:"app_setting",active:!1,permission_key:"setting_price"},{id:12,title:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",url:"/settings/marketing",group_name:"app_setting",active:!1,permission_key:"setting_marketing"}],payments:[],employees:[],user:JSON.parse(sessionStorage.getItem("user"))||{},status:[],status_group:[],order_type:[],equipment:[],discount_margin:[],roles:[],ad_campaign:[],generally_info:{},branches:[],cashboxes:[],payrules:[],payrolls:[],group_dict_service:[],dict_service:[],service_prices:[],counters:[],dictMalfunction:[],count_malfunction:0,dictPackagelist:[],count_packagelist:0,item_payments:[],count_item_payments:0,current_branch:{},token:sessionStorage.getItem("1xsndt")||"",login_status:!1,error_message:"",url_server:""},F={statusMenuVisible:{},statusSetCustomFilter:!1,stausListFilter:!1,typeListFilter:!1,managerListFilter:!1,engineerListFilter:!1,groupListFilter:!1,brandListFilter:!1,subtypeListFilter:!1,clientListFilter:!1,statusCreateNewFilter:!1,statusCreateNewRole:!1,statusEmployeeEditor:!1,employeeEditorRoleOptions:!1,statusOrderEditor:!1,statusCreateNewClient:!1,statusAdCampaignClient:!1,checkedOrderClient:!1,statusBranchEditor:!1,statusChooseIcon:!1,statusEquipmentEditor:!1,statusElementEditor:!1,statusCashboxEditor:!1,statusCashboxEmployeeEditor:!1,statusPaymentsEditor:!1,statusPaymentsCard:!1,statusStatusList:!1,statusSalaryEditor:!1,statusPriceEditor:!1,statusGroupServiceEditor:!1,statusServiceEditor:!1,statusOperationEditor:!1,statusPayrollEditor:!1,statusCellEditor:!1,statusWarehouseEditor:!1,statusWarehouseEmployeeEditor:!1,statusWarehouseCategoryEditor:!1,statusPartEditor:!1,statusOrderPartEditor:!1,statusOrderSticker:!1,statusOrderLoader:!1,checkOrderSticker:"true"===localStorage.getItem("checkOrderSticker"),statusNotTemplateEditor:!1,statusNotEventEditor:!1,inputClientNameChecked:!0,inputClientPhoneChecked:[!0],inputClientDiscServChecked:!0,inputClientDiscMatChecked:!0,inputClientDiscGoodChecked:!0,inputRoleTitleChecked:!0,inputEmployeeNameChecked:!0,inputEmployeeEmailChecked:!0,inputEmployeeLoginChecked:!0,inputEmployeePasswordChecked:!0,inputEmployeeRoleChecked:!0,inputMalfunctionChecked:[!0],checkedOrderKindofGood:[!0],checkedOrderBrand:[!0],checkedOrderSubtype:[!0],inputMaindataNameChecked:!0,inputBranchNameChecked:!0,inputBranchPrefixChecked:!0,inputBranchPrefixDocChecked:!0,inputBookTitleChecked:!0,inputCashboxTitleChecked:!0,inputPaymentDescChecked:!0,inputPaymentCashflowChecked:!0,inputPaymentCashboxChecked:!0,inputPaymentEmployeeChecked:!0,inputPaymentSumChecked:!0,inputPriceTitleChecked:!0,inputDictServiceChecked:!0,inputServiceTitleChecked:!0,inputServiceCategoryIdChacked:!0,inputServicePriceChacked:!0,inputOperationEngineerChacked:!0,inputOperationTitleChacked:!0,inputPayrollDescChecked:!0,inputPayrollEmployeeChecked:!0,inputPayrollSumChecked:!0,inputSingleMalfunctionChecked:!0,inputWarehouseTitleChecked:!0,inputWCategoryTitleChecked:!0,inputWPartTitleChecked:!0,inputOrderPartTitleChacked:!0,inputOrderPartEngineerChecked:!0,inputNotTempTitleChecked:!0,inputNotTempTempleChecked:!0,inputNotEventEventChecked:!0,inputNotEventTemplateChecked:!0,inputFilterTitleChecked:!0,errorSameMail:!1,errorSameLogin:!1},A={clientFilter:{page:0,name:"",phone:"7"},search_word:"",badges:[],customFilters:[],title:"",general:!1,sort:"desc",field_sort:"id",page:0,engineer_id:null,overdue:null,status_id:null,status_overdue:null,urgent:null,order_type_id:null,manager_id:null,created_at:null,kindof_good:null,brand:null,subtype:null,client_id:null,search:"",temp_statuses:[],temp_order_types:[],temp_managers:[],temp_engineers:[],temp_created_at:null,temp_kindof_good_id:null,temp_brand:null,temp_subtype:null,temp_client:{},active_badge:0,active_filter:0},D={title_create:"",edit:0,earnings_visibility:!1,leads_visibility:!1,orders_visibility:!1,list_permissions:[],visible_statuses:[],settable_statuses:[],settable_discount_margin:[]},P={tabs:1,edit:0,showDeleted:!1,role_title:"",first_name:"",last_name:"",email:"",notes:"",phone:"",login:"",password:"",role_id:0,permissions:[],inn:"",doc_name:"",post:"",deleted:!1},R={edit:0,tabs:1,created_at:0,done_at:0,closed_at:0,assigned_at:0,duration:0,estimated_done_at:parseInt(Date.now()/1e3)+345600,scheduled_for:0,warranty_date:0,status_deadline:0,ad_campaign_id:1,branch_id:0,status:{},client:{},order_type_id:1,closed_by_id:0,created_by_id:0,manager_id:0,engineer_id:0,kindof_good:{},brand:{},subtype:{},model:{},operations:[],parts:[],attachments:[],payments:[],id_label:"",prefix:"",serial:"",malfunction:"",packagelist:"",appearance:"",engineer_notes:"",manager_notes:"",resume:"",cell:"",estimated_cost:0,missed_payments:0,discount_sum:0,payed:0,price:0,remaining:0,remaining_status:0,remaining_warranty:0,overdue:!1,status_overdue:!1,urgent:!1,warranty_measures:!1,equipments:[{kindof_good:{},brand:{},subtype:{},model:{},malfunction:"",packagelist:"",appearance:"",urgent:!1}]},B={clients:[],juridical:!1,supplier:!1,conflicted:!1,should_send_email:!1,deleted:!1,name:"",name_doc:"",email:"",address:"",phone:[{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}],ad_campaign_id:1,discount_code:"",discount_goods:0,discount_goods_margin_id:1,discount_materials:0,discount_materials_margin_id:1,discount_services:0,discount_service_margin_id:0,notes:"",tags:[],ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",discount_good_type:!1,discount_materials_type:!1,discount_service_type:!1,tabs:0,phone_titles:["\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439","\u0420\u0430\u0431\u043e\u0447\u0438\u0439","\u0414\u043e\u043c\u0430\u0448\u043d\u0438\u0439"],statusPhoneList:[!1],statusAddTitle:[!1],page:0,filter_name:"",filter_phone:""},I={name:"",address:"",email:"",ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",description:"",phone:"",logo:""},L="M4 10v20c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-20h-22zM10 28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14z M26.5 4h-6.5v-2.5c0-0.825-0.675-1.5-1.5-1.5h-7c-0.825 0-1.5 0.675-1.5 1.5v2.5h-6.5c-0.825 0-1.5 0.675-1.5 1.5v2.5h26v-2.5c0-0.825-0.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z",M="M2.93 17.070c-1.884-1.821-3.053-4.37-3.053-7.193 0-5.523 4.477-10 10-10 2.823 0 5.372 1.169 7.19 3.050l0.003 0.003c1.737 1.796 2.807 4.247 2.807 6.947 0 5.523-4.477 10-10 10-2.7 0-5.151-1.070-6.95-2.81l0.003 0.003zM11.4 10l2.83-2.83-1.41-1.41-2.82 2.83-2.83-2.83-1.41 1.41 2.83 2.83-2.83 2.83 1.41 1.41 2.83-2.83 2.83 2.83 1.41-1.41-2.83-2.83z",V="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z",G="M16 2.899l13.409 26.726h-26.819l13.409-26.726zM16 0c-0.69 0-1.379 0.465-1.903 1.395l-13.659 27.222c-1.046 1.86-0.156 3.383 1.978 3.383h27.166c2.134 0 3.025-1.522 1.978-3.383h0l-13.659-27.222c-0.523-0.93-1.213-1.395-1.903-1.395v0z M18 26c0 1.105-0.895 2-2 2s-2-0.895-2-2c0-1.105 0.895-2 2-2s2 0.895 2 2z M16 22c-1.105 0-2-0.895-2-2v-6c0-1.105 0.895-2 2-2s2 0.895 2 2v6c0 1.105-0.895 2-2 2z",q="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM20.586 23.414l-6.586-6.586v-8.828h4v7.172l5.414 5.414-2.829 2.829z",H="M0 2v28h32v-28h-32zM12 20v-6h8v6h-8zM20 22v6h-8v-6h8zM20 6v6h-8v-6h8zM10 6v6h-8v-6h8zM2 14h8v6h-8v-6zM22 14h8v6h-8v-6zM22 12v-6h8v6h-8zM2 22h8v6h-8v-6zM22 28v-6h8v6h-8z",W="M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z",U="M11.086 22.086l2.829 2.829 8.914-8.914-8.914-8.914-2.828 2.828 6.086 6.086z",z="M20.914 9.914l-2.829-2.829-8.914 8.914 8.914 8.914 2.828-2.828-6.086-6.086z",Y="M9.914 11.086l-2.829 2.829 8.914 8.914 8.914-8.914-2.828-2.828-6.086 6.086z",K={name:"",address:"",phone:"",color:"grey",icon:V,orders_type_id:1,orders_type_strategy:"last",orders_prefix:"OTS",documents_prefix:"A",employees:[],deleted:!1,schedule:[{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:1},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:2},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:3},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:4},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:5},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:6},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:7}],edit:0,showDeleted:!1},Q={equipment_types:[],equipment_type_count:0,equipment_brands:[],equipment_brand_count:0,equipment_subtypes:[],equipment_subtype_count:0,equipment_models:[],equipment_models_count:0,tabs:0,equipment_type:{},equipment_brand:{},equipment_subtype:{},equipment_model:{},title:"",icon:"",url:"",parent_id:0,branches:[],deleted:!1,img:"",direction:0,type:0,edit:0,choose_list:[],page_malfunction:0,selected_malfunction:[],page_packagelist:0,selected_packagelist:[],page_item_payments:0,selected_item_payments:[],filter_type:"",filter_brand:"",filter_subtype:"",filter_model:"",page_type:1,page_brand:1,page_subtype:1,page_model:1,showDeleted:!1,list_for_join:[]},J={tabs:0,edit:0,tabs_editor:0,title:"",balance:0,type:0,isGlobal:!1,isVirtual:!1,deleted:!1,permissions:C,employees:{},branch_id:0,permissions_employee:0,current_cashbox:{}},X={edit:0,sum:0,title:"",cashflow_category:"",description:"",deposit:0,income:0,outcome:0,direction:0,can_print_fiscal:!1,deleted:!1,is_fiscal:!1,created_at:0,custom_created_at:0,tags:[],relation_id:null,cashbox_id:0,client_id:0,employee_id:0,order_id:0,target_cashbox_id:0,cashbox:{},client:{},employee:{},order:{},filter_created_at:[Math.round(Date.now()/1e3-Date.now()/1e3%86400-10800),Math.round(Date.now()/1e3)],filter_tags:[],current_type:0,context:{}},Z={edit:0,title:"",type_rule:4,order_type:1,method:0,coefficient:1,count_coeff:[{cost:0,coef:0}],fix_salary:0,deleted:!1,employee_id:0,check_status:0,list_type_rule:[{id:1,title:"\u0417\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:2,title:"\u0417\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:3,title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0443 \u0437\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:4,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u044b/\u0443\u0441\u043b\u0443\u0433\u0438"},{id:5,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e \u0437\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"},{id:6,title:"\u0417\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{id:7,title:"\u0417\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438"},{id:8,title:"\u0417\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u043c\u0435\u0441\u044f\u0446\u044b"}],statuses:[{id:4,title:"\u0413\u043e\u0442\u043e\u0432"},{id:6,title:"\u0417\u0430\u043a\u0440\u044b\u0442"}]},$={edit:0,margin:0,title:"",margin_type:1,deleted:!1,list_type_margin:[{id:2,title:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b"},{id:1,title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}]},ee={edit:0,group_edit:0,group_title:"",group_deleted:!1,title:"",price:0,cost:0,warranty:0,warranty_value:2592e3,code:"",earnings_percent:0,earnings_summ:0,deleted:!1,category_id:0,seted_categiry:null,fields:[{id:1,title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",field:"title"},{id:2,title:"\u0413\u0430\u0440\u0430\u043d\u0438\u0442\u0438\u044f",field:"werranty"},{id:3,title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",field:"cost"},{id:4,title:"\u0426\u0435\u043d\u0430",field:"price"},{id:5,title:"\u041a\u043e\u0434",field:"code"}],chosed_fields:Array(10).fill().map((function(e,t){return t+6})).concat([1,4])},te={edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",percent:!0,discount:0,warranty:!1,warranty_period:0,created_at:0,order_id:0,dict_id:0,warranty_value:2592e3},ne={edit:0,description:"",income:0,outcome:0,direction:0,deleted:!1,reimburse:!1,created_at:null,custom_created_at:null,relation_type:0,relation_id:0,employee_id:0,order_id:null,setted_employee:0,filter_created_at:[Math.round(Date.now()/1e3-Date.now()/1e3%86400-10800),Math.round(Date.now()/1e3)],month_balance:0},re={warehouses:[],warehouses_categories:[],tabs:0,edit:0,title:"",description:"",deleted:!1,isGlobal:!1,img_url:"",permissions:S,employees:{},branch:{},categories:[],img:"",branch_id:0,permissions_employee:0,title_category:"",parent_category_id:0,category_deleted:!1,current_category:{},current_parent_category:{},showDeleted:!1},ie=[{id:1,title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",field:"title"},{id:2,title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",field:"description"},{id:3,title:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430",field:"marking"},{id:4,title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",field:"article"},{id:5,title:"\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434",field:"barcode"},{id:6,title:"\u041a\u043e\u0434",field:"code"},{id:7,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",field:"warehouse_category"},{id:8,title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f",field:"doc_url"}],ce={parts:[],count_parts:0,edit:0,title:"",description:"",marking:"",article:"",barcode:"",code:"",image_url:"",doc_url:"",specifications:[],deleted:!1,warehouse_category_id:0,warehouse_category:{},img:"",doc:"",page:0,showDeleted:!1,choosed_headers:JSON.parse(localStorage.getItem("choosed_headers"))||ie.map((function(e){return e.id}))},ae={edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",deleted:!1,warranty_period:0,created_at:0,order_id:0,warranty_value:2592e3,percent:!0,discount:0},se={templates:[],edit:0,title:"",template:"",deleted:!1,showDeleted:!1},oe={events:[],tabs:0,edit:0,event:"",target_audience:0,notification_type:1,statuses:[],notification_template_id:0,template_title:"",template:"",deleted:!1,showDeleted:!1,filter_target_audience:0},le=Object(p.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(j.a)(Object(j.a)({},e),{},{token:t.token});case"LOGUOT":return Object(j.a)(Object(j.a)({},e),{},{token:"",login_status:!1});case"ADD_MENU_ROWS":return Object(j.a)(Object(j.a)({},e),{},{menuRows:t.rows});case"ADD_STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"ADD_STATUS_GROUP":return Object(j.a)(Object(j.a)({},e),{},{status_group:t.status_group});case"ADD_ORDERS_SHOW":return Object(j.a)(Object(j.a)({},e),{},{ordersShow:t.ordersShow,count:t.count});case"ADD_EMPLOYEES":return Object(j.a)(Object(j.a)({},e),{},{employees:t.employees});case"ADD_USER":return Object(j.a)(Object(j.a)({},e),{},{user:t.user,login_status:!0});case"ADD_BADGES":return Object(j.a)(Object(j.a)({},e),{},{badges:t.badges});case"ADD_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{equipment:t.equipment});case"CHANGE_STATUS_MENU_ROW":return Object(j.a)(Object(j.a)({},e),{},{menuRows:e.menuRows.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{active:e.id===t.id})}))});case"ADD_SETTING_MENU":return Object(j.a)(Object(j.a)({},e),{},{settingMenu:t.rows.sort((function(e,t){return e.id-t.id}))});case"CHANGE_STATUS_SETTING_ROW":return Object(j.a)(Object(j.a)({},e),{},{settingMenu:e.settingMenu.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{active:e.id===t.id})}))});case"ADD_ROLES":return Object(j.a)(Object(j.a)({},e),{},{roles:t.roles});case"ADD_AD_CAMPAIGN":return Object(j.a)(Object(j.a)({},e),{},{ad_campaign:t.ad_campaign});case"ADD_DATA":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.data));case"ACTIVE_CASHBOX":return Object(j.a)(Object(j.a)({},e),{},{cashboxes:e.cashboxes.map((function(e){return e.active=e.id===t.id,e}))});default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_VISIBLE_STATE":return Object(j.a)({},Object.assign(e,t.data));case"INIT_STATUS_MENU_VISIBLE":return Object(j.a)(Object(j.a)({},e),{},{statusMenuVisible:t.data});case"CANGE_STATUS_MENU_VISIBLE":return Object(j.a)(Object(j.a)({},e),{},{statusMenuVisible:Object(j.a)(Object(j.a)({},e.statusMenuVisible),{},Object(b.a)({},t.id_order,!e.statusMenuVisible[t.id_order]))});case"EDIT_ROLE":return Object(j.a)(Object(j.a)({},e),{},{statusCreateNewRole:!e.statusCreateNewRole});case"CHANGE_EMPLOYEE_EDITOR_ROLE_OPTIONS":return Object(j.a)(Object(j.a)({},e),{},{employeeEditorRoleOptions:!e.employeeEditorRoleOptions});case"SET_ROLE_EMPLOYEE_EDITOR":return Object(j.a)(Object(j.a)({},e),{},{employeeEditorRoleOptions:!e.employeeEditorRoleOptions,inputEmployeeRoleChecked:!0});case"CHANGE_STATUS_AD_CAMPAIGN_CLIENT":case"SET_AD_CANMPAIGN_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{statusAdCampaignClient:!e.statusAdCampaignClient});case"SET_VISIBLE_FLAG":return"change"===t.value?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,!e[t.field])):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"SET_VISIBLE_LIST_FLAG":var n=e[t.field];return"change"===t.value?(n[t.idx]=!n[t.idx],Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n))):(n[t.idx]=t.value,Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n)));case"DELETE_FLAG":var r=e[t.field];return r.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,r));case"ADD_FLAG":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat([!0])));case"EDIT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{statusCreateNewClient:!0});case"CHANGE_EMPLOYEE_EDITOR_FORM":return"email"===t.field?Object(j.a)(Object(j.a)({},e),{},{errorSameMail:!1}):"login"===t.field?Object(j.a)(Object(j.a)({},e),{},{errorSameLogin:!1}):e;case"ADD_ANOTHER_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{inputMalfunctionChecked:e.inputMalfunctionChecked.concat([!0]),checkedOrderKindofGood:e.checkedOrderKindofGood.concat([!0]),checkedOrderBrand:e.checkedOrderBrand.concat([!0]),checkedOrderSubtype:e.checkedOrderSubtype.concat([!0])});case"DELETE_DEVICE":var i=e.inputMalfunctionChecked;i.splice(t.idx,1);var c=e.checkedOrderKindofGood;c.splice(t.idx,1);var a=e.checkedOrderBrand;a.splice(t.idx,1);var s=e.checkedOrderSubtype;return s.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{inputMalfunctionChecked:i,checkedOrderKindofGood:c,checkedOrderBrand:a,checkedOrderSubtype:s});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FILTER_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_FILTER_STATE":return Object(j.a)({},Object.assign(e,t.data));case"SELECTED_FILTER":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));case"RESET_FILTER":return Object(j.a)(Object(j.a)({},e),{},{page:0,engineer_id:[],overdue:null,status_id:[],status_overdue:null,urgent:null,order_type_id:null,manager_id:null,created_at:null,kindof_good:null,brand:null,subtype:null,client_id:null,active_badge:0,active_filter:0});case"RESET_TEMP_FILTER":return Object(j.a)(Object(j.a)({},e),{},{temp_statuses:[],temp_order_types:[],temp_managers:[],temp_engineers:[],temp_created_at:null,temp_kindof_good_id:null,temp_brand:null,temp_subtype:null,temp_client:{}});case"RESET_DATA_FILTER":return Object(j.a)(Object(j.a)({},e),{},{title:"",general:!1});case"CHANGE_GROUP_MAINFILTER":return Object(j.a)(Object(j.a)({},e),{},{tempFilter:Object(j.a)(Object(j.a)({},e.tempFilter),{},{kindof_good:t.word})});case"CHANGE_BRAND_MAINFILTER":return Object(j.a)(Object(j.a)({},e),{},{tempFilter:Object(j.a)(Object(j.a)({},e.tempFilter),{},{brand:t.word})});case"CHANGE_SUBTYPE_MAINFILTER":return Object(j.a)(Object(j.a)({},e),{},{tempFilter:Object(j.a)(Object(j.a)({},e.tempFilter),{},{subtype:t.word})});case"CHANGE_CLIENT_MAINFILTER":return Object(j.a)(Object(j.a)({},e),{},{tempFilter:Object(j.a)(Object(j.a)({},e.tempFilter),{},{client_name:t.word})});case"CHANGE_NAME_CLIENTFILTER":return Object(j.a)(Object(j.a)({},e),{},{clientFilter:Object(j.a)(Object(j.a)({},e.clientFilter),{},{name:t.word,phone:""})});case"CHANGE_PHONE_CLIENTFILTER":return Object(j.a)(Object(j.a)({},e),{},{clientFilter:Object(j.a)(Object(j.a)({},e.clientFilter),{},{phone:t.word.replace(/[^0-9]/g,""),name:""})});case"CHANGE_CREATE_AT_MAINFILTER":return Object(j.a)(Object(j.a)({},e),{},{tempFilter:Object(j.a)(Object(j.a)({},e.tempFilter),{},{created_at:t.range})});default:return e}},role:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TITLE_CREATE_ROLE":return Object(j.a)(Object(j.a)({},e),{},{title_create:t.title});case"CHANGE_PERMISSION":return t.value.every((function(t){return e.list_permissions.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{list_permissions:e.list_permissions.filter((function(e){return!t.value.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{list_permissions:e.list_permissions.concat(t.value)});case"CHANGE_EARNINGS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{earnings_visibility:t.bool});case"CHANGE_LEADS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{leads_visibility:t.bool});case"CHANGE_ORDERS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{orders_visibility:t.bool});case"CHANGE_VISIBLE_STATUSES":return t.id.every((function(t){return e.visible_statuses.includes(t)}))?(console.log("true"),Object(j.a)(Object(j.a)({},e),{},{visible_statuses:e.visible_statuses.filter((function(e){return!t.id.includes(e)}))})):Object(j.a)(Object(j.a)({},e),{},{visible_statuses:e.visible_statuses.concat(t.id.filter((function(t){return!e.visible_statuses.includes(t)})))});case"CHANGE_SETTABLE_STATUSES":return t.id.every((function(t){return e.settable_statuses.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{settable_statuses:e.settable_statuses.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{settable_statuses:e.settable_statuses.concat(t.id.filter((function(t){return!e.settable_statuses.includes(t)})))});case"CHANGE_SETTABLE_MARGIN":return t.id.every((function(t){return e.settable_discount_margin.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{settable_discount_margin:e.settable_discount_margin.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{settable_discount_margin:e.settable_discount_margin.concat(t.id.filter((function(t){return!e.settable_discount_margin.includes(t)})))});case"EDIT_ROLE":return Object(j.a)(Object(j.a)({},e),{},{title_create:t.role.title,edit:t.role.id,earnings_visibility:t.role.earnings_visibility,leads_visibility:t.role.leads_visibility,orders_visibility:t.role.orders_visibility,list_permissions:t.role.permissions,visible_statuses:t.role.visible_statuses,settable_statuses:t.role.settable_statuses,settable_discount_margin:t.role.settable_discount_margin});case"SET_VISIBLE_FLAG":return"statusCreateNewRole"===t.field?Object(j.a)(Object(j.a)({},e),{},{title_create:"",edit:0,earnings_visibility:!1,leads_visibility:!1,orders_visibility:!1,list_permissions:[],visible_statuses:[],settable_statuses:[],settable_discount_margin:[]}):e;default:return e}},employee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_EMPLOYEE_TAB":return Object(j.a)(Object(j.a)({},e),{},{tabs:t.tab});case"CHANGE_EMPLOYEE_EDITOR_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHOOSE_EMPLOYEE_SELECTED":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));case"SET_ROLE_EMPLOYEE_EDITOR":return Object(j.a)(Object(j.a)({},e),{},{role_id:t.role});case"CHANGE_SHOW_DELETED":return Object(j.a)(Object(j.a)({},e),{},{showDeleted:!e.showDeleted});case"EDIT_EMPLOYEE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.employee.id,first_name:t.employee.first_name||"",last_name:t.employee.last_name||"",email:t.employee.email||"",notes:t.employee.notes||"",phone:t.employee.phone||"",login:t.employee.login||"",role_id:t.employee.role.id,role_title:t.employee.role.title||"",permissions:t.employee.permissions||[],inn:t.employee.inn||"",doc_name:t.employee.doc_name||"",post:t.employee.post||"",deleted:t.employee.deleted});case"RESET_EMPLOYEE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,first_name:"",last_name:"",email:"",notes:"",phone:"",login:"",password:"",role_title:"",role_id:0,permissions:[],inn:"",doc_name:"",post:"",deleted:!1});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_EQUIPMENT":var n=e.equipments;return n[t.idx][t.field]={},Object(j.a)(Object(j.a)({},e),{},{equipments:n});case"SET_ORDER_EQUIPMENT":var r=e.equipments;return r[t.idx][t.field]={id:t.data.id,icon:t.data.icon,title:t.data.title,url:t.data.url},Object(j.a)(Object(j.a)({},e),{},{equipments:r});case"CHANGE_ORDER_FORM":var i=e.equipments;return i[t.idx][t.field]=t.value,Object(j.a)(Object(j.a)({},e),{},{equipments:i});case"ADD_ANOTHER_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{equipments:e.equipments.concat([{kindof_good:{},brand:{},subtype:{},model:{},malfunction:"",packagelist:"",appearance:"",urgent:!1}])});case"DELETE_DEVICE":var c=e.equipments;return c.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{equipments:c});case"CHANGE_ORDER_FORM_S":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"RESET_ORDER":return Object(j.a)(Object(j.a)({},e),{},{edit:0,tabs:1,created_at:0,done_at:0,closed_at:0,assigned_at:0,duration:0,estimated_done_at:parseInt(Date.now()/1e3)+345600,scheduled_for:0,warranty_date:0,status_deadline:0,ad_campaign_id:1,branch_id:0,status_id:0,client:{},order_type_id:1,closed_by_id:0,created_by_id:0,manager_id:0,engineer_id:0,kindof_good:{},brand:{},subtype:{},model:{},operations:[],parts:[],attachments:[],payments:[],id_label:"",prefix:"",serial:"",malfunction:"",packagelist:"",appearance:"",engineer_notes:"",manager_notes:"",resume:"",cell:"",estimated_cost:0,missed_payments:0,discount_sum:0,payed:0,price:0,remaining:0,remaining_status:0,remaining_warranty:0,overdue:!1,status_overdue:!1,urgent:!1,warranty_measures:!1,equipments:[{kindof_good:{},brand:{},subtype:{},model:{},malfunction:"",packagelist:"",appearance:"",urgent:!1}]});case"EDIT_ORDER":return Object(j.a)(Object(j.a)({},e),{},{edit:t.order.id,created_at:t.order.created_at,done_at:t.order.done_at,closed_at:t.order.closed_at,assigned_at:t.order.assigned_at,duration:t.order.duration,estimated_done_at:t.order.estimated_done_at,scheduled_for:t.order.scheduled_for,warranty_date:t.order.warranty_date,status_deadline:t.order.status_deadline,ad_campaign_id:t.order.ad_campaign.id,branch_id:t.order.branch.id,status:t.order.status,client:t.order.client,order_type_id:t.order.order_type.id,closed_by_id:t.order.closed_by_id,created_by_id:t.order.created_by_id,manager_id:t.order.manager_id,engineer_id:t.order.engineer_id,kindof_good:t.order.kindof_good,brand:t.order.brand,subtype:t.order.subtype,model:t.order.model,operations:t.order.operations,parts:t.order.parts,attachments:t.order.attachments,payments:t.order.payments,id_label:t.order.id_label,prefix:t.order.prefix,serial:t.order.serial,malfunction:t.order.malfunction,packagelist:t.order.packagelist,appearance:t.order.appearance,engineer_notes:t.order.engineer_notes,manager_notes:t.order.manager_notes,resume:t.order.resume,cell:t.order.cell,estimated_cost:t.order.estimated_cost,missed_payments:t.order.missed_payments,discount_sum:t.order.discount_sum,payed:t.order.payed,price:t.order.price,remaining:t.order.remaining,remaining_status:t.order.remaining_status,remaining_warranty:t.order.remaining_warranty,overdue:t.order.overdue,status_overdue:t.order.status_overdue,urgent:t.order.urgent,warranty_measures:t.order.warranty_measures});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CLIENT_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_CLIENT_STATE":return Object(j.a)({},Object.assign(e,t.data));case"SET_CLIENT_CHECKBOX":return"change"===t.value?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,!e[t.field])):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_CLIENT_EDITOR_PHONE":var n=e.phone;return n[t.idx].number=t.value,Object(j.a)(Object(j.a)({},e),{},{phone:n});case"ADD_PHONE_COUNTER":return Object(j.a)(Object(j.a)({},e),{},{phone:e.phone.concat([{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}]),statusPhoneList:e.statusPhoneList.concat([!1])});case"DELETE_COUNT_NUMBER":var r=e.phone;r.splice(t.idx,1);var i=e.statusPhoneList;return i.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{phone:r,statusPhoneList:i});case"SET_PHONE_NOTIFY":var c=e.phone;return c[t.idx].notify=!c[t.idx].notify,Object(j.a)(Object(j.a)({},e),{},{phone:c});case"SET_PHONE_TITLE":var a=e.phone;a[t.idx].title=t.title;var s=e.statusPhoneList;return s[t.idx]=!s[t.idx],Object(j.a)(Object(j.a)({},e),{},{phone:a,statusPhoneList:s});case"CHANGE_STATUS_PHONE_LIST":var o=e.statusPhoneList;o[t.idx]=!o[t.idx];var l=e.statusAddTitle;return l[t.idx]=!1,Object(j.a)(Object(j.a)({},e),{},{statusPhoneList:o,statusAddTitle:l});case"CHANGE_STATUS_ADD_TITLE":var d=e.statusAddTitle;return d[t.idx]=!d[t.idx],Object(j.a)(Object(j.a)({},e),{},{statusAddTitle:d});case"SET_AD_CANMPAIGN_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{ad_campaign_id:t.id});case"ADD_CLIENT_TAG":return Object(j.a)(Object(j.a)({},e),{},{tags:e.tags.concat([t.tag])});case"DELETE_CLIENT_TAG":var u=e.tags;return u.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{tags:u});case"RESET_DATA_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:!1,supplier:!1,conflicted:!1,should_send_email:!1,deleted:!1,name:"",name_doc:"",email:"",address:"",phone:[{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}],ad_campaign_id:1,discount_code:"",discount_goods:0,discount_goods_margin_id:1,discount_materials:0,discount_materials_margin_id:1,discount_services:0,discount_service_margin_id:0,notes:"",tags:[],ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",discount_good_type:!1,discount_materials_type:!1,discount_service_type:!1,edit:0,tabs:0,statusPhoneList:[!1],statusAddTitle:[!1]});case"CHANGE_CLIENT_TABS":return Object(j.a)(Object(j.a)({},e),{},{tabs:t.tab});case"EDIT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:t.client.juridical,supplier:t.client.supplier,conflicted:t.client.conflicted,should_send_email:t.client.should_send_email,deleted:t.client.deleted,name:t.client.name,name_doc:t.client.name_doc,email:t.client.email,address:t.client.address,phone:t.client.phone,ad_campaign_id:t.client.ad_campaign_id,discount_code:t.client.discount_code,discount_goods:t.client.discount_goods,discount_goods_margin_id:t.client.discount_goods_margin_id,discount_materials:t.client.discount_materials,discount_materials_margin_id:t.client.discount_materials_margin_id,discount_services:t.client.discount_services,discount_service_margin_id:t.client.discount_service_margin_id,notes:t.client.notes,tags:t.client.tags,ogrn:t.client.ogrn,inn:t.client.inn,kpp:t.client.kpp,juridical_address:t.client.juridical_address,director:t.client.director,bank_name:t.client.bank_name,settlement_account:t.client.settlement_account,corr_account:t.client.corr_account,bic:t.client.bic,discount_good_type:t.client.discount_good_type,discount_materials_type:t.client.discount_materials_type,discount_service_type:t.client.discount_service_type,edit:t.client.id});case"EDIT_CURRENT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:t.client.juridical,supplier:t.client.supplier,conflicted:t.client.conflicted,should_send_email:t.client.should_send_email,deleted:t.client.deleted,name:t.client.name,name_doc:t.client.name_doc,email:t.client.email,address:t.client.address,phone:t.client.phone,ad_campaign_id:t.client.ad_campaign_id,discount_code:t.client.discount_code,discount_goods:t.client.discount_goods,discount_goods_margin_id:t.client.discount_goods_margin_id,discount_materials:t.client.discount_materials,discount_materials_margin_id:t.client.discount_materials_margin_id,discount_services:t.client.discount_services,discount_service_margin_id:t.client.discount_service_margin_id,notes:t.client.notes,tags:t.client.tags,ogrn:t.client.ogrn,inn:t.client.inn,kpp:t.client.kpp,juridical_address:t.client.juridical_address,director:t.client.director,bank_name:t.client.bank_name,settlement_account:t.client.settlement_account,corr_account:t.client.corr_account,bic:t.client.bic,discount_good_type:t.client.discount_good_type,discount_materials_type:t.client.discount_materials_type,discount_service_type:t.client.discount_service_type,edit:t.client.id,tabs:1});default:return e}},maindata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MAINDATA_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"ADD_GENERALLY_INFO":return Object(j.a)(Object(j.a)({},e),{},{name:t.data.name,address:t.data.address,email:t.data.email,ogrn:t.data.ogrn,inn:t.data.inn,kpp:t.data.kpp,juridical_address:t.data.juridical_address,director:t.data.director,bank_name:t.data.bank_name,settlement_account:t.data.settlement_account,corr_account:t.data.corr_account,bic:t.data.bic,description:t.data.description,phone:t.data.phone,logo:t.data.logo});default:return e}},branch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BRANCH_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_SCHEDULE":var n=e.schedule;return n[t.idx][t.field]=t.value,Object(j.a)(Object(j.a)({},e),{},{schedule:n});case"SET_BRANCH_EMPLOYEE":return t.id.every((function(t){return e.employees.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{employees:e.employees.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{employees:e.employees.concat(t.id.filter((function(t){return!e.employees.includes(t)})))});case"RESET_BRANCH":return Object(j.a)(Object(j.a)({},e),{},{name:"",address:"",phone:"",color:"grey",icon:V,orders_type_id:1,orders_type_strategy:"last",orders_prefix:"OTS",documents_prefix:"A",employees:[],deleted:!1,schedule:[{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:1},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:2},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:3},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:4},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:5},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:6},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:7}],edit:0});case"EDIT_BRANCH":return Object(j.a)(Object(j.a)({},e),{},{name:t.branch.name,address:t.branch.address,phone:t.branch.phone,color:t.branch.color,icon:t.branch.icon,orders_type_id:t.branch.orders_type_id,orders_type_strategy:t.branch.orders_type_strategy,orders_prefix:t.branch.orders_prefix,documents_prefix:t.branch.documents_prefix,employees:t.branch.employees,deleted:t.branch.deleted,schedule:t.branch.schedule,edit:t.branch.id});default:return e}},book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BOOK_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHOOSE_EQUIPMENT_BRANCHES":return t.id.every((function(t){return e.branches.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{branches:e.branches.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{branches:e.branches.concat(t.id.filter((function(t){return!e.branches.includes(t)})))});case"EDIT_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{title:t.equipment.title,icon:t.equipment.icon,url:t.equipment.url,parent_id:t.equipment.parent_id,branches:t.equipment.branches?t.equipment.branches:[],edit:t.equipment.id,deleted:t.equipment.deleted});case"RESET_BOOK_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{title:"",icon:"",url:"",parent_id:0,branches:[],deleted:!1,img:"",edit:0,page_malfunction:0,selected_malfunction:[],page_packagelist:0,selected_packagelist:[],page_item_payments:0,selected_item_payments:[],filter_type:"",filter_brand:"",filter_subtype:"",filter_model:"",page_type:1,page_brand:1,page_subtype:1,page_model:1,showDeleted:!1,list_for_join:[]});case"CHOOSE_BOOK_SELECTED":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));default:return e}},cashbox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CASHBOX_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHOOSE_CASHBOX_SELECTED":return t.id.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.id.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.id.filter((function(n){return!e[t.field].includes(n)})))));case"RESET_CASHBOX":return Object(j.a)(Object(j.a)({},e),{},{title:"",balance:0,type:0,isGlobal:!1,isVirtual:!1,deleted:!1,permissions:C,employees:[],branch_id:0,permissions_employee:0});case"CHANGE_CASHBOX_PERMISSION":var n=e.employees;return"permissions"===t.field?n[e.permissions_employee].permissions.includes(t.value)?n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.filter((function(e){return e!==t.value})):n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.concat([t.value]):n[e.permissions_employee][[t.field]]=t.value,Object(j.a)(Object(j.a)({},e),{},{employees:n});case"EDIT_CASHBOX":return Object(j.a)(Object(j.a)({},e),{},{edit:t.cashbox.id,title:t.cashbox.title,balance:t.cashbox.balance,type:t.cashbox.type,isGlobal:t.cashbox.isGlobal,isVirtual:t.cashbox.isVirtual,deleted:t.cashbox.deleted,permissions:t.cashbox.permissions,employees:t.cashbox.employees,branch_id:t.cashbox.branch_id,permissions_employee:t.cashbox.permissions_employee});default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAYMENT_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_PAYMENT_STATE":return Object(j.a)({},Object.assign(e,t.data));case"CHOOSE_PAYMENT_SELECTED":return t.id.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.id.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.id.filter((function(n){return!e[t.field].includes(n)})))));case"ADD_PAYMENT_TAG":return Object(j.a)(Object(j.a)({},e),{},{tags:e.tags.concat([t.tag])});case"DELETE_PAYMENT_TAG":var n=e.tags;return n.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{tags:n});case"RESET_PAYMENTS":return Object(j.a)(Object(j.a)({},e),{},{edit:0,sum:0,title:"",cashflow_category:"",description:"",deposit:0,income:0,outcome:0,direction:0,can_print_fiscal:!0,deleted:!1,is_fiscal:!1,created_at:0,custom_created_at:0,tags:[],cashbox_id:0,client_id:0,employee_id:0,order_id:0,target_cashbox_id:0,context:{}});case"SET_PAYMENT":return Object(j.a)(Object(j.a)({},e),{},{edit:t.payment.id,cashflow_category:t.payment.cashflow_category,description:t.payment.description,deposit:t.payment.deposit,income:t.payment.income,outcome:t.payment.outcome,direction:t.payment.direction,can_print_fiscal:t.payment.can_print_fiscal,deleted:t.payment.deleted,is_fiscal:t.payment.is_fiscal,created_at:t.payment.created_at,custom_created_at:t.payment.custom_created_at,tags:t.payment.tags,cashbox:t.payment.cashbox,client:t.payment.client,employee:t.payment.employee,order:t.payment.order,target_cashbox_id:t.payment.target_cashbox_id});default:return e}},salaryRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SALARY_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_SALARY_COEF_FORM":var n=e.count_coeff;return n[t.idx][t.field]=parseInt(t.value),Object(j.a)(Object(j.a)({},e),{},{count_coeff:n});case"ADD_SALARY_COUNT_COEF":return Object(j.a)(Object(j.a)({},e),{},{count_coeff:e.count_coeff.concat([{cost:0,coef:0}])});case"DELETE_SALARY_COUNT_COEF":return Object(j.a)(Object(j.a)({},e),{},{count_coeff:e.count_coeff.filter((function(e,n){return n!==t.idx}))});case"EDIT_SALARY":return Object(j.a)(Object(j.a)({},e),{},{edit:t.salary_rule.id,description:t.salary_rule.description,type_rule:t.salary_rule.type_rule,order_type:t.salary_rule.order_type,method:t.salary_rule.method,coefficient:t.salary_rule.coefficient,count_coeff:t.salary_rule.count_coeff,fix_salary:t.salary_rule.fix_salary,deleted:t.salary_rule.deleted,employee_id:t.salary_rule.employee_id,check_status:t.salary_rule.check_status});case"RESET_SALARY_RULE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",type_rule:4,order_type:1,method:0,coefficient:0,count_coeff:[{cost:0,coef:0}],fix_salary:0,deleted:!1,employee_id:0,check_status:0});default:return e}},price:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PRICE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_PRICE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.price.id,margin:t.price.margin,title:t.price.title,margin_type:t.price.margin_type,deleted:t.price.deleted});case"RESET_PRICE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,margin:0,title:"",margin_type:0,deleted:!1});default:return e}},dictService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DICT_SERVICE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_GRUOP_DICT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{group_edit:t.group.id,group_title:t.group.title,group_deleted:t.group.deleted});case"EDIT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.service.id,title:t.service.title,price:t.service.price,cost:t.service.cost,warranty:t.service.warranty,code:t.service.code,earnings_percent:t.service.earnings_percent,earnings_summ:t.service.earnings_summ,deleted:t.service.deleted,category_id:t.service.category_id});case"RESET_GROPE_DICT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{group_edit:0,group_title:"",group_deleted:!1});case"RESET_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",price:0,cost:0,warranty:0,warranty_value:2592e3,code:"",earnings_percent:0,earnings_summ:0,deleted:!1,category_id:0});case"SELECTED_SERVICE":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},operation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_OPERATION_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_OPERATION":return Object(j.a)(Object(j.a)({},e),{},{edit:t.operation.id,amount:t.operation.amount,cost:t.operation.cost,discount_value:t.operation.discount_value,engineer_id:t.operation.engineer_id,price:t.operation.price,total:t.operation.total,title:t.operation.title,comment:t.operation.comment,percent:t.operation.percent,discount:t.operation.discount,warranty:t.operation.warranty,warranty_period:t.operation.warranty_period,created_at:t.operation.created_at,order_id:t.operation.order_id,dict_id:t.operation.dict_id});case"RESET_OPERATION":return Object(j.a)(Object(j.a)({},e),{},{edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",percent:!0,discount:0,warranty:!1,warranty_period:0,created_at:0,order_id:0,dict_id:0});case"SELECTED_OPERATION":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},payroll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAYROLL_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_PAYROLL":return Object(j.a)(Object(j.a)({},e),{},{edit:t.payroll.id,description:t.payroll.description,income:t.payroll.income,outcome:t.payroll.outcome,direction:t.payroll.direction,deleted:t.payroll.deleted,reimburse:t.payroll.reimburse,created_at:t.payroll.created_at,custom_created_at:t.payroll.custom_created_at,relation_type:t.payroll.relation_type,relation_id:t.payroll.relation_id,employee_id:t.payroll.employee_id,order_id:t.payroll.order_id});case"RESET_PAYROLL":return Object(j.a)(Object(j.a)({},e),{},{edit:0,description:"",income:0,outcome:0,direction:0,deleted:!1,reimburse:!1,created_at:null,custom_created_at:null,relation_type:0,relation_id:0,employee_id:0,order_id:null});case"SELECTED_PAYROLL":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));default:return e}},warehouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_WAREHOUSE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_WAREHOUSE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.warehouse.id,title:t.warehouse.title,description:t.warehouse.description,deleted:t.warehouse.deleted,isGlobal:t.warehouse.isGlobal,permissions:t.warehouse.permissions,employees:t.warehouse.employees,branch:t.warehouse.branch,categories:t.warehouse.categories,branch_id:t.warehouse.branch.id});case"EDIT_WAREHOUSE_CATEGORY":return Object(j.a)(Object(j.a)({},e),{},{edit:t.warehouse_category.id,title_category:t.warehouse_category.title,parent_category_id:t.warehouse_category.parent_category_id,category_deleted:t.warehouse_category.deleted});case"RESET_WAREHOUSE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",description:"",deleted:!1,isGlobal:!1,permissions:S,employees:{},branch:{},categories:[],branch_id:0,permissions_employee:0,title_category:"",parent_category_id:0,warehouse_id:0,category_deleted:!1});case"SELECTED_WAREHOUSE":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));case"CHANGE_WAREHOUSE_PERMISSION":var n=e.employees;return"permissions"===t.field?n[e.permissions_employee].permissions.includes(t.value)?n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.filter((function(e){return e!==t.value})):n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.concat([t.value]):n[e.permissions_employee][[t.field]]=t.value,Object(j.a)(Object(j.a)({},e),{},{employees:n});default:return e}},part:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PART_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:t.part.id,title:t.part.title,description:t.part.description,marking:t.part.marking,article:t.part.article,barcode:t.part.barcode,code:t.part.code,image_url:t.part.image_url,doc_url:t.part.doc_url,specifications:t.part.specifications,deleted:t.part.deleted,warehouse_category:t.part.warehouse_category});case"RESET_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",description:"",marking:"",article:"",barcode:"",code:"",image_url:"",doc_url:"",specifications:[],deleted:!1,img:"",doc:""});case"SELECTED_PART":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));case"CHANGE_PART_PROPERTY":var r=e.specifications;return r[t.idx][t.field]=t.value,Object(j.a)(Object(j.a)({},e),{},{specifications:r});case"ADD_PART_PROPERTY":return Object(j.a)(Object(j.a)({},e),{},{specifications:e.specifications.concat([{title:"",value:""}])});case"DELETE_PART_PROPERTY":var i=e.specifications;return i.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{specifications:e.specifications});default:return e}},orderPart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ORDER_PART_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_ORDER_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:t.order_part.id,amount:t.order_part.amount,cost:t.order_part.cost,discount_value:t.order_part.discount_value,engineer_id:t.order_part.engineer_id,price:t.order_part.price,total:t.order_part.total,title:t.order_part.title,comment:t.order_part.comment,deleted:t.order_part.deleted,warranty_period:t.order_part.warranty_period,created_at:t.order_part.created_at,order_id:t.order_part.order_id});case"RESET_ORDER_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",deleted:!1,warranty_period:0,created_at:0,order_id:0,warranty_value:2592e3,percent:!0,discount:0});case"SELECTED_ORDER_PART":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},notTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NOT_TEMPLATE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_NOT_TEMPLATE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.template.id,title:t.template.title,template:t.template.template,deleted:t.template.deleted});case"RESET_NOT_TEMPLATE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",template:"",deleted:!1});default:return e}},notEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NOT_EVENT_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_NOT_EVENT":return Object(j.a)(Object(j.a)({},e),{},{edit:t.event.id,event:t.event.event,target_audience:t.event.target_audience,notification_type:t.event.notification_type,notification_template_id:t.event.template_id,statuses:t.event.statuses,deleted:t.event.deleted});case"RESET_NOT_EVENT":return Object(j.a)(Object(j.a)({},e),{},{edit:0,event:"",target_audience:0,notification_type:1,notification_template_id:0,statuses:[],template_title:"",template:"",deleted:!1});case"SELECTED_NOT_EVENT":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}}}),de=Object(p.d)(le,Object(p.c)(Object(p.a)(h.a)));function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=de.getState();return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.data.token),Accept:"application/json"},body:JSON.stringify(e)}}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return sessionStorage.clear(),console.warn(e),{type:"LOGUOT"}}function pe(e){return{type:"CANGE_STATUS_MENU_VISIBLE",id_order:e}}function he(e){return{type:"CHANGE_NAME_CLIENTFILTER",word:e}}function be(e){return{type:"CHANGE_PERMISSION",value:e}}function je(e){return{type:"EDIT_EMPLOYEE",employee:e}}function _e(e,t){return{type:"SET_CLIENT_CHECKBOX",field:e,value:t}}function fe(e,t){return{type:"SET_VISIBLE_FLAG",field:e,value:t}}function Oe(e){return{type:"CHANGE_VISIBLE_STATE",data:e}}function ve(e,t,n){return{type:"SET_VISIBLE_LIST_FLAG",field:e,idx:t,value:n}}function ge(e,t){return{type:"RESET_EQUIPMENT",idx:e,field:t}}function xe(e,t,n){return{type:"SET_ORDER_EQUIPMENT",idx:e,field:t,data:n}}function ye(e,t,n){return{type:"CHANGE_ORDER_FORM",idx:e,field:t,value:n}}function Ee(){return{type:"ADD_ANOTHER_EQUIPMENT"}}function Ne(e){return{type:"DELETE_DEVICE",idx:e}}function we(e,t){return{type:"CHANGE_ORDER_FORM_S",field:t,value:e}}function ke(e,t){return{type:"CHANGE_BRANCH_FORM",field:e,value:t}}function Ce(e,t){return{type:"CHANGE_CASHBOX_FORM",field:t,value:e}}function Se(e,t){return{type:"CHANGE_CASHBOX_PERMISSION",value:e,field:t}}function Te(e,t){return{type:"ADD_DATA",data:e,field:t}}function Fe(e){return{type:"EDIT_CURRENT_CLIENT",client:e}}function Ae(e){return{type:"SET_PAYMENT",payment:e}}function De(e,t){return{type:"CHANGE_PRICE_FORM",field:t,value:e}}function Pe(e,t){return{type:"CHANGE_DICT_SERVICE_FORM",field:t,value:e}}function Re(e){var t=de.getState();return function(n){fetch(t.data.url_server+"/get_clients",ue({id:e})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"EDIT_CLIENT",client:e.data[0]}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Be(e){var t=de.getState();return function(n){fetch(t.data.url_server+"/get_employee",ue(e)).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_EMPLOYEES",employees:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Ie(e){var t=de.getState(),n=ue({id:e});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/get_orders",n).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Le(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_equipment_type",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_EQUIPMENT",equipment:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0438\u0437\u0434\u0435\u043b\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Me(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_discount_margin",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"discount_margin",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Ve(){var e=de.getState(),t=ue({page:e.book.page_malfunction});return function(n){fetch(e.data.url_server+"/get_malfunction",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"dictMalfunction",data:e.data}),n({type:"ADD_DATA",field:"count_malfunction",data:e.count})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043b\u043e\u0432\u0430\u0440\u0430\u044f \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Ge(){var e=de.getState(),t=["malfunction","packagelist","item_payments"],n=["dictMalfunction","dictPackagelist","item_payments"],r=ue({del_ids:e.book["selected_".concat(t[e.book.type])]});return r.method="DELETE",function(){var i=Object(m.a)(u.a.mark((function i(c){return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(e.data.url_server+"/".concat(t[e.book.type]),r).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0441\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return i.next=4,fetch(e.data.url_server+"/get_".concat(t[e.book.type]),ue()).then((function(e){return e.json()})).then((function(r){r.success?(c({type:"ADD_DATA",field:n[e.book.type],data:r.data}),c({type:"ADD_DATA",field:"count_".concat(t[e.book.type]),data:r.count})):console.warn(r.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}function qe(){var e=de.getState(),t=ue({page:e.book.page_packagelist});return function(n){fetch(e.data.url_server+"/get_packagelist",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"dictPackagelist",data:e.data}),n({type:"ADD_DATA",field:"count_packagelist",data:e.count})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043f\u0438\u0441\u043a\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function He(){var e=de.getState(),t=ue({page:e.book.page_item_payments});return function(n){fetch(e.data.url_server+"/get_item_payments",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"item_payments",data:e.data}),n({type:"ADD_DATA",field:"count_item_payments",data:e.count})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0442\u0430\u0442\u0435\u0439 \u043f\u043b\u0442\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function We(){var e=de.getState(),t=ue({category_id:e.dictService.seted_categiry});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_dict_service",t).then((function(e){return e.json()})).then((function(e){e.success?r({type:"ADD_DATA",field:"dict_service",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var Ue=n(0);var ze={changeStatusMenuRow:function(e){return{type:"CHANGE_STATUS_MENU_ROW",id:e}}},Ye=Object(s.b)((function(e){return{menuRows:e.data.menuRows,current_branch:e.data.current_branch}}),ze)((function(e){return Object(Ue.jsxs)(o.b,{className:"menuRow",to:e.row.url,style:e.menuRows.find((function(t){return t.id===e.row.id})).active?{backgroundColor:"#53585c",borderLeftColor:e.current_branch.color}:null,onClick:function(){return e.changeStatusMenuRow(e.row.id)},children:["task"===e.row.image?Object(Ue.jsx)("div",{className:"taskNumber",children:Object(Ue.jsx)("span",{className:"taskNumber1",children:"8"})}):Object(Ue.jsx)("svg",{className:"sidebarIcon",children:Object(Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:e.row.image})}),Object(Ue.jsx)("span",{className:"didebarItemsText",children:e.row.title})]})}));var Ke=function(e){var t=e.group;return Object(Ue.jsx)("div",{children:t.map((function(e){return Object(Ue.jsx)(Ye,{row:e},e.id)}))})};var Qe=function(){return Object(Ue.jsx)("div",{className:"avatar",children:Object(Ue.jsx)("img",{src:"".concat("","/data/avatars/ava.jpeg"),className:"imgAvatar",alt:"User avatar"})})},Je=n(7),Xe=function(e){return Object(Ue.jsx)("svg",{className:e.className?e.className:"icon-branch",viewBox:e.viewBox?e.viewBox:"0 0 32 32",style:{fill:e.color},children:Object(Ue.jsx)("path",{d:e.icon})})},Ze={addData:Te},$e=Object(s.b)((function(e){return{current_branch:e.data.current_branch,branches:e.data.branches,user_id:e.data.user.id}}),Ze)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"menuBranch",onClick:function(){return c(!i)},children:[Object(Ue.jsx)(Xe,{className:"smalIcon",icon:e.current_branch.icon,color:e.current_branch.color}),Object(Ue.jsx)("div",{className:"sidebarBranch",children:e.current_branch.name})]}),i?Object(Ue.jsx)("div",{className:"listOptionsBranch",children:e.branches.filter((function(t){return t.employees.includes(e.user_id)&&!t.deleted})).map((function(t){return Object(Ue.jsxs)("div",{className:"listBranch",onClick:function(){e.addData(t,"current_branch"),c(!1)},children:[Object(Ue.jsx)(Xe,{className:"smalIcon",icon:t.icon,color:t.color}),Object(Ue.jsx)("div",{className:"ml5",children:t.name})]},t.id)}))}):null]})}));var et=Object(s.b)((function(e){return{menuRows:e.data.menuRows,permission:e.data.user.role.permissions,current_branch:e.data.current_branch}}))((function(e){var t=e.menuRows.filter((function(t){return"generally_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))})),n=e.menuRows.filter((function(t){return"report_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))})),r=e.menuRows.filter((function(t){return"setting_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))}));return Object(Ue.jsxs)("div",{className:"sidebarMain",children:[Object(Ue.jsx)(Qe,{}),e.current_branch?Object(Ue.jsx)($e,{}):null,Object(Ue.jsx)("hr",{className:"hrMenu"}),t.length?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ke,{group:t},1011),Object(Ue.jsx)("hr",{className:"hrMenu"})]}):null,n.length?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Ke,{group:n},1012),Object(Ue.jsx)("hr",{className:"hrMenu"})]}):null,r.length?Object(Ue.jsx)(Ke,{group:r},1013):null]})})),tt=n(39),nt=n.n(tt);function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=de.getState();return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.data.token),Accept:"application/json"},body:JSON.stringify(e)}}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return sessionStorage.clear(),console.warn(e),{type:"LOGUOT"}}function ct(e){return{type:"CHANGE_FILTER_STATE",data:e}}function at(){return{type:"RESET_FILTER"}}var st={changeFilterState:ct,resetFilter:at},ot=Object(s.b)((function(e){return{filter:e.filter}}),st)((function(e){var t=Object(r.useState)(""),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"Header",children:[Object(Ue.jsx)("div",{className:"headerTitle",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ue.jsx)("div",{className:"imputSearch",children:Object(Ue.jsx)("form",{children:Object(Ue.jsx)("input",{className:"imputSearchForm",placeholder:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430",onChange:function(t){return function(t){c(t.target.value),i||e.changeFilterState({search:""})}(t)},onKeyPressCapture:function(t){return function(t){"Enter"===t.key&&(t.preventDefault(),e.filter.active_badge||e.resetFilter(),"Enter"===t.key&&e.changeFilterState({search:i}))}(t)},value:i})})})]})})),lt={changeFilterState:ct,resetFilter:at},dt=Object(s.b)((function(e){return{active_badge:e.filter.active_badge}}),lt)((function(e){return Object(Ue.jsxs)("div",{className:"mainFilter",style:{backgroundColor:e.badge.color,opacity:e.active_badge===e.badge.id||0===e.active_badge?1:.3},onClick:function(){e.active_badge!==e.badge.id?e.changeFilterState(Object(j.a)(Object(j.a)({},e.badge.filter),{},{active_badge:e.badge.id,active_filter:0})):e.resetFilter()},children:[Object(Ue.jsx)("div",{className:"pd5",children:Object(Ue.jsx)(Xe,{icon:e.badge.icon,className:"icon-s25",color:"white"})}),Object(Ue.jsxs)("div",{className:"filterName",children:[Object(Ue.jsxs)("div",{className:"filterName-value",children:[e.badge.count," ",1===e.badge.count?"\u0437\u0430\u043a\u0430\u0437":e.badge.count<5?"\u0437\u0430\u043a\u0430\u0437\u0430":"\u0437\u0430\u043a\u0430\u0437\u043e\u0432"]}),Object(Ue.jsxs)("div",{className:"filterName-title",children:[" ",e.badge.title]})]})]})})),ut=Object(s.b)((function(e){return{badges:e.filter.badges}}))((function(e){return Object(Ue.jsx)("div",{className:"mainFilters",children:e.badges.map((function(e){return e.count?Object(Ue.jsx)(dt,{badge:e},e.id):null}))})}));function mt(){var e=de.getState(),t=rt({sort:e.filter.sort,field_sort:e.filter.field_sort,page:e.filter.page,engineer_id:e.data.user.role.orders_visibility?e.filter.engineer_id:e.filter.engineer_id.concat([e.data.user.id]),overdue:e.filter.overdue,status_id:e.filter.status_id,urgent:e.filter.urgent,order_type_id:e.filter.order_type_id,manager_id:e.filter.manager_id,created_at:e.filter.created_at,kindof_good:e.filter.kindof_good,brand:e.filter.brand,subtype:e.filter.subtype,client_id:e.filter.client_id,search:e.filter.search});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!0});case 2:return n.next=4,fetch(e.data.url_server+"/get_orders",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ORDERS_SHOW",ordersShow:e.data,count:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!1})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function pt(e,t){var n=de.getState(),r=rt({id:t,status_id:e}),i=rt({sort:n.filter.sort,field_sort:n.filter.field_sort,page:n.filter.page,engineer_id:n.data.user.role.orders_visibility?n.filter.engineer_id:n.filter.engineer_id.concat([n.data.user.id]),overdue:n.filter.overdue,status_id:n.filter.status_id,urgent:n.filter.urgent,order_type_id:n.filter.order_type_id,manager_id:n.filter.manager_id,created_at:n.filter.created_at,kindof_good:n.filter.kindof_good,brand:n.filter.brand,subtype:n.filter.subtype,client_id:n.filter.client_id,search:n.filter.search}),c=rt({id:n.order.edit});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!0});case 2:return e.next=4,fetch(n.data.url_server+"/change_order_status",r).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return e.next=6,fetch(n.data.url_server+"/get_orders",i).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_ORDERS_SHOW",ordersShow:e.data,count:e.count}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 6:if(!n.order.edit){e.next=9;break}return e.next=9,fetch(n.data.url_server+"/get_orders",c).then((function(e){return e.json()})).then((function(e){e.success?t({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 9:return e.next=11,t({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!1});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ht(e,t){return{type:"CHANGE_BOOK_FORM",field:t,value:e}}function bt(){return{type:"RESET_BOOK_EQUIPMENT"}}function jt(e,t){return{type:"CHOOSE_BOOK_SELECTED",field:t,value:e}}function _t(){var e=de.getState(),t=rt({title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted});return function(n){fetch(e.data.url_server+"/get_equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),n({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function ft(){var e=de.getState(),t=rt({title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0440\u0435\u043d\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function Ot(){var e=de.getState(),t=rt({title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function vt(){var e=de.getState(),t=rt({title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}n(76);var gt=function(e){return Object(Ue.jsx)("div",{className:e.className,children:Object(Ue.jsxs)("div",{className:"lds-spinner",children:[Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{}),Object(Ue.jsx)("div",{})]})})},xt=Object(s.b)((function(e){return{employees:e.data.employees}}))((function(e){var t=e.data,n=t.created_by_id,r=t.created_at,i=e.employees;return Object(Ue.jsxs)("td",{children:[Object(Ue.jsx)("div",{children:function(e){if(e){var t=i.find((function(t){return t.id===e}));return"".concat(t.last_name," ").concat(t.first_name)}}(n)}),Object(Ue.jsx)("div",{className:"orderDate",children:new Date(1e3*r).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace("\u0433.,","")})]})})),yt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data,n=t.id_label,r=t.urgent;return Object(Ue.jsx)("td",{className:"orderLabel tableRow",children:Object(Ue.jsx)("span",{className:r?"fire-text":null,children:n})})})),Et=Object(s.b)((function(e){return{}}))((function(e){var t=e.data,n=t.estimated_done_at,r=t.overdue,i=t.status,c=t.remaining;return Object(Ue.jsxs)("td",{children:[Object(Ue.jsxs)("div",{className:"estimated-top",children:[Object(Ue.jsx)(Xe,{icon:q,className:"clockEstimated",color:!r&&i.group<4?"#f0ad4e":"#ebebeb"}),Object(Ue.jsx)("span",{children:function(e,t){if(t>3)return"-";var n=Math.round(e/60);if(Math.abs(n)<60)return"".concat(n,"\u043c.");var r=Math.round(e/3600);if(Math.abs(r)<24)return"".concat(r,"\u0447.");var i=Math.round(e/86400);return"".concat(i,"\u0434.")}(c,i.group)})]}),Object(Ue.jsx)("div",{className:"orderDate",children:new Date(1e3*n).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace("\u0433.,","")})]})}));var Nt={changeFilterState:ct},wt=Object(s.b)((function(e){return{filter:e.filter}}),Nt)((function(e){return Object(Ue.jsx)(Ue.Fragment,{children:Object(Ue.jsxs)("th",{className:"tableColumnHeader",style:{minWidth:"".concat(e.data.width,"px")},onClick:function(){return e.changeFilterState({field_sort:e.data.field,sort:"asc"===e.filter.sort?"desc":"asc"})},children:[e.data.title,Object(Ue.jsx)("span",{children:e.filter.field_sort===e.data.field?"asc"===e.filter.sort?"\u2193":"\u2191":null})]})})}));function kt(e,t){return{type:"CHANGE_PAYMENT_FORM",field:t,value:e}}function Ct(e){return{type:"CHANGE_PAYMENT_STATE",data:e}}function St(){return{type:"RESET_PAYMENTS"}}function Tt(){var e=de.getState(),t=rt({custom_created_at:[e.payment.filter_created_at[0],e.payment.filter_created_at[1]+86399],cashbox_id:e.cashbox.current_cashbox.id,tags:e.payment.filter_tags.length?e.payment.filter_tags:null});return function(n){fetch(e.data.url_server+"/get_payments",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"payments",data:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}var Ft={changeStatusMenuVisible:pe,changeStatus:pt,addOrders:mt,refreshDataOrder:Ie,changePaymentState:Ct,changeVisibleState:Oe,editCurrentClient:Fe},At=Object(s.b)((function(e){return{status:e.data.status,current_user_id:e.data.user.id}}),Ft)((function(e){return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("span",{children:e.groupName}),e.status.filter((function(t){return t.group===e.groupIdx+1})).map((function(t){return Object(Ue.jsx)("li",{className:"statusListRow",style:{backgroundColor:t.color},onClick:function(){return function(t){if(5===e.groupIdx&&e.order.price!==e.order.payed){var n,r=e.order.price>e.order.payed;e.changePaymentState((n={direction:r?2:1},Object(b.a)(n,r?"income":"outcome",Math.abs(e.order.missed_payments)),Object(b.a)(n,"client_id",e.order.client.id),Object(b.a)(n,"description",r?"\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label):"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label)),Object(b.a)(n,"cashflow_category",r?2:8),Object(b.a)(n,"employee_id",e.current_user_id),Object(b.a)(n,"order_id",e.order.edit||e.order.id),Object(b.a)(n,"context",{type:e.order.edit?"closed_order_editor":"closed_order",order_id:e.order.edit||e.order.id,status_id:t.id}),n)),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})}else e.order.edit?(e.changeStatus(t.id,e.order.edit),e.refreshDataOrder(e.order.edit)):(e.changeStatus(t.id,e.order.id),e.changeStatusMenuVisible(e.order.id))}(t)},children:t.name},t.id)}))]})}));var Dt={changeStatusMenuVisible:pe,setVisibleFlag:fe},Pt=Object(s.b)(null,Dt)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("statusListOrderForm")||(e.changeStatusMenuVisible(e.order.id),e.setVisibleFlag("statusStatusList",!1))};return Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(Ue.jsx)("div",{className:"statusList",id:"statusList",children:["\u041d\u043e\u0432\u044b\u0435","\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438","\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435","\u0413\u043e\u0442\u043e\u0432\u044b\u0435","","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"].map((function(t,n){return Object(Ue.jsx)(At,{groupName:t,groupIdx:n,order:e.order},n+t)}))})})),Rt={changeStatusMenuVisible:pe},Bt=Object(s.b)((function(e){return{statusMenuVisible:e.view.statusMenuVisible}}),Rt)((function(e){return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("div",{className:"orderStatus",children:Object(Ue.jsxs)("span",{children:[Object(Ue.jsxs)("button",{className:"statusButtom",type:"button",style:{backgroundColor:e.data.status.color},onClick:function(){return e.changeStatusMenuVisible(e.data.id)},children:[e.data.status.name,Object(Ue.jsx)("span",{className:"statusSeparate",children:" | \u1a06"})]}),e.statusMenuVisible[[e.data.id]]?Object(Ue.jsx)(Pt,{order:e.data}):null]})})})})),It=(Object(s.b)(null,null)((function(e){var t=e.data.kindof_good;return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("span",{className:"tableText",children:t})})})),Object(s.b)((function(e){return{}}))((function(e){var t=e.data.brand;return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("span",{className:"tableText",children:t.title})})}))),Lt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data.malfunction;return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("div",{className:"tableText tableOne",children:t})})})),Mt=Object(s.b)((function(e){return{employees:e.data.employees}}))((function(e){var t=e.data.engineer_id,n=e.employees;return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("div",{children:function(e){if(e){var t=n.find((function(t){return t.id===e}));return"".concat(t.last_name," ").concat(t.first_name)}}(t)})})})),Vt={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};function Gt(e){return"+".concat(e.slice(0,1),"(").concat(e.slice(1,4),") ").concat(e.slice(4,7),"-").concat(e.slice(7,9),"-").concat(e.slice(9,11))}function qt(e){return!(e<0||e>100)&&!isNaN(e)}function Ht(e){return"".concat(e.last_name," ").concat(e.first_name)}function Wt(e){return new Date(1e3*e).toLocaleString("ru",Vt).replace("\u0433.,","")}function Ut(){var e=new Date,t=new Date;return t.setDate(1),t.setHours(0,0,0,0),[parseInt(t/1e3),parseInt(e/1e3)]}function zt(e){if(!e)return"";switch(e.length){case 0:return"";case 1:return"+".concat(e[0]);case 2:return"+".concat(e[0]," (").concat(e[1]);case 3:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]);case 4:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3]);case 5:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]);case 6:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]);case 7:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6]);case 8:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]);case 9:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8]);case 10:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8],"-").concat(e[9]);case 11:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8],"-").concat(e[9]).concat(e[10])}}var Yt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data.client;return Object(Ue.jsxs)("td",{children:[Object(Ue.jsx)("div",{className:"tableClientName",children:t.name}),Object(Ue.jsx)("div",{className:"orderDate",children:Gt(t.phone[0].number)})]})})),Kt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data.price;return Object(Ue.jsx)("td",{className:"tablePrice",children:Object(Ue.jsx)("span",{children:t||null})})})),Qt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data.engineer_notes;return Object(Ue.jsx)("td",{children:Object(Ue.jsx)("div",{className:"tableText tableOne",children:t})})})),Jt=Object(s.b)((function(e){return{}}))((function(e){var t=e.data;return Object(Ue.jsx)("td",{children:Object(Ue.jsxs)("div",{className:"tableText row",children:[Object(Ue.jsx)("div",{children:Object(Ue.jsx)("img",{className:"icon_equipment",src:t.kindof_good.icon})}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"noWr",children:[t.kindof_good.icon?null:Object(Ue.jsx)("span",{className:"",children:t.kindof_good.title}),Object(Ue.jsx)("span",{className:"ml5",children:t.brand.title})]}),Object(Ue.jsxs)("div",{className:"noWr",children:[Object(Ue.jsx)("span",{children:t.subtype.title}),Object(Ue.jsx)("span",{className:"orderDate ml5",children:t.model.title})]})]})]})})}));function Xt(e,t){return{type:"CHANGE_CLIENT_FORM",field:t,value:e}}function Zt(){var e=de.getState(),t=rt({page:e.client.page,name:e.client.filter_name,phone:e.client.filter_phone});return function(n){fetch(e.data.url_server+"/get_clients",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_CLIENT_STATE",data:{clients:e.data}}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}var $t=function(e){var t=e.create?Object(Ue.jsx)("div",{className:"blueButton mr-lf-0 ",onClick:e.create,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}):null,n=e.save?Object(Ue.jsx)("div",{className:"blueButton mr-lf-0",onClick:e.save,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):null,r=e.close?Object(Ue.jsx)("div",{className:"whiteBlueBotton",onClick:e.close,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}):null,i=e.delete?Object(Ue.jsx)("div",{className:"whiteButton simbolBotton",onClick:e.delete,children:Object(Ue.jsx)("svg",{className:"icon-table-red-basket",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:L})})}):null,c=e.recover?Object(Ue.jsxs)("div",{className:"".concat(e.recover?"blueButton":"greyDisbledButton"," mr-lf-0"),onClick:e.recover,children:[Object(Ue.jsx)("svg",{className:"icon-recover",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:"M32 12h-12l4.485-4.485c-2.267-2.266-5.28-3.515-8.485-3.515s-6.219 1.248-8.485 3.515c-2.266 2.267-3.515 5.28-3.515 8.485s1.248 6.219 3.515 8.485c2.267 2.266 5.28 3.515 8.485 3.515s6.219-1.248 8.485-3.515c0.189-0.189 0.371-0.384 0.546-0.583l3.010 2.634c-2.933 3.349-7.239 5.464-12.041 5.464-8.837 0-16-7.163-16-16s7.163-16 16-16c4.418 0 8.418 1.791 11.313 4.687l4.687-4.687v12z"})}),"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"]}):null;return Object(Ue.jsxs)("div",{className:"buttons_ mt15",children:[Object(Ue.jsxs)("div",{className:"buttons",children:[e.edit?e.deleted?c:n:t,r]}),e.edit&&!e.deleted?i:null]})},en=n(26),tn=n(17),nn=n.n(tn),rn=function(e){var t=Object(r.useState)(!!e.checked&&e.checked),n=Object(Je.a)(t,2),i=n[0],c=n[1];return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:e.title}),Object(Ue.jsxs)("div",{className:"checkButton",children:[Object(Ue.jsx)("div",{className:i?"checkButtonTwo":"checkButtonOne",onClick:e.disabled?null:function(){c(!0),e.func1()},children:e.name[0]}),Object(Ue.jsx)("div",{className:i?"checkButtonOne":"checkButtonTwo",onClick:e.disabled?null:function(){c(!1),e.func2()},children:e.name[1]})]})]})},cn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),an=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0432\u043e\u043d\u043a\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),sn=function(e){var t=Object(r.useState)(""),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0422\u0435\u0433\u0438"}),Object(Ue.jsxs)("div",{className:"tagBox",children:[Object(Ue.jsx)("div",{className:"icon_tag"}),e.tags.map((function(t,n){return Object(Ue.jsxs)("div",{className:"tag",children:[Object(Ue.jsx)("div",{className:"icon_close",onClick:function(){return e.daleteTag(n)}}),Object(Ue.jsx)("div",{children:t})]},n)})),Object(Ue.jsx)("input",{className:"optionFilterInput w150",onKeyPress:function(t){"Enter"===t.key&&function(t){e.addTag(t.target.value),c("")}(t)},value:i,onChange:function(e){return c(e.target.value)}})]})]})},on={setVisibleFlag:fe},ln=Object(s.b)(null,on)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("chooseOfList".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=e.list.find((function(t){return t.id===e.current_id})),o=e.noChoosed||"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u0438\u043f";return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsxs)("div",{className:e.className,style:{width:e.width?e.width:"250px"},id:"chooseOfList".concat(e.id),children:[Object(Ue.jsxs)("div",{className:"lableImput",children:[e.title,e.checkedFlag?Object(Ue.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ue.jsxs)("div",{className:"optionsButton",onClick:e.disabled?null:function(){return c(!i)},style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,children:[Object(Ue.jsx)("div",{className:"noWr",children:e.employee?s?"".concat(s.last_name," ").concat(s.first_name):"\u043d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d":s?s.title||s.name:o}),Object(Ue.jsx)("span",{children:"\u1a06"})]}),e.checkedFlag&&!e.checked?Object(Ue.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c"}):null,i?Object(Ue.jsx)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:e.list.map((function(t){return Object(Ue.jsx)("div",{className:"options",onClick:e.checkedFlag?function(){return function(t){e.setElement(t.id,e.field?e.field:null),c(!1),e.setVisibleFlag(e.checkedFlag,!0)}(t)}:function(){return function(t){e.setElement(t.id,e.field?e.field:null),c(!1)}(t)},children:e.employee?"".concat(t.last_name," ").concat(t.first_name):t.title?t.title:t.name},t.id)}))}):null]})})),dn={setVisibleFlag:fe},un=Object(s.b)((function(e){return{}}),dn)((function(e){return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsxs)("div",{className:"lableImput",children:[e.title,e.redStar?Object(Ue.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("input",{className:"".concat(e.unit?"numberInput":"textInput"," ").concat(e.disabled?"ds":null," ").concat(e.inputClassName),style:{width:e.width?e.width:null,borderColor:e.checkedFlag&&!e.checked?"red":null},name:e.name,onChange:e.isPhone?function(t){var n=t.target.value.replace(/[^0-9]/g,"");n.length<12&&e.onChange(n)}:e.onChange,value:e.isPhone?zt(e.value):e.value,onBlur:e.checkedFlag?function(t){return e.setVisibleFlag(e.checkedFlag,!!t.target.value)}:null,disabled:e.disabled}),e.unit?Object(Ue.jsx)("div",{className:"ml5",children:e.unit}):null]}),e.checkedFlag&&!e.checked?Object(Ue.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})})),mn={setVisibleFlag:fe},pn=Object(s.b)((function(e){return{}}),mn)((function(e){return Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsxs)("div",{className:"lableImput",children:[e.title,e.redStar?Object(Ue.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ue.jsx)("textarea",{className:"textInput",name:e.name,onChange:e.onChange,value:e.value,onBlur:e.checkedFlag?function(t){return e.setVisibleFlag(e.checkedFlag,!!t.target.value)}:null,style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,disabled:e.disabled}),e.checkedFlag&&!e.checked?Object(Ue.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})})),hn={changeClientForm:Xt,setClietnCheckbox:_e,addClientTag:function(e){return{type:"ADD_CLIENT_TAG",tag:e}},deleteClientTag:function(e){return{type:"DELETE_CLIENT_TAG",idx:e}},setVisibleFlag:fe},bn=Object(s.b)((function(e){return{client:e.client,discount_margin:e.data.discount_margin,inputClientDiscServChecked:e.view.inputClientDiscServChecked,inputClientDiscMatChecked:e.view.inputClientDiscMatChecked,inputClientDiscGoodChecked:e.view.inputClientDiscGoodChecked}}),hn)((function(e){return Object(Ue.jsxs)("div",{className:"clientGenerally",children:[Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u041f\u0440\u043e\u0447\u0435\u0435"}),Object(Ue.jsx)(un,{className:"mt15 w250",title:"\u0421\u043a\u0438\u0434\u043e\u0447\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0430",onChange:function(t){return e.changeClientForm(t.target.value,"discount_code")},value:e.client.discount_code,disabled:e.client.deleted}),Object(Ue.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ue.jsx)(rn,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438 \u0432 \u0417\u0430\u043a\u0430\u0437\u0435 \u0438 \u0421\u0447\u0435\u0442\u0435",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_service_type",!1)},func2:function(){return e.setClietnCheckbox("discount_service_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_service_type?Object(Ue.jsx)(ln,{id:111,className:"ml30 mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&1===e.margin_type})),field:"discount_service_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_service_margin_id,width:"150px"}):Object(Ue.jsx)(un,{className:"ml30 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_services")},value:e.client.discount_services,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscServChecked",checked:qt(e.client.discount_services),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ue.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ue.jsx)(rn,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0432 \u0417\u0430\u043a\u0430\u0437\u0435 \u0438 \u0421\u0447\u0435\u0442\u0435",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_materials_type",!1)},func2:function(){return e.setClietnCheckbox("discount_materials_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_materials_type?Object(Ue.jsx)(ln,{id:11,className:"mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&2===e.margin_type})),field:"discount_materials_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_materials_margin_id,width:"150px"}):Object(Ue.jsx)(un,{className:"ml15 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_materials")},value:e.client.discount_materials,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscMatChecked",checked:qt(e.client.discount_materials),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ue.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ue.jsx)(rn,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u041f\u0440\u043e\u0434\u0430\u0436\u0430\u0445",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_good_type",!1)},func2:function(){return e.setClietnCheckbox("discount_good_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_good_type?Object(Ue.jsx)(ln,{id:12,className:"ml30 mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&2===e.margin_type})),field:"discount_goods_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_goods_margin_id,width:"150px"}):Object(Ue.jsx)(un,{className:"ml30 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_goods")},value:e.client.discount_goods,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscGoodChecked",checked:qt(e.client.discount_goods),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ue.jsx)(pn,{className:"mt15",title:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeClientForm(t.target.value,"notes")},value:e.client.notes,disabled:e.client.deleted}),Object(Ue.jsx)(sn,{tags:e.client.tags,addTag:e.addClientTag,daleteTag:e.deleteClientTag})]})})),jn={changeStatusPhoneList:function(e){return{type:"CHANGE_STATUS_PHONE_LIST",idx:e}},setPhoneTitle:function(e,t){return{type:"SET_PHONE_TITLE",idx:e,title:t}},changeStatusAddTitle:function(e){return{type:"CHANGE_STATUS_ADD_TITLE",idx:e}}},_n=Object(s.b)((function(e){return{client:e.client}}),jn)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("listOptionsOfPhones".concat(e.idx))||e.client.statusPhoneList[e.idx]&&e.changeStatusPhoneList(e.idx)};return Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(Ue.jsxs)("div",{id:"listOptionsOfPhones".concat(e.idx),children:[Object(Ue.jsxs)("div",{className:"lableImput mt15 curP",onClick:function(){return e.changeStatusPhoneList(e.idx)},children:[e.title,0===e.idx?Object(Ue.jsx)("span",{className:"redStar",children:"*"}):null,Object(Ue.jsx)("span",{className:"smallIcon",children:"\u1a06"})]}),e.client.statusPhoneList[e.idx]?Object(Ue.jsxs)("div",{className:"listOptionsPhones",children:[e.client.phone_titles.map((function(t){return Object(Ue.jsx)("div",{className:"options",onClick:function(){e.setPhoneTitle(e.idx,t)},children:t},t)})),Object(Ue.jsx)("div",{className:"btmsts",children:e.client.statusAddTitle[e.idx]?Object(Ue.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&e.setPhoneTitle(e.idx,t.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ue.jsx)("div",{className:"btnstsTitle",onClick:function(){return e.changeStatusAddTitle(e.idx)},children:"\u0417\u0430\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u0435"})})]}):null]})})),fn={changeClientEditorPhone:function(e,t){return{type:"CHANGE_CLIENT_EDITOR_PHONE",idx:e,value:t}},addPhoneCounter:function(){return{type:"ADD_PHONE_COUNTER"}},deleteCountNumber:function(e){return{type:"DELETE_COUNT_NUMBER",idx:e}},setPhoneNotify:function(e){return{type:"SET_PHONE_NOTIFY",idx:e}},setVisibleListFlag:ve,addVisibleFlag:function(e){return{type:"ADD_FLAG",field:e}},deleteVisibleFlag:function(e,t){return{type:"DELETE_FLAG",field:e,idx:t}}},On=Object(s.b)((function(e){return{client:e.client,view:e.view}}),fn)((function(e){return Object(Ue.jsxs)("div",{children:[e.client.phone.map((function(t,n){return Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(_n,{idx:n,title:t.title}),Object(Ue.jsxs)("div",{className:"inputPhoneBox",children:[Object(Ue.jsx)("input",{className:"textInput w250",onChange:function(t){return function(t,n){var r=n.target.value.replace(/[^0-9]/g,"");r.length<12&&e.changeClientEditorPhone(t,r)}(n,t)},value:zt(t.number),onBlur:function(t){return e.setVisibleListFlag("inputClientPhoneChecked",n,11===t.target.value.replace(/[^0-9]/g,"").length)},style:e.view.inputClientPhoneChecked[n]?null:{borderColor:"red"}}),0!==n?Object(Ue.jsx)("div",{onClick:function(){e.deleteCountNumber(n),e.deleteVisibleFlag("inputClientPhoneChecked",n)},children:Object(Ue.jsx)("svg",{className:"icon-deletePhone",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:L})})}):null]}),e.view.inputClientPhoneChecked[n]?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),Object(Ue.jsxs)("div",{className:"checkbox mt5",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(){return e.setPhoneNotify(n)},checked:t.notify}),Object(Ue.jsx)("label",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c SMS"})]})]},n)})),Object(Ue.jsx)("div",{className:"addPhone",onClick:function(){e.addPhoneCounter(),e.addVisibleFlag("inputClientPhoneChecked")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d"})]})})),vn={changeClientForm:Xt},gn=Object(s.b)((function(e){return{client:e.client}}),vn)((function(e){return Object(Ue.jsxs)("div",{className:"clientGenerally",children:[Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041e\u0413\u0420\u041d",onChange:function(t){return e.changeClientForm(t.target.value,"ogrn")},value:e.client.ogrn}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0418\u041d\u041d",onChange:function(t){return e.changeClientForm(t.target.value,"inn")},value:e.client.inn}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041a\u041f\u041f",onChange:function(t){return e.changeClientForm(t.target.value,"kpp")},value:e.client.kpp}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeClientForm(t.target.value,"juridical_address")},value:e.client.juridical_address}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440",onChange:function(t){return e.changeClientForm(t.target.value,"director")},value:e.client.director}),Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u0411\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438\u0435 \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b"}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",onChange:function(t){return e.changeClientForm(t.target.value,"bank_name")},value:e.client.bank_name}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0420/\u0421",onChange:function(t){return e.changeClientEditorForm(t.target.value,"settlement_account")},value:e.client.settlement_account}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041a/\u0421",onChange:function(t){return e.changeClientForm(t.target.value,"corr_account")},value:e.client.corr_account}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0411\u0418\u041a",onChange:function(t){return e.changeClientForm(t.target.value,"bic")},value:e.client.bic})]})})),xn={changeClientForm:Xt,setClietnCheckbox:_e,changeStatusAdCampaignClient:function(){return{type:"CHANGE_STATUS_AD_CAMPAIGN_CLIENT"}},setAdCampaignClient:function(e){return{type:"SET_AD_CANMPAIGN_CLIENT",id:e}},setVisibleFlag:fe},yn=Object(s.b)((function(e){return{client:e.client,statusPhoneList:e.view.statusPhoneList,ad_campaign:e.data.ad_campaign,statusAdCampaignClient:e.view.statusAdCampaignClient,inputClientNameChecked:e.view.inputClientNameChecked}}),xn)((function(e){return Object(Ue.jsxs)("div",{className:"clientGenerally",children:[Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(Ue.jsx)(un,{className:"w250 mt15",title:e.client.juridical?"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438":"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u0442\u0430",redStar:!0,onChange:function(t){return e.changeClientForm(t.target.value,"name")},value:e.client.name,checkedFlag:"inputClientNameChecked",checked:e.inputClientNameChecked}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",onChange:function(t){return e.changeClientForm(t.target.value,"name_doc")},value:e.client.name_doc}),Object(Ue.jsx)(On,{}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"Email",onChange:function(t){return e.changeClientForm(t.target.value,"email")},value:e.client.email}),Object(Ue.jsxs)("div",{className:"checkbox mt5",children:[Object(Ue.jsx)("input",{type:"checkbox",name:"should_send_email",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.should_send_email}),Object(Ue.jsx)("label",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c Email"})]}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeClientForm(t.target.value,"address")},value:e.client.address}),Object(Ue.jsx)(ln,{id:13,className:"mt15 h52",title:"\u041e\u0442\u043a\u0443\u0434\u0430 \u043a\u043b\u0438\u0435\u043d\u0442 \u043e \u043d\u0430\u0441 \u0443\u0437\u043d\u0430\u043b",list:e.ad_campaign,setElement:e.setAdCampaignClient,current_id:e.client.ad_campaign_id,width:"250px"}),e.client.juridical?Object(Ue.jsx)(gn,{}):null]})})),En={setClietnCheckbox:_e},Nn=Object(s.b)((function(e){return{client:e.client}}),En)((function(e){return Object(Ue.jsxs)("div",{className:"buttons mt15",children:[Object(Ue.jsxs)("div",{className:"checkButton",children:[Object(Ue.jsx)("div",{className:e.client.juridical?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.setClietnCheckbox("juridical",!1)},children:"\u0424\u0438\u0437. \u043b\u0438\u0446\u043e"}),Object(Ue.jsx)("div",{className:e.client.juridical?"checkButtonTwo":"checkButtonOne",name:"juridical",onClick:function(t){return e.setClietnCheckbox("juridical",!0)},children:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"})]}),Object(Ue.jsxs)("div",{className:"subCheckbox",children:[Object(Ue.jsx)("input",{type:"checkbox",name:"supplier",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.supplier}),Object(Ue.jsxs)("label",{children:[Object(Ue.jsx)("svg",{className:"icon-black",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 18l-4-8h-6v-4c0-1.1-0.9-2-2-2h-18c-1.1 0-2 0.9-2 2v16l2 2h2.536c-0.341 0.588-0.536 1.271-0.536 2 0 2.209 1.791 4 4 4s4-1.791 4-4c0-0.729-0.196-1.412-0.536-2h11.073c-0.341 0.588-0.537 1.271-0.537 2 0 2.209 1.791 4 4 4s4-1.791 4-4c0-0.729-0.196-1.412-0.537-2h2.537v-6zM22 18v-6h4.146l3 6h-7.146z"})}),Object(Ue.jsx)("span",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"})]})]}),Object(Ue.jsxs)("div",{className:"subCheckbox",children:[Object(Ue.jsx)("input",{type:"checkbox",name:"conflicted",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.conflicted}),Object(Ue.jsxs)("label",{children:[Object(Ue.jsx)("svg",{className:"icon-red",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM22 8c1.105 0 2 0.895 2 2s-0.895 2-2 2-2-0.895-2-2 0.895-2 2-2zM10 8c1.105 0 2 0.895 2 2s-0.895 2-2 2-2-0.895-2-2 0.895-2 2-2zM22.003 24.398c-1.224-2.036-3.454-3.398-6.003-3.398s-4.779 1.362-6.003 3.398l-2.573-1.544c1.749-2.908 4.935-4.855 8.576-4.855s6.827 1.946 8.576 4.855l-2.573 1.544z"})}),Object(Ue.jsx)("span",{children:"\u041a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043d\u044b\u0439"})]})]})]})})),wn=function(){return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)(Nn,{}),Object(Ue.jsx)(yn,{}),Object(Ue.jsx)(bn,{})]})},kn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Cn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Sn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u041f\u043b\u0430\u0442\u0435\u0436\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Tn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"SMS"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Fn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0430\u0434\u0430\u0447\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),An=function(e){return Object(Ue.jsx)("div",{className:"tabs ".concat(e.className),children:e.list.map((function(t,n){return Object(Ue.jsx)("div",{className:e.tab===n?"tabOn":"tab",onClick:function(){return e.func(n,e.tab_field?e.tab_field:"tabs")},children:t},n)}))})},Dn={setVisibleFlag:fe,resetDataClient:function(){return{type:"RESET_DATA_CLIENT"}},setVisibleListFlag:ve,createNewClient:function(){var e=de.getState(),t=ue({juridical:e.client.juridical,supplier:e.client.supplier,conflicted:e.client.conflicted,should_send_email:e.client.should_send_email,discount_good_type:e.client.discount_good_type,discount_materials_type:e.client.discount_materials_type,name:e.client.name,name_doc:e.client.name_doc,email:e.client.email,address:e.client.address,discount_code:e.client.discount_code,notes:e.client.notes,ogrn:e.client.ogrn,inn:e.client.inn,kpp:e.client.kpp,juridical_address:e.client.juridical_address,director:e.client.director,bank_name:e.client.bank_name,settlement_account:e.client.settlement_account,corr_account:e.client.corr_account,bic:e.client.bic,discount_goods:e.client.discount_goods,discount_materials:e.client.discount_materials,discount_services:e.client.discount_services,ad_campaign_id:e.client.ad_campaign_id,discount_goods_margin_id:e.client.discount_goods_margin_id,discount_materials_margin_id:e.client.discount_materials_margin_id,discount_service_margin_id:e.client.discount_service_margin_id,discount_service_type:e.client.discount_service_type,tags:e.client.tags,phone:e.client.phone});return function(n){fetch(e.data.url_server+"/clients",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_ORDER_FORM_S",field:"client",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1}),n({type:"RESET_DATA_CLIENT"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},saveChangeClient:function(){var e=de.getState(),t=ue({id:e.client.edit,juridical:e.client.juridical,supplier:e.client.supplier,conflicted:e.client.conflicted,should_send_email:e.client.should_send_email,discount_good_type:e.client.discount_good_type,discount_materials_type:e.client.discount_materials_type,discount_service_type:e.client.discount_service_type,name:e.client.name,name_doc:e.client.name_doc,email:e.client.email,address:e.client.address,discount_code:e.client.discount_code,notes:e.client.notes,ogrn:e.client.ogrn,inn:e.client.inn,kpp:e.client.kpp,juridical_address:e.client.juridical_address,director:e.client.director,bank_name:e.client.bank_name,settlement_account:e.client.settlement_account,corr_account:e.client.corr_account,bic:e.client.bic,discount_goods:e.client.discount_goods,discount_materials:e.client.discount_materials,discount_services:e.client.discount_services,ad_campaign_id:e.client.ad_campaign_id,discount_goods_margin_id:e.client.discount_goods_margin_id,discount_materials_margin_id:e.client.discount_materials_margin_id,discount_service_margin_id:e.client.discount_service_margin_id,tags:e.client.tags,phone:e.client.phone});return t.method="PUT",function(n){fetch(e.data.url_server+"/clients",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_ORDER_FORM_S",field:"client",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},deleteClient:function(e){var t=de.getState(),n=ue({id:t.client.edit,deleted:e});return n.method="PUT",function(e){fetch(t.data.url_server+"/clients",n).then((function(e){return e.json()})).then((function(t){t.success?(e({type:"CHANGE_ORDER_FORM_S",field:"client",value:{}}),e({type:"RESET_DATA_CLIENT"}),e({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1})):console.warn(t.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeClientForm:Xt},Pn=Object(s.b)((function(e){return{view:e.view,client:e.client,permissions:e.data.user.role.permissions}}),Dn)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("createNewClient")||e.view.statusCreateNewClient&&e.resetDataClient()};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow mw50",id:"createNewClient",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.client.edit?e.client.name:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442"}),Object(Ue.jsx)("div",{className:"contentEditor",children:e.client.edit?Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(An,{className:"mt15",list:["\u041e\u0431\u0449\u0438\u0435","\u0411\u0430\u043b\u0430\u043d\u0441","\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0417\u0430\u043a\u0430\u0437\u044b","\u041f\u043b\u0430\u0442\u0435\u0436\u0438","\u0417\u0432\u043e\u043d\u043a\u0438","SMS","\u0417\u0430\u0434\u0430\u0447\u0438"],tab:e.client.tabs,func:e.changeClientForm}),0===e.client.tabs?Object(Ue.jsx)(wn,{}):null,1===e.client.tabs?Object(Ue.jsx)(cn,{}):null,2===e.client.tabs?Object(Ue.jsx)(kn,{}):null,3===e.client.tabs?Object(Ue.jsx)(Cn,{}):null,4===e.client.tabs?Object(Ue.jsx)(Sn,{}):null,5===e.client.tabs?Object(Ue.jsx)(an,{}):null,6===e.client.tabs?Object(Ue.jsx)(Tn,{}):null,7===e.client.tabs?Object(Ue.jsx)(Fn,{}):null]}):Object(Ue.jsx)(wn,{})}),Object(Ue.jsx)($t,{edit:e.client.edit,create:function(){e.client.name&&e.view.inputClientPhoneChecked.every((function(e){return e}))&&qt(e.client.discount_materials)&&qt(e.client.discount_goods)&&qt(e.client.discount_services)?e.createNewClient():(e.client.name||e.setVisibleFlag("inputClientNameChecked",!1),qt(e.client.discount_materials)||e.setVisibleFlag("inputClientDiscMatChecked",!1),qt(e.client.discount_goods)||e.setVisibleFlag("inputClientDiscGoodChecked",!1),qt(e.client.discount_services)||e.setVisibleFlag("inputClientDiscServChecked",!1),e.client.phone.forEach((function(t,n){11!==t.number.replace(/[^0-9]/g,"").length&&e.setVisibleListFlag("inputClientPhoneChecked",n,!1)})))},save:function(){e.client.name&&e.view.inputClientPhoneChecked.every((function(e){return e}))&&qt(e.client.discount_materials)&&qt(e.client.discount_goods)&&qt(e.client.discount_services)?e.saveChangeClient():(e.client.name||e.setVisibleFlag("inputClientNameChecked",!1),qt(e.client.discount_materials)||e.setVisibleFlag("inputClientDiscMatChecked",!1),qt(e.client.discount_goods)||e.setVisibleFlag("inputClientDiscGoodChecked",!1),qt(e.client.discount_services)||e.setVisibleFlag("inputClientDiscServChecked",!1),e.client.phone.forEach((function(t,n){11!==t.number.replace(/[^0-9]/g,"").length&&e.setVisibleListFlag("inputClientPhoneChecked",n,!1)})))},delete:e.permissions.includes("delete_client")?function(){return e.deleteClient(!0)}:null,recover:e.permissions.includes("recover_client")?function(){return e.deleteClient(!1)}:null,close:function(){return e.setVisibleFlag("statusCreateNewClient",!1)},deleted:e.client.deleted})]})})})),Rn={changeNameClientFilter:he,setVisibleFlag:fe,changePaymentForm:kt,editCurrentClient:Fe},Bn=Object(s.b)((function(e){return{clients:e.client.clients,phone:e.filter.clientFilter.phone,view:e.view,client:e.order.client}}),Rn)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("listClientsOfOfPayments")||e.path.map((function(e){return e.id})).includes("clientInputBoxOfPayments")||c(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ue.jsxs)("div",{className:"w400 h52",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsxs)("div",{id:"clientInputBoxOfPayments",className:"orderInputBox",onClick:function(){return c(!0)},children:[Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeNameClientFilter(t.target.value)}}),Object(Ue.jsx)("div",{className:"simbolButton",onClick:function(){return e.setVisibleFlag("statusCreateNewClient",!0)},children:"+"}),Object(Ue.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),i?Object(Ue.jsx)("div",{className:"listFilter",id:"listClientsOfOfPayments",children:e.clients.map((function(t){return Object(Ue.jsxs)("div",{className:"rowGropList",onClick:function(){c(!1),e.editCurrentClient(t),e.changePaymentForm(t.id,"client_id")},children:[Object(Ue.jsx)("div",{children:t.name}),Object(Ue.jsx)("div",{className:"orderDate",children:t.phone[0]?Gt(t.phone[0].number):null})]},t.id)}))}):null]}),e.view.statusCreateNewClient?Object(Ue.jsx)(Pn,{}):null]})})),In={editClient:Re},Ln=Object(s.b)((function(e){return{client:e.client,statusCreateNewClient:e.view.statusCreateNewClient}}),In)((function(e){return Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsxs)("div",{className:"clientCard",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("svg",{className:"icon-client",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"})}),Object(Ue.jsx)("span",{className:"clientCardName",onClick:e.edit,children:e.client.name})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("span",{className:"clientCardTitle",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),Object(Ue.jsxs)("span",{className:"clientCardText",children:[" ",e.client.phone[0]?Gt(e.client.phone[0].number):null]})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("span",{className:"clientCardTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(Ue.jsx)("span",{className:"clientCardText",children:"000 (\u043a\u043b\u0438\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u0442 \u043d\u0430\u043c)"})]})]}),Object(Ue.jsx)("div",{className:"crossButtom",onClick:e.close,children:"\u2573"})]}),e.statusCreateNewClient?Object(Ue.jsx)(Pn,{}):null]})})),Mn={changePaymentForm:kt,setVisibleFlag:fe},Vn=Object(s.b)((function(e){return{payment:e.payment,inputPaymentSumChecked:e.view.inputPaymentSumChecked,cashboxes:e.data.cashboxes}}),Mn)((function(e){var t=e.payment.cashbox_id?e.cashboxes.find((function(t){return t.id===e.payment.cashbox_id})).title:"",n=['\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b "'.concat(t,'"'),"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b","\u0412\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0443"],r=e.payment.outcome?e.payment.outcome:e.payment.income;return Object(Ue.jsx)("div",{className:"receiptBox",children:Object(Ue.jsx)("div",{className:"receipt mt15",children:Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"tae w80",children:"\u0421\u0443\u043c\u043c\u0430, \u0440\u0443\u0431."})]})}),Object(Ue.jsxs)("tbody",{children:[Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:e.payment.edit?e.payment.description:n[e.payment.direction]}),Object(Ue.jsx)("td",{className:"eal",children:e.payment.edit?Object(Ue.jsx)("div",{children:r}):Object(Ue.jsx)("input",{className:"w70",style:e.inputPaymentSumChecked?null:{borderColor:"red"},onChange:function(t){return e.changePaymentForm(parseFloat(t.target.value.replace(/[^0-9.]/g,"")),2===e.payment.direction?"income":"outcome")},value:r,onBlur:function(){return e.setVisibleFlag("inputPaymentSumChecked",2===e.payment.direction?!!e.payment.income:!!e.payment.outcome)},disabled:"closed_order_editor"===e.payment.context.type||"closed_order"===e.payment.context.type})})]}),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"tae",children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(Ue.jsx)("td",{className:"eal",children:Object(Ue.jsx)("div",{className:"sum",children:"".concat(r," \u0440\u0443\u0431")})})]})]})]})})})}));Object(tn.registerLocale)("ru",en.a);var Gn={changePaymentForm:kt,changeVisibleState:Oe,addClients:Zt,addItemPayments:He,addPaymentTag:function(e){return{type:"ADD_PAYMENT_TAG",tag:e}},deletePaymentTag:function(e){return{type:"DELETE_PAYMENT_TAG",idx:e}},createPayment:function(e){var t=de.getState(),n=Math.round(Date.now()/1e3),r=t.data.cashboxes.find((function(e){return e.id===t.payment.cashbox_id})).title,i=t.payment.target_cashbox_id?t.data.cashboxes.find((function(e){return e.id===t.payment.target_cashbox_id})).title:"",c='\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b "'.concat(r,'" \u0432 \u043a\u0430\u0441\u0441\u0443 "').concat(i,'".'),a=rt({cashflow_category:t.payment.direction?t.data.item_payments.find((function(e){return e.id===t.payment.cashflow_category})).title:null,description:t.payment.direction?t.payment.description:c+t.payment.description,deposit:t.data.cashboxes.find((function(e){return e.id===t.payment.cashbox_id})).balance+t.payment.income-t.payment.outcome,income:t.payment.income,outcome:-t.payment.outcome,direction:t.payment.direction,deleted:!1,can_print_fiscal:t.payment.can_print_fiscal,is_fiscal:t.payment.is_fiscal,created_at:n,custom_created_at:t.payment.custom_created_at?t.payment.custom_created_at:n,tags:t.payment.tags,cashbox_id:t.payment.cashbox_id?t.payment.cashbox_id:null,client_id:t.payment.client_id?t.payment.client_id:null,employee_id:t.payment.employee_id,order_id:t.payment.order_id?t.payment.order_id:null,target_cashbox_id:t.payment.direction?null:t.payment.target_cashbox_id}),s=rt({custom_created_at:[t.payment.filter_created_at[0],t.payment.filter_created_at[1]+86399],cashbox_id:t.cashbox.current_cashbox.id,tags:t.payment.filter_tags.length?t.payment.filter_tags:null});return function(){var n=Object(m.a)(u.a.mark((function n(r){var i,c,o,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(t.data.url_server+"/payments",a).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:if("payment"!==e.type){n.next=9;break}return n.next=7,fetch(t.data.url_server+"/get_payments",s).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payments",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPaymentsEditor",value:!1}),r({type:"RESET_PAYMENTS"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 7:return n.next=9,fetch(t.data.url_server+"/get_cashbox",rt()).then((function(e){return e.json()})).then((function(e){e.success?r({type:"ADD_DATA",field:"cashboxes",data:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 9:if("order"===e.type&&fetch(t.data.url_server+"/get_orders",rt({id:t.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.data[0]}),r({type:"SET_VISIBLE_FLAG",field:"statusPaymentsEditor",value:!1}),r({type:"RESET_PAYMENTS"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")})),"closed_order"!==e.type){n.next=17;break}return i=rt({id:e.order_id,status_id:e.status_id}),c=rt(t.filter.mainFilter),n.next=15,fetch(t.data.url_server+"/change_order_status",i).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 15:return n.next=17,fetch(t.data.url_server+"/get_orders",c).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ORDERS_SHOW",ordersShow:e.data,count:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusPaymentsEditor",value:!1}),r({type:"RESET_PAYMENTS"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 17:if("closed_order_editor"!==e.type){n.next=24;break}return o=rt({id:e.order_id,status_id:e.status_id}),l=rt({id:e.order_id}),n.next=22,fetch(t.data.url_server+"/change_order_status",o).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 22:return n.next=24,fetch(t.data.url_server+"/get_orders",l).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.data[0]}),r({type:"SET_VISIBLE_FLAG",field:"statusPaymentsEditor",value:!1}),r({type:"RESET_PAYMENTS"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 24:return n.next=26,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPayments:St,changeStatus:pt,refreshDataOrder:Ie,changeStatusMenuVisible:pe},qn=Object(s.b)((function(e){return{view:e.view,payment:e.payment,permissions:e.data.user.role.permissions,filter:e.filter,client:e.client,cashboxes:e.data.cashboxes,current_branch_id:e.data.current_branch.id,item_payments:e.data.item_payments,employees:e.data.employees,user_id:e.data.user.id,current_cashbox:e.cashbox.current_cashbox,order_edit:e.order.edit}}),Gn)((function(e){var t=function(){e.changeVisibleState({inputPaymentSumChecked:!0,inputPaymentCashboxChecked:!0,inputPaymentDescChecked:!0,inputPaymentCashflowChecked:!0,inputPaymentEmployeeChecked:!0,statusPaymentsEditor:!1}),e.resetPayments()},n=function(e){e.path.map((function(e){return e.id})).includes("paymentsEditorWiondow")||e.path.map((function(e){return e.id})).includes("createNewOrder")||e.path.map((function(e){return e.id})).includes("344")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name,e.client.filter_phone]);var i=Object(r.useState)(!1),c=Object(Je.a)(i,2),a=c[0],s=c[1],o=e.cashboxes.filter((function(t){return t.type===e.payment.current_type&&(e.payment.direction||t.id!==e.payment.cashbox_id)&&!t.deleted&&(t.isGlobal||t.branch_id===e.current_branch_id)}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow wmn500",id:"paymentsEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:["\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433","\u0420\u0430\u0441\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433","\u041f\u0440\u0438\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433"][e.payment.direction]}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(rn,{className:"mt15 mr-rg-20",title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f",name:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435","\u0417\u0430\u0434\u0430\u043d\u043d\u043e\u0435"],func1:function(){s(!1),e.changePaymentForm(0,"custom_created_at")},func2:function(){return s(!0)},checked:!0,disabled:!e.permissions.includes("backdating")}),a?Object(Ue.jsx)(nn.a,{selected:e.payment.custom_created_at?new Date(1e3*e.payment.custom_created_at):Date.now(),onChange:function(t){e.changePaymentForm(t/1e3,"custom_created_at")},isClearable:!0,placeholderText:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",className:"optionFilterInputDate",dateFormat:"dd.MM.yyyy HH:mm",locale:"ru",maxDate:Date.now(),showTimeSelect:!0}):null]}),e.payment.direction?e.payment.client_id?Object(Ue.jsx)(Ln,{edit:function(){return e.changeVisibleState({statusCreateNewClient:!0})},close:function(){return e.changePaymentForm(0,"client_id")}}):Object(Ue.jsx)(Bn,{}):null,Object(Ue.jsx)(Vn,{}),Object(Ue.jsxs)("div",{className:"row mt15 al-itm-fs",children:[Object(Ue.jsx)(rn,{className:"",title:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",name:["\u041d\u0430\u043b.","\u0411\u0435\u0437\u043d\u0430\u043b."],func1:function(){e.changePaymentForm(0,e.payment.direction?"cashbox_id":"target_cashbox_id"),e.changePaymentForm(0,"current_type")},func2:function(){e.changePaymentForm(0,e.payment.direction?"cashbox_id":"target_cashbox_id"),e.changePaymentForm(1,"current_type")},checked:!e.current_cashbox.type}),Object(Ue.jsx)(ln,{id:20,title:"\u041a\u0430\u0441\u0441\u0430",className:"ml10 h52",list:o,field:e.payment.direction?"cashbox_id":"target_cashbox_id",setElement:e.changePaymentForm,current_id:e.payment.direction?e.payment.cashbox_id:e.payment.target_cashbox_id,width:"250px",checkedFlag:"inputPaymentCashboxChecked",checked:e.view.inputPaymentCashboxChecked,disabled:e.payment.deleted})]}),Object(Ue.jsx)(pn,{className:"mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changePaymentForm(t.target.value,"description")},value:e.payment.description,checkedFlag:"inputPaymentDescChecked",checked:e.view.inputPaymentDescChecked,redStar:!0,disabled:e.payment.deleted}),Object(Ue.jsx)(ln,{id:41,title:"\u0421\u0442\u0430\u0442\u044c\u044f",className:"mt15 h52",list:e.item_payments.filter((function(t){return t.direction===e.payment.direction})),field:"cashflow_category",setElement:e.changePaymentForm,current_id:e.payment.cashflow_category,width:"250px",checkedFlag:"inputPaymentCashflowChecked",checked:e.view.inputPaymentCashflowChecked,disabled:e.payment.deleted,unvisible:!e.payment.direction}),Object(Ue.jsx)(ln,{id:22,title:"\u041a\u0430\u0441\u0441\u0438\u0440",className:"mt15 h52",list:e.employees.filter((function(e){return!e.deleted})),field:"employee_id",setElement:e.changePaymentForm,current_id:e.payment.employee_id,width:"250px",employee:!0,checkedFlag:"inputPaymentEmployeeChecked",checked:e.view.inputPaymentEmployeeChecked,disabled:!e.permissions.includes("choose_emploees")}),Object(Ue.jsx)(sn,{className:"mt15",tags:e.payment.tags,addTag:e.addPaymentTag,daleteTag:e.deletePaymentTag})]}),Object(Ue.jsx)($t,{edit:e.payment.edit,create:function(){(e.payment.income||e.payment.outcome)&&(e.payment.cashbox_id&&e.payment.direction||e.payment.target_cashbox_id&&!e.payment.direction)&&e.payment.description&&(e.payment.cashflow_category||!e.payment.direction)&&e.payment.employee_id?e.createPayment(e.payment.context):(e.payment.income||e.payment.outcome||e.changeVisibleState({"in}putPaymentSumChecked":!1}),e.payment.cashbox_id&&e.payment.direction&&e.payment.target_cashbox_id&&!e.payment.direction||e.changeVisibleState({inputPaymentCashboxChecked:!1}),e.payment.description||e.changeVisibleState({inputPaymentDescChecked:!1}),e.payment.cashflow_category||e.changeVisibleState({inputPaymentCashflowChecked:!1}),e.payment.employee_id||e.changeVisibleState({inputPaymentEmployeeChecked:!1}))},delete:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!0)}:null,recover:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!1)}:null,close:t,deleted:e.payment.deleted})]})})})),Hn={setVisibleFlag:fe},Wn=Object(s.b)((function(e){return{order:e.order,current_branch:e.data.current_branch,statusStatusList:e.view.statusStatusList,statusPaymentsEditor:e.view.statusPaymentsEditor}}),Hn)((function(e){var t=Object(Ue.jsx)(Xe,{icon:e.current_branch.icon,color:e.current_branch.color,className:"icon-sm8"}),n=e.order.urgent?Object(Ue.jsx)(Xe,{icon:"M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z",color:"red",className:"icon-sm8"}):null,r=!e.order.overdue&&e.order.status.group<4?Object(Ue.jsx)(Xe,{icon:q,color:"#f0ad4e",className:"icon-sm8"}):null;return Object(Ue.jsxs)("div",{className:"createNewTitle",children:[e.order.edit?Object(Ue.jsxs)("div",{className:"statusListOrder",children:[Object(Ue.jsxs)("span",{children:["\u0417\u0430\u043a\u0430\u0437 \u2116 ",e.order.id_label]}),Object(Ue.jsxs)("span",{className:"ml10 fsz12",children:[Object(Ue.jsxs)("button",{id:"statusListOrderForm",className:"statusButtom",type:"button",style:{backgroundColor:e.order.status.color},onClick:function(){return e.setVisibleFlag("statusStatusList",!0)},children:[e.order.status.name,Object(Ue.jsx)("span",{className:"statusSeparate",children:" | \u1a06"})]}),e.statusStatusList?Object(Ue.jsx)(Pt,{order:e.order}):null]}),Object(Ue.jsx)("span",{className:"ml10",children:t}),Object(Ue.jsx)("span",{className:"ml5",children:n}),Object(Ue.jsx)("span",{className:"ml5",children:r})]}):"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",e.statusPaymentsEditor?Object(Ue.jsx)(qn,{}):null]})})),Un={changeOrderFormS:we},zn=Object(s.b)((function(e){return{employees:e.data.employees,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,user:e.data.user,status_group:e.order.status.group}}),Un)((function(e){var t=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_managers")}));t=t.some((function(t){return t.id===e.manager_id}))||!e.manager_id?t:t.concat([e.employees.find((function(t){return t.id===e.manager_id}))]);var n=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_engineers")}));return n=n.some((function(t){return t.id===e.engineer_id}))||!e.engineer_id?n:n.concat([e.employees.find((function(t){return t.id===e.engineer_id}))]),Object(Ue.jsxs)("div",{className:"boxAssingEmployee",children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ln,{id:17,list:t,setElement:e.changeOrderFormS,current_id:e.manager_id?e.manager_id:0,width:"250px",className:"pd-lf-5",field:"manager_id",employee:!0,disabled:!e.user.role.permissions.includes("assing_emploees")||e.status_group>3})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ln,{id:18,list:n,setElement:e.changeOrderFormS,current_id:e.engineer_id?e.engineer_id:0,width:"250px",className:"pd-lf-5",field:"engineer_id",employee:!0,disabled:!e.user.role.permissions.includes("assing_emploees")||e.status_group>3})})]})]})})),Yn={editClient:Re,changeOrderFormS:we},Kn=Object(s.b)((function(e){return{client:e.order.client,statusCreateNewClient:e.view.statusCreateNewClient}}),Yn)((function(e){return Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle"}),Object(Ue.jsxs)("div",{className:"clientCard",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("svg",{className:"icon-client",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"})}),Object(Ue.jsx)("span",{className:"clientCardName",onClick:function(){return e.editClient(e.client.id)},children:e.client.name})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("span",{className:"clientCardTitle",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),Object(Ue.jsxs)("span",{className:"clientCardText",children:[" ",e.client.phone[0]?Gt(e.client.phone[0].number):null]})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("span",{className:"clientCardTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(Ue.jsx)("span",{className:"clientCardText",children:"000 (\u043a\u043b\u0438\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u0442 \u043d\u0430\u043c)"})]})]}),Object(Ue.jsx)("div",{className:"crossButtom",onClick:function(){return e.changeOrderFormS({},"client")},children:"\u2573"})]}),e.statusCreateNewClient?Object(Ue.jsx)(Pn,{}):null]})})),Qn={changeNameClientFilter:he,changePhoneClientFilter:function(e){return{type:"CHANGE_PHONE_CLIENTFILTER",word:e}},setVisibleFlag:fe,changeOrderFormS:we},Jn=Object(s.b)((function(e){return{clients:e.client.clients,phone:e.filter.clientFilter.phone,view:e.view,client:e.order.client}}),Qn)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=function(e){e.path.map((function(e){return e.id})).includes("listFilterOfOrOrder")||e.path.map((function(e){return e.id})).includes("orderInputBoxOfOrder")||i&&c(!1)},u=function(e){e.path.map((function(e){return e.id})).includes("orderInputBoxOfOrderPhone")||e.path.map((function(e){return e.id})).includes("listFilterOfOrOrderPhone")||o&&l(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",d),window.addEventListener("click",u),function(){window.removeEventListener("click",d),window.removeEventListener("click",u)}})),Object(Ue.jsxs)("div",{className:"cleintForm",children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsxs)("div",{id:"orderInputBoxOfOrder",className:"orderInputBox",onClick:function(){return c(!0)},style:e.view.checkedOrderClient?{borderColor:"red"}:null,children:[Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeNameClientFilter(t.target.value)}}),Object(Ue.jsx)("div",{className:"simbolButton",onClick:function(){return e.setVisibleFlag("statusCreateNewClient",!0)},children:"+"}),Object(Ue.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),e.view.checkedOrderClient?Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}):null,i?Object(Ue.jsx)("div",{className:"listFilter",id:"listFilterOfOrOrder",children:e.clients.map((function(t){return Object(Ue.jsxs)("div",{className:"rowGropList",onClick:function(){e.changeOrderFormS(t,"client"),c(!1)},children:[Object(Ue.jsx)("div",{children:t.name}),Object(Ue.jsx)("div",{className:"orderDate",children:t.phone[0]?Gt(t.phone[0].number):null})]},t.id)}))}):null]})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsxs)("div",{id:"orderInputBoxOfOrderPhone",className:"orderInputBox",onClick:function(){return l(!0)},children:[Object(Ue.jsx)(un,{className:"w100",inputClassName:"optionFilterInput",onChange:function(t){return e.changePhoneClientFilter(t)},value:e.phone,isPhone:!0}),Object(Ue.jsx)("div",{className:"simbolButton",onClick:function(){return e.setVisibleFlag("statusCreateNewClient",!0)},children:"+"}),Object(Ue.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),o?Object(Ue.jsx)("div",{className:"listFilter",id:"listFilterOfOrOrderPhone",children:e.clients.map((function(t){return Object(Ue.jsxs)("div",{className:"rowGropList",onClick:function(){e.changeOrderFormS(t,"client"),l(!1)},children:[Object(Ue.jsx)("div",{children:t.name}),Object(Ue.jsx)("div",{className:"orderDate",children:t.phone[0]?Gt(t.phone[0].number):null})]},t.id)}))}):null]})]}),e.view.statusCreateNewClient?Object(Ue.jsx)(Pn,{}):null]})})),Xn={changeOrderFormS:we},Zn=Object(s.b)((function(e){return{order_type:e.data.order_type,order:e.order,permissions:e.data.user.role.permissions}}),Xn)((function(e){return Object(Ue.jsxs)("div",{className:"formRow mt15",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ln,{id:17,list:e.order_type,setElement:e.changeOrderFormS,current_id:e.order.order_type_id,width:"150px",className:"pd-lf-5",field:"order_type_id",disabled:!e.permissions.includes("edit_info_orders")||e.order.status_group>3})})]})})),$n={setVisibleListFlag:ve},er=Object(s.b)((function(e){return{}}),$n)((function(e){return Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:[e.title,e.checkedFlag?Object(Ue.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsx)("input",{className:"textInput",name:e.name,onChange:e.onChange,value:e.value,onBlur:e.checkedFlag?function(t){return e.setVisibleListFlag(e.checkedFlag,e.idx,!!t.target.value)}:null,style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,disabled:e.disabled}),e.checkedFlag&&!e.checked?Object(Ue.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})]})})),tr={createEquipmentBrand:function(e,t){var n=de.getState(),r=rt({title:t,equipment_type_id:n.order.equipments[e].kindof_good.id,branches:n.data.branches.map((function(e){return e.id})),deleted:!1,filter:{title:t,equipment_type_id:n.book.equipment_type.id,deleted:n.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.data.url_server+"/equipment_brand",r).then((function(e){return e.json()})).then((function(e){e.success?(t({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),t({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0440\u0435\u043d\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setOrderEquipment:xe,resetEquipment:ge,setVisibleListFlag:ve,changeOrderFormS:we,addEquipmentBrand:ft,changeBookForm:ht},nr=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),tr)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_type).length&&e.addEquipmentBrand()}),[e.book.equipment_type,e.book.filter_brand]);var d=e.order.edit,u=!Object.values(e.book.equipment_type).length,m=e.order.edit?e.order.brand:e.order.equipments[e.idx].brand,p=!!Object.values(m).length,h=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfBrand")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfBrand")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",h),function(){window.removeEventListener("click",h)}}));return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("button",{id:"optionsOrderTextOfBrand",style:e.view.checkedOrderBrand[e.idx]?null:{borderColor:"red"},className:u?"optionsUnavaliable":"optionsFilterText",onClick:function(){return c(!0)},disabled:u||p,children:[Object(Ue.jsx)("input",{className:u?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookForm(t.target.value,"filter_brand")},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0431\u0440\u0435\u043d\u0434",value:p?m.title:e.book.filter_brand,disabled:u||p}),p&&e.permissions.includes("edit_info_orders")?Object(Ue.jsx)("svg",{className:"icon-close",viewBox:"0 0 22 22",onClick:function(){d?(e.changeOrderFormS({},"brand"),e.changeOrderFormS({},"subtype"),e.changeOrderFormS({},"model")):(e.resetEquipment(e.idx,"brand"),e.resetEquipment(e.idx,"subtype"),e.resetEquipment(e.idx,"model")),e.changeBookForm({},"equipment_brand")},children:Object(Ue.jsx)("path",{d:M})}):Object(Ue.jsx)("span",{children:"\u1a06"})]}),e.view.checkedOrderBrand[e.idx]?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i&&!u?Object(Ue.jsxs)("div",{className:"listFilter",id:"listOrderOfBrand",children:[e.book.equipment_brands.map((function(t){return Object(Ue.jsx)("div",{className:"rowGropList",onClick:function(){return function(t,n){d?e.changeOrderFormS(n,"brand"):e.setOrderEquipment(t,"brand",n),e.changeBookForm(n,"equipment_brand"),c(!1),l(!1),e.setVisibleListFlag("checkedOrderBrand",e.idx,!0),e.changeBookForm("","filter_brand")}(e.idx,t)},children:t.title},t.id)})),Object(Ue.jsx)("div",{className:"btmsts",children:o?Object(Ue.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentBrand(e.idx,t.target.value),e.changeBookForm(t.target.value,"filter_brand"),l(!1))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ue.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0440\u0435\u043d\u0434"})})]}):null]})})),rr={createEquipmentType:function(e){var t=de.getState(),n=rt({title:t.book.title,icon:t.book.icon,url:t.book.url,branches:t.data.branches.map((function(e){return e.id})),deleted:!1,filter:{title:e,deleted:t.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_type",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setOrderEquipment:xe,resetEquipment:ge,setVisibleListFlag:ve,changeOrderFormS:we,addEquipmentType:_t,changeBookForm:ht},ir=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),rr)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){e.addEquipmentType()}),[e.book.filter_type]);var d=e.order.edit,u=Object(r.useMemo)((function(){return d?e.order.kindof_good:e.order.equipments[e.idx].kindof_good}),[e.order.kindof_good,e.order.equipments[e.idx].kindof_good]),m=!!Object.values(u).length,p=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfGroup")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfGroup")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",p),function(){window.removeEventListener("click",p)}}));return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("button",{className:"optionsFilterText",id:"optionsOrderTextOfGroup",onClick:function(){return c(!0)},disabled:m,style:e.view.checkedOrderKindofGood[e.idx]?null:{borderColor:"red"},children:[Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeBookForm(t.target.value,"filter_type")},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443",value:m?u.title:e.book.filter_type,disabled:m}),m&&e.permissions.includes("edit_info_orders")?Object(Ue.jsx)("svg",{className:"icon-close",viewBox:"0 0 22 22",onClick:function(){d?(e.changeOrderFormS({},"kindof_good"),e.changeOrderFormS({},"brand"),e.changeOrderFormS({},"subtype"),e.changeOrderFormS({},"model")):(e.resetEquipment(e.idx,"kindof_good"),e.resetEquipment(e.idx,"brand"),e.resetEquipment(e.idx,"subtype"),e.resetEquipment(e.idx,"model")),e.changeBookForm({},"equipment_type")},children:Object(Ue.jsx)("path",{d:M})}):Object(Ue.jsx)("span",{children:"\u1a06"})]}),e.view.checkedOrderKindofGood[e.idx]?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i?Object(Ue.jsxs)("div",{className:"listFilter",id:"listOrderOfGroup",children:[e.book.equipment_types.map((function(t){return Object(Ue.jsx)("div",{className:"rowGropList",onClick:function(){return function(t,n){d?e.changeOrderFormS(n,"kindof_good"):e.setOrderEquipment(t,"kindof_good",n),e.changeBookForm(n,"equipment_type"),c(!1),l(!1),e.changeBookForm("","filter_type")}(e.idx,t)},children:t.title},t.id)})),Object(Ue.jsx)("div",{className:"btmsts",children:o?Object(Ue.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentType(t.target.value),e.changeBookForm(t.target.value,"filter_type"),l(!1))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ue.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0438\u043f"})})]}):null]})})),cr={createEquipmentModel:function(e,t){var n=de.getState(),r=rt({title:t,equipment_subtype_id:n.order.equipments[e].subtype.id,branches:n.data.branches.map((function(e){return e.id})),deleted:!1,filter:{title:t,equipment_subtype_id:n.book.equipment_subtype.id,deleted:n.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.data.url_server+"/equipment_model",r).then((function(e){return e.json()})).then((function(e){e.success?(t({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),t({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setOrderEquipment:xe,resetEquipment:ge,changeOrderFormS:we,addEquipmentModel:vt,changeBookForm:ht},ar=Object(s.b)((function(e){return{order:e.order,book:e.book,permissions:e.data.user.role.permissions}}),cr)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_subtype).length&&e.addEquipmentModel()}),[e.book.equipment_subtype,e.book.filter_model]);var d=e.order.edit,u=d?e.order.model:e.order.equipments[e.idx].model,m=!Object.values(e.book.equipment_subtype).length,p=!!Object.values(u).length,h=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfModel")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfModel")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",h),function(){window.removeEventListener("click",h)}}));return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("button",{className:m?"optionsUnavaliable":"optionsFilterText",id:"optionsOrderTextOfModel",onClick:function(){return c(!0)},disabled:m||p,children:[Object(Ue.jsx)("input",{className:m?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookForm(t.target.value,"filter_model")},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c",value:p?u.title:e.book.filter_model,disabled:m||p}),p&&e.permissions.includes("edit_info_orders")?Object(Ue.jsx)("svg",{className:"icon-close",viewBox:"0 0 22 22",onClick:function(){d?e.changeOrderFormS({},"model"):e.resetEquipment(e.idx,"model"),e.changeBookForm({},"equipment_model")},children:Object(Ue.jsx)("path",{d:M})}):Object(Ue.jsx)("span",{children:"\u1a06"})]}),i&&!m?Object(Ue.jsxs)("div",{className:"listFilter",id:"listOrderOfModel",children:[e.book.equipment_models.map((function(t){return Object(Ue.jsx)("div",{className:"rowGropList",onClick:function(){return function(t,n){d?e.changeOrderFormS(n,"model"):e.setOrderEquipment(t,"model",n),e.changeBookForm(n,"equipment_model"),c(!1),l(!1),e.changeBookForm("","filter_model")}(e.idx,t)},children:t.title},t.id)})),Object(Ue.jsx)("div",{className:"btmsts",children:o?Object(Ue.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentModel(e.idx,t.target.value),e.changeBookForm(t.target.value,"filter_model"),l(!1))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ue.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"})})]}):null]})})),sr=Object(s.b)((function(e){return{}}),{})((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"rowGropList",onClick:e.onClick,onMouseOver:function(){return c(!0)},onMouseOut:function(){return c(!1)},children:e.subtype.title}),i&&e.subtype.url?Object(Ue.jsx)("div",{className:"subtypePicture",children:Object(Ue.jsx)("img",{className:"setSubtypeImg",src:"".concat("","/").concat(e.subtype.url)})}):null]})})),or={cteateEquipmentSubtype:function(e,t){var n=de.getState(),r=rt({title:t,equipment_brand_id:n.order.equipments[e].brand.id,branches:n.data.branches.map((function(e){return e.id})),deleted:!1,filter:{title:t,equipment_brand_id:n.book.equipment_brand.id,deleted:n.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.data.url_server+"/equipment_subtype",r).then((function(e){return e.json()})).then((function(e){e.success?(t({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),t({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setOrderEquipment:xe,resetEquipment:ge,setVisibleListFlag:ve,changeOrderFormS:we,changeBookForm:ht,addEquipmentSubtype:Ot},lr=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),or)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_brand).length&&e.addEquipmentSubtype()}),[e.book.equipment_brand,e.book.filter_subtype]);var d=e.order.edit,u=d?e.order.subtype:e.order.equipments[e.idx].subtype,m=!Object.values(e.book.equipment_brand).length,p=!!Object.values(u).length,h=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfSubtype")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfSubtype")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",h),function(){window.removeEventListener("click",h)}}));return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("button",{className:m?"optionsUnavaliable":"optionsFilterText",id:"optionsOrderTextOfSubtype",onClick:function(){return c(!0)},disabled:m||p,style:e.view.checkedOrderSubtype[e.idx]?null:{borderColor:"red"},children:[Object(Ue.jsx)("input",{className:m?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookForm(t.target.value,"filter_subtype")},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e",value:p?u.title:e.book.filter_subtype,disabled:m||p}),p&&e.permissions.includes("edit_info_orders")?Object(Ue.jsx)("svg",{className:"icon-close",viewBox:"0 0 22 22",onClick:function(){d?(e.changeOrderFormS({},"subtype"),e.changeOrderFormS({},"model")):(e.resetEquipment(e.idx,"subtype"),e.resetEquipment(e.idx,"model")),e.changeBookForm({},"equipment_subtype")},children:Object(Ue.jsx)("path",{d:M})}):Object(Ue.jsx)("span",{children:"\u1a06"})]}),e.view.checkedOrderSubtype[e.idx]?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i&&!m?Object(Ue.jsxs)("div",{className:"listFilter",id:"listOrderOfSubtype",children:[e.book.equipment_subtypes.map((function(t){return Object(Ue.jsx)(sr,{subtype:t,onClick:function(){return function(t,n){d?e.changeOrderFormS(n,"subtype"):e.setOrderEquipment(t,"subtype",n),e.changeBookForm(n,"equipment_subtype"),c(!1),l(!1),e.setVisibleListFlag("checkedOrderSubtype",e.idx,!0),e.changeBookForm("","filter_subtype")}(e.idx,t)}},t.id)})),Object(Ue.jsx)("div",{className:"btmsts",children:o?Object(Ue.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&(e.cteateEquipmentSubtype(e.idx,t.target.value),e.changeBookForm(t.target.value,"filter_subtype"),l(!1))},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ue.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e"})})]}):null]})})),dr=(n(58),{changeOrderForm:ye,addAnotherEquipment:Ee,deleteDevice:Ne}),ur=Object(s.b)((function(e){return{order:e.order,view:e.view,permissions:e.data.user.role.permissions}}),dr)((function(e){return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"formRow mt15",children:[Object(Ue.jsx)("div",{className:"optionsTitle"}),Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u0418\u0437\u0434\u0435\u043b\u0438e \u0438 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c"})]}),e.order.equipments.map((function(t,n){return Object(Ue.jsxs)("div",{className:"orderDevice",children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0422\u0438\u043f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ir,{idx:n})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0411\u0440\u0435\u043d\u0434",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(nr,{idx:n})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(lr,{idx:n})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ar,{idx:n})})]}),Object(Ue.jsx)(er,{idx:n,className:"formRow",title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c",name:"malfunction",onChange:function(t){return e.changeOrderForm(n,"malfunction",t.target.value)},value:e.order.equipments[n].malfunction,checkedFlag:"inputMalfunctionChecked",checked:e.view.inputMalfunctionChecked[n],disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsx)(er,{className:"formRow",title:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f",name:"packagelist",onChange:function(t){return e.changeOrderForm(n,"packagelist",t.target.value)},value:e.order.equipments[n].packagelist,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsx)(er,{className:"formRow",title:"\u0412\u043d\u0435\u0448\u0438\u043d\u0439 \u0432\u0438\u0434",name:"appearance",onChange:function(t){return e.changeOrderForm(n,"appearance",t.target.value)},value:e.order.equipments[n].appearance,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0421\u0440\u043e\u0447\u043d\u043e"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsxs)("div",{className:"checkbox pd-tb-5 al-itm-fs",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(t){return e.changeOrderForm(n,"urgent",t.target.checked)},checked:e.order.equipments[n].urgent}),Object(Ue.jsx)("label",{}),Object(Ue.jsx)("div",{className:"whiteButton simbolBotton pz-r320",onClick:function(){return e.deleteDevice(n)},children:Object(Ue.jsx)("svg",{className:"icon-table-red-basket",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:L})})})]})})]})]},n)})),Object(Ue.jsx)("div",{className:"formRow jc-c",children:Object(Ue.jsx)("div",{className:"fs14 addPhone",onClick:function(){return e.addAnotherEquipment()},children:"+ \u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e"})})]})})),mr={changeOrderForm:ye,addAnotherEquipment:Ee,deleteDevice:Ne,changeOrderFormS:we},pr=Object(s.b)((function(e){return{order:e.order,view:e.view,permissions:e.data.user.role.permissions}}),mr)((function(e){return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"formRow mt15",children:[Object(Ue.jsx)("div",{className:"optionsTitle"}),Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u0418\u0437\u0434\u0435\u043b\u0438e \u0438 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c"})]}),Object(Ue.jsxs)("div",{className:"orderDevice",children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0422\u0438\u043f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ir,{idx:0})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u0411\u0440\u0435\u043d\u0434",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(nr,{idx:0})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsxs)("div",{className:"optionsTitle",children:["\u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(lr,{idx:0})})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ar,{idx:0})})]}),Object(Ue.jsx)(er,{idx:23,className:"formRow",title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c",name:"malfunction",onChange:function(t){return e.changeOrderFormS(t.target.value,"malfunction")},value:e.order.malfunction,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsx)(er,{className:"formRow",title:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f",name:"packagelist",onChange:function(t){return e.changeOrderFormS(t.target.value,"packagelist")},value:e.order.packagelist,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsx)(er,{className:"formRow",title:"\u0412\u043d\u0435\u0448\u0438\u043d\u0439 \u0432\u0438\u0434",name:"appearance",onChange:function(t){return e.changeOrderFormS(t.target.value,"appearance")},value:e.order.appearance,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0421\u0440\u043e\u0447\u043d\u043e"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsxs)("div",{className:"checkbox pd-tb-5 al-itm-fs",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(t){return e.changeOrderFormS(t.target.checked,"urgent")},checked:e.order.urgent,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsx)("label",{})]})})]})]})]})})),hr=function(e){var t=Object(r.useState)(new Date),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(Je.a)(d,2),m=u[0],p=u[1],h=Object(r.useState)(!1),b=Object(Je.a)(h,2),j=b[0],_=b[1],f=function(e){e.path.map((function(e){return e.id})).includes("monthList")||o&&l(!1),e.path.map((function(e){return e.id})).includes("calendar")||j&&_(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",f),function(){window.removeEventListener("click",f)}}));var O=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],v=new Date(i);v.setDate(1),v.setTime(v.getTime()-24*(v.getDay()||7)*60*60*1e3);for(var g=[],x=0;x<42;x++)g[x]=new Date(v.getTime()+864e5),v.setTime(v.getTime()+864e5);return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"dateContaner",onClick:function(){return _(!0)},children:[Object(Ue.jsx)(Xe,{className:"icon-s2 mlr5",icon:"M10 12h4v4h-4zM16 12h4v4h-4zM22 12h4v4h-4zM4 24h4v4h-4zM10 24h4v4h-4zM16 24h4v4h-4zM10 18h4v4h-4zM16 18h4v4h-4zM22 18h4v4h-4zM4 18h4v4h-4zM26 0v2h-4v-2h-14v2h-4v-2h-4v32h30v-32h-4zM28 30h-26v-22h26v22z",color:"gray"}),Object(Ue.jsx)("div",{children:Wt(e.current_date/1e3)})]}),j&&!e.disabled?Object(Ue.jsxs)("div",{className:"calendar",id:"calendar",children:[Object(Ue.jsxs)("div",{className:"calendarNavi",children:[Object(Ue.jsx)("div",{className:"nextB",onClick:function(){return c(new Date(i.setMonth(i.getMonth()-1)))},children:"<"}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{className:"currMonth",onClick:function(){return l(!o)},children:[Object(Ue.jsx)("div",{children:O[i.getMonth()]}),Object(Ue.jsx)("div",{className:"gu",children:"\u1a06"})]}),m?Object(Ue.jsx)("input",{className:"optionFilterInput w30",autoFocus:!0,onChange:function(e){return function(e){var t=e.replace(/[^0-9]/g,"");e>9999&&(t=9999),e<0&&(t=0),c(new Date(i.setFullYear(t)))}(e.target.value)},value:i.getFullYear(),onBlur:function(){return p(!1)}}):Object(Ue.jsx)("div",{className:"pd5",onDoubleClick:function(){return p(!0)},children:i.getFullYear()}),Object(Ue.jsxs)("div",{className:"nextY",children:[Object(Ue.jsx)("div",{className:"gy",onClick:function(){return c(new Date(i.setFullYear(i.getFullYear()+1)))},children:"\u25b2"}),Object(Ue.jsx)("div",{className:"gy",onClick:function(){return c(new Date(i.setFullYear(i.getFullYear()-1)))},children:"\u25bc"})]})]}),Object(Ue.jsx)("div",{className:"nextB",onClick:function(){return c(new Date(i.setMonth(i.getMonth()+1)))},children:">"})]}),o?Object(Ue.jsx)("div",{className:"monthList",id:"monthList",children:O.map((function(e,t){return Object(Ue.jsx)("div",{className:"month",onClick:function(){c(new Date(i.setMonth(t))),l(!o)},children:e},t)}))}):null,Object(Ue.jsx)("div",{className:"row",children:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"].map((function(e,t){return Object(Ue.jsx)("div",{className:"calendarWeekDay",children:e},t)}))}),Object(Ue.jsx)("div",{className:"calendarDays",children:g.map((function(t,n){return Object(Ue.jsx)("div",{className:"calendarDay \n                        ".concat((r=new Date(e.current_date),a=t,r.getDate()===a.getDate()&&r.getMonth()===a.getMonth()&&r.getFullYear()===a.getFullYear()?"settedDay":null),"\n                     "),style:{color:t.getMonth()===i.getMonth()?null:"#aaaaaa"},onClick:function(){e.func(t),c(new Date(t))},children:t.getDate()},n);var r,a}))}),Object(Ue.jsxs)("div",{className:"calandarTime",children:[Object(Ue.jsxs)("div",{className:"mtime",children:[Object(Ue.jsx)("div",{className:"hsm",children:new Date(e.current_date).getHours()}),Object(Ue.jsxs)("div",{className:"ssm",children:[Object(Ue.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setHours(new Date(e.current_date).getHours()+1))},children:"\u25b2"}),Object(Ue.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setHours(new Date(e.current_date).getHours()-1))},children:"\u25bc"})]})]}),":",Object(Ue.jsxs)("div",{className:"mtime",children:[Object(Ue.jsx)("div",{className:"hsm",children:new Date(e.current_date).getMinutes()}),Object(Ue.jsxs)("div",{className:"ssm",children:[Object(Ue.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setMinutes(new Date(e.current_date).getMinutes()+1))},children:"\u25b2"}),Object(Ue.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setMinutes(new Date(e.current_date).getMinutes()-1))},children:"\u25bc"})]})]})]})]}):null]})},br={changeOrderFormS:we},jr=Object(s.b)((function(e){return{ad_campaign:e.data.ad_campaign,order:e.order,permissions:e.data.user.role.permissions}}),br)((function(e){return Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(ln,{id:14,list:e.ad_campaign,setElement:e.changeOrderFormS,field:"ad_campaign_id",current_id:e.order.ad_campaign_id,width:"250px",disabled:!e.permissions.includes("edit_info_orders")})})]}),e.order.edit?Object(Ue.jsx)(pr,{}):Object(Ue.jsx)(ur,{}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle"}),Object(Ue.jsx)("div",{className:"orderFormTitle mt15",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})]}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u0440\u0438\u0435\u043c\u0449\u0438\u043a\u0430"}),Object(Ue.jsx)("div",{className:"blockImput mh",children:Object(Ue.jsx)("textarea",{className:"textInput",name:"manager_notes",onChange:function(t){return e.changeOrderFormS(t.target.value,"manager_notes")},value:e.order.manager_notes,disabled:!e.permissions.includes("edit_info_orders")})})]}),Object(Ue.jsx)(er,{className:"formRow",title:"\u041e\u0440\u0438\u0435\u0442\u043d\u0438\u0440\u043e\u0432\u0430\u0447\u043d\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",name:"estimated_cost",onChange:function(t){return e.changeOrderFormS(t.target.value.replace(/[^0-9]/g,""),"estimated_cost")},value:e.order.estimated_cost,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle",children:"\u0414\u0430\u0442\u0430 \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)(hr,{func:function(t){return e.changeOrderFormS(parseInt(t/1e3),"estimated_done_at")},current_date:1e3*e.order.estimated_done_at,disabled:e.order.status.group>3||!e.permissions.includes("edit_info_orders")})})]})]})})),_r=Object(s.b)((function(e){return{order:e.order,permissions:e.data.user.role.permissions}}),null)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)(Zn,{}),Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("div",{className:"optionsTitle"}),Object(Ue.jsx)("div",{className:"orderFormTitle",children:"\u041a\u043b\u0438\u0435\u043d\u0442"})]}),e.permissions.includes("see_client")?Object.values(e.order.client).length?Object(Ue.jsx)(Kn,{}):Object(Ue.jsx)(Jn,{}):null,Object(Ue.jsx)(jr,{}),Object(Ue.jsx)(zn,{})]})}));function fr(e,t){return{type:"CHANGE_OPERATION_FORM",field:t,value:e}}function Or(){return{type:"RESET_OPERATION"}}function vr(e){var t=de.getState(),n=rt({id:t.operation.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/operations",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(t.data.url_server+"/get_orders",rt({id:t.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var gr={setVisibleFlag:fe,resetOperation:Or,changeOperationForm:fr,createCustomOperation:function(){var e=de.getState(),t=rt({title:e.operation.title,price:e.operation.price||0,amount:e.operation.amount,cost:e.operation.cost||0,discount_value:e.operation.discount_value||0,engineer_id:e.operation.engineer_id,total:e.operation.total||0,comment:e.operation.comment,percent:e.operation.percent,discount:e.operation.discount,warranty_period:e.operation.warranty_period,order_id:e.order.edit,dict_id:null,order_type_id:e.order.order_type_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/operations",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(e.data.url_server+"/get_orders",rt({id:e.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveOperation:function(){var e=de.getState(),t=rt({id:e.operation.edit,title:e.operation.title,price:e.operation.price||0,amount:e.operation.amount,cost:e.operation.cost||0,discount_value:e.operation.discount_value||0,engineer_id:e.operation.engineer_id,total:e.operation.total||0,comment:e.operation.comment,percent:e.operation.percent,discount:e.operation.discount,warranty_period:e.operation.warranty_period,order_id:e.order.edit});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/operations",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(e.data.url_server+"/get_orders",rt({id:e.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteOperation:vr},xr=Object(s.b)((function(e){return{operation:e.operation,view:e.view,employees:e.data.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),gr)((function(e){var t=function(){e.resetOperation(),e.setVisibleFlag("statusOperationEditor",!1),e.setVisibleFlag("inputOperationTitleChacked",!0),e.setVisibleFlag("inputOperationEngineerChacked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("operationEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){var t=e.operation.percent?e.operation.price*e.operation.amount*e.operation.discount/100:e.operation.discount*e.operation.amount;e.changeOperationForm(t,"discount_value")}),[e.operation.discount,e.operation.percent,e.operation.amount]),Object(r.useEffect)((function(){e.changeOperationForm(e.operation.price*e.operation.amount-e.operation.discount_value,"total")}),[e.operation.price,e.operation.discount_value,e.operation.amount]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow mwp",id:"operationEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle fsz20",children:e.operation.edit?e.operation.title:"\u041d\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeOperationForm(t.target.value,"title")},value:e.operation.title,checkedFlag:"inputOperationTitleChacked",checked:e.view.inputOperationTitleChacked,disabled:e.operation.deleted,unvisible:e.operation.edit,redStar:!0}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.operation.price,unit:"\u0440\u0443\u0431.",disabled:e.operation.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(t){return e.changeOperationForm(parseInt(t.target.value.replace(/[^0-9.]/g,"")),"amount")},value:e.operation.amount,unit:" ",disabled:e.operation.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.operation.cost,unit:"\u0440\u0443\u0431.",disabled:e.operation.deleted}),Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9]/g,""),"discount")},value:e.operation.discount,unit:" ",disabled:e.operation.deleted}),Object(Ue.jsx)(rn,{className:"ml30",name:["\u0440\u0443\u0431.","%"],func1:function(){return e.changeOperationForm(!1,"percent")},func2:function(){return e.changeOperationForm(!0,"percent")},disabled:e.operation.deleted})]}),Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9]/g,"")*e.operation.warranty_value,"warranty_period")},value:parseInt(e.operation.warranty_period/e.operation.warranty_value),unit:" ",disabled:e.operation.deleted}),Object(Ue.jsx)(rn,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeOperationForm(86400,"warranty_value")},func2:function(){return e.changeOperationForm(2592e3,"warranty_value")},disabled:e.operation.deleted})]}),Object(Ue.jsx)(ln,{id:24,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",className:"mt15",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),field:"engineer_id",setElement:e.changeOperationForm,current_id:e.operation.engineer_id,employee:!0,width:"250px",checkedFlag:"inputOperationEngineerChacked",checked:e.view.inputOperationEngineerChacked,disabled:e.operation.deleted}),Object(Ue.jsx)(pn,{className:"w250 mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOperationForm(t.target.value,"comment")},value:e.operation.comment,disabled:e.operation.deleted}),Object(Ue.jsxs)("div",{className:"mt15",children:["\u0421\u0443\u043c\u043c\u0430 \u0441\u043a\u0438\u0434\u043a\u0438: ",e.operation.discount_value]}),Object(Ue.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",e.operation.total]})]}),Object(Ue.jsx)($t,{edit:e.operation.edit,deleted:e.operation.deleted,create:function(){e.operation.title&&e.operation.engineer_id?(e.createCustomOperation(),t()):(e.operation.title||e.setVisibleFlag("inputOperationTitleChacked",!1),e.operation.engineer_id||e.setVisibleFlag("inputOperationEngineerChacked",!1))},save:function(){e.operation.title&&e.operation.engineer_id?(e.saveOperation(),t()):(e.operation.title||e.setVisibleFlag("inputOperationTitleChacked",!1),e.operation.engineer_id||e.setVisibleFlag("inputOperationEngineerChacked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteOperation(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteOperation(!1)}:null,close:t})]})})})),yr=function(e){return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsx)("button",{id:e.id,className:e.unvisible?"disabledButton":e.className,onClick:e.onClick,disabled:e.unvisible||e.disabled,children:Object(Ue.jsxs)("div",{className:"row",children:[e.icon?Object(Ue.jsx)(Xe,{icon:e.icon,className:e.iconClassName,color:e.iconColor}):null,e.title?Object(Ue.jsx)("div",{className:"ml5",children:e.title}):null]})})};function Er(){return{type:"RESET_ORDER_PART"}}function Nr(e){var t=de.getState(),n=rt({id:t.orderPart.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/order_parts",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0447\u0430\u0442\u0438 \u0432 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(t.data.url_server+"/get_orders",rt({id:t.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var wr={setVisibleFlag:fe,resetOrderPart:Er,changeOrderPartForm:function(e,t){return{type:"CHANGE_ORDER_PART_FORM",field:t,value:e}},createCustomOrderPart:function(){var e=de.getState(),t=rt({amount:e.orderPart.amount,cost:e.orderPart.cost||0,discount_value:e.orderPart.discount_value||0,engineer_id:e.orderPart.engineer_id,price:e.orderPart.price||0,total:e.orderPart.total||0,title:e.orderPart.title,comment:e.orderPart.comment,deleted:!1,warranty_period:e.orderPart.warranty_period,order_id:e.order.edit,order_type_id:e.order.order_type_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/order_parts",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0447\u0430\u0442\u0438 \u0432 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(e.data.url_server+"/get_orders",rt({id:e.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveOrderPart:function(){var e=de.getState(),t=rt({id:e.orderPart.edit,amount:e.orderPart.amount,cost:e.orderPart.cost||0,discount_value:e.orderPart.discount_value||0,engineer_id:e.orderPart.engineer_id,price:e.orderPart.price||0,total:e.orderPart.total||0,title:e.orderPart.title,comment:e.orderPart.comment,warranty_period:e.orderPart.warranty_period,order_id:e.order.edit});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/order_parts",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0447\u0430\u0442\u0438 \u0432 \u0437\u0430\u043a\u0430\u0437\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(e.data.url_server+"/get_orders",rt({id:e.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteOrderPart:Nr},kr=Object(s.b)((function(e){return{orderPart:e.orderPart,view:e.view,employees:e.data.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),wr)((function(e){var t=function(){e.setVisibleFlag("inputOrderPartEngineerChecked",!0),e.setVisibleFlag("inputOrderPartTitleChacked",!0),e.setVisibleFlag("statusOrderPartEditor",!1),e.resetOrderPart()},n=function(e){e.path.map((function(e){return e.id})).includes("orderPartEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){var t=e.orderPart.percent?e.orderPart.price*e.orderPart.amount*e.orderPart.discount/100:e.orderPart.discount;e.changeOrderPartForm(t,"discount_value")}),[e.orderPart.discount,e.orderPart.percent,e.orderPart.amount]),Object(r.useEffect)((function(){var t=e.orderPart.price*e.orderPart.amount-e.orderPart.discount_value;e.changeOrderPartForm(t,"total")}),[e.orderPart.price,e.orderPart.discount_value,e.orderPart.amount]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow mwp",id:"orderPartEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle fsz20",children:e.orderPart.edit?e.orderPart.title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeOrderPartForm(t.target.value,"title")},value:e.orderPart.title,checkedFlag:"inputOrderPartTitleChacked",checked:e.view.inputOrderPartTitleChacked,disabled:e.orderPart.deleted,unvisible:e.orderPart.edit,redStar:!0}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.orderPart.price,unit:"\u0440\u0443\u0431.",disabled:e.orderPart.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(t){return e.changeOrderPartForm(parseInt(t.target.value.replace(/[^0-9.]/g,"")),"amount")},value:e.orderPart.amount,unit:" ",disabled:e.orderPart.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.orderPart.cost,unit:"\u0440\u0443\u0431.",disabled:e.orderPart.deleted}),Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9]/g,""),"discount")},value:e.orderPart.discount,unit:" ",disabled:e.orderPart.deleted}),Object(Ue.jsx)(rn,{className:"ml30",name:["\u0440\u0443\u0431.","%"],func1:function(){return e.changeOrderPartForm(!1,"percent")},func2:function(){return e.changeOrderPartForm(!0,"percent")},disabled:e.orderPart.deleted})]}),Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9]/g,"")*e.orderPart.warranty_value,"warranty_period")},value:parseInt(e.orderPart.warranty_period/e.orderPart.warranty_value),unit:" ",disabled:e.orderPart.deleted}),Object(Ue.jsx)(rn,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeOrderPartForm(86400,"warranty_value")},func2:function(){return e.changeOrderPartForm(2592e3,"warranty_value")},disabled:e.orderPart.deleted})]}),Object(Ue.jsx)(ln,{id:24,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",className:"mt15",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),field:"engineer_id",setElement:e.changeOrderPartForm,current_id:e.orderPart.engineer_id,employee:!0,width:"250px",checkedFlag:"inputOrderPartEngineerChecked",checked:e.view.inputOrderPartEngineerChecked,disabled:e.orderPart.deleted}),Object(Ue.jsx)(pn,{className:"w250 mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOrderPartForm(t.target.value,"comment")},value:e.orderPart.comment,disabled:e.orderPart.deleted}),Object(Ue.jsxs)("div",{className:"mt15",children:["\u0421\u0443\u043c\u043c\u0430 \u0441\u043a\u0438\u0434\u043a\u0438: ",e.orderPart.discount_value]}),Object(Ue.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",e.orderPart.total]})]}),Object(Ue.jsx)($t,{edit:e.orderPart.edit,deleted:e.orderPart.deleted,create:function(){e.orderPart.title&&e.orderPart.engineer_id?(e.createCustomOrderPart(),t()):(e.orderPart.title||e.setVisibleFlag("inputOrderPartTitleChacked",!1),e.orderPart.engineer_id||e.setVisibleFlag("inputOrderPartEngineerChecked",!1))},save:function(){e.orderPart.title&&e.orderPart.engineer_id?(e.saveOrderPart(),t()):(e.orderPart.title||e.setVisibleFlag("inputOrderPartTitleChacked",!1),e.orderPart.engineer_id||e.setVisibleFlag("inputOrderPartEngineerChecked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteOrderPart(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteOrderPart(!1)}:null,close:t})]})})})),Cr={createOperation:function(e){var t=de.getState(),n=function(e,t){if(t.order.client.discount_service_type){var n=t.data.service_prices.find((function(n){return n.service_id===e.id&&n.discount_margin_id===t.order.client.discount_service_margin_id}));return n?n.cost:0}return e.price}(e,t),r=t.order.client.discount_service_type?e.price-n:e.price*t.order.client.discount_services/100||0,i=rt({amount:1,cost:e.cost||0,discount_value:r,engineer_id:t.operation.engineer_id,price:e.price||0,total:t.order.client.discount_service_type?n:n-r,title:e.title,comment:"",percent:!t.order.client.discount_service_type,discount:t.order.client.discount_service_type?r||0:t.order.client.discount_services,warranty_period:e.warranty_period,order_id:t.order.edit,dict_id:e.id,earnings_percent:e.earnings_percent,earnings_summ:e.earnings_summ,order_type_id:t.order.order_type_id});return function(){var e=Object(m.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/operations",i).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(t.data.url_server+"/get_orders",rt({id:t.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setVisibleFlag:fe},Sr=Object(s.b)((function(e){return{dict_service:e.data.dict_service,statusOperationEditor:e.view.statusOperationEditor,statusOrderPartEditor:e.view.statusOrderPartEditor,status_group:e.order.status.group}}),Cr)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(""),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=e.status_group>3,u=function(e){e.path.map((function(e){return e.id})).includes("listSetWorks")||e.path.map((function(e){return e.id})).includes("setWorks")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",u),function(){window.removeEventListener("click",u)}}));var m=Object(r.useMemo)((function(){return e.dict_service.filter((function(e){return!e.deleted&&e.title.toLowerCase().includes(o.toLowerCase())}))}),[o]);return Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{className:"mt15 w400",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430"}),Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsx)("div",{id:"setWorks",className:"orderInputBox",onClick:function(){return c(!0)},children:Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(e){return l(e.target.value)},velue:o,disabled:d})}),i&&!d?Object(Ue.jsxs)("div",{className:"listFilter",id:"listSetWorks",children:[m.map((function(t){return Object(Ue.jsxs)("div",{className:"rowGropList",onClick:function(){return function(t){e.createOperation(t),c(!1)}(t)},children:[Object(Ue.jsx)("div",{className:"fc-gr",children:t.title}),Object(Ue.jsxs)("div",{className:"fc-gr",children:[t.price," \u0440\u0443\u0431."]})]},t.id)})),Object(Ue.jsxs)("div",{className:"btmsts",children:[Object(Ue.jsx)(yr,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0443",className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusOperationEditor",!0)}}),Object(Ue.jsx)(yr,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043a \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusOrderPartEditor",!0)}})]})]}):null]})]}),e.statusOperationEditor?Object(Ue.jsx)(xr,{}):null,e.statusOrderPartEditor?Object(Ue.jsx)(kr,{}):null,Object(Ue.jsx)("div",{className:"setOrderOr",children:" \u0438\u043b\u0438 "}),Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0422\u043e\u0432\u0430\u0440\u044b/\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u0438"}),Object(Ue.jsxs)("div",{className:"addPartsBox",children:[Object(Ue.jsx)(Xe,{icon:"M0 4h4v20h-4zM6 4h2v20h-2zM10 4h2v20h-2zM16 4h2v20h-2zM24 4h2v20h-2zM30 4h2v20h-2zM20 4h1v20h-1zM14 4h1v20h-1zM27 4h1v20h-1zM0 26h2v2h-2zM6 26h2v2h-2zM10 26h2v2h-2zM20 26h2v2h-2zM30 26h2v2h-2zM24 26h4v2h-4zM14 26h4v2h-4z",className:"icon-s1"}),Object(Ue.jsx)("div",{className:"ml10",children:"\u0421\u043e \u0441\u043a\u043b\u0430\u0434\u0430"})]})]})]})})),Tr={editOperation:function(e){return{type:"EDIT_OPERATION",operation:e}},setVisibleFlag:fe,deleteOperation:vr,resetOperation:Or,changeOrderFormS:we,deleteOrderPart:Nr,editOrderPart:function(e){return{type:"EDIT_ORDER_PART",order_part:e}},resetOrderPart:Er},Fr=Object(s.b)((function(e){return{order:e.order,employees:e.data.employees,permissions:e.data.user.role.permissions}}),Tr)((function(e){var t=e.order.status.group>3||!e.permissions.includes("edit_operations_materials"),n=function(t){e.editOperation(t),e.setVisibleFlag("statusOperationEditor",!0)},r=function(t){e.editOrderPart(t),e.setVisibleFlag("statusOrderPartEditor",!0)};return Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w10"}),Object(Ue.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"w50 tae",children:"\u041a\u043e\u043b-\u0432\u043e"}),Object(Ue.jsx)("th",{className:"w70 tae",children:"\u0426\u0435\u043d\u0430"}),Object(Ue.jsx)("th",{className:"w70 tae",children:"\u0421\u043a\u0438\u0434\u043a\u0430"}),Object(Ue.jsx)("th",{className:"w70 tae",children:"\u0421\u0443\u043c\u043c\u0430"}),Object(Ue.jsx)("th",{})]})}),e.employees.map((function(i){return e.order.operations.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).length||e.order.parts.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).length?Object(Ue.jsxs)("tbody",{children:[Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{className:"txtb",colSpan:"5",children:"".concat(i.first_name," ").concat(i.last_name)})]}),e.order.operations.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).map((function(r){return Object(Ue.jsxs)("tr",{className:"fillcol",onDoubleClick:t?null:function(){return n(r)},children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)(Xe,{className:"icon-s1",icon:"M30 8h-8v-2c0-1.1-0.9-2-2-2h-8c-1.1 0-2 0.9-2 2v2h-8c-1.1 0-2 0.9-2 2v18c0 1.1 0.9 2 2 2h28c1.1 0 2-0.9 2-2v-18c0-1.1-0.9-2-2-2zM12 6.004c0.001-0.001 0.002-0.003 0.004-0.004h7.993c0.001 0.001 0.003 0.002 0.004 0.004v1.996h-8v-1.996zM30 16h-4v3c0 0.55-0.45 1-1 1h-2c-0.55 0-1-0.45-1-1v-3h-12v3c0 0.55-0.45 1-1 1h-2c-0.55 0-1-0.45-1-1v-3h-4v-2h28v2z",color:"#aaa"})}),Object(Ue.jsxs)("td",{children:[r.title,r.comment?" (".concat(r.comment,")"):null]}),Object(Ue.jsx)("td",{className:"tae",children:r.amount}),Object(Ue.jsx)("td",{className:"tae",children:r.price*r.amount}),Object(Ue.jsx)("td",{className:"tae",children:r.discount_value/r.amount}),Object(Ue.jsx)("td",{className:"tae",children:r.total}),Object(Ue.jsx)("td",{children:t?null:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{onClick:function(){return n(r)},children:Object(Ue.jsx)(Xe,{className:"icon-s2 curP ml5",icon:W})}),Object(Ue.jsx)("div",{onClick:function(){return function(t){e.editOperation(t),e.deleteOperation(!0),e.resetOperation()}(r)},children:Object(Ue.jsx)(Xe,{className:"icon-s2 curP ml5",icon:L})})]})})]},r.id)})),e.order.parts.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).map((function(n){return Object(Ue.jsxs)("tr",{className:"fillcol",onDoubleClick:t?null:function(){return r(n)},children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)(Xe,{className:"icon-s1",icon:"M32 18v-2h-6.040c-0.183-2.271-0.993-4.345-2.24-6.008h5.061l2.189-8.758-1.94-0.485-1.811 7.242h-5.459c-0.028-0.022-0.056-0.043-0.084-0.064 0.21-0.609 0.324-1.263 0.324-1.944 0-3.305-2.686-5.984-6-5.984s-6 2.679-6 5.984c0 0.68 0.114 1.334 0.324 1.944-0.028 0.021-0.056 0.043-0.084 0.064h-5.459l-1.811-7.242-1.94 0.485 2.189 8.758h5.061c-1.246 1.663-2.056 3.736-2.24 6.008h-6.040v2h6.043c0.119 1.427 0.485 2.775 1.051 3.992h-3.875l-2.189 8.757 1.94 0.485 1.811-7.243h3.511c1.834 2.439 4.606 3.992 7.708 3.992s5.874-1.554 7.708-3.992h3.511l1.811 7.243 1.94-0.485-2.189-8.757h-3.875c0.567-1.217 0.932-2.565 1.051-3.992h6.043z",color:"#aaa"})}),Object(Ue.jsxs)("td",{children:[n.title,n.comment?" (".concat(n.comment,")"):null]}),Object(Ue.jsx)("td",{className:"tae",children:n.amount}),Object(Ue.jsx)("td",{className:"tae",children:n.price*n.amount}),Object(Ue.jsx)("td",{className:"tae",children:n.discount_value/n.amount}),Object(Ue.jsx)("td",{className:"tae",children:n.total}),Object(Ue.jsx)("td",{children:t?null:Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{onClick:function(){return r(n)},children:Object(Ue.jsx)(Xe,{className:"icon-s2 curP ml5",icon:W})}),Object(Ue.jsx)("div",{onClick:function(){return function(t){e.editOrderPart(t),e.deleteOrderPart(!0),e.resetOrderPart()}(n)},children:Object(Ue.jsx)(Xe,{className:"icon-s2 curP ml5",icon:L})})]})})]},n.id)}))]},i.id):null})),Object(Ue.jsxs)("tbody",{children:[Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{className:"tae",colSpan:"4",children:"\u0418\u0442\u043e\u0433\u043e \u0441\u043a\u0438\u0434\u043a\u0430:"}),Object(Ue.jsx)("td",{className:"tae",children:e.order.discount_sum}),Object(Ue.jsx)("td",{children:"\u0440\u0443\u0431."})]}),Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{className:"tae",colSpan:"4",children:"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430:"}),Object(Ue.jsx)("td",{className:"tae",children:e.order.price}),Object(Ue.jsx)("td",{children:"\u0440\u0443\u0431."})]})]})]})})),Ar=[{id:1,title:"A1",width:"48px",height:"48px",color:"grey"},{id:2,title:"A2",width:"48px",height:"48px",color:"grey"},{id:3,title:"A3",width:"48px",height:"48px",color:"grey"},{id:4,title:"A4",width:"48px",height:"48px",color:"grey"},{id:5,title:"A5",width:"48px",height:"48px",color:"grey"},{id:6,title:"A6",width:"48px",height:"48px",color:"grey"},{id:7,title:"B1",width:"48px",height:"48px",color:"grey"},{id:8,title:"B2",width:"48px",height:"48px",color:"grey"},{id:9,title:"B3",width:"48px",height:"48px",color:"grey"},{id:10,title:"B4",width:"48px",height:"48px",color:"grey"},{id:11,title:"B5",width:"48px",height:"48px",color:"grey"},{id:12,title:"B6",width:"48px",height:"48px",color:"grey"},{id:13,title:"C1",width:"48px",height:"48px",color:"grey"},{id:14,title:"C2",width:"48px",height:"48px",color:"grey"},{id:15,title:"C3",width:"48px",height:"48px",color:"grey"},{id:16,title:"C4",width:"48px",height:"48px",color:"grey"},{id:17,title:"C5",width:"48px",height:"48px",color:"grey"},{id:18,title:"C6",width:"48px",height:"48px",color:"grey"},{id:19,title:"D1",width:"48px",height:"48px",color:"grey"},{id:20,title:"D2",width:"48px",height:"48px",color:"grey"},{id:21,title:"D3",width:"48px",height:"48px",color:"grey"},{id:22,title:"D4",width:"48px",height:"48px",color:"grey"},{id:23,title:"D5",width:"48px",height:"48px",color:"grey"},{id:24,title:"D6",width:"48px",height:"48px",color:"grey"},{id:25,title:"E1",width:"48px",height:"48px",color:"grey"},{id:26,title:"E2",width:"48px",height:"48px",color:"grey"},{id:27,title:"E3",width:"48px",height:"48px",color:"grey"},{id:28,title:"E4",width:"48px",height:"48px",color:"grey"},{id:29,title:"E5",width:"48px",height:"48px",color:"grey"},{id:30,title:"E6",width:"48px",height:"48px",color:"grey"},{id:31,title:"F1",width:"100px",height:"48px",color:"grey"},{id:32,title:"F2",width:"100px",height:"48px",color:"grey"},{id:33,title:"F3",width:"100px",height:"48px",color:"grey"},{id:34,title:"G1",width:"100px",height:"48px",color:"grey"},{id:35,title:"G2",width:"100px",height:"48px",color:"grey"},{id:36,title:"G3",width:"100px",height:"48px",color:"grey"},{id:37,title:"H1",width:"100px",height:"48px",color:"grey"},{id:38,title:"H2",width:"100px",height:"48px",color:"grey"},{id:39,title:"H3",width:"100px",height:"48px",color:"grey"},{id:40,title:"I1",width:"100px",height:"48px",color:"grey"},{id:41,title:"I2",width:"100px",height:"48px",color:"grey"},{id:42,title:"I3",width:"100px",height:"48px",color:"grey"},{id:43,title:"J1",width:"100px",height:"100px",color:"grey"},{id:44,title:"J2",width:"100px",height:"100px",color:"grey"},{id:45,title:"J3",width:"100px",height:"100px",color:"grey"},{id:46,title:"K1",width:"100px",height:"100px",color:"grey"},{id:47,title:"K2",width:"100px",height:"100px",color:"grey"},{id:48,title:"K3",width:"100px",height:"100px",color:"grey"}],Dr={setVisibleFlag:fe,changeOrderFormS:we},Pr=Object(s.b)((function(e){return{}}),Dr)((function(e){var t=function(){e.setVisibleFlag("statusCellEditor",!1)},n=function(e){e.path.map((function(e){return e.id})).includes("cellEditor")||t()};return Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(Ue.jsx)("div",{className:"centerBlock",children:Object(Ue.jsxs)("div",{className:"blockWindow",id:"cellEditor",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0447\u0435\u0439\u043a\u0443"}),Object(Ue.jsx)("div",{className:"cellContainer",children:Ar.map((function(n){return Object(Ue.jsx)("div",{style:{width:n.width,height:n.height,backgroundColor:n.color},className:"cell",onClick:function(){e.changeOrderFormS(n.title,"cell"),t()},children:n.title},n.id)}))})]})})})),Rr={setVisibleFlag:fe},Br=Object(s.b)((function(e){return{order:e.order,statusCellEditor:e.view.statusCellEditor}}),Rr)((function(e){return Object(Ue.jsxs)("div",{className:"mt15",style:{width:"150px"},children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u042f\u0447\u0435\u0439\u043a\u0430"}),Object(Ue.jsxs)("div",{className:"optionsButton",onClick:function(){return e.setVisibleFlag("statusCellEditor",!0)},children:[Object(Ue.jsx)("div",{className:"noWr w100 tac",children:e.order.cell||"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0447\u0435\u0439\u043a\u0443"}),Object(Ue.jsx)("span",{children:"\u1a06"})]}),e.statusCellEditor?Object(Ue.jsx)(Pr,{}):null]})})),Ir={changeOrderFormS:we,changeOperationForm:fr},Lr=Object(s.b)((function(e){return{employees:e.data.employees,order:e.order,current_user_id:e.data.user.id,current_engineer_id:e.operation.engineer_id}}),Ir)((function(e){var t=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_engineers")})),n=t.some((function(t){return t.id===e.current_engineer_id}));return Object(r.useEffect)((function(){var t=e.order.engineer_id&&n?e.order.engineer_id:e.current_user_id;e.changeOperationForm(t,"engineer_id")}),[]),Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsxs)("div",{className:"blockImput",children:[Object(Ue.jsx)(ln,{id:18,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",list:t,setElement:e.changeOperationForm,current_id:n?e.current_engineer_id:0,width:"200px",field:"engineer_id",employee:!0}),Object(Ue.jsx)(Sr,{}),Object(Ue.jsx)(Fr,{}),Object(Ue.jsx)(pn,{className:"mt15",title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",onChange:function(t){return e.changeOrderFormS(t.target.value,"engineer_notes")},value:e.order.engineer_notes}),Object(Ue.jsx)(pn,{className:"mt15",title:"\u0412\u0435\u0440\u0434\u0438\u043a\u0442 / \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOrderFormS(t.target.value,"resume")},value:e.order.resume}),Object(Ue.jsx)(Br,{})]})})})),Mr=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsxs)("div",{className:"row ".concat(e.className),children:[Object(Ue.jsx)("span",{className:"lableImput",children:e.title}),Object(Ue.jsx)("span",{className:"ml5",children:e.text})]})})),Vr={setVisibleFlag:fe,resetPayments:St,deletePayment:function(e){var t=de.getState(),n=rt({id:t.payment.edit,relation_id:t.payment.relation_id?t.payment.relation_id:null,deleted:e});n.method="PUT";var r=rt({custom_created_at:[t.payment.filter_created_at[0],t.payment.filter_created_at[1]+86399],cashbox_id:t.cashbox.current_cashbox.id,tags:t.payment.filter_tags.length?t.payment.filter_tags:null});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/payments",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_payments",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"ADD_DATA",field:"payments",data:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPaymentsCard",value:!1}),i({type:"RESET_PAYMENTS"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return e.next=6,fetch(t.data.url_server+"/get_cashbox",rt()).then((function(e){return e.json()})).then((function(e){e.success?i({type:"ADD_DATA",field:"cashboxes",data:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Gr=Object(s.b)((function(e){return{payment:e.payment,cashboxes:e.data.cashboxes,permissions:e.data.user.role.permissions}}),Vr)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("paymentsCardWiondow")||e.setVisibleFlag("statusPaymentsCard",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow wsp",id:"paymentsCardWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:["\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433","\u0420\u0430\u0441\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433","\u041f\u0440\u0438\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433"][e.payment.direction]}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(Vn,{}),Object(Ue.jsx)(Mr,{className:"mt15",title:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b:",text:e.payment.cashbox.type?"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u0430\u044f":"\u041d\u0430\u043b\u0438\u0447\u043d\u0430\u044f"}),Object(Ue.jsx)(Mr,{className:"mt5",title:"\u041a\u0430\u0441\u0441\u0430:",text:e.payment.cashbox.title}),e.payment.cashflow_category?Object(Ue.jsx)(Mr,{className:"mt5",title:"\u0421\u0442\u0430\u0442\u044c\u044f:",text:e.payment.cashflow_category}):null,Object.values(e.payment.client).length?Object(Ue.jsx)(Mr,{className:"mt5",title:"\u041a\u043b\u0438\u0435\u0442:",text:e.payment.client.name}):null,Object(Ue.jsx)(Mr,{className:"mt5",title:"\u041a\u0430\u0441\u0441\u0438\u0440:",text:e.payment.employee.name})]}),Object(Ue.jsx)($t,{edit:e.payment.edit,delete:e.permissions.includes("delete_payments")?function(){return e.deletePayment(!0)}:null,recover:e.permissions.includes("recover_payments")?function(){return e.deletePayment(!1)}:null,close:function(){e.setVisibleFlag("statusPaymentsCard",!1),e.resetPayments()},deleted:e.payment.deleted})]})})})),qr={setPayment:Ae,setVisibleFlag:fe},Hr=Object(s.b)((function(e){return{order:e.order,statusPaymentsCard:e.view.statusPaymentsCard}}),qr)((function(e){return Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w160",children:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"}),Object(Ue.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"w91 tac",children:"\u0421\u0443\u043c\u043c\u0430"})]})}),Object(Ue.jsxs)("tbody",{children:[e.order.payments.filter((function(e){return!e.deleted})).map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){e.setPayment(t),e.setVisibleFlag("statusPaymentsCard",!0)},children:[Object(Ue.jsxs)("td",{children:[Object(Ue.jsx)("div",{children:t.employee.name}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"cgr",children:Wt(t.custom_created_at)}),t.created_at!==t.custom_created_at?Object(Ue.jsx)("div",{title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(Wt(t.created_at)),children:Object(Ue.jsx)(Xe,{className:"icon-s2 ml5",icon:G,color:"red"})}):null]})]}),Object(Ue.jsx)("td",{children:t.description}),2===t.direction?Object(Ue.jsx)("td",{className:"greenFont tac",children:t.income}):Object(Ue.jsx)("td",{className:"redFont tac",children:t.outcome})]},t.id)})),Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{className:"tae",children:"\u0418\u0442\u043e\u0433\u043e \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439:"}),Object(Ue.jsxs)("td",{className:"tae",children:[e.order.payed," \u0440\u0443\u0431."]})]}),Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{className:"tae",children:"\u0417\u0430\u043a\u0430\u0437 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443:"}),Object(Ue.jsxs)("td",{className:"tae",children:[e.order.price," \u0440\u0443\u0431."]})]}),Object(Ue.jsxs)("tr",{className:"ss",children:[Object(Ue.jsx)("td",{}),Object(Ue.jsx)("td",{className:"tae",children:e.order.missed_payments>0?"\u041a\u043b\u0438\u0435\u043d\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043c:":"\u041c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0443"}),Object(Ue.jsxs)("td",{className:"tae",style:{color:e.order.missed_payments>0?"#5cb85c":"#f74e4d"},children:[Math.abs(e.order.missed_payments)," \u0440\u0443\u0431."]})]})]})]}),e.statusPaymentsCard?Object(Ue.jsx)(Gr,{}):null]})})),Wr={changeVisibleState:Oe,changePaymentState:Ct,editCurrentClient:Fe},Ur=Object(s.b)((function(e){return{employees:e.data.employees,order:e.order,view:e.view,current_user_id:e.data.user.id}}),Wr)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsxs)("div",{className:"row mt15",id:"btorderpay",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430",onClick:function(){e.changePaymentState({direction:2,client_id:e.order.client.id,description:"\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label),cashflow_category:2,employee_id:e.current_user_id,order_id:e.order.edit,context:{type:"order"}}),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})},unvisible:!1,disabled:!1}),Object(Ue.jsx)(yr,{className:"greenButton bcr ml10",title:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430",onClick:function(){e.changePaymentState({direction:1,client_id:e.order.client.id,description:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label),cashflow_category:8,employee_id:e.current_user_id,order_id:e.order.edit,context:{type:"order"}}),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})},unvisible:!1,disabled:!1})]}),Object(Ue.jsx)(Hr,{})]})})),zr=function(e){return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsxs)("div",{className:"checkbox ".concat(e.className),children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:e.onChange,checked:e.checked,disabled:e.disabled}),Object(Ue.jsx)("label",{children:e.label})]})},Yr={setVisibleFlag:fe},Kr=Object(s.b)((function(e){return{order:e.order,checkOrderSticker:e.view.checkOrderSticker}}),Yr)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"blockImput mwmc",children:[Object(Ue.jsx)("div",{className:"row",onClick:function(){return c(!i)},children:Object(Ue.jsxs)("div",{className:"whiteButton",children:[Object(Ue.jsx)(Xe,{icon:"M8 2h16v4h-16v-4z M30 8h-28c-1.1 0-2 0.9-2 2v10c0 1.1 0.9 2 2 2h6v8h16v-8h6c1.1 0 2-0.9 2-2v-10c0-1.1-0.9-2-2-2zM4 14c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM22 28h-12v-10h12v10z",className:"icon-s4 pd1"}),Object(Ue.jsx)(Xe,{icon:Y,className:"icon-s4 pd1"})]})}),i?Object(Ue.jsxs)("div",{className:"listFilter",children:[Object(Ue.jsx)(zr,{label:"\u041f\u0440\u0438\u0435\u043c\u043d\u0430\u044f \u044d\u0442\u0438\u043a\u0435\u0442\u043a\u0430",onChange:function(t){e.setVisibleFlag("checkOrderSticker",t.target.checked),localStorage.setItem("checkOrderSticker",t.target.checked)},checked:e.checkOrderSticker}),Object(Ue.jsx)(yr,{className:"blueButton ml30",title:"\u041f\u0435\u0447\u0430\u0442\u044c",onClick:function(){e.setVisibleFlag("statusOrderSticker",e.checkOrderSticker),c(!1)},unvisible:!e.order.edit})]}):null]})})),Qr=Object(s.b)((function(e){return{order:e.order}}),{})((function(e){return Object(Ue.jsxs)("div",{className:"orderHistory",children:[Object(Ue.jsx)("div",{className:"row",children:Object(Ue.jsx)(Kr,{})}),Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})]})})),Jr={setVisibleFlag:fe,addClients:Zt,addDiscountMargin:Me,setVisibleListFlag:ve,createOrder:function(){var e=de.getState(),t=rt({estimated_done_at:e.order.estimated_done_at,order_type_id:e.order.order_type_id,client_id:e.order.client.id,ad_campaign_id:e.order.ad_campaign_id,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,created_by_id:e.data.user.id,branch_id:e.data.current_branch.id,status_id:1,equipments:e.order.equipments,manager_notes:e.order.manager_notes,estimated_cost:e.order.estimated_cost}),n=rt({sort:e.filter.sort,field_sort:e.filter.field_sort,page:e.filter.page,engineer_id:e.data.user.role.orders_visibility?e.filter.engineer_id:e.filter.engineer_id.concat([e.data.user.id]),overdue:e.filter.overdue,status_id:e.filter.status_id,urgent:e.filter.urgent,order_type_id:e.filter.order_type_id,manager_id:e.filter.manager_id,created_at:e.filter.created_at,kindof_good:e.filter.kindof_good,brand:e.filter.brand,subtype:e.filter.subtype,client_id:e.filter.client_id,search:e.filter.search});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!0});case 2:return i({type:"SET_VISIBLE_FLAG",field:"statusOrderEditor",value:!1}),r.next=5,fetch(e.data.url_server+"/orders",t).then((function(e){return e.json()})).then((function(t){e.view.checkOrderSticker&&(i({type:"EDIT_ORDER",order:t.data}),i({type:"SET_VISIBLE_FLAG",field:"statusOrderSticker",value:!0}))})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 5:return r.next=7,fetch(e.data.url_server+"/get_orders",rt(n)).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"ADD_DATA",field:"ordersShow",data:e.data}),i({type:"ADD_DATA",field:"count",data:e.count}),i({type:"RESET_ORDER"}),i({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!1})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},changeOrderFormS:we,resetOrder:function(){return{type:"RESET_ORDER"}},addDictService:We,saveOrder:function(){var e=de.getState(),t=rt({id:e.order.edit,assigned_at:e.order.assigned_at,duration:e.order.duration,estimated_done_at:e.order.estimated_done_at,scheduled_for:e.order.scheduled_for,warranty_date:e.order.warranty_date,status_deadline:e.order.status_deadline,ad_campaign_id:e.order.ad_campaign_id,client:e.order.client.id,order_type_id:e.order_type_id,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,kindof_good:e.order.kindof_good.id,brand:e.order.brand.id,subtype:e.order.subtype.id,model:e.order.model.id,serial:e.order.serial,malfunction:e.order.malfunction,packagelist:e.order.packagelist,appearance:e.order.appearance,engineer_notes:e.order.engineer_notes,manager_notes:e.order.manager_notes,resume:e.order.resume,cell:e.order.cell,estimated_cost:e.order.estimated_cost,urgent:e.order.urgent});t.method="PUT";var n=rt({sort:e.filter.sort,field_sort:e.filter.field_sort,page:e.filter.page,engineer_id:e.data.user.role.orders_visibility?e.filter.engineer_id:e.filter.engineer_id.concat([e.data.user.id]),overdue:e.filter.overdue,status_id:e.filter.status_id,urgent:e.filter.urgent,order_type_id:e.filter.order_type_id,manager_id:e.filter.manager_id,created_at:e.filter.created_at,kindof_good:e.filter.kindof_good,brand:e.filter.brand,subtype:e.filter.subtype,client_id:e.filter.client_id,search:e.filter.search});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return r.next=4,fetch(e.data.url_server+"/orders",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return r.next=6,fetch(e.data.url_server+"/get_orders",rt({id:e.order.edit})).then((function(e){return e.json()})).then((function(e){e.success?i({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 6:return r.next=8,fetch(e.data.url_server+"/get_orders",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"ADD_ORDERS_SHOW",ordersShow:e.data,count:e.count}),i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},addOrders:mt,resetBookEquipment:bt},Xr=Object(s.b)((function(e){return{filter:e.filter,order:e.order,client:e.client}}),Jr)((function(e){Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name,e.client.filter_phone]),Object(r.useEffect)((function(){e.addDiscountMargin(),e.addDictService(),e.resetBookEquipment()}),[]);var t=function(){e.setVisibleFlag("statusOrderEditor",!1),e.resetOrder(),e.setVisibleFlag("checkedOrderClient",!1),e.setVisibleListFlag("checkedOrderKindofGood",0,!0),e.setVisibleListFlag("checkedOrderBrand",0,!0),e.setVisibleListFlag("checkedOrderSubtype",0,!0)},n=function(e){e.path.map((function(e){return e.id})).includes("createNewOrder")||e.path.map((function(e){return e.id})).includes("paymentsEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"createNewOrder",children:[Object(Ue.jsxs)("div",{className:"cteateNewOrderContent",children:[Object(Ue.jsxs)("div",{className:"createOrderForm",children:[Object(Ue.jsx)(Wn,{}),e.order.edit?Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(An,{list:["\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435","\u0420\u0430\u0431\u043e\u0442\u044b \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b","\u041f\u043b\u0430\u0442\u0435\u0436\u0438"],func:e.changeOrderFormS,tab:e.order.tabs}),0===e.order.tabs?Object(Ue.jsx)(_r,{}):null,1===e.order.tabs?Object(Ue.jsx)(Lr,{}):null,2===e.order.tabs?Object(Ue.jsx)(Ur,{}):null]}):Object(Ue.jsx)(_r,{})]}),Object(Ue.jsx)(Qr,{})]}),Object(Ue.jsx)("div",{className:"boxOrderButtons",children:Object(Ue.jsx)($t,{edit:e.order.edit,create:function(){Object.values(e.order.client).length&&e.order.equipments.every((function(e){return Object.values(e.kindof_good).length&&Object.values(e.brand).length&&Object.values(e.subtype).length&&e.malfunction}))?e.createOrder():(Object.values(e.order.client).length||e.setVisibleFlag("checkedOrderClient",!0),e.order.equipments.forEach((function(t,n){Object.values(t.kindof_good).length||e.setVisibleListFlag("checkedOrderKindofGood",n,!1),Object.values(t.brand).length||e.setVisibleListFlag("checkedOrderBrand",n,!1),Object.values(t.subtype).length||e.setVisibleListFlag("checkedOrderSubtype",n,!1),t.malfunction||e.setVisibleListFlag("inputMalfunctionChecked",n,!1)})))},save:function(){Object.values(e.order.client).length&&Object.values(e.order.kindof_good).length&&Object.values(e.order.brand).length&&Object.values(e.order.subtype).length?e.saveOrder():(Object.values(e.order.client).length||e.setVisibleFlag("checkedOrderClient",!0),Object.values(e.order.kindof_good).length||e.setVisibleListFlag("checkedOrderKindofGood",0,!1),Object.values(e.order.brand).length||e.setVisibleListFlag("checkedOrderBrand",0,!1),Object.values(e.order.subtype).length||e.setVisibleListFlag("checkedOrderSubtype",0,!1))},close:t})})]})})})),Zr=n(62),$r=Object(r.forwardRef)((function(e,t){var n=new Date(1e3*e.order.created_at);return Object(Ue.jsxs)("div",{className:"orderSticker",ref:t,children:[Object(Ue.jsxs)("div",{className:"row fs16",children:[Object(Ue.jsx)("div",{children:"OneTwoService"}),Object(Ue.jsx)("div",{className:"ml30",children:e.order.id_label})]}),Object(Ue.jsx)("div",{className:" ",children:"".concat(n.getDate(),".").concat(n.getMonth(),".").concat(n.getFullYear(),"  \u0413a\u0440\u0430\u043d\u0442\u0438\u044f \u0434\u043e: _____")}),Object(Ue.jsx)("div",{children:e.order.client.name}),Object(Ue.jsx)("div",{children:e.order.malfunction}),Object(Ue.jsx)("div",{children:"\u0420\u0430\u0431\u043e\u0442\u0430/\u0434\u0430\u0442\u0430:______________"}),Object(Ue.jsx)("div",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439_____________"})]})})),ei=Object(s.b)((function(e){return{order:e.order}}),{})((function(e){var t=Object(r.useRef)(),n=Object(Zr.useReactToPrint)({content:function(){return t.current},onAfterPrint:e.onAfterPrint});return Object(r.useEffect)((function(){n()})),Object(Ue.jsx)("div",{style:{display:"none"},children:Object(Ue.jsx)($r,{ref:t,order:e.order})})}));var ti={addOrders:mt,initStatusMenuVisible:function(e){return{type:"INIT_STATUS_MENU_VISIBLE",data:e}},setVisibleFlag:fe,editOrder:function(e){return{type:"EDIT_ORDER",order:e}},changeBookForm:ht},ni=Object(s.b)((function(e){return{ordersShow:e.data.ordersShow,employees:e.data.employees,user:e.data.user,view:e.view,mainFilter:e.filter.mainFilter,permissions:e.data.user.role.permissions}}),ti)((function(e){return Object(r.useEffect)((function(){var t={};e.ordersShow.forEach((function(e){t[e.id]=!1})),e.initStatusMenuVisible(t)}),[e.ordersShow]),e.user.table_headers&&e.employees?Object(Ue.jsxs)("div",{className:"tableOrders",children:[Object(Ue.jsxs)("table",{className:"tableOrders",children:[Object(Ue.jsx)("thead",{className:"tableThead",children:Object(Ue.jsx)("tr",{children:Object.values(e.user.table_headers).map((function(e){return Object(Ue.jsx)(wt,{data:e},e.id)}))})}),Object(Ue.jsx)("tbody",{children:e.ordersShow.map((function(t){return Object(Ue.jsxs)("tr",{className:"orderTableRows",onDoubleClick:function(){return function(t){e.editOrder(t),e.changeBookForm(t.kindof_good,"equipment_type"),e.changeBookForm(t.brand,"equipment_brand"),e.changeBookForm(t.subtype,"equipment_subtype"),e.changeBookForm(t.model,"equipment_model"),e.setVisibleFlag("statusOrderEditor",!0)}(t)},children:[Object(Ue.jsx)(yt,{data:t}),Object(Ue.jsx)(xt,{data:t}),Object(Ue.jsx)(Et,{data:t}),Object(Ue.jsx)(Bt,{data:t}),Object(Ue.jsx)(Jt,{data:t}),Object(Ue.jsx)(It,{data:t}),Object(Ue.jsx)(Lt,{data:t}),Object(Ue.jsx)(Mt,{data:t}),e.permissions.includes("see_client")?Object(Ue.jsx)(Yt,{data:t}):Object(Ue.jsx)("div",{}),Object(Ue.jsx)(Kt,{data:t}),Object(Ue.jsx)(Qt,{data:t})]},t.id)}))})]}),e.view.statusOrderEditor?Object(Ue.jsx)(Xr,{}):null,e.view.statusPaymentsEditor?Object(Ue.jsx)(qn,{}):null,e.view.statusOrderSticker?Object(Ue.jsx)(ei,{onAfterPrint:function(){return e.setVisibleFlag("statusOrderSticker",!1)}}):null]}):Object(Ue.jsx)(gt,{})})),ri={changeFilterState:ct,addClientToTempFilter:function(e){var t=de.getState();return function(n){fetch(t.data.url_server+"/get_clients",rt({id:e})).then((function(e){return e.json()})).then((function(e){e.success?e.count&&n({type:"CHANGE_FILTER_STATE",data:{temp_client:e.data[0]}}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u043b\u0438\u0435\u043d\u0442a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},ii=Object(s.b)((function(e){return{filter:e.filter}}),ri)((function(e){function t(){return(t=Object(m.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.filter.active_filter!==e.data.id?(e.data.filters.client_id&&e.addClientToTempFilter(e.data.filters.client_id[0]),e.changeFilterState(Object(j.a)(Object(j.a)({},e.data.filters),{},{active_filter:e.data.id,active_badge:0,search:"",temp_statuses:e.data.filters.status_id||[],temp_order_types:e.data.filters.order_type_id||[],temp_managers:e.data.filters.manager_id||[],temp_engineers:e.data.filters.engineer_id||[],temp_created_at:e.data.filters.created_at,temp_kindof_good_id:e.data.filters.kindof_good,temp_brand:e.data.filters.brand,temp_subtype:e.data.filters.subtype,temp_client:{}}))):e.changeFilterState({active_filter:0,page:0,engineer_id:null,overdue:null,status_id:null,status_overdue:null,urgent:null,order_type_id:null,manager_id:null,created_at:null,kindof_good:null,brand:null,subtype:null,client_id:null});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(Ue.jsx)("div",{className:"customFilter",onClick:function(){return t.apply(this,arguments)},style:{backgroundColor:e.data.id===e.filter.active_filter?"#eeeeef":"white",opacity:e.data.id===e.filter.active_filter||0===e.filter.active_filter?1:.5},children:e.data.title})})),ci={changeVisibleState:Oe,createCustomFilter:function(){var e=de.getState(),t=rt({title:e.filter.title,general:e.filter.general,employee_id:e.data.user.id,filters:{page:0,engineer_id:e.filter.temp_engineers.length?e.filter.temp_engineers:null,overdue:null,status_id:e.filter.temp_statuses.length?e.filter.temp_statuses:null,status_overdue:null,urgent:null,order_type_id:e.filter.temp_order_types.length?e.filter.temp_order_types:null,manager_id:e.filter.temp_managers.length?e.filter.temp_managers:null,created_at:e.filter.temp_created_at,kindof_good:e.filter.temp_kindof_good_id,brand:e.filter.temp_brand,subtype:e.filter.temp_subtype,client_id:Object.values(e.filter.temp_client).length?[e.filter.temp_client.id]:null}}),n=rt({employee_id:e.data.user.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/custom_filters",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_custom_filters",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data}}),i({type:"CHANGE_VISIBLE_STATE",data:{statusCreateNewFilter:!1}}),i({type:"RESET_DATA_FILTER"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},changeFilterState:ct},ai=Object(s.b)((function(e){return{filter:e.filter,inputFilterTitleChecked:e.view.inputFilterTitleChecked}}),ci)((function(e){var t=function(){e.changeVisibleState({statusCreateNewFilter:!1,inputFilterTitleChecked:!0})},n=function(e){e.path.map((function(e){return e.id})).includes("createNewFilterWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"createNewFilterWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle w515",children:e.filter.active_filter?e.filter.title:"\u041d\u043e\u0432\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeFilterState({title:t.target.value})},value:e.filter.title,checkedFlag:"inputFilterTitleChecked",checked:e.inputFilterTitleChecked,redStar:!0}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041e\u0431\u0449\u0438\u0439",onChange:function(t){return e.changeFilterState({general:t.target.checked})},checked:e.filter.general})]}),Object(Ue.jsx)($t,{edit:e.filter.active_filter,create:function(){e.filter.title?e.createCustomFilter():e.changeVisibleState({inputFilterTitleChecked:!1})},close:t})]})})})),si=Object(s.b)((function(e){return{statuses:e.data.status}}),{})((function(e){var t=Object(r.useRef)(),n=e.statuses.filter((function(t){return t.group===e.group}));Object(r.useEffect)((function(){var r=n.filter((function(t){return e.current_list.includes(t.id)}));r.length===n.length?(t.current.indeterminate=!1,t.current.checked=!0):r.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.current_list]);var i=function(t){e.func(t)};return Object(Ue.jsxs)("div",{className:"chackboxes",children:[Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return i(n.map((function(e){return e.id})))}}),Object(Ue.jsx)("label",{children:e.label})]}),n.map((function(t){return Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(zr,{className:"ml20",labelClassName:"statuses",color:t.color,onChange:function(){return i([t.id])},checked:e.current_list.includes(t.id),unvisible:t.deleted}),Object(Ue.jsx)("div",{className:"statuses",style:{backgroundColor:t.color},children:t.name})]},t.id)}))]})})),oi=Object(s.b)((function(e){return{status_group:e.data.status_group.filter((function(e){return e.type_group<8&&5!==e.type_group})),statuses:e.data.status.filter((function(e){return e.group<8}))}}),{})((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("chooseOfListStatuses")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=e.statuses.map((function(e){return e.id}));return e.unvisible?null:Object(Ue.jsxs)("div",{className:e.className,style:{width:e.width?e.width:"250px"},id:"chooseOfListStatuses",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"}),Object(Ue.jsxs)("div",{className:"optionsButton al-itm-ct",onClick:e.disabled?null:function(){return c(!i)},children:[Object(Ue.jsx)("div",{className:"noWr",children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(e.current_list.length)}),Object(Ue.jsx)(Xe,{icon:i?Y:z,className:"icon-s2",color:"grey"})]}),i?Object(Ue.jsxs)("div",{className:"liststatus",children:[Object(Ue.jsx)("div",{className:"blocList",style:{width:e.width?e.width:"250px"},children:e.status_group.map((function(t){return Object(Ue.jsx)(si,{label:t.name,group:t.type_group,func:function(t){return e.func(t)},current_list:e.current_list},t.id)}))}),Object(Ue.jsxs)("div",{className:"btmsts",children:[Object(Ue.jsx)(yr,{className:"whiteBlueBotton",title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435",onClick:function(){return e.func(s)},disabled:e.current_list.length===s.length}),Object(Ue.jsx)(yr,{className:"whiteBlueBotton",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0435",onClick:function(){return e.func_clear()}})]})]}):null]})})),li=function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("chooseOfList".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=Object(r.useRef)();Object(r.useEffect)((function(){if(s.current){var t=e.list.filter((function(t){return e.checked_list.includes(t.id)}));t.length===e.list.length?(s.current.indeterminate=!1,s.current.checked=!0):t.length?s.current.indeterminate=!0:(s.current.indeterminate=!1,s.current.checked=!1)}}),[e.checked_list,i]);return Object(Ue.jsxs)("div",{style:{width:e.width?e.width:"250px"},id:"chooseOfList".concat(e.id),className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:e.title}),Object(Ue.jsxs)("div",{className:"optionsButton al-itm-ct",onClick:function(){return c(!i)},children:[Object(Ue.jsx)("div",{children:function(t){switch(t){case 0:return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e";case e.list.length:return"\u0412\u0441\u0435";default:return"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(t)}}(e.checked_list.length)}),Object(Ue.jsx)(Xe,{icon:i?Y:z,className:"icon-s2",color:"#282e33"})]}),i?Object(Ue.jsxs)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:[Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{ref:s,type:"checkbox",onChange:function(){return e.func(e.list.map((function(e){return e.id})))},disabled:e.disabled}),Object(Ue.jsx)("label",{children:e.mainLable})]}),e.list.map((function(t){return Object(Ue.jsx)("div",{className:"options",children:Object(Ue.jsx)(zr,{className:"ml10",label:e.employee?"".concat(t.last_name," ").concat(t.first_name):t.title?t.title:t.name,onChange:function(){return e.func([t.id])},checked:e.checked_list.includes(t.id),disabled:e.disabled})},t.id)}))]}):null]})},di=function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("ChooseWithSearch".concat(e.id))||i&&c(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ue.jsxs)("div",{id:"ChooseWithSearch".concat(e.id),style:{width:e.width?e.width:"250px"},className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:e.title}),Object(Ue.jsxs)("button",{className:e.disabled?"optionsUnavaliable":"optionsFilterText",onClick:function(){return c(!0)},disabled:e.disabled||Object.values(e.current_element).length,children:[Object(Ue.jsx)("input",{className:e.disabled?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeFilter(t.target.value)},placeholder:e.placeholder,value:Object.values(e.current_element).length?e.current_element:e.filter,disabled:e.disabled||Object.values(e.current_element).length}),Object.values(e.current_element).length?Object(Ue.jsx)("div",{className:"al-itm-ct",onClick:function(){return e.setElement({})},children:Object(Ue.jsx)(Xe,{icon:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z M21 8l-5 5-5-5-3 3 5 5-5 5 3 3 5-5 5 5 3-3-5-5 5-5z",className:"icon-close"})}):Object(Ue.jsx)(Xe,{icon:i?Y:z,className:"icon-s2"})]}),i?Object(Ue.jsx)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:e.list.map((function(t,n){return Object(Ue.jsx)("div",{className:"options",onClick:function(){e.setElement(t),c(!1)},children:t.title||t.name},n)}))}):null]})},ui={addClients:Zt,resetTempFilter:function(){return{type:"RESET_TEMP_FILTER"}},deleteFilter:function(){var e=de.getState(),t=rt({id:e.filter.active_filter});t.method="DELETE";var n=rt({employee_id:e.data.user.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/custom_filters",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_custom_filters",n).then((function(e){return e.json()})).then((function(e){e.success?i({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data,active_filter:0}}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},selectedFilter:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_FILTER",field:t,value:e,saveToApp:n}},changeFilterState:ct,changeVisibleState:Oe,changeClientState:function(e){return{type:"CHANGE_CLIENT_STATE",data:e}}},mi=Object(s.b)((function(e){return{statusCreateNewFilter:e.view.statusCreateNewFilter,filter:e.filter,order_type:e.data.order_type,employees:e.data.employees.filter((function(e){return!e.deleted})),client:e.client,user:e.data.user,temp_client:e.filter.temp_client}}),ui)((function(e){Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name]);return Object(Ue.jsxs)("div",{className:"setCustomFilter",children:[Object(Ue.jsxs)("div",{className:"row jc-c",children:[Object(Ue.jsxs)("div",{className:"jc-sb w100 m10",children:[Object(Ue.jsx)(oi,{className:"h52",width:"100%",func:function(t){return e.selectedFilter(t,"temp_statuses")},func_clear:function(){return e.changeFilterState({temp_statuses:[]})},current_list:e.filter.temp_statuses}),Object(Ue.jsx)(di,{id:"filterClient",className:"mt15 h52",width:"100%",title:"\u041a\u043b\u0438\u0435\u043d\u0442",list:e.client.clients,current_element:Object.values(e.temp_client).length?e.temp_client.name:"",setElement:function(t){return e.changeFilterState({temp_client:t})},filter:e.client.filter_name,changeFilter:function(t){return e.changeClientState({filter_name:t})},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",disabled:!1})]}),Object(Ue.jsxs)("div",{className:"jc-sb w100 m10",children:[Object(Ue.jsx)(li,{id:"idTypeOrders",className:"h52",width:"100%",title:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430",mainLable:"\u0412\u0441\u0435",list:e.order_type,checked_list:e.filter.temp_order_types,func:function(t){return e.selectedFilter(t,"temp_order_types")}}),Object(Ue.jsx)(li,{id:"idManagerOrders",className:"h52 mt15",width:"100%",title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",mainLable:"\u0412\u0441\u0435",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_managers")})),employee:!0,checked_list:e.filter.temp_managers,func:function(t){return e.selectedFilter(t,"temp_managers")}})]}),Object(Ue.jsx)("div",{className:"jc-sb w100 m10",children:Object(Ue.jsx)(li,{id:"idEngineerOrders",className:"h52 mt15",width:"100%",title:"\u0418\u043d\u0436\u0435\u043d\u0435\u0440",mainLable:"\u0412\u0441\u0435",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),employee:!0,checked_list:e.filter.temp_engineers,func:function(t){return e.selectedFilter(t,"temp_engineers")},disabled:!e.user.role.orders_visibility})})]}),Object(Ue.jsxs)("div",{className:"buttons fs14 mt15",children:[Object(Ue.jsx)(yr,{className:"blueButton",title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",onClick:function(){var t={page:0,engineer_id:e.filter.temp_engineers.length?e.filter.temp_engineers:null,overdue:null,status_id:e.filter.temp_statuses.length?e.filter.temp_statuses:null,status_overdue:null,urgent:null,order_type_id:e.filter.temp_order_types.length?e.filter.temp_order_types:null,manager_id:e.filter.temp_managers.length?e.filter.temp_managers:null,created_at:e.filter.temp_created_at,kindof_good:e.filter.temp_kindof_good_id,brand:e.filter.temp_brand,subtype:e.filter.temp_subtype,client_id:Object.values(e.filter.temp_client).length?[e.filter.temp_client.id]:null,active_badge:0,active_filter:0};e.changeFilterState(t)}}),e.filter.active_filter?Object(Ue.jsx)(yr,{className:"whiteButton bcr",icon:L,iconClassName:"icon-s1 pd1",iconColor:"white",onClick:function(){return e.deleteFilter()}}):Object(Ue.jsx)(yr,{className:"whiteButton",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",onClick:function(){return e.changeVisibleState({statusCreateNewFilter:!0})}}),Object(Ue.jsx)(yr,{className:"whiteButton",title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u044b",onClick:function(){return e.resetTempFilter()},icon:"M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z",iconClassName:"icon-sm8",iconColor:"#282e33"})]}),e.statusCreateNewFilter?Object(Ue.jsx)(ai,{}):null]})})),pi={setVisibleFlag:fe,changeOrderFormS:we,changeFilterState:ct},hi=Object(s.b)((function(e){return{customFilters:e.filter.customFilters,statusSetCustomFilter:e.view.statusSetCustomFilter,permissions:e.data.user.role.permissions,statusOrderEditor:e.view.statusOrderEditor,user:e.data.user,edit:e.order.edit}}),pi)((function(e){return Object(Ue.jsxs)("div",{className:"mainCustomPanel ",children:[Object(Ue.jsxs)("div",{className:"customPanel",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0417\u0430\u043a\u0430\u0437",onClick:function(){e.changeOrderFormS(e.user.id,"manager_id"),e.setVisibleFlag("statusOrderEditor",!0)},unvisible:!e.permissions.includes("create_orders")}),Object(Ue.jsxs)("div",{className:"customFilters",children:[Object(Ue.jsx)(yr,{className:"customFilter",title:"\u0424\u0438\u043b\u044c\u0442\u0440",onClick:function(){e.setVisibleFlag("statusSetCustomFilter","change"),e.changeFilterState({active_badge:0,active_filter:0})},unvisible:!1,icon:"M16 0c-8.837 0-16 2.239-16 5v3l12 12v10c0 1.105 1.791 2 4 2s4-0.895 4-2v-10l12-12v-3c0-2.761-7.163-5-16-5zM2.95 4.338c0.748-0.427 1.799-0.832 3.040-1.171 2.748-0.752 6.303-1.167 10.011-1.167s7.262 0.414 10.011 1.167c1.241 0.34 2.292 0.745 3.040 1.171 0.494 0.281 0.76 0.519 0.884 0.662-0.124 0.142-0.391 0.38-0.884 0.662-0.748 0.427-1.8 0.832-3.040 1.171-2.748 0.752-6.303 1.167-10.011 1.167s-7.262-0.414-10.011-1.167c-1.24-0.34-2.292-0.745-3.040-1.171-0.494-0.282-0.76-0.519-0.884-0.662 0.124-0.142 0.391-0.38 0.884-0.662z",iconClassName:"icon-s2",iconColor:"282e33"}),e.customFilters.map((function(e){return Object(Ue.jsx)(ii,{data:e},e.id)}))]}),Object(Ue.jsxs)("div",{className:"chooseFieldButton",onClick:function(){return console.log('ckick on "set table"')},children:[Object(Ue.jsx)("div",{className:"cl11",children:Object(Ue.jsx)(Xe,{icon:H,className:"icon-table"})}),Object(Ue.jsx)("div",{className:"cl12",children:Object(Ue.jsx)(Xe,{icon:Y,className:"icon-table mt5"})})]})]}),e.statusSetCustomFilter?Object(Ue.jsx)(mi,{}):null]})}));var bi={addOrders:mt,addStatusGroup:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_status_group",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_STATUS_GROUP",status_group:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0433\u0440\u0443\u043f\u043f \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addCustomFilters:function(){var e=de.getState(),t=rt({employee_id:e.data.user.id});return function(n){fetch(e.data.url_server+"/get_custom_filters",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data}}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addAdCampaign:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_ad_campaign",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_AD_CAMPAIGN",ad_campaign:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addEquipment:Le,addBadges:function(){var e=de.getState(),t=rt({employee_access:e.data.user.role.orders_visibility?null:e.data.user.id});return function(n){fetch(e.data.url_server+"/bagges",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_FILTER_STATE",data:{badges:e.data}}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 temple \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeFilterState:ct,changeFilterForm:function(e,t){return{type:"CHANGE_FILTER_FORM",field:t,value:e}}},ji=Object(s.b)((function(e){return{filter:e.filter,count:e.data.count,ordersShow:e.data.ordersShow,statusOrderLoader:e.view.statusOrderLoader}}),bi)((function(e){return Object(r.useEffect)((function(){e.addOrders()}),[e.filter.sort,e.filter.field_sort,e.filter.page,e.filter.engineer_id,e.filter.overdue,e.filter.status_id,e.filter.status_overdue,e.filter.urgent,e.filter.order_type_id,e.filter.manager_id,e.filter.created_at,e.filter.kindof_good,e.filter.brand,e.filter.subtype,e.filter.client_id,e.filter.search]),Object(r.useEffect)((function(){e.addStatusGroup(),e.addCustomFilters(),e.addAdCampaign()}),[]),Object(r.useEffect)((function(){e.addBadges()}),[]),Object(Ue.jsxs)("div",{className:"pageContent",children:[Object(Ue.jsx)(ot,{oderSearch:""}),Object(Ue.jsx)(ut,{}),Object(Ue.jsx)(hi,{}),e.ordersShow?Object(Ue.jsx)(ni,{}):Object(Ue.jsx)(gt,{}),Object(Ue.jsxs)("div",{className:"tableAllPage",children:[Object(Ue.jsx)(nt.a,{pageCount:e.count%50>0?e.count/50:e.count/50-1,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(t){var n=t.selected?t.selected:0;e.changeFilterState({page:n})},forcePage:e.page,previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"pages-pagination",containerClassName:"pagination",pageClassName:"pages-pagination",activeClassName:"active",nextClassName:"pages-pagination",previousClassName:"pages-pagination"}),Object(Ue.jsxs)("div",{className:"tablePageCount",children:["\u0412\u0441\u0435\u0433\u043e - ",e.count]})]}),e.statusOrderLoader?Object(Ue.jsx)(gt,{className:"orderLoader"}):null]})})),_i=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),fi=function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://onetwoonline.moizvonki.ru/api/v1",t={user_name:"stasmen66@gmail.com",api_key:"1zww7we8zoq53rm32cmewjnjx683asms",action:"calls.send_sms",to:"79002888475",text:"\u0411\u0440\u0430\u0442 \u043f\u0440\u0438\u0432\u0435\u0442!"},e.prev=2,n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Content-Length":"2"},body:JSON.stringify(t)},e.next=6,fetch("https://onetwoonline.moizvonki.ru/api/v1",n).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"}),Object(Ue.jsx)("button",{onClick:function(){!function(){e.apply(this,arguments)}()},className:"dataDownload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})},Oi=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),vi={activeCashbox:function(e){return{type:"ACTIVE_CASHBOX",id:e}},editCashbox:function(e){return{type:"EDIT_CASHBOX",cashbox:e}},changeCashboxForm:Ce,changePaymentState:Ct,changeVisibleState:Oe},gi=Object(s.b)((function(e){return{user:e.data.user,activ_cashbox_id:e.cashbox.current_cashbox.id}}),vi)((function(e){var t=function(t){return t===e.activ_cashbox_id},n=e.user.role.permissions.includes("edit_cash"),r=e.user.role.permissions.includes("make_income")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("incoming"):e.cashbox.employees[e.user.id].permissions.includes("incoming")),i=e.user.role.permissions.includes("make_expenditure")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("outcoming"):e.cashbox.employees[e.user.id].permissions.includes("outcoming")),c=e.user.role.permissions.includes("move_money")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("outcoming_move"):e.cashbox.employees[e.user.id].permissions.includes("outcoming_move")),a=e.user.role.permissions.includes("see_remains")&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("show_cashbox_remains"):e.cashbox.employees[e.user.id].permissions.includes("show_cashbox_remains"));return Object(Ue.jsxs)("div",{className:"cashbox ".concat(t(e.cashbox.id)&&!e.cashbox.deleted?"bcg":"cgr"),onClick:function(){return e.changeCashboxForm(e.cashbox,"current_cashbox")},children:[Object(Ue.jsxs)("div",{className:"icons",children:[Object(Ue.jsx)("div",{children:Object(Ue.jsx)(Xe,{className:"smalIcon",icon:"M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM23.487 22c0.268-1.264 0.437-2.606 0.492-4h3.983c-0.104 1.381-0.426 2.722-0.959 4h-3.516zM6.513 12c-0.268 1.264-0.437 2.606-0.492 4h-3.983c0.104-1.381 0.426-2.722 0.959-4h3.516zM21.439 12c0.3 1.28 0.481 2.62 0.54 4h-5.979v-4h5.439zM16 10v-5.854c0.456 0.133 0.908 0.355 1.351 0.668 0.831 0.586 1.625 1.488 2.298 2.609 0.465 0.775 0.867 1.638 1.203 2.578h-4.852zM10.351 7.422c0.673-1.121 1.467-2.023 2.298-2.609 0.443-0.313 0.895-0.535 1.351-0.668v5.854h-4.852c0.336-0.94 0.738-1.803 1.203-2.578zM14 12v4h-5.979c0.059-1.38 0.24-2.72 0.54-4h5.439zM2.997 22c-0.533-1.278-0.854-2.619-0.959-4h3.983c0.055 1.394 0.224 2.736 0.492 4h-3.516zM8.021 18h5.979v4h-5.439c-0.3-1.28-0.481-2.62-0.54-4zM14 24v5.854c-0.456-0.133-0.908-0.355-1.351-0.668-0.831-0.586-1.625-1.488-2.298-2.609-0.465-0.775-0.867-1.638-1.203-2.578h4.852zM19.649 26.578c-0.673 1.121-1.467 2.023-2.298 2.609-0.443 0.312-0.895 0.535-1.351 0.668v-5.854h4.852c-0.336 0.94-0.738 1.802-1.203 2.578zM16 22v-4h5.979c-0.059 1.38-0.24 2.72-0.54 4h-5.439zM23.98 16c-0.055-1.394-0.224-2.736-0.492-4h3.516c0.533 1.278 0.855 2.619 0.959 4h-3.983zM25.958 10h-2.997c-0.582-1.836-1.387-3.447-2.354-4.732 1.329 0.636 2.533 1.488 3.585 2.54 0.671 0.671 1.261 1.404 1.766 2.192zM5.808 7.808c1.052-1.052 2.256-1.904 3.585-2.54-0.967 1.285-1.771 2.896-2.354 4.732h-2.997c0.504-0.788 1.094-1.521 1.766-2.192zM4.042 24h2.997c0.583 1.836 1.387 3.447 2.354 4.732-1.329-0.636-2.533-1.488-3.585-2.54-0.671-0.671-1.261-1.404-1.766-2.192zM24.192 26.192c-1.052 1.052-2.256 1.904-3.585 2.54 0.967-1.285 1.771-2.896 2.354-4.732h2.997c-0.504 0.788-1.094 1.521-1.766 2.192z",color:t(e.cashbox.id)&&e.cashbox.isGlobal?"grey":"white"})}),Object(Ue.jsx)("div",{onClick:n?function(){e.editCashbox(e.cashbox),e.changeVisibleState({statusCashboxEditor:!0})}:null,children:Object(Ue.jsx)(Xe,{className:"smalIcon curP",icon:"M29.181 19.070c-1.679-2.908-0.669-6.634 2.255-8.328l-3.145-5.447c-0.898 0.527-1.943 0.829-3.058 0.829-3.361 0-6.085-2.742-6.085-6.125h-6.289c0.008 1.044-0.252 2.103-0.811 3.070-1.679 2.908-5.411 3.897-8.339 2.211l-3.144 5.447c0.905 0.515 1.689 1.268 2.246 2.234 1.676 2.903 0.672 6.623-2.241 8.319l3.145 5.447c0.895-0.522 1.935-0.82 3.044-0.82 3.35 0 6.067 2.725 6.084 6.092h6.289c-0.003-1.034 0.259-2.080 0.811-3.038 1.676-2.903 5.399-3.894 8.325-2.219l3.145-5.447c-0.899-0.515-1.678-1.266-2.232-2.226zM16 22.479c-3.578 0-6.479-2.901-6.479-6.479s2.901-6.479 6.479-6.479c3.578 0 6.479 2.901 6.479 6.479s-2.901 6.479-6.479 6.479z",color:t(e.cashbox.id)&&n?"grey":"white"})})]}),Object(Ue.jsx)("div",{children:e.cashbox.title.toUpperCase()}),a?Object(Ue.jsx)("div",{className:"cacsboxBalance",children:"".concat(parseFloat(e.cashbox.balance).toFixed(2)," \u0440\u0443\u0431.")}):null,Object(Ue.jsxs)("div",{className:"row jc-c",children:[Object(Ue.jsx)(yr,{title:"+ \u041f\u0440\u0438\u0445\u043e\u0434",className:e.cashbox.deleted?"whiteButton m10":"greenButton m10",onClick:function(){e.changePaymentState({direction:2,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,unvisible:!r}),Object(Ue.jsx)(yr,{id:"344",title:"- \u0420\u0430\u0441\u0445\u043e\u0434",className:e.cashbox.deleted?"whiteButton m10":"greenButton bcr m10",onClick:function(){e.changePaymentState({direction:1,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,unvisible:!i})]}),Object(Ue.jsx)(yr,{title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",className:"whiteButton",onClick:function(){e.changePaymentState({direction:0,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,unvisible:!c})]})})),xi=function(e){return Object(Ue.jsxs)("div",{className:"warningOrange",style:{width:e.width},children:[Object(Ue.jsx)("div",{children:Object(Ue.jsx)(Xe,{icon:G,color:"#efac4e"})}),Object(Ue.jsx)("div",{className:"ml10",children:e.text})]})},yi={setVisibleFlag:fe,changeEmployeeSelected:function(e,t){return{type:"CHOOSE_EMPLOYEE_SELECTED",value:e,field:t}},changeCashboxPermissions:Se},Ei=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,cashbox:e.cashbox}}),yi)((function(e){var t=Object(r.useState)(e.cashbox.employees[e.cashbox.permissions_employee].like_cashbox),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("cashboxEmployeeEditor")||e.setVisibleFlag("statusCashboxEmployeeEditor",!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ue.jsx)("div",{className:"centerBlock",children:Object(Ue.jsxs)("div",{className:"blockWindow",id:"cashboxEmployeeEditor",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"".concat(e.employee.last_name," ").concat(e.employee.first_name)}),Object(Ue.jsx)("div",{className:"createNewTitle mt0",children:e.employee.role_title}),Object(Ue.jsx)(xi,{text:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0435\u0433\u043e \u0440\u043e\u043b\u0438",width:"500px"}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430",name:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u043a\u0430\u0441\u0441\u044b","\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435"],func1:function(){c(!0),e.changeCashboxPermissions(!0,"like_cashbox")},func2:function(){c(!1),e.changeCashboxPermissions(!1,"like_cashbox")},checked:e.cashbox.employees[e.cashbox.permissions_employee].like_cashbox,disabled:e.cashbox.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435",onChange:function(){return e.changeCashboxPermissions("show_cashbox_remains","permissions")},checked:i?e.cashbox.permissions.includes("show_cashbox_remains"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("show_cashbox_remains"),disabled:e.cashbox.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a",onChange:function(){return e.changeCashboxPermissions("show_cash_flow","permissions")},checked:i?e.cashbox.permissions.includes("show_cash_flow"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("show_cash_flow"),disabled:e.cashbox.deleted||i}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.changeCashboxPermissions("incoming","permissions")},checked:i?e.cashbox.permissions.includes("incoming"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("incoming"),disabled:e.cashbox.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeCashboxPermissions("incoming_move","permissions")},checked:i?e.cashbox.permissions.includes("incoming_move"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("incoming_move"),disabled:e.cashbox.deleted||i})]}),Object(Ue.jsxs)("div",{className:"ml30",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.changeCashboxPermissions("outcoming","permissions")},checked:i?e.cashbox.permissions.includes("outcoming"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("outcoming"),disabled:e.cashbox.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeCashboxPermissions("outcoming_move","permissions")},checked:i?e.cashbox.permissions.includes("outcoming_move"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("outcoming_move"),disabled:e.cashbox.deleted||i})]})]}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"blueButton mr-lf-0",onClick:function(){return e.setVisibleFlag("statusCashboxEmployeeEditor",!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Ue.jsx)("div",{className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusCashboxEmployeeEditor",!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})})),Ni={setVisibleFlag:fe,editEmoloyee:je,changeCashboxForm:Ce,changeCashboxPermissions:Se},wi=Object(s.b)((function(e){return{employees:e.data.employees.filter((function(e){return!e.deleted&&0!==e.id})),cashbox:e.cashbox,statusCashboxEmployeeEditor:e.view.statusCashboxEmployeeEditor}}),Ni)((function(e){return Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w15"}),Object(Ue.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ue.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0430"})]})}),Object(Ue.jsx)("tbody",{children:e.employees.map((function(t){return Object(Ue.jsxs)("tr",{onDoubleClick:function(){return function(t){e.changeCashboxForm(t.id,"permissions_employee"),e.editEmoloyee(t),e.setVisibleFlag("statusCashboxEmployeeEditor",!0)}(t)},children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)(zr,{onChange:function(n){return r=t.id,i=n.target.checked,e.changeCashboxForm(r,"permissions_employee"),void e.changeCashboxPermissions(i,"available");var r,i},checked:e.cashbox.employees[t.id].available,disabled:e.cashbox.deleted})}),Object(Ue.jsx)("td",{children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ue.jsx)("td",{children:e.cashbox.employees[t.id].available?e.cashbox.employees[t.id].like_cashbox?"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u043a\u0430\u0441\u0441\u044b":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"})]},t.id)}))})]}),e.statusCashboxEmployeeEditor?Object(Ue.jsx)(Ei,{}):null]})})),ki={changeCashboxForm:Ce,chooseCashboxSelected:function(e,t){return{type:"CHOOSE_CASHBOX_SELECTED",id:e,field:t}}},Ci=Object(s.b)((function(e){return{cashbox:e.cashbox,view:e.view}}),ki)((function(e){return Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeCashboxForm(t.target.value,"title")},value:e.cashbox.title,checkedFlag:"inputCashboxTitleChecked",checked:e.view.inputCashboxTitleChecked,redStar:!0,disabled:e.cashbox.deleted}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u0422\u0438\u043f",name:["\u041a\u0430\u0441\u0441\u0430 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u041a\u0430\u0441\u0441\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"],func1:function(){return e.changeCashboxForm(!0,"isGlobal")},func2:function(){return e.changeCashboxForm(!1,"isGlobal")},disabled:e.cashbox.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0441\u0441\u0430",onChange:function(t){return e.changeCashboxForm(t.target.checked,"isVirtual")},checked:e.cashbox.isVirtual,disabled:e.cashbox.deleted}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0440\u0430\u0441\u0447\u0435\u0442\u0430",name:["\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439","\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"],func1:function(){return e.changeCashboxForm(0,"type")},func2:function(){return e.changeCashboxForm(1,"type")},checked:!0,disabled:e.cashbox.deleted}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043a\u0430\u0441\u0441\u043e\u0439"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435",onChange:function(){return e.chooseCashboxSelected(["show_cashbox_remains"],"permissions")},checked:e.cashbox.permissions.includes("show_cashbox_remains"),disabled:e.cashbox.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a",onChange:function(){return e.chooseCashboxSelected(["show_cash_flow"],"permissions")},checked:e.cashbox.permissions.includes("show_cash_flow"),disabled:e.cashbox.deleted}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.chooseCashboxSelected(["incoming"],"permissions")},checked:e.cashbox.permissions.includes("incoming"),disabled:e.cashbox.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseCashboxSelected(["incoming_move"],"permissions")},checked:e.cashbox.permissions.includes("incoming_move"),disabled:e.cashbox.deleted})]}),Object(Ue.jsxs)("div",{className:"ml30",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.chooseCashboxSelected(["outcoming"],"permissions")},checked:e.cashbox.permissions.includes("outcoming"),disabled:e.cashbox.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseCashboxSelected(["outcoming_move"],"permissions")},checked:e.cashbox.permissions.includes("outcoming_move"),disabled:e.cashbox.deleted})]})]})]})})),Si={changeCashboxForm:Ce,setVisibleFlag:fe,createCashbox:function(){var e=de.getState(),t=ue({title:e.cashbox.title,balance:e.cashbox.balance,type:e.cashbox.type,isGlobal:e.cashbox.isGlobal,isVirtual:e.cashbox.isVirtual,deleted:e.cashbox.deleted,permissions:e.cashbox.permissions,employees:e.cashbox.employees,branch_id:e.data.current_branch.id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/cashbox",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_cashbox",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"cashboxes",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCashboxEditor",value:!1}),r({type:"RESET_CASHBOX"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEditCashbox:function(){var e=de.getState(),t=ue({id:e.cashbox.edit,title:e.cashbox.title,balance:e.cashbox.balance,type:e.cashbox.type,isGlobal:e.cashbox.isGlobal,isVirtual:e.cashbox.isVirtual,deleted:e.cashbox.deleted,permissions:e.cashbox.permissions,employees:e.cashbox.employees,branch_id:e.data.current_branch.id});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/cashbox",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_cashbox",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"cashboxes",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCashboxEditor",value:!1}),r({type:"RESET_CASHBOX"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteCashbox:function(e){var t=de.getState(),n=ue({id:t.cashbox.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/cashbox",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_cashbox",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"cashboxes",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCashboxEditor",value:!1}),r({type:"RESET_CASHBOX"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ti=Object(s.b)((function(e){return{cashbox:e.cashbox,employees:e.data.employees,view:e.view,permissions:e.data.user.role.permissions}}),Si)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("cashboxEditorWiondow")||e.setVisibleFlag("statusCashboxEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(r.useEffect)((function(){if(!e.cashbox.edit){var t={};e.employees.filter((function(e){return!e.deleted})).forEach((function(e){t[e.id]={},t[e.id].available=!0,t[e.id].like_cashbox=!0,t[e.id].permissions=C})),e.changeCashboxForm(t,"employees")}}),[]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow wmn500",id:"cashboxEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.cashbox.edit?e.cashbox.title:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0441\u0441\u0430"}),Object(Ue.jsx)(An,{list:["\u041e\u0431\u0449\u0438\u0435","\u0414\u043ec\u0442\u0443\u043f"],func:e.changeCashboxForm,tab:e.cashbox.tabs_editor,tab_field:"tabs_editor"}),0===e.cashbox.tabs_editor?Object(Ue.jsx)(Ci,{}):null,1===e.cashbox.tabs_editor?Object(Ue.jsx)(wi,{}):null,Object(Ue.jsx)($t,{edit:e.cashbox.edit,create:function(){e.cashbox.title?e.createCashbox():e.cashbox.title||e.setVisibleFlag("inputCashboxTitleChecked",!1)},save:function(){e.cashbox.title?e.seveEditCashbox():e.cashbox.title||e.setVisibleFlag("inputCashboxTitleChecked",!1)},delete:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!0)}:null,recover:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!1)}:null,close:function(){return e.setVisibleFlag("statusCashboxEditor",!1)},deleted:e.cashbox.deleted})]})})})),Fi={setVisibleFlag:fe,setPayment:Ae},Ai=Object(s.b)((function(e){return{payments:e.data.payments,employees:e.data.employees,user:e.data.user,current_cashbox:e.cashbox.current_cashbox}}),Fi)((function(e){var t=Object(r.useState)(0),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(0),s=Object(Je.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){var t=0,n=0;e.payments.filter((function(e){return!e.deleted})).forEach((function(e){t+=e.income,n+=e.outcome})),c(t),l(n)}),[e.payments]);var d=function(){var t=!1;return Object.values(e.current_cashbox).length&&(t=e.current_cashbox.employees[e.user.id].like_cashbox?e.current_cashbox.permissions.includes("show_cashbox_remains"):e.current_cashbox.employees[e.user.id].permissions.includes("show_cashbox_remains")),t&&e.user.role.permissions.includes("see_remains")},u=e.payments.filter((function(t){return e.showDeleted||!t.deleted}));return Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{className:"",children:[Object(Ue.jsx)("th",{className:"w150",children:"\u0421\u043e\u0437\u0434\u0430\u043d"}),Object(Ue.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"w91",children:"\u041f\u0440\u0438\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ue.jsx)("th",{className:"w91",children:"\u0420\u0430\u0441\u0445\u043e\u0434, \u0440\u0443\u0431."}),d()?Object(Ue.jsx)("th",{className:"w91",children:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a, \u0440\u0443\u0431."}):null]})}),Object(Ue.jsxs)("tbody",{children:[u.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){e.setPayment(t),e.setVisibleFlag("statusPaymentsCard",!0)},children:[Object(Ue.jsxs)("td",{children:[Object(Ue.jsx)("div",{children:t.employee.name}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"cgr",children:Wt(t.custom_created_at)}),t.created_at!==t.custom_created_at?Object(Ue.jsx)("div",{title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(Wt(t.created_at)),children:Object(Ue.jsx)(Xe,{className:"icon-s2 ml5",icon:G,color:"red"})}):null]})]}),Object(Ue.jsxs)("td",{children:[Object(Ue.jsxs)("div",{children:[t.description,t.client.name?" (\u041a\u043b\u0438\u0435\u043d\u0442: ".concat(t.client.name,")"):null]}),t.direction?Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(Xe,{className:"icon-s1",icon:"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z",color:"#acacac"}),Object(Ue.jsx)("div",{className:"tac ml5 cgr",children:t.cashflow_category})]}):null]}),Object(Ue.jsx)("td",{className:t.income?"greenFont tac":"tac",children:t.income}),Object(Ue.jsx)("td",{className:t.outcome?"redFont tac":"tac",children:t.outcome}),d()?Object(Ue.jsx)("td",{className:"tac",children:parseFloat(t.deposit).toFixed(2)}):null]},t.id)})),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsxs)("td",{colSpan:"2",children:["\u0412\u0441\u0435\u0433\u043e - ",u.length]}),Object(Ue.jsxs)("td",{className:"txtb tac",children:[i.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ue.jsxs)("td",{className:"txtb tac",children:[o.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ue.jsx)("td",{})]})]})]})}));Object(tn.registerLocale)("ru",en.a);var Di={changePaymentForm:kt,addPayments:Tt},Pi=Object(s.b)((function(e){return{current_cashbox:e.cashbox.current_cashbox,filter_created_at:e.payment.filter_created_at,permissions:e.data.user.role.permissions}}),Di)((function(e){Object(r.useEffect)((function(){e.current_cashbox&&e.addPayments()}),[e.current_cashbox]);var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"ml30 w100",children:[Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(Xe,{icon:"M4 28h28v4h-32v-32h4zM9 26c-1.657 0-3-1.343-3-3s1.343-3 3-3c0.088 0 0.176 0.005 0.262 0.012l3.225-5.375c-0.307-0.471-0.487-1.033-0.487-1.638 0-1.657 1.343-3 3-3s3 1.343 3 3c0 0.604-0.179 1.167-0.487 1.638l3.225 5.375c0.086-0.007 0.174-0.012 0.262-0.012 0.067 0 0.133 0.003 0.198 0.007l5.324-9.316c-0.329-0.482-0.522-1.064-0.522-1.691 0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3-0.067 0-0.133-0.003-0.198-0.007l-5.324 9.316c0.329 0.481 0.522 1.064 0.522 1.691 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-0.604 0.179-1.167 0.487-1.638l-3.225-5.375c-0.086 0.007-0.174 0.012-0.262 0.012s-0.176-0.005-0.262-0.012l-3.225 5.375c0.307 0.471 0.487 1.033 0.487 1.637 0 1.657-1.343 3-3 3z"}),Object(Ue.jsx)("h3",{className:"ml5",children:'\u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u043f\u043e \u043a\u0430\u0441\u0441\u0435 "'.concat(e.current_cashbox?e.current_cashbox.title:"",'"')})]}),Object(Ue.jsxs)("div",{className:"row",children:[e.permissions.includes("see_moving_money_all_time")?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("div",{className:"w250",children:Object(Ue.jsx)(nn.a,{selectsRange:!0,startDate:e.filter_created_at[0]?new Date(1e3*e.filter_created_at[0]):null,endDate:e.filter_created_at[1]?new Date(1e3*e.filter_created_at[1]):null,onChange:function(t){e.changePaymentForm(t.map((function(e){return e?e.getTime()/1e3:null})),"filter_created_at")},isClearable:!0,placeholderText:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",className:"optionFilterInputDate",dateFormat:"dd.MM.yyyy",locale:"ru",maxDate:Date.now()+846e5})}),Object(Ue.jsx)("button",{className:"blueButton",onClick:function(){return e.addPayments()},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]}):null,e.permissions.includes("see_delete_payments")?Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},value:i}):null]}),Object(Ue.jsx)(Ai,{showDeleted:i})]})})),Ri={setVisibleFlag:fe,addCashboxes:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_cashbox",ue({})).then((function(e){return e.json()})).then((function(n){n.success?(t({type:"ADD_DATA",field:"cashboxes",data:n.data}),t({type:"CHANGE_CASHBOX_FORM",field:"current_cashbox",value:n.data.filter((function(t){return!t.deleted&&t.employees[e.data.user.id].available&&(t.branch_id===(!!e.data.current_branch&&e.data.current_branch.id)||t.isGlobal)}))[0]})):console.warn(n.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeCashboxForm:Ce,addPayments:Tt},Bi=Object(s.b)((function(e){return{view:e.view,cashboxes:e.data.cashboxes,user:e.data.user,current_branch:e.data.current_branch,permissions:e.data.user.role.permissions}}),Ri)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){e.addCashboxes()}),[]);var a=e.cashboxes.filter((function(t){return(!t.deleted||i)&&t.employees[e.user.id].available&&(t.branch_id===(!!e.current_branch&&e.current_branch.id)||t.isGlobal)}));return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{className:"cashboxes",children:[Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},checked:i}),a.map((function(e){return Object(Ue.jsx)(gi,{cashbox:e,active:e.active},e.id)})),e.user.role.permissions.includes("edit_cash")?Object(Ue.jsx)("div",{className:"whiteButton",onClick:function(){return e.setVisibleFlag("statusCashboxEditor",!0)},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0441\u0441\u0443"}):null]}),e.permissions.includes("see_moving_money")?Object(Ue.jsx)(Pi,{}):null]}),e.view.statusPaymentsCard?Object(Ue.jsx)(Gr,{}):null,e.view.statusPaymentsEditor?Object(Ue.jsx)(qn,{}):null,e.view.statusCashboxEditor?Object(Ue.jsx)(Ti,{}):null]})}));function Ii(e,t){return{type:"CHANGE_PAYROLL_FORM",field:t,value:e}}function Li(){var e=de.getState(),t=rt({custom_created_at:e.payroll.filter_created_at,employee_id:e.payroll.setted_employee});return function(n){fetch(e.data.url_server+"/get_payrolls",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"payrolls",data:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}var Mi={editPayroll:function(e){return{type:"EDIT_PAYROLL",payroll:e}},setVisibleFlag:fe},Vi=Object(s.b)((function(e){return{payrolls:e.data.payrolls}}),Mi)((function(e){var t=Object(r.useState)(0),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(0),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=["","C\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430","\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u041f\u0440\u043e\u0434\u0430\u0436\u0430","\u041e\u043a\u043b\u0430\u0434","","\u041f\u0440\u0435\u043c\u0438\u044f","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f","\u0412\u043e\u0437\u0432\u0440\u0430\u0442"],u=e.payrolls.filter((function(t){return e.showDeleted||!t.deleted}));return Object(r.useEffect)((function(){var t=0,n=0;e.payrolls.filter((function(e){return!e.deleted})).forEach((function(e){t+=e.income,n+=e.outcome})),c(t),l(n)}),[e.payrolls]),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w135",children:"\u0414\u0430\u0442\u0430"}),Object(Ue.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"w91",children:"\u041f\u0440\u0438\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ue.jsx)("th",{className:"w91",children:"\u0420\u0430\u0441\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ue.jsx)("th",{className:"w91",children:"\u0411\u0430\u043b\u0430\u043d\u0441, \u0440\u0443\u0431."})]})}),Object(Ue.jsxs)("tbody",{children:[u.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){return function(t){e.editPayroll(t),e.setVisibleFlag("statusPayrollEditor",!0)}(t)},children:[Object(Ue.jsx)("td",{className:"pd-lr-5",children:Object(Ue.jsxs)("div",{children:[Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{children:d[t.relation_type]}),t.created_at!==t.custom_created_at?Object(Ue.jsx)("div",{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(Wt(t.created_at)),children:Object(Ue.jsx)(Xe,{className:"icon-s2 ml5",icon:G,color:"red"})}):null]}),Object(Ue.jsx)("div",{className:"cgr",children:Wt(t.custom_created_at)})]})}),Object(Ue.jsx)("td",{className:"pd-lr-5",children:t.description}),Object(Ue.jsx)("td",{className:t.income?"greenFont tac":"tac",children:t.income}),Object(Ue.jsx)("td",{className:t.outcome?"redFont tac":"tac",children:t.outcome}),Object(Ue.jsx)("td",{className:"tac",children:t.deposit.toFixed(2)})]},t.id)})),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsxs)("td",{colSpan:"2",children:["\u0412\u0441\u0435\u0433\u043e - ",u.length]}),Object(Ue.jsxs)("td",{className:"txtb tac",children:[i.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ue.jsxs)("td",{className:"txtb tac",children:[o.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ue.jsx)("td",{})]})]})]})}));Object(tn.registerLocale)("ru",en.a);var Gi={changePayrollForm:Ii},qi=Object(s.b)((function(e){return{view:e.view,payroll:e.payroll,permissions:e.data.user.role.permissions,employees:e.data.employees.filter((function(e){return!e.deleted}))}}),Gi)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(rn,{className:"mt15 mr-rg-20",title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f",name:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435","\u0417\u0430\u0434\u0430\u043d\u043d\u043e\u0435"],func1:function(){c(!1),e.changePayrollForm(null,"custom_created_at")},func2:function(){return c(!0)},checked:!0}),i?Object(Ue.jsx)(nn.a,{selected:e.payroll.custom_created_at?new Date(1e3*e.payroll.custom_created_at):Date.now(),onChange:function(t){e.changePayrollForm(t/1e3,"custom_created_at")},isClearable:!0,placeholderText:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",className:"optionFilterInputDate",dateFormat:"dd.MM.yyyy HH:mm",locale:"ru",maxDate:Date.now(),showTimeSelect:!0}):null]}),Object(Ue.jsx)(un,{className:"mt15",width:"70px",title:"\u0421\u0443\u043c\u043c\u0430",onChange:function(t){return e.changePayrollForm(parseFloat(t.target.value.replace(/[^0-9.]/g,"")),2===e.payroll.direction?"income":"outcome")},value:e.payroll.outcome?e.payroll.outcome:e.payroll.income,unit:"\u0440\u0443\u0431.",checkedFlag:"inputPayrollSumChecked",checked:e.view.inputPayrollSumChecked,disabled:e.payroll.deleted,redStar:!0}),Object(Ue.jsx)(ln,{id:"employeePayroll",title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",className:"mt15",list:e.employees,field:"employee_id",setElement:e.changePayrollForm,current_id:e.payroll.employee_id,width:"250px",employee:!0,checkedFlag:"inputPayrollEmployeeChecked",checked:e.view.inputPayrollEmployeeChecked,disabled:e.payroll.deleted}),Object(Ue.jsx)(pn,{className:"mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changePayrollForm(t.target.value,"description")},value:e.payroll.description,checkedFlag:"inputPayrollDescChecked",checked:e.view.inputPayrollDescChecked,redStar:!0,disabled:e.payroll.deleted})]})})),Hi=Object(s.b)((function(e){return{payroll:e.payroll,employees:e.data.employees}}),{})((function(e){return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("span",{className:"txtb",children:"\u0414\u0430\u0442\u0430:"}),Object(Ue.jsx)("span",{className:"ml5",children:Wt(e.payroll.created_at)})]}),Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("span",{className:"txtb",children:"\u0421\u0443\u043c\u043c\u0430:"}),Object(Ue.jsxs)("span",{className:"ml5",children:[2==e.payroll.direction?e.payroll.income:e.payroll.outcome," \u0440\u0443\u0431."]})]}),Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("span",{className:"txtb",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a:"}),Object(Ue.jsx)("span",{className:"ml5",children:Ht(e.employees.find((function(t){return t.id===e.payroll.employee_id})))})]}),Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("span",{className:"txtb",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"}),Object(Ue.jsx)("span",{className:"ml5",children:e.payroll.description})]})]})})),Wi={changePayrollForm:Ii,setVisibleFlag:fe,resetPayroll:function(){return{type:"RESET_PAYROLL"}},createPayroll:function(){var e=de.getState(),t=rt({description:e.payroll.description,income:e.payroll.income,outcome:-e.payroll.outcome,direction:e.payroll.direction,deleted:e.payroll.deleted,reimburse:e.payroll.reimburse,created_at:e.payroll.created_at,custom_created_at:e.payroll.custom_created_at,relation_type:e.payroll.relation_type,relation_id:e.payroll.relation_id,employee_id:e.payroll.employee_id,order_id:e.payroll.order_id}),n=rt({custom_created_at:e.payroll.filter_created_at,employee_id:e.payroll.setted_employee});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/payroll",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_payrolls",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"ADD_DATA",field:"payrolls",data:e.data}),i({type:"RESET_PAYROLL"}),i({type:"SET_VISIBLE_FLAG",field:"statusPayrollEditor",value:!1})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deletePayroll:function(e){var t=de.getState(),n=rt({id:t.payroll.edit,deleted:e});n.method="PUT";var r=rt({custom_created_at:t.payroll.filter_created_at,employee_id:t.payroll.setted_employee});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/payroll",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:fetch(t.data.url_server+"/get_payrolls",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"ADD_DATA",field:"payrolls",data:e.data}),i({type:"RESET_PAYROLL"}),i({type:"SET_VISIBLE_FLAG",field:"statusPayrollEditor",value:!1})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ui=Object(s.b)((function(e){return{view:e.view,payroll:e.payroll,permissions:e.data.user.role.permissions,employees:e.data.employees.filter((function(e){return!e.deleted}))}}),Wi)((function(e){var t=function(){e.setVisibleFlag("statusPayrollEditor",!1),e.setVisibleFlag("inputPayrollDescChecked",!0),e.setVisibleFlag("inputPayrollEmployeeChecked",!0),e.resetPayroll()},n=function(e){e.path.map((function(e){return e.id})).includes("payrollEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.changePayrollForm(e.payroll.setted_employee,"employee_id")}),[]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow w500",id:"payrollEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.payroll.edit?["","C\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430","\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u041f\u0440\u043e\u0434\u0430\u0436\u0430","\u041e\u043a\u043b\u0430\u0434","","\u041f\u0440\u0435\u043c\u0438\u044f","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f","\u0412\u043e\u0437\u0432\u0440\u0430\u0442"][e.payroll.relation_type]:["","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435","\u041f\u0440\u0435\u043c\u0438\u044f"][e.payroll.direction]}),Object(Ue.jsx)("div",{className:"contentEditor",children:e.payroll.edit?Object(Ue.jsx)(Hi,{}):Object(Ue.jsx)(qi,{})}),Object(Ue.jsx)($t,{edit:e.payroll.edit,create:function(){(e.payroll.income||e.payroll.outcome)&&e.payroll.employee_id&&e.payroll.description?e.createPayroll():(e.payroll.income||e.payroll.outcome||e.setVisibleFlag("inputPayrollSumChecked",!1),e.payroll.employee_id||e.setVisibleFlag("inputPayrollEmployeeChecked",!1),e.payroll.description||e.setVisibleFlag("inputPayrollDescChecked",!1))},delete:e.permissions.includes("delete_payrolls")?function(){return e.deletePayroll(!0)}:null,recover:e.permissions.includes("recover_payrolls")?function(){return e.deletePayroll(!1)}:null,close:t,deleted:e.payroll.deleted})]})})}));Object(tn.registerLocale)("ru",en.a);var zi={changePayrollForm:Ii,addPayrolls:Li,addMonthBalance:function(){var e=de.getState(),t=rt({custom_created_at:Ut(),employee_id:e.payroll.setted_employee});return function(n){fetch(e.data.url_server+"/get_payroll_sum",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_PAYROLL_FORM",field:"month_balance",value:e.sum}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0430\u043b\u0430\u043d\u0441\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addEmployees:Be,setVisibleFlag:fe},Yi=Object(s.b)((function(e){return{employees:e.data.employees,payroll:e.payroll,permissions:e.data.user.role.permissions,statusPayrollEditor:e.view.statusPayrollEditor}}),zi)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){e.addMonthBalance(),e.addEmployees()}),[e.payroll.setted_employee]);var a=Object(r.useMemo)((function(){return e.employees.find((function(t){return t.id===e.payroll.setted_employee}))}),[e.payroll.setted_employee]);return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsx)("div",{className:"createNewTitle fsz20 mt0",children:Ht(a)}),Object(Ue.jsxs)("div",{className:"txtb",children:[Object(Ue.jsx)("span",{children:"\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043c\u0435\u0441\u044f\u0446\u0435: "}),Object(Ue.jsx)("span",{className:e.payroll.month_balance>0?"greenFont ml5":"redFont ml5",children:e.payroll.month_balance.toFixed(2)})," \u0440\u0443\u0431."]}),Object(Ue.jsxs)("div",{className:"txtb",children:[Object(Ue.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441:"}),Object(Ue.jsx)("span",{className:e.payroll.month_balance>0?"greenFont ml5":"redFont ml5",children:a.balance.toFixed(2)})," \u0440\u0443\u0431."]}),Object(Ue.jsxs)("div",{className:"row mt15 jc-sb",children:[Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"w250",children:Object(Ue.jsx)(nn.a,{selectsRange:!0,startDate:e.payroll.filter_created_at[0]?new Date(1e3*e.payroll.filter_created_at[0]):null,endDate:e.payroll.filter_created_at[1]?new Date(1e3*e.payroll.filter_created_at[1]):null,onChange:function(t){e.changePayrollForm(t.map((function(e){return e?e.getTime()/1e3:null})),"filter_created_at")},isClearable:!0,placeholderText:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",className:"optionFilterInputDate",dateFormat:"dd.MM.yyyy",locale:"ru",maxDate:Date.now()+846e5})}),Object(Ue.jsx)(yr,{className:"blueButton",title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",onClick:function(){return e.addPayrolls()}}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},value:i,unvisible:!e.permissions.includes("see_seleted_payrolls")})]}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u041f\u0440\u0435\u043c\u0438\u044f",onClick:function(){e.changePayrollForm(2,"direction"),e.changePayrollForm(9,"relation_type"),e.setVisibleFlag("statusPayrollEditor",!0)},unvisible:!e.permissions.includes("create_payrolls")}),Object(Ue.jsx)(yr,{className:"greenButton bcr m10",title:"- \u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435",onClick:function(){e.changePayrollForm(1,"direction"),e.changePayrollForm(10,"relation_type"),e.setVisibleFlag("statusPayrollEditor",!0)},unvisible:!e.permissions.includes("create_payrolls")})]})]}),e.statusPayrollEditor?Object(Ue.jsx)(Ui,{}):null,Object(Ue.jsx)(Vi,{showDeleted:i})]})})),Ki={changePayrollForm:Ii},Qi=Object(s.b)((function(e){return{employees:e.data.employees.filter((function(e){return!e.deleted&&0!==e.id})),payroll:e.payroll}}),Ki)((function(e){var t=Object(r.useState)(0),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var t=0;e.employees.filter((function(e){return 1!=e.id})).forEach((function(e){t+=e.balance})),c(t)}),[e.employees]),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ue.jsx)("th",{children:"\u0411\u0430\u043b\u0430\u043d\u0441"})]})}),Object(Ue.jsxs)("tbody",{children:[e.employees.map((function(t){return Object(Ue.jsxs)("tr",{onClick:function(){return e.changePayrollForm(t.id,"setted_employee")},style:t.id===e.payroll.setted_employee?{backgroundColor:"#cae1f5"}:null,children:[Object(Ue.jsx)("td",{children:Ht(t)}),Object(Ue.jsx)("td",{children:t.balance?t.balance.toFixed(2):0})]},t.id)})),Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:"\u0418\u0442\u043e\u0433:"}),Object(Ue.jsx)("td",{children:i})]})]})]})})),Ji={addPayrolls:Li,changePayrollForm:Ii},Xi=Object(s.b)((function(e){return{payroll:e.payroll,permissions:e.data.user.role.permissions,user_id:e.data.user.id}}),Ji)((function(e){return Object(r.useEffect)((function(){e.addPayrolls()}),[e.payroll.setted_employee]),Object(r.useEffect)((function(){e.changePayrollForm(e.user_id,"setted_employee")}),[]),Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)("p",{children:"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u043c \u0433\u0440\u0430\u0444\u0438\u043a \u0441\u044e\u0434\u0430"}),e.permissions.includes("see_all_payrolls")?Object(Ue.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ue.jsx)("div",{className:"w250",children:Object(Ue.jsx)(Qi,{})}),Object(Ue.jsx)("div",{className:"ml30",children:e.payroll.setted_employee?Object(Ue.jsx)(Yi,{}):null})]}):e.payroll.setted_employee?Object(Ue.jsx)(Yi,{}):null]})})),Zi={changeCashboxForm:Ce},$i=Object(s.b)((function(e){return{tabs:e.cashbox.tabs,statusOrderLoader:e.view.statusOrderLoader}}),Zi)((function(e){return Object(Ue.jsxs)("div",{className:"pageContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b"})}),Object(Ue.jsx)("div",{className:"settingPageBody"}),Object(Ue.jsx)(An,{list:["\u041f\u043b\u0430\u0442\u0435\u0436\u0438","\u0412\u0437\u0430\u0438\u043c\u043e\u0440\u0430\u0441\u0447\u0435\u0442\u044b","\u0421\u0447\u0435\u0442\u0430","\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u044b"],func:e.changeCashboxForm,tab:e.tabs}),0===e.tabs?Object(Ue.jsx)(Bi,{}):null,(e.tabs,null),(e.tabs,null),3===e.tabs?Object(Ue.jsx)(Xi,{}):null,e.statusOrderLoader?Object(Ue.jsx)(gt,{className:"orderLoader"}):null]})}));function ec(e,t){return{type:"CHANGE_WAREHOUSE_FORM",field:t,value:e}}function tc(){return{type:"RESET_WAREHOUSE"}}function nc(e,t){return{type:"CHANGE_WAREHOUSE_PERMISSION",field:t,value:e}}function rc(e,t){return{type:"CHANGE_PART_FORM",field:t,value:e}}var ic=function e(t){var n=Object(r.useState)(!!t.edit),i=Object(Je.a)(n,2),c=i[0],a=i[1];return t.edit===t.category.id?null:Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("div",{className:"row hovblue",children:Object(Ue.jsxs)("div",{className:"row w100 ",children:[Object(Ue.jsx)("div",{onClick:function(){return a(!c)},children:t.category.categories.length?Object(Ue.jsx)(Xe,{className:"icon-s1 pd1",icon:c?Y:U}):Object(Ue.jsx)("div",{className:"ml15"})}),Object(Ue.jsx)("div",{className:t.category.deleted?"rowDeleted noWr":"noWr",onClick:function(){return t.choose(t.category)},children:t.category.title})]})}),c?Object(Ue.jsx)("div",{className:"ml10",children:t.category.categories.map((function(n){return Object(Ue.jsx)(e,{edit:t.edit,category:n,choose:function(e){return t.choose(e)}},n.id)}))}):null]})},cc={changeWarehouseForm:ec},ac=Object(s.b)((function(e){return{warehouse:e.warehouse}}),cc)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!!e.warehouse.edit),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=e.warehouse.warehouses_categories[0],u=function(t){c(!1),e.changeWarehouseForm(t,"current_parent_category")};return Object(Ue.jsxs)("div",{className:"w250 mt15",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ue.jsxs)("div",{className:"optionsButton",onClick:function(){return c(!i&&!e.warehouse.category_deleted)},children:[Object(Ue.jsx)("div",{className:"noWr",children:e.warehouse.current_parent_category.title}),Object(Ue.jsx)(Xe,{className:"icon-s2",icon:i?Y:z})]}),i&&!e.disabled?Object(Ue.jsxs)("div",{className:"listOptionsChoose pos-a",children:[Object(Ue.jsxs)("div",{className:"row hovblue",children:[Object(Ue.jsx)("div",{onClick:function(){return l(!o)},children:Object(Ue.jsx)(Xe,{className:"icon-s1",icon:o?Y:U})}),Object(Ue.jsx)("div",{onClick:function(){return u(d)},children:d.title})]}),o?Object(Ue.jsx)("div",{className:"ml10",children:d.categories.map((function(t){return Object(Ue.jsx)(ic,{edit:e.warehouse.edit,category:t,choose:function(e){return u(e)}},t.id)}))}):null]}):null]})})),sc={setVisibleFlag:fe,changeWarehouseForm:ec,createWarehouseCategory:function(){var e=de.getState(),t=rt({title:e.warehouse.title_category,parent_category_id:e.warehouse.current_parent_category.id,deleted:e.warehouse.category_deleted}),n=rt({id:1,deleted:e.warehouse.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/warehouse_category",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_warehouse_category",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},resetWarehouse:tc,saveWarehouseCategory:function(){var e=de.getState(),t=rt({id:e.warehouse.edit,title:e.warehouse.title_category,parent_category_id:e.warehouse.current_parent_category.id});t.method="PUT";var n=rt({id:1,deleted:e.warehouse.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/warehouse_category",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_warehouse_category",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteWarehouseCategory:function(e){var t=de.getState(),n=rt({id:t.warehouse.edit,deleted:e});n.method="PUT";var r=rt({id:1,deleted:t.warehouse.showDeleted});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/warehouse_category",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_warehouse_category",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},oc=Object(s.b)((function(e){return{warehouse:e.warehouse,inputWCategoryTitleChecked:e.view.inputWCategoryTitleChecked,permissions:e.data.user.role.permissions}}),sc)((function(e){var t=function(){e.setVisibleFlag("statusWarehouseCategoryEditor",!1),e.setVisibleFlag("inputWCategoryTitleChecked",!0),e.resetWarehouse()},n=function(e){e.path.map((function(e){return e.id})).includes("wgategoryEditorWindow")||e.path.map((function(e){return e.id})).includes("btaddWC")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("delete_warehouse_categories"),c=e.permissions.includes("recover_warehouse_categories");return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"wgategoryEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",onChange:function(t){return e.changeWarehouseForm(t.target.value,"title_category")},value:e.warehouse.title_category,checkedFlag:"inputWCategoryTitleChecked",checked:e.inputWCategoryTitleChecked,redStar:!0,disabled:e.warehouse.category_deleted}),Object(Ue.jsx)(ac,{})]}),Object(Ue.jsx)($t,{edit:e.warehouse.edit,deleted:e.warehouse.category_deleted,create:function(){e.warehouse.title_category?e.createWarehouseCategory():e.setVisibleFlag("inputWCategoryTitleChecked",!1)},save:function(){e.warehouse.title_category?e.saveWarehouseCategory():e.setVisibleFlag("inputWCategoryTitleChecked",!1)},delete:i?function(){return e.deleteWarehouseCategory(!0)}:null,recover:c?function(){return e.deleteWarehouseCategory(!1)}:null,close:t})]})})})),lc=function e(t){var n=Object(r.useState)(!1),i=Object(Je.a)(n,2),c=i[0],a=i[1];return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("tr",{className:"row hovblue",style:t.category.id===t.current.id?{backgroundColor:"#cae1f5"}:null,onClick:function(){t.choose(t.category),t.choose_parent_category(t.parent_category),a(!c)},onDoubleClick:function(){return t.edit(t.category)},children:[Object(Ue.jsxs)("td",{className:"row w100 pd5",children:[t.category.categories.length?Object(Ue.jsx)(Xe,{className:"icon-s1 pd1",icon:c?Y:U}):Object(Ue.jsx)("div",{className:"ml15"}),Object(Ue.jsx)("div",{className:t.category.deleted?"rowDeleted noWr":"noWr",children:t.category.title})]}),Object(Ue.jsx)("td",{className:"w70 pd5 tac",children:t.category.categories.length})]}),c?Object(Ue.jsx)("div",{className:"ml10",children:t.category.categories.map((function(n){return Object(Ue.jsx)(e,{category:n,choose:function(e){return t.choose(e)},current:t.current,parent_category:t.category,choose_parent_category:function(e){return t.choose_parent_category(e)},edit:function(e){return t.edit(e)}},n.id)}))}):null]})},dc={changeWarehouseForm:ec,editWarehouseCategory:function(e){return{type:"EDIT_WAREHOUSE_CATEGORY",warehouse_category:e}},setVisibleFlag:fe},uc=Object(s.b)((function(e){return{warehouse:e.warehouse,permissions:e.data.user.role.permissions}}),dc)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=e.warehouse.warehouses_categories[0]||{id:1,title:"\u0412\u0441\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",categories:[]};return Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{className:"had",children:Object(Ue.jsxs)("tr",{className:"row",children:[Object(Ue.jsx)("th",{className:"w100 pd5",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ue.jsx)("th",{className:"w70 pd5 tac",children:"\u041a\u043e\u043b-\u0432\u043e"})]})}),Object(Ue.jsxs)("tbody",{children:[Object(Ue.jsxs)("tr",{className:"row hovblue",style:a.id===e.warehouse.current_category.id?{backgroundColor:"#cae1f5"}:null,onClick:function(){e.changeWarehouseForm(a,"current_category"),c(!i)},children:[Object(Ue.jsxs)("td",{className:"row w100 pd5",children:[Object(Ue.jsx)(Xe,{className:"icon-s1",icon:i?Y:U}),Object(Ue.jsx)("div",{className:"noWr",children:a.title})]}),Object(Ue.jsx)("td",{className:"w70 pd5 tac",children:a.categories.length})]}),i?Object(Ue.jsx)("div",{className:"ml10",children:a.categories.map((function(t){return Object(Ue.jsx)(lc,{category:t,choose:function(t){return e.changeWarehouseForm(t,"current_category")},current:e.warehouse.current_category,parent_category:a,choose_parent_category:function(t){return e.changeWarehouseForm(t,"current_parent_category")},edit:function(t){return function(t){e.permissions.includes("edit_warehouse_categories")&&(e.editWarehouseCategory(t),e.changeWarehouseForm(e.warehouse.current_parent_category,"current_parent_category"),e.setVisibleFlag("statusWarehouseCategoryEditor",!0))}(t)}},t.id)}))}):null]})]})})),mc=function(e){return Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:e.title}),Object(Ue.jsx)("div",{className:e.value||e.url?"showPicture":"addPicture",children:Object(Ue.jsxs)("label",{className:"label",children:[e.value||e.url?Object(Ue.jsx)("img",{src:e.value||"".concat("","/").concat(e.url),className:"showPicture"}):Object(Ue.jsx)("i",{className:"material-icons",children:"attach_file"}),Object(Ue.jsx)("input",{className:"",type:"file",accept:"image/*",onChange:function(t){var n=new FileReader;n.onload=function(t){e.onChange(t.target.result)},n.readAsDataURL(t.target.files[0])},disabled:e.disabled})]})})]})},pc={changePartProperty:function(e,t,n){return{type:"CHANGE_PART_PROPERTY",value:e,idx:t,field:n}},deletePartProperty:function(e){return{type:"DELETE_PART_PROPERTY",idx:e}}},hc=Object(s.b)((function(e){return{part:e.part}}),pc)((function(e){var t=Object(r.useState)(!e.title),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!e.value),s=Object(Je.a)(a,2),o=s[0],l=s[1],d=e.part.deleted;return Object(Ue.jsxs)("tr",{className:"fillcol",children:[Object(Ue.jsx)("td",{children:i&&!d?Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changePartProperty(t.target.value,e.idx,"title")},value:e.title,autoFocus:!0,onBlur:function(){return c(!e.title)},onKeyPress:function(t){"Enter"===t.key&&c(!e.title)},placeholder:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e"}):Object(Ue.jsx)("div",{className:"w100",onDoubleClick:function(){return c(!0)},children:e.title})}),Object(Ue.jsx)("td",{children:o&&!d?Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changePartProperty(t.target.value,e.idx,"value")},value:e.value,autoFocus:!0,onBlur:function(){return l(!e.value)},onKeyPress:function(t){"Enter"===t.key&&l(!e.value)},placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}):Object(Ue.jsx)("div",{className:"ml30",onDoubleClick:function(){return l(!0)},children:e.value})}),Object(Ue.jsx)("td",{onClick:d?null:function(){return e.deletePartProperty(e.idx)},children:Object(Ue.jsx)(Xe,{icon:L,className:"icon-s1"})})]})})),bc={addPartProperty:function(){return{type:"ADD_PART_PROPERTY"}}},jc=Object(s.b)((function(e){return{part:e.part}}),bc)((function(e){return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),Object(Ue.jsx)("div",{className:"mwmc",children:Object(Ue.jsx)("table",{children:Object(Ue.jsx)("tbody",{children:e.part.specifications.map((function(e,t){return Object(Ue.jsx)(hc,{idx:t,title:e.title,value:e.value},t)}))})})}),Object(Ue.jsx)(yr,{className:"whiteBlueBotton",title:"+ \u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e",onClick:function(){return e.addPartProperty()},disabled:e.part.deleted})]})})),_c=function(e){var t=e.url?e.url.split("/").pop():"",n=Object(r.useState)(t),i=Object(Je.a)(n,2),c=i[0],a=i[1];return Object(Ue.jsxs)("div",{className:e.className,children:[Object(Ue.jsx)("div",{className:"lableImput",children:e.title}),Object(Ue.jsxs)("div",{className:"row",children:[e.value?Object(Ue.jsx)("div",{className:"noWr w150",children:c}):e.url?Object(Ue.jsx)("a",{className:"noWr w150",href:"".concat("","/").concat(e.url),target:"_blank",children:"Datasheet.pdf"}):null,Object(Ue.jsxs)("label",{className:"label",children:[e.value||e.url?Object(Ue.jsx)("div",{className:"whiteBlueBotton",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0430\u0439\u043b"}):Object(Ue.jsx)("div",{className:"whiteBlueBotton",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b"}),Object(Ue.jsx)("input",{className:"addDoc",type:"file",accept:"application/pdf",onChange:function(t){var n=new FileReader;n.onload=function(t){e.onChange(t.target.result)},n.readAsDataURL(t.target.files[0]),a(t.target.files[0].name)},disabled:e.disabled})]})]})]})},fc={setVisibleFlag:fe,changePartForm:rc,resetPart:function(){return{type:"RESET_PART"}},createPart:function(){var e=de.getState(),t=rt({title:e.part.title,description:e.part.description,marking:e.part.marking,article:e.part.article,barcode:e.part.barcode,code:e.part.code,specifications:e.part.specifications,deleted:!1,warehouse_category_id:e.warehouse.current_parent_category.id,img:e.part.img,doc:e.part.doc}),n=rt({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/parts",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_parts",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePart:function(){var e=de.getState(),t=rt({id:e.part.edit,title:e.part.title,description:e.part.description,marking:e.part.marking,article:e.part.article,barcode:e.part.barcode,code:e.part.code,specifications:e.part.specifications,warehouse_category_id:e.warehouse.current_parent_category.id,img:e.part.img,doc:e.part.doc});t.method="PUT";var n=rt({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/parts",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u0435\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_parts",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deletePart:function(e){var t=de.getState(),n=rt({id:t.part.edit,deleted:e});n.method="PUT";var r=rt({page:t.part.page,deleted:t.part.showDeleted,warehouse_category_id:t.warehouse.current_category.id});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/parts",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_parts",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Oc=Object(s.b)((function(e){return{part:e.part,inputWPartTitleChecked:e.view.inputWPartTitleChecked,permissions:e.data.user.role.permissions}}),fc)((function(e){var t=function(){e.setVisibleFlag("statusPartEditor",!1),e.setVisibleFlag("inputWPartTitleChecked",!0),e.resetPart()},n=function(e){e.path.map((function(e){return e.id})).includes("wpartEditorWindow")||e.path.map((function(e){return e.id})).includes("btaddWP")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("delete_parts"),c=e.permissions.includes("recover_parts");return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"wpartEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.part.edit?e.part.title:"\u041d\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(mc,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",url:e.part.image_url,onChange:function(t){return e.changePartForm(t,"img")},value:e.part.img,disabled:e.part.deleted}),Object(Ue.jsx)(_c,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",url:e.part.doc_url,onChange:function(t){return e.changePartForm(t,"doc")},value:e.part.doc,disabled:e.part.deleted})]}),Object(Ue.jsxs)("div",{className:"ml30",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePartForm(t.target.value,"title")},value:e.part.title,checkedFlag:"inputWPartTitleChecked",checked:e.inputWPartTitleChecked,redStar:!0,disabled:e.part.deleted}),Object(Ue.jsx)(ac,{disabled:e.part.deleted}),Object(Ue.jsx)(pn,{className:"w250 mt15",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePartForm(t.target.value,"description")},value:e.part.description,disabled:e.part.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430",onChange:function(t){return e.changePartForm(t.target.value,"marking")},value:e.part.marking,disabled:e.part.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",onChange:function(t){return e.changePartForm(t.target.value,"article")},value:e.part.article,disabled:e.part.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0428\u0442\u0440\u0438\u0445 \u043a\u043e\u0434",onChange:function(t){return e.changePartForm(t.target.value,"barcode")},value:e.part.barcode,disabled:e.part.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041a\u043e\u0434",onChange:function(t){return e.changePartForm(t.target.value,"code")},value:e.part.code,disabled:e.part.deleted})]})]}),Object(Ue.jsx)(jc,{})]}),Object(Ue.jsx)($t,{edit:e.part.edit,deleted:e.part.deleted,create:function(){e.part.title?e.createPart():e.setVisibleFlag("inputWPartTitleChecked",!1)},save:function(){e.part.title?e.savePart():e.setVisibleFlag("inputWPartTitleChecked",!1)},delete:i?function(){return e.deletePart(!0)}:null,recover:c?function(){return e.deletePart(!1)}:null,close:t})]})})}));var vc={setVisibleFlag:fe,editPart:function(e){return{type:"EDIT_PART",part:e}},changeWarehouseForm:ec},gc=Object(s.b)((function(e){return{part:e.part,warehouse:e.warehouse}}),vc)((function(e){var t=ie.filter((function(t){return e.part.choosed_headers.includes(t.id)}));return Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsx)("tr",{children:t.map((function(e){return Object(Ue.jsx)("th",{children:e.title})}))})}),Object(Ue.jsx)("tbody",{children:e.part.parts.map((function(n){return Object(Ue.jsx)("tr",{className:n.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.editPart(t),e.setVisibleFlag("statusPartEditor",!0),e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category")}(n)},children:t.map((function(e){return"doc_url"===e.field?Object(Ue.jsx)("td",{children:n[e.field]?Object(Ue.jsx)("a",{href:"".concat("","/").concat(n[e.field]),target:"_blank",children:n[e.field].split("/").pop()}):null}):"warehouse_category"===e.field?Object(Ue.jsx)("td",{children:n[e.field].title}):Object(Ue.jsx)("td",{children:n[e.field]})}))},n.id)}))})]})})),xc=function(e){var t=Object(r.useState)(!0),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("tableFields".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=Object(r.useRef)();return Object(r.useEffect)((function(){var t=e.list.filter((function(t){return e.checked_list.includes(t.id)}));t.length===e.list.length?(s.current.indeterminate=!1,s.current.checked=!0):t.length?s.current.indeterminate=!0:(s.current.indeterminate=!1,s.current.checked=!1)}),[e.checked_list]),Object(r.useEffect)((function(){c(!1)}),[]),Object(Ue.jsxs)("div",{id:"tableFields".concat(e.id),className:"tableFields ".concat(e.className),children:[Object(Ue.jsxs)("div",{className:"chooseFieldButton pd1 h24",onClick:function(){return c(!i)},children:[Object(Ue.jsx)("div",{className:"cl11",children:Object(Ue.jsx)("svg",{className:"icon-table",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:H})})}),Object(Ue.jsx)("div",{className:"cl12",children:Object(Ue.jsx)("span",{className:"fieldSeparate",children:"\u1a06"})})]}),i?Object(Ue.jsxs)("div",{className:"listOptions",style:{minHeight:e.height},children:[Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{ref:s,type:"checkbox",onChange:function(){return e.func(e.list.map((function(e){return e.id})),e.field)},disabled:e.disabled}),Object(Ue.jsx)("label",{children:"\u0412\u0441\u0435"})]}),e.list.map((function(t){return Object(Ue.jsx)("div",{className:"options",children:Object(Ue.jsx)(zr,{className:"ml10",label:t.title,onChange:function(){return e.func([t.id],e.field,!0)},checked:e.checked_list.includes(t.id)})},t.id)}))]}):null]})},yc={setVisibleFlag:fe,addWarehouseCategories:function(){var e=de.getState(),t=rt({id:1,deleted:e.warehouse.showDeleted});return function(n){fetch(e.data.url_server+"/get_warehouse_category",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeWarehouseForm:ec,addParts:function(){var e=de.getState(),t=rt({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(n){fetch(e.data.url_server+"/get_parts",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),n({type:"RESET_PART"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},choosePartSelected:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_PART",field:t,value:e,saveToApp:n}},changePartForm:rc},Ec=Object(s.b)((function(e){return{statusWarehouseCategoryEditor:e.view.statusWarehouseCategoryEditor,statusPartEditor:e.view.statusPartEditor,warehouse:e.warehouse,part:e.part,permissions:e.data.user.role.permissions}}),yc)((function(e){Object(r.useEffect)((function(){e.addWarehouseCategories()}),[e.warehouse.showDeleted]),Object(r.useEffect)((function(){e.addParts()}),[e.part.showDeleted,e.part.page,e.warehouse.current_category]);return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{className:"wmn300 overv",children:[Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{id:"btaddWC",className:"greenButton",title:"+ \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onClick:function(){e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category"),e.setVisibleFlag("statusWarehouseCategoryEditor",!0)},unvisible:!e.permissions.includes("create_warehouse_categories")}),Object(Ue.jsx)(zr,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.checked,"showDeleted")},checked:e.warehouse.showDeleted,unvisible:!e.permissions.includes("see_deleted_warehouse_categories")})]}),e.statusWarehouseCategoryEditor?Object(Ue.jsx)(oc,{}):null,Object(Ue.jsx)(uc,{})]}),Object(Ue.jsxs)("div",{className:"ml10 w100",children:[Object(Ue.jsxs)("div",{className:"row jc-sb",children:[Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{id:"btaddWP",className:"greenButton",title:"+ \u0422\u043e\u0432\u0430\u0440",onClick:function(){e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category"),e.setVisibleFlag("statusPartEditor",!0)},unvisible:!e.permissions.includes("create_new_part")}),Object(Ue.jsx)(zr,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changePartForm(t.target.checked,"showDeleted")},checked:e.part.showDeleted,unvisible:!e.permissions.includes("see_delete_parts")})]}),Object(Ue.jsx)(xc,{id:"part",height:"185px",list:ie,checked_list:e.part.choosed_headers,func:e.choosePartSelected,field:"choosed_headers"})]}),e.statusPartEditor?Object(Ue.jsx)(Oc,{}):null,Object(Ue.jsx)(gc,{})]})]})})})),Nc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),wc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),kc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Cc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Sc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Tc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"contentTab",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0441\u0442\u0430\u0442\u043a\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Fc={changeWarehouseForm:ec},Ac=Object(s.b)((function(e){return{tabs:e.warehouse.tabs}}),Fc)((function(e){return Object(Ue.jsxs)("div",{className:"pageContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0421\u043b\u0430\u0434\u044b"})}),Object(Ue.jsx)("div",{className:"settingPageBody"}),Object(Ue.jsx)(An,{list:["\u041e\u0441\u0442\u0430\u0442\u043a\u0438","\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f","\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u044f","\u041f\u0435\u0440\u043c\u0435\u0449\u0435\u043d\u0438\u044f","\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438","\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443","\u0422\u043e\u0432\u0430\u0440\u044b \u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"],func:e.changeWarehouseForm,tab:e.tabs}),0===e.tabs?Object(Ue.jsx)(Sc,{}):null,1===e.tabs?Object(Ue.jsx)(Nc,{}):null,2===e.tabs?Object(Ue.jsx)(wc,{}):null,3===e.tabs?Object(Ue.jsx)(kc,{}):null,4===e.tabs?Object(Ue.jsx)(Cc,{}):null,5===e.tabs?Object(Ue.jsx)(Tc,{}):null,6===e.tabs?Object(Ue.jsx)(Ec,{}):null]})})),Dc=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u044b"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Pc=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Rc=Object(s.b)()((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u0447\u0435\u0442\u044b"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Bc=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0437\u0432\u043e\u043d\u043a\u0438"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})}));var Ic={changeStatusSettingRow:function(e){return{type:"CHANGE_STATUS_SETTING_ROW",id:e}}},Lc=Object(s.b)((function(e){return{settingMenu:e.data.settingMenu}}),Ic)((function(e){return Object(Ue.jsx)(o.b,{className:"settingRow",to:e.row.url,style:{backgroundColor:e.settingMenu.find((function(t){return t.id===e.row.id})).active?"#939699":"#53585c",color:e.settingMenu.find((function(t){return t.id===e.row.id})).active?"#fff":null},onClick:function(){return e.changeStatusSettingRow(e.row.id)},children:Object(Ue.jsx)("span",{className:"didebarItemsText",children:e.row.title})})}));var Mc=function(e){var t=e.group;return Object(Ue.jsx)("div",{children:t.map((function(e){return Object(Ue.jsx)(Lc,{row:e},e.id)}))})};var Vc=Object(s.b)((function(e){return{permission:e.data.user.role.permissions,settingMenu:e.data.settingMenu}}))((function(e){return e.settingMenu?Object(Ue.jsxs)("div",{className:"settingMenuMain",children:[Object(Ue.jsx)(Mc,{group:e.settingMenu.filter((function(t){return"generally_setting"===t.group_name&&e.permission.includes(t.permission_key)}))},2011),Object(Ue.jsx)("hr",{className:"hrMenu"}),Object(Ue.jsx)(Mc,{group:e.settingMenu.filter((function(t){return"app_setting"===t.group_name&&e.permission.includes(t.permission_key)}))},2012)]}):Object(Ue.jsx)(gt,{})})),Gc={changeMaindataForm:function(e,t){return{type:"CHANGE_MAINDATA_FORM",field:e,value:t}},saveGenerallyInfo:function(){var e=de.getState(),t=ue({id:1,name:e.maindata.name,address:e.maindata.address,email:e.maindata.email,ogrn:e.maindata.ogrn,inn:e.maindata.inn,kpp:e.maindata.kpp,juridical_address:e.maindata.juridical_address,director:e.maindata.director,bank_name:e.maindata.bank_name,settlement_account:e.maindata.settlement_account,corr_account:e.maindata.corr_account,bic:e.maindata.bic,description:e.maindata.description,phone:e.maindata.phone,logo:e.maindata.logo});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/generally_info",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_generally_info",ue()).then((function(e){return e.json()})).then((function(e){e.success?r({type:"ADD_GENERALLY_INFO",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},qc=Object(s.b)((function(e){return{maindata:e.maindata,view:e.view}}),Gc)((function(e){return Object(Ue.jsxs)("div",{className:"settingSubpage",children:[Object(Ue.jsxs)("div",{className:"formRow",children:[Object(Ue.jsx)("svg",{className:"icon-table",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:"M32 18.451l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8h-8v-12l12-9z"})}),Object(Ue.jsx)("h4",{children:"\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})]}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",onChange:function(t){return e.changeMaindataForm("name",t.target.value)},value:e.maindata.name,checkedFlag:"inputMaindataNameChecked",checked:e.view.inputMaindataNameChecked,redStar:!0}),Object(Ue.jsx)(pn,{className:"wm500 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeMaindataForm("address",t.target.value)},value:e.maindata.address}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"Email",onChange:function(t){return e.changeMaindataForm("email",t.target.value)},value:e.maindata.email}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u041e\u0413\u0420\u041d",onChange:function(t){return e.changeMaindataForm("ogrn",t.target.value)},value:e.maindata.ogrn}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u041a\u041f\u041f",onChange:function(t){return e.changeMaindataForm("kpp",t.target.value)},value:e.maindata.kpp}),Object(Ue.jsx)(pn,{className:"wm500 mt15",title:"\u042e\u0440\u0435\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeMaindataForm("juridical_address",t.target.value)},value:e.maindata.juridical_address}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440",onChange:function(t){return e.changeMaindataForm("director",t.target.value)},value:e.maindata.director}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",onChange:function(t){return e.changeMaindataForm("bank_name",t.target.value)},value:e.maindata.bank_name}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u0420/\u0421",onChange:function(t){return e.changeMaindataForm("settlement_account",t.target.value)},value:e.maindata.settlement_account}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u041a/\u0441",onChange:function(t){return e.changeMaindataForm("corr_account",t.target.value)},value:e.maindata.corr_account}),Object(Ue.jsx)(un,{className:"wm500 mt15",title:"\u0411\u0418\u041a",onChange:function(t){return e.changeMaindataForm("bic",t.target.value)},value:e.maindata.bic}),Object(Ue.jsx)("div",{className:"blueButton buttonSaveSet",onClick:function(){return e.saveGenerallyInfo()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})),Hc=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u041e\u0431\u0449\u0438\u0435"})}),Object(Ue.jsx)("div",{className:"settingPageBody",children:Object(Ue.jsx)(qc,{})})]})}));var Wc={setVisibleFlag:fe,changeSalaryRuleForm:function(e,t){return{type:"CHANGE_SALARY_FORM",field:t,value:e}},addSalaryCountCoef:function(){return{type:"ADD_SALARY_COUNT_COEF"}},changeSalaryCoefForm:function(e,t,n){return{type:"CHANGE_SALARY_COEF_FORM",idx:e,field:t,value:n}},deleteSalaryCountCoef:function(e){return{type:"DELETE_SALARY_COUNT_COEF",idx:e}},createSalaryRule:function(){var e=de.getState(),t=rt({title:e.salaryRule.list_type_rule.find((function(t){return t.id===e.salaryRule.type_rule})).title,type_rule:e.salaryRule.type_rule,order_type:e.salaryRule.order_type,method:e.salaryRule.method,coefficient:e.salaryRule.coefficient,count_coeff:e.salaryRule.count_coeff,fix_salary:e.salaryRule.fix_salary,deleted:e.salaryRule.deleted,employee_id:e.data.user.id,check_status:e.salaryRule.check_status});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/payrule",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_payrules",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPayrule:function(){return{type:"RESET_SALARY_RULE"}},saveSalaryRule:function(){var e=de.getState(),t=rt({id:e.salaryRule.edit,title:e.salaryRule.list_type_rule.find((function(t){return t.id===e.salaryRule.type_rule})).title,type_rule:e.salaryRule.type_rule,order_type:e.salaryRule.order_type,method:e.salaryRule.method,coefficient:e.salaryRule.coefficient,count_coeff:e.salaryRule.count_coeff,fix_salary:e.salaryRule.fix_salary,deleted:e.salaryRule.deleted,employee_id:e.data.user.id,check_status:e.salaryRule.check_status});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/payrule",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_payrules",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteSalaryRule:function(e){var t=de.getState(),n=rt({id:t.salaryRule.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/payrule",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_payrules",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Uc=Object(s.b)((function(e){return{salaryRule:e.salaryRule,order_type:e.data.order_type}}),Wc)((function(e){var t=function(){e.setVisibleFlag("statusSalaryEditor",!1),e.resetPayrule()},n=function(e){e.path.map((function(e){return e.id})).includes("salaryEditor")||t()};return Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(Ue.jsx)("div",{className:"centerBlockFix",children:Object(Ue.jsxs)("div",{className:"blockWindowFix wmx750 wmn750",id:"salaryEditor",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.salaryRule.edit?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e"}),Object(Ue.jsxs)("div",{className:"row h90 al-itm-bl",children:[Object(Ue.jsx)(ln,{id:21,title:"\u041f\u0440\u0430\u0432\u0438\u043b\u043e",className:"mt15",list:e.salaryRule.list_type_rule,field:"type_rule",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.type_rule,width:"250px"}),Object(Ue.jsx)(ln,{id:31,title:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430",className:"mt15 ml10",list:e.order_type,field:"order_type",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.order_type,width:"150px",unvisible:![1,2,3,4,5].includes(e.salaryRule.type_rule)}),Object(Ue.jsx)(ln,{id:26,title:"\u0421\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443",className:"mt15 ml10",list:e.salaryRule.statuses,field:"check_status",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.check_status,width:"150px",unvisible:![1,2,3,4,5].includes(e.salaryRule.type_rule)}),Object(Ue.jsx)(rn,{className:"mt15 ml10",title:"\u041c\u0435\u0442\u043e\u0434 \u0440\u0430\u0441\u0447\u0435\u0442\u0430",name:["%","\u0440\u0443\u0431"],func1:function(){return e.changeSalaryRuleForm(0,"method")},func2:function(){return e.changeSalaryRuleForm(1,"method")},checked:!0,unvisible:![1,2,3,4,5,6].includes(e.salaryRule.type_rule)})]}),[4,5,6].includes(e.salaryRule.type_rule)?Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(xi,{text:"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0440\u0430\u0432\u0438\u043b\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438"}),Object(Ue.jsxs)("div",{className:"row mt15",children:[Object(Ue.jsx)("div",{className:"numruond",children:"1"}),Object(Ue.jsx)("div",{children:"\u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u0435\u0441\u043b\u0438 \u0432 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0435 \u0443\u0441\u043b\u0443\u0433 \u0432 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f, \u0442\u043e \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u0417\u041f \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u043d\u043e\u0435 \u043d\u0430 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442"})]}),Object(Ue.jsxs)("div",{className:"row mt15 jc-c",children:[Object(Ue.jsx)("div",{className:"txtb",children:"\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442"}),Object(Ue.jsx)(un,{className:"ml10",width:"70px",onChange:function(t){return e.changeSalaryRuleForm(parseFloat(t.target.value.replace(/[^0-9.]/g,"")),"coefficient")},value:e.salaryRule.coefficient})]}),Object(Ue.jsxs)("div",{className:"row mt15",children:[Object(Ue.jsx)("div",{className:"numruond",children:"2"}),Object(Ue.jsx)("div",{children:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:"})]})]}):null,[1,2,3,4,5,6].includes(e.salaryRule.type_rule)?e.salaryRule.count_coeff.map((function(t,n){return Object(Ue.jsxs)("div",{className:"coef_row",children:[Object(Ue.jsx)("div",{children:"\u0415\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(Ue.jsx)("div",{className:"ml10",children:"\u2265"}),Object(Ue.jsx)(un,{className:"ml10",width:"50px",onChange:function(t){return e.changeSalaryCoefForm(n,"cost",t.target.value.replace(/[^0-9]/g,""))},unit:"\u0440\u0443\u0431,",value:t.cost}),Object(Ue.jsx)("div",{className:"ml10",children:"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442"}),Object(Ue.jsx)(un,{className:"ml10",width:"50px",onChange:function(t){return e.changeSalaryCoefForm(n,"coef",t.target.value.replace(/[^0-9]/g,""))},unit:e.salaryRule.method?"\u0440\u0443\u0431.":"%",value:t.coef}),n?Object(Ue.jsx)("div",{onClick:function(){return e.deleteSalaryCountCoef(n)},children:Object(Ue.jsx)(Xe,{className:"icon-s2 ml10",icon:L})}):null]},n)})):null,[1,2,3,4,5,6].includes(e.salaryRule.type_rule)?Object(Ue.jsx)("div",{className:"row mt15 jc-c",children:Object(Ue.jsx)("button",{className:"whiteButton",onClick:function(){return e.addSalaryCountCoef()},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})}):null,[7,8].includes(e.salaryRule.type_rule)?Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(xi,{text:"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0440\u0430\u0432\u0438\u043b\u0443 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0447\u0438\u0442\u0432\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u0433\u0440\u0430\u0444\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u0441\u043c\u0435\u043d"}),Object(Ue.jsx)(un,{className:"mt15",title:"\u0421\u0442\u0430\u0432\u043a\u0430",width:"50px",onChange:function(t){return e.changeSalaryRuleForm(parseInt(t.target.value.replace(/[^0-9]/g,"")),"fix_salary")},unit:"\u0440\u0443\u0431.",value:e.salaryRule.fix_salary})]}):null,Object(Ue.jsx)($t,{edit:e.salaryRule.edit,create:function(){return e.createSalaryRule()},save:function(){return e.saveSalaryRule()},delete:function(){return e.deleteSalaryRule(!0)},close:t})]})})})),zc={setVisibleFlag:fe,editPayrule:function(e){return{type:"EDIT_SALARY",salary_rule:e}}},Yc=Object(s.b)((function(e){return{statusSalaryEditor:e.view.statusSalaryEditor,payrules:e.data.payrules,employee_id:e.employee.edit}}),zc)((function(e){return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430"}),Object(Ue.jsx)("div",{className:"greenButton",onClick:function(){return e.setVisibleFlag("statusSalaryEditor",!0)},children:"+ \u041f\u0440\u0430\u0432\u0438\u043b\u043e"}),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsx)("tr",{children:Object(Ue.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"})})}),Object(Ue.jsx)("tbody",{children:e.payrules.filter((function(t){return!t.deleted&&e.employee_id===t.employee_id})).map((function(t){return Object(Ue.jsx)("tr",{onDoubleClick:function(){e.editPayrule(t),e.setVisibleFlag("statusSalaryEditor",!0)},children:Object(Ue.jsx)("td",{children:t.title})},t.id)}))})]}),e.statusSalaryEditor?Object(Ue.jsx)(Uc,{}):null]})}));var Kc={changeEmployeEditorForm:function(e,t){return{type:"CHANGE_EMPLOYEE_EDITOR_FORM",value:e,field:t}},changeEmployeeEditorRoleOptions:function(){return{type:"CHANGE_EMPLOYEE_EDITOR_ROLE_OPTIONS"}},setRoleEmployeeEdetor:function(e){return{type:"SET_ROLE_EMPLOYEE_EDITOR",role:e}}},Qc=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,employeeEditorRoleOptions:e.view.employeeEditorRoleOptions,view:e.view}}),Kc)((function(e){return Object(Ue.jsxs)("div",{className:"employeeGenterally",children:[Object(Ue.jsxs)("div",{className:"buttons",children:[Object(Ue.jsx)("div",{className:"flexColumn mr-rg-20",children:Object(Ue.jsx)(un,{className:"w250",title:"\u0418\u043c\u044f",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"first_name")},value:e.employee.first_name,checkedFlag:"inputEmployeeNameChecked",checked:e.view.inputEmployeeNameChecked,redStar:!0,disabled:e.employee.deleted})}),Object(Ue.jsx)("div",{className:"flexColumn",children:Object(Ue.jsx)(un,{className:"w250",title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"last_name")},value:e.employee.last_name,disabled:e.employee.deleted})})]}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"email",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"email")},value:e.employee.email,checkedFlag:"inputEmployeeEmailChecked",checked:e.view.inputEmployeeEmailChecked,redStar:!0,disabled:e.employee.deleted}),e.view.errorSameMail?Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u0422\u0430\u043a\u043e\u0439 email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):null,Object(Ue.jsx)(un,{className:"w250 mt15",title:"login",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"login")},value:e.employee.login,checkedFlag:"inputEmployeeLoginChecked",checked:e.view.inputEmployeeLoginChecked,redStar:!0,disabled:e.employee.deleted}),e.view.errorSameLogin?Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u0422\u0430\u043a\u043e\u0439 Login \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):null,Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"password")},value:e.employee.password,checkedFlag:e.employee.edit?null:"inputEmployeePasswordChecked",checked:e.view.inputEmployeePasswordChecked,redStar:!e.employee.edit,disabled:e.employee.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(t){return e.changeEmployeEditorForm(t,"phone")},value:e.employee.phone,disabled:e.employee.deleted,isPhone:!0}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0418\u041d\u041d \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"inn")},value:e.employee.inn,disabled:e.employee.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0418\u043c\u044f \u0432 \u043f\u0435\u0447\u0430\u0442\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"doc_name")},value:e.employee.doc_name,disabled:e.employee.deleted}),Object(Ue.jsx)(un,{className:"mt15",title:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"notes")},value:e.employee.notes,disabled:e.employee.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeEmployeEditorForm(t.target.value,"post")},value:e.employee.post,disabled:e.employee.deleted}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0420\u043e\u043b\u044c"}),Object(Ue.jsx)(ln,{id:19,className:"mt15",list:e.roles,field:"role_id",setElement:e.changeEmployeEditorForm,current_id:e.employee.role_id,width:"250px",disabled:e.employee.deleted}),e.view.inputEmployeeRoleChecked?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0440\u043e\u043b\u044c"}),e.employee.edit?Object(Ue.jsx)(Yc,{}):null]})}));var Jc=Object(s.b)()((function(e){return Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Xc={changeEmployeeTabs:function(e){return{type:"CHANGE_EMPLOYEE_TAB",tab:e}},setVisibleFlag:fe,createEmployee:function(){var e=de.getState(),t=ue({first_name:e.employee.first_name,last_name:e.employee.last_name,email:e.employee.email,notes:e.employee.notes,phone:e.employee.phone.replace(/[^0-9]/g,""),password:e.employee.password,role_id:e.employee.role_id,login:e.employee.login,inn:e.employee.inn,doc_name:e.employee.doc_name});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/employee",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_employee",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_EMPLOYEES",employees:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusEmployeeEditor",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEditEmployee:function(){var e=de.getState(),t=ue({id:e.employee.edit,first_name:e.employee.first_name,last_name:e.employee.last_name,email:e.employee.email,notes:e.employee.notes,phone:e.employee.phone.replace(/[^0-9]/g,""),password:e.employee.password,role_id:e.employee.role_id,login:e.employee.login,inn:e.employee.inn,doc_name:e.employee.doc_name});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/employee",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_employee",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_EMPLOYEES",employees:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusEmployeeEditor",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteEmployee:function(e){var t=de.getState(),n=ue({id:t.employee.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/employee",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_employee",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_EMPLOYEES",employees:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusEmployeeEditor",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addPayrules:function(){var e=de.getState();return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.url_server+"/get_payrules",rt({})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"payrules",data:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Zc=Object(s.b)((function(e){return{tabs:e.employee.tabs,edit:e.employee.edit,employee:e.employee,permissions:e.data.user.role.permissions}}),Xc)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("createNewRoleWiondow")||e.setVisibleFlag("statusEmployeeEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(r.useEffect)((function(){e.addPayrules()}),[]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"createNewRoleWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.edit?"".concat(e.employee.last_name," ").concat(e.employee.first_name):"\u041d\u043e\u0432\u044b\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ue.jsxs)("div",{className:"tabs",children:[Object(Ue.jsx)("div",{className:1===e.tabs?"tabOn":"tab",onClick:function(){return e.changeEmployeeTabs(1)},children:"\u041e\u0431\u0449\u0438\u0435"}),Object(Ue.jsx)("div",{className:2===e.tabs?"tabOn":"tab",onClick:function(){return e.changeEmployeeTabs(2)},children:"\u0414\u043e\u0441\u0442\u0443\u043f"})]}),1===e.tabs?Object(Ue.jsx)(Qc,{}):null,2===e.tabs?Object(Ue.jsx)(Jc,{}):null,Object(Ue.jsx)($t,{edit:e.edit,create:function(){e.employee.first_name&&e.employee.email&&e.employee.login&&e.employee.password&&0!==e.employee.role_id?e.createEmployee():(e.employee.first_name||e.setVisibleFlag("inputEmployeeNameChecked",!1),e.employee.email||e.setVisibleFlag("inputEmployeeEmailChecked",!1),e.employee.login||e.setVisibleFlag("inputEmployeeLoginChecked",!1),e.employee.password||e.setVisibleFlag("inputEmployeePasswordChecked",!1),0===e.employee.role_id&&e.setVisibleFlag("inputEmployeeRoleChecked",!1))},save:function(){e.employee.first_name&&e.employee.email&&e.employee.login?e.seveEditEmployee():(e.employee.first_name||e.setVisibleFlag("inputEmployeeNameChecked",!1),e.employee.email||e.setVisibleFlag("inputEmployeeEmailChecked",!1),e.employee.login||e.setVisibleFlag("inputEmployeeLoginChecked",!1))},delete:function(){return e.deleteEmployee(!0)},recover:e.permissions.includes("setting_recover_employees")?function(){return e.deleteEmployee(!1)}:null,close:function(){return e.setVisibleFlag("statusEmployeeEditor",!1)},deleted:e.employee.deleted})]})})})),$c={changePermissions:be},ea=Object(s.b)((function(e){return{list_permissions:e.role.list_permissions}}),$c)((function(e){return Object(Ue.jsxs)("div",{className:"subCheckbox",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(){return e.changePermissions([e.value])},checked:e.list_permissions.includes(e.value)}),Object(Ue.jsx)("label",{children:e.description})]})})),ta={changePermissions:be},na=Object(s.b)((function(e){return{list_permissions:e.role.list_permissions}}),ta)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.data.permission.filter((function(t){return e.list_permissions.includes(t.value)}));n.length===e.data.permission.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.list_permissions]),Object(Ue.jsxs)("div",{className:"chackboxes",children:[Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return e.changePermissions(e.data.permission.map((function(e){return e.value})))}}),Object(Ue.jsx)("label",{children:e.data.description})]}),e.data.permission.map((function(e,t){return Object(Ue.jsx)(ea,{value:e.value,description:e.description},t)}))]})}));var ra={changeVisibleStatuses:function(e){return{type:"CHANGE_VISIBLE_STATUSES",id:e}},changeSettableStatuses:function(e){return{type:"CHANGE_SETTABLE_STATUSES",id:e}}},ia=Object(s.b)((function(e){return{visible_statuses:e.role.visible_statuses,settable_statuses:e.role.settable_statuses}}),ra)((function(e){var t=Object(r.useRef)();Object(r.useEffect)((function(){var n=e.status.filter((function(t){return e.visible_statuses.includes(t.id)}));n.length===e.status.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.visible_statuses]);var n=Object(r.useRef)();return Object(r.useEffect)((function(){var t=e.status.filter((function(t){return e.settable_statuses.includes(t.id)}));t.length===e.status.length?(n.current.indeterminate=!1,n.current.checked=!0):t.length?n.current.indeterminate=!0:(n.current.indeterminate=!1,n.current.checked=!1)}),[e.settable_statuses]),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ue.jsx)("th",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",ref:t,onChange:function(){return e.changeVisibleStatuses(e.status.map((function(e){return e.id})))}}),Object(Ue.jsx)("label",{children:"\u0412\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435"})]})}),Object(Ue.jsx)("th",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",ref:n,onChange:function(){return e.changeSettableStatuses(e.status.map((function(e){return e.id})))}}),Object(Ue.jsx)("label",{children:"\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})]})})]})}),Object(Ue.jsx)("tbody",{children:e.status.map((function(t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)("div",{style:{backgroundColor:t.color},className:"statusListRow",children:t.name})}),Object(Ue.jsx)("td",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(){return e.changeVisibleStatuses([t.id])},checked:e.visible_statuses.includes(t.id)}),Object(Ue.jsx)("label",{})]})}),Object(Ue.jsx)("td",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(){return e.changeSettableStatuses([t.id])},checked:e.settable_statuses.includes(t.id)}),Object(Ue.jsx)("label",{})]})})]},t.id)}))})]})}));var ca={cahngeOrdersVisibility:function(e){return{type:"CHANGE_ORDERS_VISIBILITY",bool:e}},cahngeLeadsVisibility:function(e){return{type:"CHANGE_LEADS_VISIBILITY",bool:e}},cahngeEarningsVisibility:function(e){return{type:"CHANGE_EARNINGS_VISIBILITY",bool:e}}},aa=Object(s.b)((function(e){return{earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility}}),ca)((function(e){return Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u041e\u0442\u0435\u0442 \u043f\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c"}),Object(Ue.jsxs)("div",{className:"checkButton",children:[Object(Ue.jsx)("div",{className:e.earnings_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeEarningsVisibility(!0)},children:"\u041f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c"}),Object(Ue.jsx)("div",{className:e.earnings_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeEarningsVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u044e \u0417\u041f"})]}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ue.jsxs)("div",{className:"checkButton",children:[Object(Ue.jsx)("div",{className:e.orders_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeOrdersVisibility(!0)},children:"\u0412\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"}),Object(Ue.jsx)("div",{className:e.orders_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeOrdersVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"})]}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ue.jsxs)("div",{className:"checkButton",children:[Object(Ue.jsx)("div",{className:e.leads_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeLeadsVisibility(!0)},children:"\u0412\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ue.jsx)("div",{className:e.leads_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeLeadsVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"})]})]})}));var sa={changeSettableMargin:function(e){return{type:"CHANGE_SETTABLE_MARGIN",id:e}}},oa=Object(s.b)((function(e){return{discount_margin:e.data.discount_margin,settable_discount_margin:e.role.settable_discount_margin}}),sa)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.discount_margin.filter((function(t){return e.settable_discount_margin.includes(t.id)}));n.length===e.discount_margin.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.settable_discount_margin]),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"headerCheckbox",children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",ref:t,onChange:function(){return e.changeSettableMargin(e.discount_margin.map((function(e){return e.id})))}}),Object(Ue.jsx)("label",{})]})}),Object(Ue.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})]})}),Object(Ue.jsx)("tbody",{children:e.discount_margin.map((function(t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",onChange:function(){return e.changeSettableMargin([t.id])},checked:e.settable_discount_margin.includes(t.id)}),Object(Ue.jsx)("label",{})]})}),Object(Ue.jsx)("td",{children:t.title})]},t.id)}))})]})})),la={changeTitleCreateRole:function(e){return{type:"CHANGE_TITLE_CREATE_ROLE",title:e}},createRole:function(){var e=de.getState(),t=ue({title:e.role.title_create,earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility,permissions:e.role.list_permissions,settable_statuses:e.role.settable_statuses,visible_statuses:e.role.visible_statuses,settable_discount_margin:e.role.settable_discount_margin});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEditRole:function(){var e=de.getState(),t=ue({id:e.role.edit,title:e.role.title_create,earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility,permissions:e.role.list_permissions,settable_statuses:e.role.settable_statuses,visible_statuses:e.role.visible_statuses,settable_discount_margin:e.role.settable_discount_margin});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteRole:function(){var e=de.getState(),t=ue({id:e.role.edit});return t.method="DELETE",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setVisibleFlag:fe},da=Object(s.b)((function(e){return{title_create:e.role.title_create,edit:e.role.edit,status:e.data.status,inputRoleTitleChecked:e.view.inputRoleTitleChecked}}),la)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("createNewRoleWiondow")||e.setVisibleFlag("statusCreateNewRole",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"createNewRoleWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.edit?e.title_create:" \u041d\u043e\u0432\u0430\u044f \u0440\u043e\u043b\u044c"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("div",{className:"lableImput",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(Ue.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ue.jsx)("input",{className:"textInput",onChange:function(t){return e.changeTitleCreateRole(t.target.value)},value:e.title_create,onBlur:function(t){return e.setVisibleFlag("inputRoleTitleChecked",!!t.target.value)},style:e.inputRoleTitleChecked?null:{borderColor:"red"}}),e.inputRoleTitleChecked?null:Object(Ue.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),k.map((function(e,t){return Object(Ue.jsx)(na,{data:e},t)})),Object(Ue.jsx)(aa,{}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ue.jsx)(ia,{status:e.status.filter((function(e){return e.group<8}))}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439"}),Object(Ue.jsx)(ia,{status:e.status.filter((function(e){return e.group>7}))}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0446\u0435\u043d\u0430\u043c"}),Object(Ue.jsx)(oa,{})]}),Object(Ue.jsx)($t,{edit:e.edit,create:function(){e.title_create?e.createRole():e.setVisibleFlag("inputRoleTitleChecked",!1)},save:function(){return e.seveEditRole(e.edit)},delete:function(){return e.deleteRole(e.edit)},close:function(){return e.setVisibleFlag("statusCreateNewRole",!1)}})]})})}));var ua={editEmoloyee:je,setVisibleFlag:fe},ma=Object(s.b)((function(e){return{employees:e.data.employees,showDeleted:e.employee.showDeleted}}),ua)((function(e){return Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ue.jsx)("th",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(Ue.jsx)("th",{children:"email"}),Object(Ue.jsx)("th",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(Ue.jsx)("th",{children:"\u0420\u043e\u043b\u044c"})]})}),Object(Ue.jsx)("tbody",{children:e.employees.filter((function(t){return e.showDeleted||!t.deleted})).map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){e.editEmoloyee(t),e.setVisibleFlag("statusEmployeeEditor",!0)},children:[Object(Ue.jsx)("td",{children:"".concat(t.last_name," ").concat(t.first_name)}),Object(Ue.jsx)("td",{children:t.login}),Object(Ue.jsx)("td",{children:t.email}),Object(Ue.jsx)("td",{children:t.phone?Gt(t.phone):null}),Object(Ue.jsx)("td",{children:t.role.title})]},t.id)}))})]})}));var pa={editRole:function(e){return{type:"EDIT_ROLE",role:e}}},ha=Object(s.b)((function(e){return{roles:e.data.roles}}),pa)((function(e){return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsx)("tr",{children:Object(Ue.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})})}),Object(Ue.jsx)("tbody",{children:e.roles.map((function(t){return Object(Ue.jsx)("tr",{onDoubleClick:function(){return e.editRole(t)},children:Object(Ue.jsx)("td",{children:t.title})},t.id)}))})]}),Object(Ue.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",e.roles.length]})]})})),ba={setVisibleFlag:fe,addDiscountMargin:Me,addRoles:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_roles",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_ROLES",roles:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeShowDeleted:function(){return{type:"CHANGE_SHOW_DELETED"}},resetEmoloyee:function(){return{type:"RESET_EMPLOYEE"}}},ja=Object(s.b)((function(e){return{statusCreateNewRole:e.view.statusCreateNewRole,statusEmployeeEditor:e.view.statusEmployeeEditor,showDeleted:e.employee.showDeleted,permission:e.data.user.role.permissions}}),ba)((function(e){return Object(r.useEffect)((function(){e.addDiscountMargin(),e.addRoles()}),[]),Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"})}),Object(Ue.jsxs)("div",{className:"settingPageBody",children:[e.permission.includes("setting_roles")?Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("h3",{children:"\u0420\u043e\u043b\u0438"}),Object(Ue.jsx)("p",{children:"\u0420\u043e\u043b\u044c \u2014 \u044d\u0442\u043e \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0430\u0432 \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430."}),Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0420\u043e\u043b\u044c",onClick:function(){return e.setVisibleFlag("statusCreateNewRole",!0)}}),e.statusCreateNewRole?Object(Ue.jsx)(da,{}):null,Object(Ue.jsx)(ha,{})]}):null,Object(Ue.jsx)("h3",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"}),Object(Ue.jsx)("p",{children:"\u041a\u0430\u0436\u0434\u044b\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0438\u043c\u0435\u0435\u0442 \u0441\u0432\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 OneTwoService"}),Object(Ue.jsxs)("div",{className:"buttons",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",onClick:function(){e.resetEmoloyee(),e.setVisibleFlag("statusEmployeeEditor",!0)}}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(){return e.changeShowDeleted()},checked:e.showDeleted,unvisible:!e.permission.includes("setting_see_employees")})]}),e.statusEmployeeEditor?Object(Ue.jsx)(Zc,{}):null,Object(Ue.jsx)(ma,{})]})]})})),_a={changeShedule:function(e,t,n){return{type:"CHANGE_SCHEDULE",idx:e,field:t,value:n}}},fa=Object(s.b)((function(e){return{branch:e.branch}}),_a)((function(e){var t=["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0441\u0435\u043d\u0438\u0435"];return Object(Ue.jsxs)("div",{className:"schedule mr-rg-20",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),e.branch.schedule.map((function(n,r){return Object(Ue.jsxs)("div",{className:"row mt15",children:[Object(Ue.jsx)(zr,{className:"w150",onChange:function(t){return e.changeShedule(r,"work_day",t.target.checked)},checked:n.work_day,label:t[r],disabled:e.branch.deleted}),e.branch.schedule[r].work_day?Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("input",{className:"w70",onChange:e.branch.deleted?null:function(t){return e.changeShedule(r,"start_time",t.target.value)},value:n.start_time}),Object(Ue.jsx)("div",{className:"w30 tac",children:"\u2014"}),Object(Ue.jsx)("input",{className:"w70",onChange:e.branch.deleted?null:function(t){return e.changeShedule(r,"end_time",t.target.value)},value:n.end_time})]}):null]},r)}))]})})),Oa={setVisibleFlag:fe,changeBranchForm:ke},va=Object(s.b)((function(e){return{branch:e.branch,statusChooseIcon:e.view.statusChooseIcon}}),Oa)((function(e){var t=["#cccccc","#d70000","#f6c000","#2ab676","#0099e8","#3d4fb8","#9a33b4","#616161","#7784cd","#f8622b","#e87d6f","#038140"],n=[V,"M16 0c-5.523 0-10 4.477-10 10 0 10 10 22 10 22s10-12 10-22c0-5.523-4.477-10-10-10zM16 16.125c-3.383 0-6.125-2.742-6.125-6.125s2.742-6.125 6.125-6.125 6.125 2.742 6.125 6.125-2.742 6.125-6.125 6.125zM12.125 10c0-2.14 1.735-3.875 3.875-3.875s3.875 1.735 3.875 3.875c0 2.14-1.735 3.875-3.875 3.875s-3.875-1.735-3.875-3.875z","M31.342 25.559l-14.392-12.336c0.67-1.259 1.051-2.696 1.051-4.222 0-4.971-4.029-9-9-9-0.909 0-1.787 0.135-2.614 0.386l5.2 5.2c0.778 0.778 0.778 2.051 0 2.828l-3.172 3.172c-0.778 0.778-2.051 0.778-2.828 0l-5.2-5.2c-0.251 0.827-0.386 1.705-0.386 2.614 0 4.971 4.029 9 9 9 1.526 0 2.963-0.38 4.222-1.051l12.336 14.392c0.716 0.835 1.938 0.882 2.716 0.104l3.172-3.172c0.778-0.778 0.731-2-0.104-2.716z","M31.562 25.905l-9.423-9.423c-0.583-0.583-1.538-0.583-2.121 0l-0.707 0.707-5.75-5.75 9.439-9.439h-10l-4.439 4.439-0.439-0.439h-2.121v2.121l0.439 0.439-6.439 6.439 5 5 6.439-6.439 5.75 5.75-0.707 0.707c-0.583 0.583-0.583 1.538 0 2.121l9.423 9.423c0.583 0.583 1.538 0.583 2.121 0l3.535-3.535c0.583-0.583 0.583-1.538 0-2.121z","M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 20c-2.209 0-4-1.791-4-4s1.791-4 4-4c2.209 0 4 1.791 4 4s-1.791 4-4 4z","M31.397 14.575l-13.972-13.971c-0.804-0.805-2.109-0.805-2.915 0l-3.246 3.246 2.443 2.443c0.392-0.187 0.83-0.293 1.293-0.293 1.657 0 3 1.343 3 3 0 0.463-0.105 0.902-0.293 1.293l3.999 3.999c0.392-0.187 0.83-0.293 1.293-0.293 1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3c0-0.463 0.105-0.902 0.293-1.293l-3.999-3.999c-0.095 0.046-0.193 0.086-0.293 0.121v8.343c1.165 0.412 2 1.522 2 2.829 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-1.306 0.835-2.417 2-2.829v-8.343c-1.165-0.412-2-1.522-2-2.829 0-0.463 0.105-0.902 0.293-1.293l-2.443-2.443-9.247 9.246c-0.805 0.806-0.805 2.11 0 2.915l13.973 13.971c0.804 0.805 2.109 0.805 2.915 0l13.906-13.906c0.805-0.805 0.805-2.111-0-2.915z","M29 13c-0.888 0-1.686 0.386-2.236 1h-5.936l4.197-4.197c0.822 0.046 1.66-0.245 2.288-0.874 1.172-1.172 1.172-3.071 0-4.243s-3.071-1.172-4.243 0c-0.628 0.628-0.919 1.466-0.874 2.288l-4.197 4.197v-5.936c0.614-0.549 1-1.347 1-2.236 0-1.657-1.343-3-3-3s-3 1.343-3 3c0 0.888 0.386 1.686 1 2.236v5.936l-4.197-4.197c0.045-0.822-0.245-1.66-0.874-2.288-1.172-1.172-3.071-1.172-4.243 0s-1.172 3.071 0 4.243c0.628 0.628 1.466 0.919 2.288 0.874l4.197 4.197h-5.936c-0.549-0.614-1.347-1-2.236-1-1.657 0-3 1.343-3 3s1.343 3 3 3c0.888 0 1.686-0.386 2.236-1h5.936l-4.197 4.197c-0.822-0.046-1.66 0.245-2.288 0.874-1.172 1.172-1.172 3.071 0 4.243s3.071 1.172 4.243 0c0.628-0.628 0.919-1.466 0.874-2.288l4.197-4.197v5.936c-0.614 0.549-1 1.347-1 2.235 0 1.657 1.343 3 3 3s3-1.343 3-3c0-0.888-0.386-1.686-1-2.236v-5.936l4.197 4.197c-0.046 0.822 0.245 1.66 0.874 2.288 1.172 1.172 3.071 1.172 4.243 0s1.172-3.071 0-4.243c-0.628-0.628-1.466-0.919-2.288-0.874l-4.197-4.197h5.936c0.549 0.614 1.347 1 2.235 1 1.657 0 3-1.343 3-3s-1.343-3-3-3z"];return Object(Ue.jsx)("div",{className:"mt15",children:e.statusChooseIcon?Object(Ue.jsx)("div",{children:n.map((function(n,r){return Object(Ue.jsx)("div",{className:"row",children:t.map((function(t,r){return Object(Ue.jsx)("div",{onClick:function(){e.changeBranchForm("color",t),e.changeBranchForm("icon",n),e.setVisibleFlag("statusChooseIcon",!1)},children:Object(Ue.jsx)(Xe,{icon:n,color:t})},r)}))},r)}))}):Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0426\u0432\u0435\u0442 \u0438 \u0438\u043a\u043e\u043d\u043a\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(Ue.jsx)("div",{onClick:e.branch.deleted?null:function(){return e.setVisibleFlag("statusChooseIcon","change")},children:Object(Ue.jsx)(Xe,{icon:e.branch.icon,color:e.branch.color})})]})})})),ga={setBranchEmployee:function(e){return{type:"SET_BRANCH_EMPLOYEE",id:e}}},xa=Object(s.b)((function(e){return{employees:e.data.employees,branch:e.branch}}),ga)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.employees.filter((function(t){return e.branch.employees.includes(t.id)}));n.length===e.employees.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.branch.employees]),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w30",children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{type:"checkbox",ref:t,onChange:e.branch.deleted?null:function(){return e.setBranchEmployee(e.employees.map((function(e){return e.id})))}}),Object(Ue.jsx)("label",{children:e.label})]})}),Object(Ue.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"})]})}),Object(Ue.jsx)("tbody",{children:e.employees.filter((function(e){return!e.deleted})).map((function(t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)(zr,{onChange:function(){return e.setBranchEmployee([t.id])},checked:e.branch.employees.includes(t.id),disabled:e.branch.deleted})}),Object(Ue.jsx)("td",{children:"".concat(t.last_name," ").concat(t.first_name)})]},t.id)}))})]})})),ya={setVisibleFlag:fe,changeBranchForm:ke,createBranch:function(){var e=de.getState(),t=ue({name:e.branch.name,address:e.branch.address,phone:e.branch.phone,color:e.branch.color,icon:e.branch.icon,orders_type_id:e.branch.orders_type_id,orders_type_strategy:e.branch.orders_type_strategy,orders_prefix:e.branch.orders_prefix,documents_prefix:e.branch.documents_prefix,employees:e.branch.employees,deleted:e.branch.deleted,schedule:e.branch.schedule});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/branch",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_branch",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"branches",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusBranchEditor",value:!1}),r({type:"RESET_BRANCH"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u0438\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveBranch:function(){var e=de.getState(),t=ue({id:e.branch.edit,name:e.branch.name,address:e.branch.address,phone:e.branch.phone,color:e.branch.color,icon:e.branch.icon,orders_type_id:e.branch.orders_type_id,orders_type_strategy:e.branch.orders_type_strategy,orders_prefix:e.branch.orders_prefix,documents_prefix:e.branch.documents_prefix,employees:e.branch.employees,deleted:e.branch.deleted,schedule:e.branch.schedule});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/branch",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_branch",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"branches",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusBranchEditor",value:!1}),r({type:"RESET_BRANCH"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteBranch:function(e){var t=de.getState(),n=ue({id:t.branch.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/branch",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_branch",ue()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"branches",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusBranchEditor",value:!1}),r({type:"RESET_BRANCH"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u0438\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ea=Object(s.b)((function(e){return{branch:e.branch,view:e.view,order_type:e.data.order_type,counters:e.data.counters,permissions:e.data.user.role.permissions}}),ya)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("BranchEditorWiondow")||e.setVisibleFlag("statusBranchEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"BranchEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.branch.edit?e.branch.name:" \u041d\u043e\u0432\u0430\u044f \u043b\u043e\u043a\u0430\u0446\u0438\u044f"}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBranchForm("name",t.target.value)},value:e.branch.name,checkedFlag:"inputBranchNameChecked",checked:e.view.inputBranchNameChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeBranchForm("address",t.target.value)},value:e.branch.address,disabled:e.branch.deleted}),Object(Ue.jsx)(un,{className:"textInput w250",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(t){return e.changeBranchForm("phone",t)},value:e.branch.phone,disabled:e.branch.deleted,isPhone:!0}),Object(Ue.jsx)(fa,{}),Object(Ue.jsx)(va,{}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}),Object(Ue.jsx)(ln,{id:18,list:e.order_type,field:"orders_type_id",setElement:e.changeBranchForm,current_id:e.branch.orders_type_id,width:"250px",disabled:e.branch.deleted}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u043e\u043c\u0435\u0440\u0430 \u0437\u0430\u043a\u0430\u0437\u0430",onChange:function(t){return e.changeBranchForm("orders_prefix",t.target.value)},value:e.branch.orders_prefix,checkedFlag:"inputBranchPrefixChecked",checked:e.view.inputBranchPrefixChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ue.jsxs)("p",{className:"mt0",children:["\u041f\u0440\u0438\u043c\u0435\u0440:"," ","".concat(e.branch.orders_prefix,"-").concat(e.counters.find((function(e){return 1===e.id})).count)]}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u043e\u043c\u0435\u0440\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",onChange:function(t){return e.changeBranchForm("documents_prefix",t.target.value)},value:e.branch.documents_prefix,checkedFlag:"inputBranchPrefixDocChecked",checked:e.view.inputBranchPrefixDocChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ue.jsxs)("p",{className:"mt0",children:["\u041f\u0440\u0438\u043c\u0435\u0440:"," ","".concat(e.branch.documents_prefix,"-").concat(e.counters.find((function(e){return 2===e.id})).count)]}),Object(Ue.jsx)(xa,{}),Object(Ue.jsx)($t,{edit:e.branch.edit,create:function(){e.branch.name&&e.branch.orders_prefix&&e.branch.documents_prefix?e.createBranch():(e.branch.name||e.setVisibleFlag("inputBranchNameChecked",!1),e.branch.orders_prefix||e.setVisibleFlag("inputBranchPrefixChecked",!1),e.branch.documents_prefix||e.setVisibleFlag("inputBranchPrefixDocChecked",!1))},save:function(){return e.saveBranch()},recover:e.permissions.includes("setting_recover_branch")?function(){return e.deleteBranch(!1)}:null,delete:function(){return e.deleteBranch(!0)},close:function(){return e.setVisibleFlag("statusBranchEditor",!1)},deleted:e.branch.deleted})]})})})),Na={editBranch:function(e){return function(t){t({type:"EDIT_BRANCH",branch:e}),t({type:"SET_VISIBLE_FLAG",field:"statusBranchEditor",value:!0})}}},wa=Object(s.b)((function(e){return{branches:e.data.branches,showDeleted:e.branch.showDeleted}}),Na)((function(e){return Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{}),Object(Ue.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(Ue.jsx)("th",{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(Ue.jsx)("th",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})]})}),Object(Ue.jsx)("tbody",{children:e.branches.filter((function(t){return e.showDeleted||!t.deleted})).map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return e.editBranch(t)},children:[Object(Ue.jsx)("td",{className:"w30",children:Object(Ue.jsx)(Xe,{icon:t.icon,color:t.color})}),Object(Ue.jsx)("td",{children:t.name}),Object(Ue.jsx)("td",{children:t.address}),Object(Ue.jsx)("td",{children:Gt(t.phone)})]},t.id)}))})]})})),ka={setVisibleFlag:fe,addCounters:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_counts",ue({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"counters",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeBranchForm:ke},Ca=Object(s.b)((function(e){return{statusBranchEditor:e.view.statusBranchEditor,showDeleted:e.branch.showDeleted,permissions:e.data.user.role.permissions}}),ka)((function(e){return Object(r.useEffect)((function(){e.addCounters()}),[]),Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"})}),Object(Ue.jsxs)("div",{className:"settingPageBody",children:[Object(Ue.jsx)("p",{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438. \u041a\u0430\u0436\u0434\u043e\u0439 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0438 \u0446\u0432\u0435\u0442."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"greenButton",onClick:function(){return e.setVisibleFlag("statusBranchEditor",!0)},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e"}),e.permissions.includes("setting_see_branch")?Object(Ue.jsx)(zr,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeBranchForm("showDeleted",t.target.checked)},checked:e.showDeleted}):null]}),Object(Ue.jsx)(wa,{}),e.statusBranchEditor?Object(Ue.jsx)(Ea,{}):null]})]})})),Sa={editWarehouse:function(e){return{type:"EDIT_WAREHOUSE",warehouse:e}},setVisibleFlag:fe},Ta=Object(s.b)((function(e){return{warehouses:e.warehouse.warehouses,permissions:e.data.user.role.permissions}}),Sa)((function(e){return Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w15",children:" "}),Object(Ue.jsx)("th",{className:"w150",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})}),Object(Ue.jsx)("tbody",{children:e.warehouses.filter((function(t){return e.showDeleted||!t.deleted})).map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_warehouse")&&(e.editWarehouse(t),e.setVisibleFlag("statusWarehouseEditor",!0))}(t)},children:[Object(Ue.jsx)("td",{className:"",children:Object(Ue.jsx)(Xe,{className:"icon-s1",icon:t.branch.icon,color:t.branch.color})}),Object(Ue.jsx)("td",{className:"",children:t.title}),Object(Ue.jsx)("td",{className:"",children:t.description})]},t.id)}))})]})})),Fa={changeWarehouseForm:ec,chooseWarehouseSelected:function(e,t){return{type:"SELECTED_WAREHOUSE",field:t,value:e}}},Aa=Object(s.b)((function(e){return{warehouse:e.warehouse,branches:e.data.branches.filter((function(e){return!e.deleted})),inputBookTitleChecked:e.view.inputBookTitleChecked}}),Fa)((function(e){return Object(Ue.jsxs)("div",{className:"",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.value,"title")},value:e.warehouse.title,checkedFlag:"inputWarehouseTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.warehouse.deleted}),Object(Ue.jsx)(pn,{className:"w250 mt15",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.value,"description")},value:e.warehouse.description,disabled:e.warehouse.deleted}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",name:["\u0421\u043a\u043b\u0430\u0434 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u0421\u043a\u043b\u0430\u0434 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"],func1:function(){return e.changeWarehouseForm(!0,"isGlobal")},func2:function(){return e.changeWarehouseForm(!1,"isGlobal")},disabled:e.warehouse.deleted,unvisible:!1}),Object(Ue.jsx)(ln,{id:"brWH",title:"\u0424\u0438\u043b\u0438\u0430\u043b",className:"mt15",list:e.branches,field:"branch_id",setElement:e.changeWarehouseForm,current_id:e.warehouse.branch_id,disabled:e.warehouse.deleted,unvisible:e.warehouse.isGlobal}),Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043a\u0430\u0441\u0441\u043e\u0439"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438",onChange:function(){return e.chooseWarehouseSelected(["show_warehouse_remains"],"permissions")},checked:e.warehouse.permissions.includes("show_warehouse_remains"),disabled:e.warehouse.deleted}),Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["warehouse_registration"],"permissions")},checked:e.warehouse.permissions.includes("warehouse_registration"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["move_in"],"permissions")},checked:e.warehouse.permissions.includes("move_in"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",onChange:function(){return e.chooseWarehouseSelected(["return_from_client"],"permissions")},checked:e.warehouse.permissions.includes("return_from_client"),disabled:e.warehouse.deleted})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["write_off"],"permissions")},checked:e.warehouse.permissions.includes("write_off"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["move_out"],"permissions")},checked:e.warehouse.permissions.includes("move_out"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u043a\u0430\u0437",onChange:function(){return e.chooseWarehouseSelected(["add_to_order"],"permissions")},checked:e.warehouse.permissions.includes("add_to_order"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0443",onChange:function(){return e.chooseWarehouseSelected(["add_to_sale"],"permissions")},checked:e.warehouse.permissions.includes("add_to_sale"),disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443",onChange:function(){return e.chooseWarehouseSelected(["return_to_supplier"],"permissions")},checked:e.warehouse.permissions.includes("return_to_supplier"),disabled:e.warehouse.deleted})]})]})]})})),Da={setVisibleFlag:fe,changeWarehousePermission:nc},Pa=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,warehouse:e.warehouse}}),Da)((function(e){var t=Object(r.useState)(e.warehouse.employees[e.warehouse.permissions_employee].like_warehouse),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("warehouseEmployeeEditor")||e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ue.jsx)("div",{className:"centerBlock",children:Object(Ue.jsxs)("div",{className:"blockWindow",id:"warehouseEmployeeEditor",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"".concat(e.employee.last_name," ").concat(e.employee.first_name)}),Object(Ue.jsx)("div",{className:"createNewTitle mt0",children:e.employee.role_title}),Object(Ue.jsx)(xi,{text:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0435\u0433\u043e \u0440\u043e\u043b\u0438",width:"500px"}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430",name:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0430","\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435"],func1:function(){c(!0),e.changeWarehousePermission(!0,"like_warehouse")},func2:function(){c(!1),e.changeWarehousePermission(!1,"like_warehouse")},checked:e.warehouse.employees[e.warehouse.permissions_employee].like_warehouse,disabled:e.warehouse.deleted}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438",onChange:function(){return e.changeWarehousePermission("show_warehouse_remains","permissions")},checked:i?e.warehouse.permissions.includes("show_warehouse_remains"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("show_warehouse_remains"),disabled:e.warehouse.deleted||i}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("warehouse_registration","permissions")},checked:i?e.warehouse.permissions.includes("warehouse_registration"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("warehouse_registration"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("move_in","permissions")},checked:i?e.warehouse.permissions.includes("move_in"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("move_in"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",onChange:function(){return e.changeWarehousePermission("return_from_client","permissions")},checked:i?e.warehouse.permissions.includes("return_from_client"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("return_from_client"),disabled:e.warehouse.deleted||i})]}),Object(Ue.jsxs)("div",{className:"ml30",children:[Object(Ue.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("write_off","permissions")},checked:i?e.warehouse.permissions.includes("write_off"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("write_off"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("move_out","permissions")},checked:i?e.warehouse.permissions.includes("move_out"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("move_out"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u043a\u0430\u0437",onChange:function(){return e.changeWarehousePermission("add_to_order","permissions")},checked:i?e.warehouse.permissions.includes("add_to_order"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("add_to_order"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0443",onChange:function(){return e.changeWarehousePermission("add_to_sale","permissions")},checked:i?e.warehouse.permissions.includes("add_to_sale"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("add_to_sale"),disabled:e.warehouse.deleted||i}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443",onChange:function(){return e.changeWarehousePermission("return_to_supplier","permissions")},checked:i?e.warehouse.permissions.includes("return_to_supplier"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("return_to_supplier"),disabled:e.warehouse.deleted||i})]})]}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"blueButton mr-lf-0",onClick:function(){return e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Ue.jsx)("div",{className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})})),Ra={changeWarehouseForm:ec,editEmoloyee:je,setVisibleFlag:fe,changeWarehousePermission:nc},Ba=Object(s.b)((function(e){return{employees:e.data.employees.filter((function(e){return!e.deleted})),warehouse:e.warehouse,statusWarehouseEmployeeEditor:e.view.statusWarehouseEmployeeEditor}}),Ra)((function(e){return Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("table",{className:"mt15",children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w15"}),Object(Ue.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ue.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0430"})]})}),Object(Ue.jsx)("tbody",{children:e.employees.map((function(t){return Object(Ue.jsxs)("tr",{onDoubleClick:function(){return function(t){e.changeWarehouseForm(t.id,"permissions_employee"),e.editEmoloyee(t),e.setVisibleFlag("statusWarehouseEmployeeEditor",!0)}(t)},children:[Object(Ue.jsx)("td",{children:Object(Ue.jsx)(zr,{onChange:function(n){return r=t.id,i=n.target.checked,e.changeWarehouseForm(r,"permissions_employee"),void e.changeWarehousePermission(i,"available");var r,i},checked:e.warehouse.employees[t.id].available,disabled:e.warehouse.deleted})}),Object(Ue.jsx)("td",{children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ue.jsx)("td",{children:e.warehouse.employees[t.id].available?e.warehouse.employees[t.id].like_warehouse?"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0430":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"})]},t.id)}))})]}),e.statusWarehouseEmployeeEditor?Object(Ue.jsx)(Pa,{}):null]})})),Ia={setVisibleFlag:fe,changeWarehouseForm:ec,resetWarehouse:tc,createWarehouse:function(){var e=de.getState(),t=rt({title:e.warehouse.title,description:e.warehouse.description,deleted:e.warehouse.deleted,isGlobal:e.warehouse.isGlobal,permissions:e.warehouse.permissions,employees:e.warehouse.employees,branch_id:e.warehouse.branch_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/warehouse",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_warehouse",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveWarehouse:function(){var e=de.getState(),t=rt({id:e.warehouse.edit,title:e.warehouse.title,description:e.warehouse.description,deleted:e.warehouse.deleted,isGlobal:e.warehouse.isGlobal,permissions:e.warehouse.permissions,employees:e.warehouse.employees,branch_id:e.warehouse.branch_id});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/warehouse",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_warehouse",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteWarehouse:function(e){var t=de.getState(),n=rt({id:t.warehouse.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/warehouse",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_warehouse",rt({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},La=Object(s.b)((function(e){return{warehouse:e.warehouse,employees:e.data.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),Ia)((function(e){var t=function(){e.resetWarehouse(),e.setVisibleFlag("statusWarehouseEditor",!1),e.setVisibleFlag("inputWarehouseTitleChecked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("warehouseEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){if(!e.warehouse.edit){var t={};e.employees.forEach((function(e){t[e.id]={},t[e.id].available=!0,t[e.id].like_warehouse=!0,t[e.id].permissions=S})),e.changeWarehouseForm(t,"employees")}}),[]);var i=e.permissions.includes("setting_delete_warehouse"),c=e.permissions.includes("setting_recover_warehouse");return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"warehouseEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u044b\u0439 \u0441\u043a\u043b\u0430\u0434"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(An,{className:"mt15",list:["\u041e\u0431\u0449\u0438\u0435","\u0414\u043e\u0441\u0442\u0443\u043f"],tab:e.warehouse.tabs,func:e.changeWarehouseForm}),0===e.warehouse.tabs?Object(Ue.jsx)(Aa,{}):null,1===e.warehouse.tabs?Object(Ue.jsx)(Ba,{}):null]}),Object(Ue.jsx)($t,{edit:e.warehouse.edit,deleted:e.warehouse.deleted,create:function(){e.warehouse.title?e.createWarehouse():e.setVisibleFlag("inputWarehouseTitleChecked",!1)},save:function(){e.warehouse.title?e.saveWarehouse():e.setVisibleFlag("inputWarehouseTitleChecked",!1)},delete:i?function(){return e.deleteWarehouse(!0)}:null,recover:c?function(){return e.deleteWarehouse(!1)}:null,close:t})]})})})),Ma={addWarehouse:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_warehouse",rt({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},setVisibleFlag:fe},Va=Object(s.b)((function(e){return{statusWarehouseEditor:e.view.statusWarehouseEditor,permissions:e.data.user.role.permissions}}),Ma)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){e.addWarehouse()}),[]),Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0421\u043a\u043b\u0430\u0434\u044b"})}),Object(Ue.jsxs)("div",{className:"settingPageBody",children:[Object(Ue.jsx)("h3",{children:"\u0421\u043a\u043b\u0430\u0434\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0438\u043b\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"}),Object(Ue.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u043e\u0432. \u0421\u043a\u043b\u0430\u0434\u044b \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0432\u0441\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0421\u043a\u043b\u0430\u0434",onClick:function(){return e.setVisibleFlag("statusWarehouseEditor",!0)},unvisible:!e.permissions.includes("setting_create_warehouse")}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return c(e.target.checked)},checked:i,unvisible:!e.permissions.includes("setting_see_deleted_warehouse")})]}),e.statusWarehouseEditor?Object(Ue.jsx)(La,{}):null,Object(Ue.jsx)(Ta,{showDeleted:i})]})]})})),Ga=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"settingContent",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),qa=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"settingContent",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0442\u0435\u0433\u043e\u0432"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})}));function Ha(e,t){return{type:"CHANGE_NOT_EVENT_FORM",field:t,value:e}}var Wa=[{id:"ORDER_CREATED",title:"\u0417\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d"},{id:"ORDER_STATUS_CHANGED",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f"},{id:"ORDER_STATUS_CHANGED_TO",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u043d\u0430"},{id:"ORDER_STATUS_SCHEDULED_FOR",title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u0442\u044c \u043d\u0430"}],Ua={setVisibleFlag:fe,resetNotEvent:function(){return{type:"RESET_NOT_EVENT"}},createNotEvent:function(){var e=de.getState(),t=rt({event:e.notEvent.event,target_audience:e.notEvent.target_audience,notification_type:e.notEvent.notification_type,statuses:e.notEvent.statuses,notification_template_id:e.notEvent.notification_template_id,deleted:!1}),n=rt({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_events",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_events",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},saveNotEvent:function(){var e=de.getState(),t=rt({id:e.notEvent.edit,event:e.notEvent.event,target_audience:e.notEvent.target_audience,statuses:e.notEvent.statuses,notification_template_id:e.notEvent.notification_template_id});t.method="PUT";var n=rt({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_events",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_events",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteNotEvent:function(e){var t=de.getState(),n=rt({id:t.notEvent.edit,deleted:e});n.method="PUT";var r=rt({deleted:t.notEvent.showDeleted,target_audience:t.notEvent.filter_target_audience});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/notification_events",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_notification_events",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeNotEventForm:Ha,selectedNotEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_NOT_EVENT",field:t,value:e,saveToApp:n}}},za=Object(s.b)((function(e){return{notEvent:e.notEvent,inputNotEventEventChecked:e.view.inputNotEventEventChecked,inputNotEventTemplateChecked:e.view.inputNotEventTemplateChecked,permissions:e.data.user.role.permissions,templates:e.notTemplate.templates}}),Ua)((function(e){var t=function(){e.setVisibleFlag("statusNotEventEditor",!1),e.setVisibleFlag("inputNotEventEventChecked",!0),e.setVisibleFlag("inputNotEventTemplateChecked",!0),e.resetNotEvent()},n=function(e){e.path.map((function(e){return e.id})).includes("NotTempEditorWindow")||e.path.map((function(e){return e.id})).includes("gb1")||e.path.map((function(e){return e.id})).includes("gb2")||e.path.map((function(e){return e.id})).includes("gb3")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("setting_delete_not_event"),c=e.permissions.includes("setting_recover_not_event");return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"NotTempEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle w515",children:e.notEvent.edit?e.notEvent.title:"\u041d\u043e\u0432\u043e\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsx)(ln,{id:"chooseNotEventType",title:"\u041f\u0440\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0438",className:"mt15",list:Wa,field:"event",setElement:e.changeNotEventForm,current_id:e.notEvent.event,width:"250px",checkedFlag:"inputNotEventEventChecked",checked:e.inputNotEventEventChecked,noChoosed:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e",disabled:e.notEvent.deleted}),Object(Ue.jsx)(oi,{className:"mt15 ml15 h27",func:function(t){return e.selectedNotEvent(t,"statuses")},current_list:e.notEvent.statuses,unvisible:"ORDER_STATUS_CHANGED_TO"!==e.notEvent.event})]}),Object(Ue.jsx)(rn,{className:"mt15",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",name:["SMS","Email"],func1:function(){return e.changeNotEventForm(1,"notification_type")},func2:function(){return e.changeNotEventForm(2,"notification_type")},checked:!0,disabled:!1,unvisible:!1}),Object(Ue.jsx)(ln,{id:"idChooseNotTemplate",title:"\u0428\u0430\u0431\u043b\u043e\u043d",className:"mt15",list:e.templates,field:"notification_template_id",setElement:e.changeNotEventForm,current_id:e.notEvent.notification_template_id,width:"250px",checkedFlag:"inputNotEventTemplateChecked",checked:e.inputNotEventTemplateChecked,noChoosed:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",disabled:e.notEvent.deleted})]}),Object(Ue.jsx)($t,{edit:e.notEvent.edit,deleted:e.notEvent.deleted,create:function(){e.notEvent.event&&e.notEvent.notification_template_id?e.createNotEvent():(e.notEvent.event||e.setVisibleFlag("inputNotEventEventChecked",!1),e.notEvent.notification_template_id||e.setVisibleFlag("inputNotEventTemplateChecked",!1))},save:function(){e.notEvent.event&&e.notEvent.notification_template_id?e.saveNotEvent():(e.notEvent.event||e.setVisibleFlag("inputNotEventEventChecked",!1),e.notEvent.notification_template_id||e.setVisibleFlag("inputNotEventTemplateChecked",!1))},delete:i?function(){return e.deleteNotEvent(!0)}:null,recover:c?function(){return e.deleteNotEvent(!1)}:null,close:t})]})})})),Ya={setVisibleFlag:fe,editNotEvent:function(e){return{type:"EDIT_NOT_EVENT",event:e}}},Ka=Object(s.b)((function(e){return{notEvent:e.notEvent,permissions:e.data.user.role.permissions,statuses:e.data.status}}),Ya)((function(e){return Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u041f\u0440\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0438"}),Object(Ue.jsx)("th",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),Object(Ue.jsx)("th",{children:"\u0428\u0430\u0431\u043b\u043e\u043d"})]})}),Object(Ue.jsx)("tbody",{children:e.notEvent.events.filter((function(t){return t.target_audience===e.target_audience})).map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_not_event")&&(e.editNotEvent(t),e.setVisibleFlag("statusNotEventEditor",!0))}(t)},children:[Object(Ue.jsxs)("td",{className:"noWr",children:[Object(Ue.jsx)("div",{children:Wa.find((function(e){return e.id===t.event})).title}),"ORDER_STATUS_CHANGED_TO"===t.event?Object(Ue.jsx)("div",{className:"row",children:e.statuses.filter((function(e){return t.statuses.includes(e.id)})).map((function(e){return Object(Ue.jsx)("div",{className:"stat",style:{backgroundColor:e.color},children:e.name},e.id)}))}):null]}),Object(Ue.jsx)("td",{className:"noWr",children:1===t.notification_type?"SMS":2===t.notification_type?"Email":"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}),Object(Ue.jsx)("td",{className:"noWr",children:t.template_title})]},t.id)}))})]})})),Qa={setVisibleFlag:fe,changeNotEventForm:Ha},Ja=Object(s.b)((function(e){return{statusNotEventEditor:e.view.statusNotEventEditor,showDeleted:e.notEvent.showDeleted,permissions:e.data.user.role.permissions}}),Qa)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)("h3",{children:"\u0414\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"}),Object(Ue.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043e \u0445\u043e\u0434\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442 \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{id:"gb1",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(1,"target_audience")},unvisible:!e.permissions.includes("setting_create_not_event")}),Object(Ue.jsx)(zr,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeNotEventForm(t.target.checked,"showDeleted")},checked:e.showDeleted,unvisible:!e.permissions.includes("setting_see_deleted_not_event")})]}),e.statusNotEventEditor?Object(Ue.jsx)(za,{}):null,Object(Ue.jsx)(Ka,{target_audience:1}),Object(Ue.jsx)("h3",{children:"\u0414\u043b\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432"}),Object(Ue.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0438 \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u0432\u0430\u0436\u043d\u043e\u0433\u043e."}),Object(Ue.jsx)(yr,{id:"gb2",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(2,"target_audience")}}),Object(Ue.jsx)("h3",{children:"\u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439"}),Object(Ue.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0438 \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u0432\u0430\u0436\u043d\u043e\u0433\u043e."}),Object(Ue.jsx)(yr,{id:"gb3",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(3,"target_audience")}})]})}));function Xa(e,t){return{type:"CHANGE_NOT_TEMPLATE_FORM",field:t,value:e}}var Za=["#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u041d\u0410\u0417\u0412\u0410\u041d\u0418\u0415","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-EMAIL","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u0420\u0415\u041a\u0412\u0418\u0417\u0418\u0422\u042b"],$a=["#\u041a\u041b\u0418\u0415\u041d\u0422-\u0418\u041c\u042f","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-EMAIL","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041a/\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0420/\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0414\u0418\u0420\u0415\u041a\u0422\u041e\u0420","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0411\u0418\u041a","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041d\u0410\u0417\u0412\u0410\u041d\u0418\u0415-\u0411\u0410\u041d\u041a\u0410","#\u041a\u041b\u0418\u0415\u041d\u0422-\u042e\u0420\u0418\u0414\u0418\u0427\u0415\u0421\u041a\u0418\u0419-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041a\u041f\u041f","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0418\u041d\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041e\u0413\u0420\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041e\u0411\u0420\u0410\u0429\u0415\u041d\u0418\u0415"],es=["#\u0417\u0410\u041a\u0410\u0417-\u041d\u041e\u041c\u0415\u0420","#\u0426\u0415\u041d\u0410","#\u0417\u0410\u041c\u0415\u0422\u041a\u0418-\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420\u0410","#\u0417\u0410\u041c\u0415\u0422\u041a\u0418-\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042f","#\u0421\u0420\u041e\u0427\u041d\u041e","#\u0417\u0410\u041a\u0410\u0417-\u041d\u0415\u0418\u0421\u041f\u0420\u0410\u0412\u041d\u041e\u0421\u0422\u042c","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0411\u0423\u0414\u0415\u0422-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041f\u041b\u0410\u041d\u0418\u0420\u041e\u0412\u0410\u041d-\u041d\u0410","#\u0420\u0415\u041a\u041b\u0410\u041c\u041d\u0410\u042f-\u041a\u0410\u041c\u041f\u0410\u041d\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0422\u0418\u041f-\u0418\u0417\u0414\u0415\u041b\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0411\u0420\u0415\u041d\u0414","#\u0417\u0410\u041a\u0410\u0417-\u041c\u041e\u0414\u0423\u041b\u042c","#\u0417\u0410\u041a\u0410\u0417-\u041c\u041e\u0414\u0415\u041b\u042c","#\u0417\u0410\u041a\u0410\u0417-\u041a\u041e\u041c\u041f\u041b\u0415\u041a\u0422\u0410\u0426\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0412\u041d\u0415\u0428\u041d\u0418\u0419-\u0412\u0418\u0414","#\u0417\u0410\u041a\u0410\u0417-\u0421\u0415\u0420\u0418\u0419\u041d\u042b\u0419-\u041d\u041e\u041c\u0415\u0420"],ts=["#\u0417\u0410\u041a\u0410\u0417-\u0421\u041e\u0417\u0414\u0410\u041b","#\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c-\u0418\u041c\u042f","#\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420-\u0418\u041c\u042f","#\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041a\u0420\u042b\u041b"],ns=["#\u041e\u0420\u0418\u0415\u041d\u0422\u0418\u0420-\u0426\u0415\u041d\u0410","#\u041a-\u041e\u041f\u041b\u0410\u0422\u0415","#\u041e\u041f\u041b\u0410\u0427\u0415\u041d\u041e","#\u0417\u0410\u041a\u0410\u0417-\u0421\u0423\u041c\u041c\u0410"],rs=["#\u0414\u0410\u0422\u0410-\u0421\u0415\u0413\u041e\u0414\u041d\u042f","#\u0414\u0410\u0422\u0410-\u0412\u0420\u0415\u041c\u042f-\u0421\u0415\u0413\u041e\u0414\u041d\u042f","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0421\u041e\u0417\u0414\u0410\u041d","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0411\u0423\u0414\u0415\u0422-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041a\u0420\u042b\u0422","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041f\u041b\u0410\u041d\u0418\u0420\u041e\u0412\u0410\u041d-\u041d\u0410","#\u0414\u0410\u0422\u0410-\u0413\u0410\u0420\u0410\u041d\u0422\u0418\u042f"],is=["#\u0417\u0410\u041a\u0410\u0417-\u0422\u0418\u041f","#\u0412\u0415\u0420\u0414\u0418\u041a\u0422","#\u041b\u041e\u041a\u0410\u0426\u0418\u042f","#\u0421\u0422\u0410\u0422\u0423\u0421"],cs=function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"boxVariable",children:[Object(Ue.jsx)("div",{className:"varLabel mr-tb-15 w200",onClick:function(){return c(!i)},children:e.title}),i?Object(Ue.jsx)("div",{children:e.list_var.map((function(t,n){return Object(Ue.jsx)("div",{className:"variableItem",onClick:function(){return e.func(t)},children:t},n)}))}):null]})},as={setVisibleFlag:fe,changeNotTemplateForm:Xa,resetNotTemplate:function(){return{type:"RESET_NOT_TEMPLATE"}},createNotTemplate:function(){var e=de.getState(),t=rt({title:e.notTemplate.title,template:e.notTemplate.template,deleted:!1}),n=rt({deleted:e.notTemplate.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_template",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_template",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},saveNotTemplate:function(){var e=de.getState(),t=rt({id:e.notTemplate.edit,title:e.notTemplate.title,template:e.notTemplate.template,deleted:!1});t.method="PUT";var n=rt({deleted:e.notTemplate.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_template",t).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_template",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteNotTemplate:function(e){var t=de.getState(),n=rt({id:t.notTemplate.edit,deleted:e});n.method="PUT";var r=rt({deleted:t.notTemplate.showDeleted});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/notification_template",n).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_notification_template",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0438\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ss=Object(s.b)((function(e){return{notTemplate:e.notTemplate,inputNotTempTitleChecked:e.view.inputNotTempTitleChecked,inputNotTempTempleChecked:e.view.inputNotTempTempleChecked,permissions:e.data.user.role.permissions}}),as)((function(e){var t=function(){e.setVisibleFlag("statusNotTemplateEditor",!1),e.setVisibleFlag("inputNotTempTitleChecked",!0),e.setVisibleFlag("inputNotTempTempleChecked",!0),e.resetNotTemplate()},n=function(e){e.path.map((function(e){return e.id})).includes("NotTempEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("setting_delete_not_template"),c=e.permissions.includes("setting_recover_not_template");return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"NotTempEditorWindow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.notTemplate.edit?e.notTemplate.title:"\u041d\u043e\u0432\u044b\u0439 \u0428\u0430\u0431\u043b\u043e\u043d"}),Object(Ue.jsx)("div",{className:"contentEditor",children:Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeNotTemplateForm(t.target.value,"title")},value:e.notTemplate.title,checkedFlag:"inputNotTempTitleChecked",checked:e.inputNotTempTitleChecked,redStar:!0,disabled:e.notTemplate.deleted}),Object(Ue.jsx)(pn,{className:"w400 mt15",title:"\u0422\u0435\u043a\u0441\u0442",onChange:function(t){return e.changeNotTemplateForm(t.target.value,"template")},value:e.notTemplate.template,checkedFlag:"inputNotTempTempleChecked",checked:e.inputNotTempTempleChecked,redStar:!0,disabled:e.notTemplate.deleted})]}),Object(Ue.jsxs)("div",{className:"ml30",children:[Object(Ue.jsx)("h3",{children:"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"}),Object(Ue.jsx)(cs,{title:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",list_var:Za,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u041a\u043b\u0438\u0435\u043d\u0442",list_var:$a,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u0417\u0430\u043a\u0430\u0437",list_var:es,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",list_var:ts,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b",list_var:ns,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u0414\u0430\u0442\u0430",list_var:rs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ue.jsx)(cs,{title:"\u041f\u0440\u043e\u0447\u0438\u0435",list_var:is,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}})]})]})}),Object(Ue.jsx)($t,{edit:e.notTemplate.edit,deleted:e.notTemplate.deleted,create:function(){e.notTemplate.title&&e.notTemplate.template?e.createNotTemplate():(e.notTemplate.title||e.setVisibleFlag("inputNotTempTitleChecked",!1),e.notTemplate.template||e.setVisibleFlag("inputNotTempTempleChecked",!1))},save:function(){e.notTemplate.title&&e.notTemplate.template?e.saveNotTemplate():(e.notTemplate.title||e.setVisibleFlag("inputNotTempTitleChecked",!1),e.notTemplate.template||e.setVisibleFlag("inputNotTempTempleChecked",!1))},delete:i?function(){return e.deleteNotTemplate(!0)}:null,recover:c?function(){return e.deleteNotTemplate(!1)}:null,close:t})]})})})),os={setVisibleFlag:fe,editNotTemplate:function(e){return{type:"EDIT_NOT_TEMPLATE",template:e}}},ls=Object(s.b)((function(e){return{notTemplate:e.notTemplate,permissions:e.data.user.role.permissions}}),os)((function(e){return Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{className:"w150",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{children:"\u0428\u0430\u0431\u043b\u043e\u043d"})]})}),Object(Ue.jsx)("tbody",{children:e.notTemplate.templates.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_not_template")&&(e.editNotTemplate(t),e.setVisibleFlag("statusNotTemplateEditor",!0))}(t)},children:[Object(Ue.jsx)("td",{className:"noWr",children:t.title}),Object(Ue.jsx)("td",{className:"noWr",children:t.template})]},t.id)}))})]})})),ds={setVisibleFlag:fe,changeNotTemplateForm:Xa},us=Object(s.b)((function(e){return{statusNotTemplateEditor:e.view.statusNotTemplateEditor,showDeleted:e.notTemplate.showDeleted,permissions:e.data.user.role.permissions}}),ds)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)("h3",{children:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b"}),Object(Ue.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0448\u0430\u0431\u043b\u043e\u043d \u0434\u043b\u044f \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0439 \u0438\u043b\u0438 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0439."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0428\u0430\u0431\u043b\u043e\u043d",onClick:function(){return e.setVisibleFlag("statusNotTemplateEditor",!0)},unvisible:e.permissions.includes("setting_create_notification")}),Object(Ue.jsx)(zr,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeNotTemplateForm(t.target.checked,"showDeleted")},checked:e.showDeleted,unvisible:!e.permissions.includes("setting_see_deleted_not_template")})]}),e.statusNotTemplateEditor?Object(Ue.jsx)(ss,{}):null,Object(Ue.jsx)(ls,{})]})})),ms={changeNotEventForm:Ha,addNotTemplate:function(){var e=de.getState(),t=rt({deleted:e.notTemplate.showDeleted});return function(n){fetch(e.data.url_server+"/get_notification_template",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addNotEvent:function(){var e=de.getState(),t=rt({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(n){fetch(e.data.url_server+"/get_notification_events",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}):console.warn(e.massage)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},ps=Object(s.b)((function(e){return{notEvent:e.notEvent,notTemplate:e.notTemplate}}),ms)((function(e){return Object(r.useEffect)((function(){e.addNotTemplate()}),[e.notTemplate.showDeleted]),Object(r.useEffect)((function(){e.addNotEvent()}),[e.notEvent.showDeleted]),Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"})}),Object(Ue.jsx)(An,{className:"mt15",list:["\u0417\u0430\u043a\u0430\u0437\u044b","\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0417\u0430\u0434\u0430\u0447\u0438","\u0428\u0430\u0431\u043b\u043e\u043d\u044b"],tab:e.notEvent.tabs,func:e.changeNotEventForm}),0===e.notEvent.tabs?Object(Ue.jsx)(Ja,{}):null,(e.notEvent.tabs,null),(e.notEvent.tabs,null),3===e.notEvent.tabs?Object(Ue.jsx)(us,{}):null]})})),hs={changeDictServiceForm:Pe,resetGruopDictService:function(){return{type:"RESET_GROPE_DICT_SERVICE"}},createGroupDictService:function(){var e=de.getState(),t=ue({title:e.dictService.group_title,deleted:!1});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/group_dict_service",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_group_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setVisibleFlag:fe,saveGroupDictService:function(){var e=de.getState(),t=ue({id:e.dictService.group_edit,title:e.dictService.group_title});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/group_dict_service",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_group_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteGroupDictService:function(e){var t=de.getState(),n=ue({id:t.dictService.group_edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/group_dict_service",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_group_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},bs=Object(s.b)((function(e){return{dictService:e.dictService,inputDictServiceChecked:e.view.inputDictServiceChecked,permissions:e.data.user.role.permissions}}),hs)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("groupServiceEditorWiondow")||e.setVisibleFlag("statusGroupServiceEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"groupServiceEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.dictService.group_edit?e.dictService.group_title:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ue.jsx)("div",{className:"contentEditor",children:Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeDictServiceForm(t.target.value,"group_title")},value:e.dictService.group_title,checkedFlag:"inputDictServiceChecked",checked:e.inputDictServiceChecked,redStar:!0,disabled:e.dictService.group_deleted})}),Object(Ue.jsx)($t,{edit:e.dictService.group_edit,deleted:e.dictService.group_deleted,create:function(){e.dictService.group_title?e.createGroupDictService():e.setVisibleFlag("inputDictServiceChecked",!1)},save:function(){e.dictService.group_title?e.saveGroupDictService():e.setVisibleFlag("inputDictServiceChecked",!1)},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteGroupDictService(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteGroupDictService(!1)}:null,close:function(){e.setVisibleFlag("statusGroupServiceEditor",!1),e.resetGruopDictService()}})]})})})),js={changeDictServiceForm:Pe,setVisibleFlag:fe,resetService:function(){return{type:"RESET_SERVICE"}},createDictService:function(){var e=de.getState(),t=ue({title:e.dictService.title,price:e.dictService.price,cost:e.dictService.cost,warranty:e.dictService.warranty,code:e.dictService.code,earnings_percent:e.dictService.earnings_percent,earnings_summ:e.dictService.earnings_summ,deleted:!1,category_id:e.dictService.category_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/dict_service",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveDictService:function(){var e=de.getState(),t=ue({id:e.dictService.edit,title:e.dictService.title,price:e.dictService.price,cost:e.dictService.cost,warranty:e.dictService.warranty,code:e.dictService.code,earnings_percent:e.dictService.earnings_percent,earnings_summ:e.dictService.earnings_summ,deleted:e.dictService.deleted,category_id:e.dictService.category_id});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/dict_service",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteDictService:function(e){var t=de.getState(),n=ue({id:t.dictService.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/dict_service",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},_s=Object(s.b)((function(e){return{dictService:e.dictService,view:e.view,group_dict_service:e.data.group_dict_service,permissions:e.data.user.role.permissions}}),js)((function(e){var t=function(){e.setVisibleFlag("statusServiceEditor",!1),e.resetService()},n=function(e){e.path.map((function(e){return e.id})).includes("serviceEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.edit||e.changeDictServiceForm(e.dictService.seted_categiry,"category_id")}),[]);return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow mwp",id:"serviceEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.dictService.edit?e.dictService.title:"\u041d\u043e\u0432\u0430\u044f \u0443\u0441\u043b\u0443\u0433\u0430"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeDictServiceForm(t.target.value,"title")},value:e.dictService.title,checkedFlag:"inputServiceTitleChecked",checked:e.view.inputServiceTitleChecked,redStar:!0,disabled:e.dictService.deleted}),Object(Ue.jsx)(ln,{id:23,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",className:"mt15",list:e.group_dict_service,field:"category_id",setElement:e.changeDictServiceForm,current_id:e.dictService.category_id,width:"250px",checkedFlag:"inputServiceCategoryIdChacked",checked:e.view.inputServiceCategoryIdChacked,disabled:e.dictService.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.dictService.price,unit:"\u0440\u0443\u0431.",checkedFlag:"inputServicePriceChacked",checked:e.view.inputServicePriceChacked,redStar:!0,disabled:e.dictService.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.dictService.cost,unit:"\u0440\u0443\u0431.",disabled:e.dictService.deleted}),Object(Ue.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9]/g,"")*e.dictService.warranty_value,"warranty")},value:parseInt(e.dictService.warranty/e.dictService.warranty_value),unit:" ",disabled:e.dictService.deleted}),Object(Ue.jsx)(rn,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeDictServiceForm(86400,"warranty_value")},func2:function(){return e.changeDictServiceForm(2592e3,"warranty_value")},disabled:e.dictService.deleted})]}),Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434",onChange:function(t){return e.changeDictServiceForm(t.target.value,"code")},value:e.dictService.code,disabled:e.dictService.deleted}),Object(Ue.jsx)("h3",{children:"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e"}),Object(Ue.jsx)(xi,{text:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u0438 \u043f\u043e\u043b\u044f, \u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430 \u044d\u0442\u0443 \u0443\u0441\u043b\u0443\u0433\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c \u043f\u043e\u043b\u0443\u0447\u0430\u043b \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u044d\u0442\u0438 \u043f\u043e\u043b\u044f \u043f\u0443\u0441\u0442\u044b\u043c\u0438, \u0438 \u043f\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u0417\u041f \u0431\u0443\u0434\u0443\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"earnings_percent")},value:e.dictService.earnings_percent,unit:"%",disabled:e.dictService.deleted}),Object(Ue.jsx)(un,{className:"w70 mt15",title:"\u0421\u0443\u043c\u043c\u0430",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"earnings_summ")},value:e.dictService.earnings_summ,unit:"\u0440\u0443\u0431",disabled:e.dictService.deleted})]}),Object(Ue.jsx)($t,{edit:e.dictService.edit,deleted:e.dictService.deleted,create:function(){e.dictService.title&&e.dictService.category_id&&e.dictService.price?e.createDictService():(e.dictService.title||e.setVisibleFlag("inputServiceTitleChecked",!1),e.dictService.category_id||e.setVisibleFlag("inputServiceCategoryIdChacked",!1),e.dictService.price||e.setVisibleFlag("inputServicePriceChacked",!1))},save:function(){e.dictService.title&&e.dictService.category_id&&e.dictService.price?e.saveDictService():(e.dictService.title||e.setVisibleFlag("inputServiceTitleChecked",!1),e.dictService.category_id||e.setVisibleFlag("inputServiceCategoryIdChacked",!1),e.dictService.price||e.setVisibleFlag("inputServicePriceChacked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteDictService(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteDictService(!1)}:null,close:t})]})})})),fs={createSaveServicePrice:function(e,t,n,r){var i=de.getState(),c=ue({id:e,cost:t,discount_margin_id:n,service_id:r});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.data.url_server+"/service_prices",c).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(i.data.url_server+"/get_service_prices",ue({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"service_prices",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Os=Object(s.b)((function(e){return{service_prices:e.data.service_prices}}),fs)((function(e){var t=e.service_prices.find((function(t){return t.discount_margin_id===e.margin_id&&t.service_id===e.service_id})),n=Object(r.useState)(!1),i=Object(Je.a)(n,2),c=i[0],a=i[1],s=Object(r.useState)(t?t.cost:0),o=Object(Je.a)(s,2),l=o[0],d=o[1],u=function(){a(!1),e.createSaveServicePrice(t?t.id:null,parseFloat(l),e.margin_id,e.service_id)};return Object(Ue.jsx)("td",{onDoubleClick:e.disabled?null:function(){return a(!0)},children:c?Object(Ue.jsx)("input",{className:"inputCell",onChange:function(e){return d(e.target.value.replace(/[^0-9.]/g,""))},value:l,autoFocus:!0,onBlur:u,onKeyPress:function(e){"Enter"===e.key&&u()}}):Object(Ue.jsx)("div",{children:t?t.cost:0})})})),vs={addGroupeService:function(){var e=de.getState();return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.url_server+"/get_group_dict_service",ue({})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"group_dict_service",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setVisibleFlag:fe,editGroupDictService:function(e){return{type:"EDIT_GRUOP_DICT_SERVICE",group:e}},addDictService:We,changeDictServiceForm:Pe,selectedService:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_SERVICE",field:t,value:e,saveToApp:n}},addDiscountMargin:Me,addServicePrices:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_service_prices",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"service_prices",data:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0446\u0435\u043d \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},editDictService:function(e){return{type:"EDIT_SERVICE",service:e}}},gs=Object(s.b)((function(e){return{group_dict_service:e.data.group_dict_service,dict_service:e.data.dict_service,statusGroupServiceEditor:e.view.statusGroupServiceEditor,statusServiceEditor:e.view.statusServiceEditor,dictService:e.dictService,discount_margin:e.data.discount_margin,permissions:e.data.user.role.permissions}}),vs)((function(e){Object(r.useEffect)((function(){return e.addGroupeService(),e.addDiscountMargin(),e.addServicePrices(),function(){e.changeDictServiceForm(null,"seted_categiry")}}),[]),Object(r.useEffect)((function(){e.addDictService()}),[e.dictService.seted_categiry]);var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=e.group_dict_service.filter((function(e){return i|!e.deleted})),s=a.length,o=e.dict_service.filter((function(e){return i|!e.deleted})),l=o.length,d=e.dictService.fields.filter((function(t){return e.dictService.chosed_fields.includes(t.id)})),u=e.discount_margin.filter((function(e){return 1===e.margin_type})).map((function(e,t){return{id:t+6,margin_id:e.id,title:e.title}})),m=u.filter((function(t){return e.dictService.chosed_fields.includes(t.id)}));return Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"})}),Object(Ue.jsxs)("div",{className:"settingPageBody",children:[Object(Ue.jsx)("p",{children:"\u041f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442 \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0446\u0435\u043d\u044b \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443/\u0443\u0441\u043b\u0443\u0433\u0443"}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},value:i,unvisible:!e.permissions.includes("setting_see_deleted_service")}),Object(Ue.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ue.jsxs)("div",{className:"w250",children:[Object(Ue.jsx)(yr,{title:"+ \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",className:"greenButton",onClick:function(){return e.setVisibleFlag("statusGroupServiceEditor",!0)},unvisible:!e.permissions.includes("setting_create_service")}),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ue.jsx)("th",{children:"\u041a\u043e\u043b-\u0432\u043e"})]})}),Object(Ue.jsx)("tbody",{children:a.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onClick:function(){return e.changeDictServiceForm(t.id,"seted_categiry")},onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_service")&&(e.editGroupDictService(t),e.setVisibleFlag("statusGroupServiceEditor",!0))}(t)},style:t.id===e.dictService.seted_categiry?{backgroundColor:"#cae1f5"}:null,children:[Object(Ue.jsx)("td",{children:t.title}),Object(Ue.jsx)("td",{children:t.count})]},t.id)}))})]}),Object(Ue.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",s]}),e.statusGroupServiceEditor?Object(Ue.jsx)(bs,{}):null]}),Object(Ue.jsxs)("div",{className:"ml10 w100",children:[Object(Ue.jsxs)("div",{className:"row jc-sb",children:[Object(Ue.jsx)(yr,{title:"+ \u0423\u0441\u043b\u0443\u0433\u0430",className:"greenButton",onClick:function(){return e.setVisibleFlag("statusServiceEditor",!0)},unvisible:!e.permissions.includes("setting_create_service")}),Object(Ue.jsx)(xc,{id:"service",height:"185px",list:e.dictService.fields.concat(u),checked_list:e.dictService.chosed_fields,func:e.selectedService,field:"chosed_fields"})]}),Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[d.map((function(e){return Object(Ue.jsx)("th",{children:e.title},e.id)})),m.map((function(e){return Object(Ue.jsx)("th",{children:e.title},e.id)}))]})}),Object(Ue.jsx)("tbody",{children:o.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,children:[d.map((function(n){return Object(Ue.jsx)("td",{onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_service")&&(e.editDictService(t),e.setVisibleFlag("statusServiceEditor",!0))}(t)},children:t[n.field]},n.id)})),m.map((function(n){return Object(Ue.jsx)(Os,{margin_id:n.margin_id,service_id:t.id,disabled:!e.permissions.includes("setting_edit_service")},n.id)}))]},t.id)}))})]}),Object(Ue.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",l]}),e.statusServiceEditor?Object(Ue.jsx)(_s,{}):null]})]})]})]})})),xs={changeBookForm:ht},ys=Object(s.b)((function(e){return{icon:e.book.icon}}),xs)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1];return Object(Ue.jsxs)("div",{className:"mt15",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443"}),i?Object(Ue.jsx)("div",{className:"w250",children:["nothing.svg","airconditioner.svg","chip1.svg","chip2.svg","cleaner.svg","cleaner2.svg","coffee-machine.svg","coffee-maker.svg","computer_chip.svg","cooler.svg","desktop.svg","dish-dishwash.svg","fan.svg","fridge.svg","fridge2.svg","graphic_card2.svg","hairdrier.svg","jar.svg","laundry_press.svg","microwave.svg","mixer.svg","refrigerator.svg","stove.svg","toaster.svg","washer-washing.svg","washing_machine1.svg","washing_machine.svg"].map((function(t,n){return Object(Ue.jsx)("img",{className:"icon_equipment",src:"".concat("","/data/icon_equipments/").concat(t),alt:"icon equipment",onClick:function(){e.changeBookForm("nothing.svg"===t?null:"data/icon_equipments/".concat(t),"icon"),c(!1)}},n)}))}):Object(Ue.jsx)("img",{className:"icon_equipment",src:e.icon?"".concat("","/").concat(e.icon):"".concat("","/data/icon_equipments/nothing.svg"),alt:"icon equipment",onClick:e.disabled?null:function(){return c(!0)}})]})})),Es={changeBookForm:ht,chooseBookSelected:jt},Ns=Object(s.b)((function(e){return{book:e.book}}),Es)((function(e){var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("setEquipment")||e.path.map((function(e){return e.id})).includes("listSetEquipments")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=["filter_type","filter_brand","filter_subtype","filter_model"],o=["page_type","page_brand","page_subtype","page_model"],l=e.book[["equipment_types","equipment_brands","equipment_subtypes","equipment_models"][e.book.type]].filter((function(e){return!e.deleted})).filter((function(t){return t.id!==e.book.edit})).filter((function(t){return!e.book.list_for_join.some((function(e){return e.id===t.id}))}));return e.unvisible?Object(Ue.jsx)("div",{}):Object(Ue.jsxs)("div",{className:"mt15 w250",children:[Object(Ue.jsx)("div",{className:"lableImput",children:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0441:"}),Object(Ue.jsx)("div",{className:"blockImput",children:Object(Ue.jsx)("div",{id:"setEquipment",className:"orderInputBox",onClick:function(){return c(!0)},children:Object(Ue.jsx)("input",{className:"optionFilterInput",onChange:function(t){e.changeBookForm(t.target.value,s[e.book.type]),e.changeBookForm(1,o[e.book.type])},velue:e.book[s[e.book.type]],disabled:!1})})}),i?Object(Ue.jsx)("div",{className:"listFilter",id:"listSetEquipments",children:l.map((function(t){return Object(Ue.jsx)("div",{className:"rowGropList",onClick:function(){e.chooseBookSelected([t],"list_for_join"),c(!1)},children:t.title},t.id)}))}):null,Object(Ue.jsx)("table",{className:"w250",children:Object(Ue.jsx)("tbody",{children:e.book.list_for_join.map((function(t,n){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"w10",children:n+1}),Object(Ue.jsx)("td",{className:"noWr",children:t.title}),Object(Ue.jsx)("td",{onClick:function(){return e.chooseBookSelected([t],"list_for_join")},children:Object(Ue.jsx)(Xe,{className:"icon-s1",icon:L,color:"red"})})]},t.id)}))})})]})})),ws={setVisibleFlag:fe,changeBookForm:ht,chooseEquipmentBranches:function(e){return{type:"CHOOSE_EQUIPMENT_BRANCHES",id:e}},seveEquipmentType:function(){var e=de.getState(),t=rt({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentBrand:function(){var e=de.getState(),t=rt({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_type_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentSubtype:function(){var e=de.getState(),t=rt({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,img:e.book.img,equipment_brand_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentModel:function(){var e=de.getState(),t=rt({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_model_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_model_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteEquipmentType:function(e){var t=de.getState(),n=rt({id:t.book.edit,deleted:e,filter:{title:t.book.filter_type,deleted:t.book.showDeleted}});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_type",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteEquipmentBrand:function(e){var t=de.getState(),n=rt({id:t.book.edit,deleted:e,filter:{title:t.book.filter_brand,equipment_type_id:t.book.equipment_type.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/get_equipment_brand",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteEquipmentSubtype:function(e){var t=de.getState(),n=rt({id:t.book.edit,deleted:e,filter:{title:t.book.filter_subtype,equipment_brand_id:t.book.equipment_brand.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_subtype",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteEquipmentModel:function(e){var t=de.getState(),n=rt({id:t.book.edit,deleted:e,filter:{title:t.book.filter_model,equipment_subtype_id:t.book.equipment_subtype.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_model",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_model_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},createEType:function(){var e=de.getState(),t=rt({title:e.book.title,icon:e.book.icon,url:e.book.url,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createEbrand:function(){var e=de.getState(),t=rt({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_type_id:e.book.parent_id,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0440\u0435\u043d\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createESubtype:function(){var e=de.getState(),t=rt({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_brand_id:e.book.parent_id,branches:e.book.branches,deleted:!1,img:e.book.img,filter:{title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createEModel:function(){var e=de.getState(),t=rt({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_subtype_id:e.book.parent_id,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"})):console.warn(e.message)})).catch((function(){return it("\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetBookEquipment:bt},ks=Object(s.b)((function(e){return{book:e.book,inputBookTitleChecked:e.view.inputBookTitleChecked,branches:e.data.branches,permissions:e.data.user.role.permissions}}),ws)((function(e){var t=function(){e.setVisibleFlag("statusEquipmentEditor",!1),e.resetBookEquipment(),e.setVisibleFlag("inputBookTitleChecked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("equipmentEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=Object(r.useState)(e.branches.filter((function(e){return!e.deleted})).every((function(t){return e.book.branches.includes(t.id)}))),c=Object(Je.a)(i,2),a=c[0],s=c[1];return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"equipmentEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.book.edit?e.book.title:["\u041d\u043e\u0432\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430","\u041d\u043e\u0432\u044b\u0439 \u0431\u0440\u0435\u043d\u0434","\u041d\u043e\u0432\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044f","\u041d\u043e\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c"][e.book.type]}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBookForm(t.target.value,"title")},value:e.book.title,checkedFlag:"inputBookTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.book.deleted}),2===e.book.type?Object(Ue.jsx)(mc,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",url:e.book.url,onChange:function(t){return e.changeBookForm(t,"img")},value:e.book.img,disabled:e.book.deleted}):null,e.book.type?Object(Ue.jsx)(ln,{id:20,className:"mt15",title:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442",list:e.book.choose_list,setElement:e.changeBookForm,field:"parent_id",current_id:e.book.parent_id,width:"200px",disabled:e.book.deleted}):null,0===e.book.type?Object(Ue.jsx)(ys,{disabled:e.book.deleted}):null,Object(Ue.jsx)(rn,{className:"mt15",title:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f",name:["\u0412\u0441\u0435","\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435"],func1:function(){return s(!0)},func2:function(){return s(!1)},checked:e.branches.filter((function(e){return!e.deleted})).every((function(t){return e.book.branches.includes(t.id)})),disabled:e.book.deleted}),a?null:Object(Ue.jsx)(li,{className:"mt15",mainLable:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",list:e.branches.filter((function(e){return!e.deleted})),checked_list:e.book.branches,func:e.chooseEquipmentBranches,disabled:e.book.deleted}),Object(Ue.jsx)(Ns,{unvisible:!e.book.edit||3===e.book.type||!e.permissions.includes("setting_join_equipment")})]}),Object(Ue.jsx)($t,{edit:e.book.edit,create:function(){e.book.title?(0===e.book.type&&e.createEType(),1===e.book.type&&e.createEbrand(),2===e.book.type&&e.createESubtype(),3===e.book.type&&e.createEModel()):e.setVisibleFlag("inputBookTitleChecked",!1)},save:function(){e.book.title?(0===e.book.type&&e.seveEquipmentType(),1===e.book.type&&e.seveEquipmentBrand(),2===e.book.type&&e.seveEquipmentSubtype(),3===e.book.type&&e.seveEquipmentModel()):e.setVisibleFlag("inputBookTitleChecked",!1)},delete:function(){0===e.book.type&&e.deleteEquipmentType(!0),1===e.book.type&&e.deleteEquipmentBrand(!0),2===e.book.type&&e.deleteEquipmentSubtype(!0),3===e.book.type&&e.deleteEquipmentModel(!0)},recover:function(){e.permissions.includes("setting_recover_equipment")&&(0===e.book.type&&e.deleteEquipmentType(!1),1===e.book.type&&e.deleteEquipmentBrand(!1),2===e.book.type&&e.deleteEquipmentSubtype(!1),3===e.book.type&&e.deleteEquipmentModel(!1))},close:t,deleted:e.book.deleted})]})})})),Cs=function(e){for(var t=Object(r.useState)(1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=e.allItems%e.onPage>0?(e.allItems-e.allItems%e.onPage)/e.onPage+1:(e.allItems-e.allItems%e.onPage)/e.onPage,s=[],o=0;o<a;o++)s[o]=o+1;var l=function(t){if(t==i)return t;if(Math.abs(i-t)<e.count)return t;if(Math.abs(i-t)==e.count)return"...";for(var n=0;n<e.count_start_end;n++){if(t==s[n])return t;if(t==s[s.length-1-n])return t}},d=function(t){c(t),e.func(t)};return Object(Ue.jsxs)("div",{className:"row",children:[e.navigation?Object(Ue.jsx)("div",{className:"pages-pagination",onClick:function(){return d(i-1<1?i:i-1)},children:"<"}):null,s.map((function(t){return function(t){if(Math.abs(i-t)<=e.count)return!0;for(var n=0;n<e.count_start_end;n++){if(t==s[n])return t;if(t==s[s.length-1-n])return t}return!1}(t)?Object(Ue.jsxs)("div",{className:i==t?"active":"pages-pagination",onClick:function(){return d(t)},children:[l(t)," "]},t):null})),e.navigation?Object(Ue.jsx)("div",{className:"pages-pagination",onClick:function(){return d(i+1>s.length?i:i+1)},children:">"}):null]})},Ss=function(e){return Object(Ue.jsxs)("div",{className:"searchBox ".concat(e.className),children:[Object(Ue.jsx)("input",{className:"searchInput ".concat(e.disabled?"ds":null),style:{width:e.width?e.width:"100%"},name:e.name,onChange:e.onChange,value:e.value,disabled:e.disabled}),Object(Ue.jsx)(Xe,{className:"icon-s4",icon:"M31.008 27.231l-7.58-6.447c-0.784-0.705-1.622-1.029-2.299-0.998 1.789-2.096 2.87-4.815 2.87-7.787 0-6.627-5.373-12-12-12s-12 5.373-12 12 5.373 12 12 12c2.972 0 5.691-1.081 7.787-2.87-0.031 0.677 0.293 1.515 0.998 2.299l6.447 7.58c1.104 1.226 2.907 1.33 4.007 0.23s0.997-2.903-0.23-4.007zM12 20c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z",color:"grey"})]})},Ts={changeBookForm:ht,setVisibleFlag:fe,editEquipment:function(e){return{type:"EDIT_EQUIPMENT",equipment:e}},resetBookEquipment:bt,addEquipmentType:_t,addEquipmentBrand:ft,addEquipmentSubtype:Ot,addEquipmentModel:vt},Fs=Object(s.b)((function(e){return{book:e.book,statusEquipmentEditor:e.view.statusEquipmentEditor,branches:e.data.branches,permissions:e.data.user.role.permissions}}),Ts)((function(e){Object(r.useEffect)((function(){e.changeBookForm("","filter_type"),e.changeBookForm("","filter_brand"),e.changeBookForm("","filter_subtype"),e.changeBookForm("","filter_model")}),[]),Object(r.useEffect)((function(){e.addEquipmentType()}),[e.book.filter_type,e.book.page_type,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentBrand()}),[e.book.equipment_type,e.book.filter_brand,e.book.page_brand,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentSubtype()}),[e.book.equipment_brand,e.book.filter_subtype,e.book.page_subtype,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentModel()}),[e.book.equipment_subtype,e.book.filter_model,e.book.page_model,e.book.showDeleted]);var t=!!Object.values(e.book.equipment_type).length,n=!!Object.values(e.book.equipment_brand).length,i=!!Object.values(e.book.equipment_subtype).length;return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)("h4",{className:"mt15",children:"\u0418\u0437\u0434\u0435\u043b\u0438\u044f"}),Object(Ue.jsx)("p",{children:"\u041c\u043d\u043e\u0433\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0439 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0438\u0437\u0434\u0435\u043b\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0430 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)(zr,{className:"mt15",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeBookForm(t.target.checked,"showDeleted")},checked:e.book.showDeleted,unvisible:!e.permissions.includes("setting_see_equipment")}),Object(Ue.jsxs)("div",{className:"bookEquipment mt15",children:[Object(Ue.jsxs)("div",{className:"columnEquipment",children:[Object(Ue.jsx)(yr,{className:"whiteButton mwmc",title:"+ \u0413\u0440\u0443\u043f\u043f\u0430",onClick:function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches")}}),Object(Ue.jsx)("div",{className:"thead",children:"\u0413\u0440\u0443\u043f\u043f\u0430"}),Object(Ue.jsx)(Ss,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_type"),void e.changeBookForm(n,"filter_type");var n},value:e.book.filter_type}),Object(Ue.jsx)("div",{className:"tbody",children:e.book.equipment_types.map((function(t){return Object(Ue.jsxs)("div",{className:"row tr \n                                    ".concat(e.book.equipment_type.id===t.id?"rowChoosed":null," \n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_type"),e.changeBookForm({},"equipment_brand"),e.changeBookForm({},"equipment_subtype"),e.changeBookForm({},"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"type")}(t)},children:[Object(Ue.jsx)("img",{className:"icon_equipment",style:{display:t.icon?null:"none"},src:t.icon?"".concat("","/").concat(t.icon):null,alt:"icon equipment"}),Object(Ue.jsx)("div",{className:"td",children:t.title})]},t.id)}))}),Object(Ue.jsx)(Cs,{allItems:e.book.equipment_type_count,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_type")}}),Object(Ue.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",e.book.equipment_type_count]})]}),Object(Ue.jsxs)("div",{className:"columnEquipment",children:[Object(Ue.jsx)(yr,{className:"whiteButton mwmc",title:"+ \u0411\u0440\u0435\u043d\u0434",onClick:t?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(1,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_types,"choose_list"),e.changeBookForm(e.book.equipment_type.id,"parent_id")}:null}),Object(Ue.jsx)("div",{className:"thead",children:"\u0411\u0440\u0435\u043d\u0434"}),Object(Ue.jsx)(Ss,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_brand"),void e.changeBookForm(n,"filter_brand");var n},value:e.book.filter_brand}),Object(Ue.jsx)("div",{className:"tbody",children:t?e.book.equipment_brands.map((function(t){return Object(Ue.jsx)("div",{className:"row tr \n                                        ".concat(e.book.equipment_brand.id===t.id?"rowChoosed":null,"\n                                        ").concat(t.deleted?"rowDeleted":null,"\n                                    "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_brand"),e.changeBookForm(0,"equipment_subtype"),e.changeBookForm(0,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_brand"),e.changeBookForm(1,"type"),e.changeBookForm(e.book.equipment_types,"choose_list"),e.changeBookForm(e.book.equipment_type.id,"parent_id")}(t)},children:Object(Ue.jsx)("div",{className:"td",children:t.title})},t.id)})):Object(Ue.jsx)("div",{className:"clPage",children:Object(Ue.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443"})})}),Object(Ue.jsx)(Cs,{allItems:t?e.book.equipment_brand_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_brand")}}),Object(Ue.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",t?e.book.equipment_brand_count:0]})]}),Object(Ue.jsxs)("div",{className:"columnEquipment",children:[Object(Ue.jsx)(yr,{className:"whiteButton mwmc",title:"+ \u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f",onClick:n?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(2,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_brands,"choose_list"),e.changeBookForm(e.book.equipment_brand.id,"parent_id")}:null}),Object(Ue.jsx)("div",{className:"thead",children:"\u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f"}),Object(Ue.jsx)(Ss,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_subtype"),void e.changeBookForm(n,"filter_subtype");var n},value:e.book.filter_subtype}),Object(Ue.jsx)("div",{className:"tbody",children:n?e.book.equipment_subtypes.map((function(t){return Object(Ue.jsxs)("div",{className:"row tr \n                                    ".concat(e.book.equipment_subtype.id===t.id?"rowChoosed":null,"\n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_subtype"),e.changeBookForm(0,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_subtype"),e.changeBookForm(2,"type"),e.changeBookForm(e.book.equipment_brands,"choose_list"),e.changeBookForm(e.book.equipment_brand.id,"parent_id")}(t)},children:[Object(Ue.jsx)("img",{style:{display:t.url?null:"none"},src:"".concat("","/").concat(t.url),className:"miniImg",alt:"subtype phote"}),Object(Ue.jsx)("div",{className:"td",children:t.title})]},t.id)})):Object(Ue.jsx)("div",{className:"clPage",children:Object(Ue.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0431\u0440\u0435\u043d\u0434"})})}),Object(Ue.jsx)(Cs,{allItems:n?e.book.equipment_subtype_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_subtype")}}),Object(Ue.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",n?e.book.equipment_subtype_count:0]})]}),Object(Ue.jsxs)("div",{className:"columnEquipment",children:[Object(Ue.jsx)(yr,{className:"whiteButton mwmc",title:"+ \u041c\u043e\u0434\u0435\u043b\u044c",onClick:i?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(3,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_subtypes,"choose_list"),e.changeBookForm(e.book.equipment_subtype.id,"parent_id")}:null}),Object(Ue.jsx)("div",{className:"thead",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),Object(Ue.jsx)(Ss,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_model"),void e.changeBookForm(n,"filter_model");var n},value:e.book.filter_model}),Object(Ue.jsx)("div",{className:"tbody",children:i?e.book.equipment_models.map((function(t){return Object(Ue.jsx)("div",{className:"row tr \n                                    ".concat(e.book.equipment_model.id===t.id?"rowChoosed":null,"\n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_model"),e.changeBookForm(3,"type"),e.changeBookForm(e.book.equipment_subtypes,"choose_list"),e.changeBookForm(e.book.equipment_subtype.id,"parent_id")}(t)},children:Object(Ue.jsx)("div",{className:"td",children:t.title})},t.id)})):Object(Ue.jsx)("div",{className:"clPage",children:Object(Ue.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e"})})}),Object(Ue.jsx)(Cs,{allItems:i?e.book.equipment_models_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_model")}}),Object(Ue.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",i?e.book.equipment_models_count:0]})]})]}),e.statusEquipmentEditor?Object(Ue.jsx)(ks,{}):null]})})),As={chooseBookSelected:jt},Ds=Object(s.b)((function(e){return{}}),As)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.list.filter((function(t){return e.selected.includes(t.id)}));n.length===e.list.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.selected]),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("h4",{className:"mt15",children:e.title}),Object(Ue.jsx)("p",{children:e.description}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"greenButton",onClick:e.addElement,children:"+ \u042d\u043b\u0435\u043c\u0435\u043d\u0442"}),e.selected.length?Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)("div",{className:"whiteButton simbolBotton",onClick:e.delete,children:Object(Ue.jsx)("svg",{className:"icon-table-red-basket",viewBox:"0 0 32 32",children:Object(Ue.jsx)("path",{d:L})})}),Object(Ue.jsxs)("div",{children:["\u0412\u044b\u0431\u0440\u0430\u043d\u043e - ",e.selected.length]})]}):null]}),Object(Ue.jsx)("div",{className:"tableElement",children:Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:Object(Ue.jsxs)("div",{className:"checkbox",children:[Object(Ue.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return e.chooseBookSelected(e.list.map((function(e){return e.id})),e.selected_field)}}),Object(Ue.jsx)("label",{})]})}),Object(Ue.jsx)("th",{className:"wm500",children:e.title}),Object(Ue.jsx)("th",{className:"wm50",children:e.title2?e.title2:"\u0427\u0430\u0441\u0442\u043e\u0442\u0430"})]})}),Object(Ue.jsx)("tbody",{children:e.list.map((function(t){return Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("td",{className:"w30",children:Object(Ue.jsx)(zr,{onChange:function(){return e.chooseBookSelected([t.id],e.selected_field)},checked:e.selected.includes(t.id)})}),Object(Ue.jsx)("td",{children:t.title}),Object(Ue.jsxs)("td",{children:[t.count,1===t.direction?Object(Ue.jsx)("div",{className:"redDirection",children:"\u0420\u0430\u0441\u0445\u043e\u0434"}):null,2===t.direction?Object(Ue.jsx)("div",{className:"greenDirection",children:"\u041f\u0440\u0438\u0445\u043e\u0434"}):null]})]},t.id)}))})]})}),Object(Ue.jsx)(nt.a,{pageCount:e.count%20>0?e.count/20:e.count/20-1,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.onPageChange,forcePage:e.page,previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"pages-pagination",containerClassName:"pagination",pageClassName:"pages-pagination",activeClassName:"active",nextClassName:"pages-pagination",previousClassName:"pages-pagination"}),Object(Ue.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",e.count]})]})})),Ps={setVisibleFlag:fe,changeBookForm:ht,createBookElement:function(){var e=de.getState(),t=["malfunction","packagelist","item_payments"],n=["dictMalfunction","dictPackagelist","item_payments"],r=ue({title:e.book.title,direction:e.book.direction});return function(){var i=Object(m.a)(u.a.mark((function i(c){return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(e.data.url_server+"/".concat(t[e.book.type]),r).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return i.next=4,fetch(e.data.url_server+"/get_".concat(t[e.book.type]),ue()).then((function(e){return e.json()})).then((function(r){r.success?(c({type:"ADD_DATA",field:n[e.book.type],data:r.data}),c({type:"ADD_DATA",field:"count_".concat(t[e.book.type]),data:r.count})):console.warn(r.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}},Rs=Object(s.b)((function(e){return{book:e.book,inputBookTitleChecked:e.view.inputBookTitleChecked}}),Ps)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("elementEditorWiondow")||e.setVisibleFlag("statusElementEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"elementEditorWiondow",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBookForm(t.target.value,"title")},value:e.book.title,checkedFlag:"inputBookTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.book.deleted}),2===e.book.type?Object(Ue.jsx)(ln,{id:"21",className:"mt15",width:"250px",title:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",list:[{id:1,title:"\u0420\u0430\u0441\u0445\u043e\u0434"},{id:2,title:"\u041f\u0440\u0438\u0445\u043e\u0434"}],current_id:e.book.direction,setElement:e.changeBookForm,field:"direction"}):null]}),Object(Ue.jsx)($t,{create:function(){e.book.title?(e.createBookElement(),e.setVisibleFlag("statusElementEditor",!1)):e.setVisibleFlag("inputBookTitleChecked",!1)},close:function(){return e.setVisibleFlag("statusElementEditor",!1)}})]})})})),Bs={addDictMalfunction:Ve,changeBookForm:ht,setVisibleFlag:fe,resetBookEquipment:bt,deleteBookElements:Ge},Is=Object(s.b)((function(e){return{dictMalfunction:e.data.dictMalfunction,count_malfunction:e.data.count_malfunction,dictPackagelist:e.data.dictPackagelist,count_packagelist:e.data.count_packagelist,book:e.book,statusElementEditor:e.view.statusElementEditor}}),Bs)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)(Ds,{title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0442\u0438\u043f\u043e\u0432\u044b\u0445 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0435\u0439",list:e.dictMalfunction,count:e.count_malfunction,page:e.book.page_malfunction,selected:e.book.selected_malfunction,selected_field:"selected_malfunction",onPageChange:function(t){e.changeBookForm(t.selected,"page_malfunction"),e.addDictMalfunction()},addElement:function(){e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0),e.changeBookForm(0,"type")},delete:function(){e.changeBookForm(0,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ue.jsx)(Rs,{}):null]})})),Ls={changeBookForm:ht,setVisibleFlag:fe,resetBookEquipment:bt,deleteBookElements:Ge,addDictPackagelist:qe},Ms=Object(s.b)((function(e){return{dictMalfunction:e.data.dictMalfunction,count_malfunction:e.data.count_malfunction,dictPackagelist:e.data.dictPackagelist,count_packagelist:e.data.count_packagelist,book:e.book,statusElementEditor:e.view.statusElementEditor}}),Ls)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)(Ds,{title:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438",list:e.dictPackagelist,count:e.count_packagelist,page:e.book.page_packagelist,selected:e.book.selected_packagelist,selected_field:"selected_packagelist",onPageChange:function(t){e.changeBookForm(t.selected,"page_packagelist"),e.addDictPackagelist()},addElement:function(){e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0),e.changeBookForm(1,"type")},delete:function(){e.changeBookForm(1,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ue.jsx)(Rs,{}):null]})})),Vs={changeBookForm:ht,setVisibleFlag:fe,resetBookEquipment:bt,deleteBookElements:Ge,addItemPayments:He},Gs=Object(s.b)((function(e){return{item_payments:e.data.item_payments,count_item_payments:e.data.count_item_payments,book:e.book,statusElementEditor:e.view.statusElementEditor}}),Vs)((function(e){return Object(Ue.jsxs)("div",{className:"contentTab",children:[Object(Ue.jsx)(Ds,{title:"\u0421\u0442\u0430\u0442\u044c\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432",title2:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0441\u0442\u0430\u0442\u0435\u0439 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0434\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u0445\u043e\u0434\u043e\u0432 \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c",list:e.item_payments,count:e.count_item_payments,page:e.book.page_item_payments,selected:e.book.selected_item_payments,selected_field:"selected_item_payments",onPageChange:function(t){e.changeBookForm(t.selected,"page_item_payments"),e.addItemPayments()},addElement:function(){e.changeBookForm(2,"type"),e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0)},delete:function(){e.changeBookForm(2,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ue.jsx)(Rs,{}):null]})})),qs={changeBookForm:ht,addEquipment:Le,addDictMalfunction:Ve,addDictPackagelist:qe,addItemPayments:He},Hs=Object(s.b)((function(e){return{tabs:e.book.tabs}}),qs)((function(e){Object(r.useEffect)((function(){e.addEquipment(),e.addDictMalfunction(),e.addDictPackagelist(),e.addItemPayments()}),[]);return Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"})}),Object(Ue.jsx)("div",{className:"settingPageBody"}),Object(Ue.jsx)(An,{list:["\u0418\u0437\u0434\u0435\u043b\u0438\u044f","\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438","\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f","\u0421\u0442\u0430\u0442\u044c\u0438 \u0414\u0414\u0421"],func:e.changeBookForm,tab:e.tabs}),0===e.tabs?Object(Ue.jsx)(Fs,{}):null,1===e.tabs?Object(Ue.jsx)(Is,{}):null,2===e.tabs?Object(Ue.jsx)(Ms,{}):null,3===e.tabs?Object(Ue.jsx)(Gs,{}):null]})})),Ws=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"settingContent",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})}));var Us={editPrice:function(e){return{type:"EDIT_PRICE",price:e}},setVisibleFlag:fe},zs=Object(s.b)((function(e){return{discount_margin:e.data.discount_margin,permissions:e.data.user.role.permissions}}),Us)((function(e){var t=e.discount_margin.filter((function(t){return!t.deleted|e.showDeleted&&t.margin_type===e.type}));return Object(Ue.jsxs)(Ue.Fragment,{children:[Object(Ue.jsxs)("table",{children:[Object(Ue.jsx)("thead",{children:Object(Ue.jsxs)("tr",{children:[Object(Ue.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ue.jsx)("th",{className:"w150",children:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430/\u0421\u043a\u0438\u0434\u043a\u0430"})]})}),Object(Ue.jsx)("tbody",{children:t.map((function(t){return Object(Ue.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:e.permissions.includes("setting_edit_price")?function(){e.editPrice(t),e.setVisibleFlag("statusPriceEditor",!0)}:null,children:[Object(Ue.jsx)("td",{children:t.title}),Object(Ue.jsx)("td",{children:t.margin})]},t.id)}))})]}),Object(Ue.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",t.length]})]})})),Ys={setVisibleFlag:fe,changePriceForm:De,createPrice:function(){var e=de.getState(),t=ue({title:e.price.title,margin:e.price.margin,margin_type:e.price.margin_type,deleted:e.price.deleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/discount_margin",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_discount_margin",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPrice:function(){return{type:"RESET_PRICE"}},savePrice:function(){var e=de.getState(),t=ue({id:e.price.edit,title:e.price.title,margin:e.price.margin,margin_type:e.price.margin_type,deleted:e.price.deleted});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/discount_margin",t).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u044b\u0435\u043d\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_discount_margin",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deletePrice:function(e){var t=de.getState(),n=ue({id:t.price.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/discount_margin",n).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u044b\u0435\u043d\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_discount_margin",ue({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ks=Object(s.b)((function(e){return{price:e.price,inputPriceTitleChecked:e.view.inputPriceTitleChecked,permissions:e.data.user.role.permissions}}),Ys)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("priceEditor")||e.setVisibleFlag("statusPriceEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ue.jsx)("div",{className:"rightBlock",children:Object(Ue.jsxs)("div",{className:"rightBlockWindow",id:"priceEditor",children:[Object(Ue.jsx)("div",{className:"createNewTitle",children:e.price.edit?e.price.title:" \u041d\u043e\u0432\u0430\u044f \u0446\u0435\u043d\u0430"}),Object(Ue.jsxs)("div",{className:"contentEditor",children:[Object(Ue.jsx)(un,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePriceForm(t.target.value,"title")},value:e.price.title,checkedFlag:"inputPriceTitleChecked",checked:e.inputPriceTitleChecked,disabled:e.price.deleted,redStar:!0}),Object(Ue.jsx)(un,{className:"mt15",width:"70px",title:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430",onChange:function(t){return e.changePriceForm(t.target.value.replace(/[^0-9]/g,""),"margin")},value:e.price.margin,unit:"%",disabled:e.price.deleted}),Object(Ue.jsx)(ln,{id:22,title:"\u0422\u0438\u043f \u043d\u0430\u0446\u0435\u043d\u043a\u0438",className:"mt15",list:e.price.list_type_margin,field:"margin_type",setElement:e.changePriceForm,current_id:e.price.margin_type,width:"250px",disabled:e.price.deleted})]}),Object(Ue.jsx)($t,{edit:e.price.edit,deleted:e.price.deleted,create:function(){e.price.title?e.createPrice():e.setVisibleFlag("inputPriceTitleChecked",!1)},save:function(){e.price.title?e.savePrice():e.setVisibleFlag("inputPriceTitleChecked",!1)},delete:e.permissions.includes("setting_price_delete")?function(){return e.deletePrice(!0)}:null,recover:e.permissions.includes("setting_price_recover_deleted")?function(){return e.deletePrice(!1)}:null,close:function(){e.setVisibleFlag("statusPriceEditor",!1),e.resetPrice()}})]})})})),Qs={addDiscountMargin:Me,setVisibleFlag:fe,changePriceForm:De},Js=Object(s.b)((function(e){return{statusPriceEditor:e.view.statusPriceEditor,permissions:e.data.user.role.permissions}}),Qs)((function(e){Object(r.useEffect)((function(){e.addDiscountMargin()}),[]);var t=Object(r.useState)(!1),n=Object(Je.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(Je.a)(a,2),o=s[0],l=s[1];return Object(Ue.jsxs)("div",{className:"settingContent",children:[Object(Ue.jsx)("div",{className:"Header",children:Object(Ue.jsx)("span",{className:"headerTitle",children:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"})}),Object(Ue.jsxs)("div",{className:"settingPageBody",children:[Object(Ue.jsx)("h3",{children:"\u0426\u0435\u043d\u044b \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b"}),Object(Ue.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0446\u0435\u043d \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0426\u0435\u043d\u0430",onClick:function(){e.setVisibleFlag("statusPriceEditor",!0),e.changePriceForm(2,"margin_type")},unvisible:!e.permissions.includes("setting_create_price")}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return c(e.target.checked)},checked:i,unvisible:!e.permissions.includes("setting_price_show_deleted")})]}),e.statusPriceEditor?Object(Ue.jsx)(Ks,{}):null,Object(Ue.jsx)(zs,{type:2,showDeleted:i}),Object(Ue.jsx)("h3",{children:"\u0426\u0435\u043d\u044b \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(Ue.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0446\u0435\u043d \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(Ue.jsxs)("div",{className:"row",children:[Object(Ue.jsx)(yr,{className:"greenButton",title:"+ \u0426\u0435\u043d\u0430",onClick:function(){e.setVisibleFlag("statusPriceEditor",!0),e.changePriceForm(1,"margin_type")},unvisible:!e.permissions.includes("setting_create_price")}),Object(Ue.jsx)(zr,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return l(e.target.checked)},checked:o,unvisible:!e.permissions.includes("setting_price_show_deleted")})]}),Object(Ue.jsx)(zs,{type:1,showDeleted:o})]})]})})),Xs=Object(s.b)((function(e){return{}}))((function(e){return Object(Ue.jsx)("div",{className:"settingContent",children:Object(Ue.jsx)("div",{className:"tempPage",children:Object(Ue.jsxs)("div",{className:"tempContainer",children:[Object(Ue.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433"}),Object(Ue.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Zs=Object(s.b)((function(e){return{}}),{})(Object(l.g)((function(e){return Object(Ue.jsxs)("div",{className:"settingPage",children:[Object(Ue.jsx)(Vc,{}),Object(Ue.jsxs)(l.d,{children:[Object(Ue.jsx)(l.b,{path:"/settings/generally",component:Hc}),Object(Ue.jsx)(l.b,{path:"/settings/employees",component:ja}),Object(Ue.jsx)(l.b,{path:"/settings/branches",component:Ca}),Object(Ue.jsx)(l.b,{path:"/settings/wherehouse",component:Va}),Object(Ue.jsx)(l.b,{path:"/settings/status",component:Ga}),Object(Ue.jsx)(l.b,{path:"/settings/tags",component:qa}),Object(Ue.jsx)(l.b,{path:"/settings/alerts",component:ps}),Object(Ue.jsx)(l.b,{path:"/settings/services_pricelist",component:gs}),Object(Ue.jsx)(l.b,{path:"/settings/books",component:Hs}),Object(Ue.jsx)(l.b,{path:"/settings/document-templates",component:Ws}),Object(Ue.jsx)(l.b,{path:"/settings/prices",component:Js}),Object(Ue.jsx)(l.b,{path:"/settings/marketing",component:Xs}),Object(Ue.jsx)(l.a,{from:"/settings",to:"/settings/generally"})]})]})})));var $s={addEmployees:Be,addStatus:function(){var e=de.getState();return function(t){fetch(e.data.url_server+"/get_status",ue()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_STATUS",status:e.data}):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addMainData:function(){var e=de.getState(),t=ue({});return function(n){fetch(e.data.url_server+"/get_main_data",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"generally_info",data:e.generally_info}),n({type:"ADD_GENERALLY_INFO",data:e.generally_info}),n({type:"ADD_DATA",field:"branches",data:e.branch}),n({type:"ADD_DATA",field:"order_type",data:e.order_type}),n({type:"ADD_DATA",field:"counters",data:e.counts}),n({type:"ADD_DATA",field:"ad_campaign",data:e.ad_campaign}),n({type:"ADD_DATA",field:"item_payments",data:e.item_payments}),n({type:"ADD_DATA",field:"status_group",data:e.status_group}),n({type:"ADD_DATA",field:"cashboxes",data:e.cashboxes}),n({type:"ADD_DATA",field:"item_payments",data:e.item_payments}),n({type:"ADD_DATA",field:"service_prices",data:e.service_prices})):console.warn(e.massage)})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addData:Te},eo=Object(s.b)((function(e){return{statusCreateNewClient:e.view.statusCreateNewClient,user_id:e.data.user.id,branches:e.data.branches}}),$s)(Object(l.g)((function(e){return Object(r.useEffect)((function(){e.addMainData(),e.addEmployees(),e.addStatus()}),[]),Object(r.useEffect)((function(){e.addData(e.branches.filter((function(t){return t.employees.includes(e.user_id)}))[0],"current_branch")}),[e.branches]),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)(et,{}),Object(Ue.jsx)("div",{className:"contentMain",children:Object(Ue.jsxs)(l.d,{children:[Object(Ue.jsx)(l.b,{path:"/tasks",component:_i}),Object(Ue.jsx)(l.b,{path:"/leans",component:fi}),Object(Ue.jsx)(l.b,{path:"/orders",component:ji}),Object(Ue.jsx)(l.b,{path:"/shops",component:Oi}),Object(Ue.jsx)(l.b,{path:"/payments",component:$i}),Object(Ue.jsx)(l.b,{path:"/wherehouse",component:Ac}),Object(Ue.jsx)(l.b,{path:"/clients",component:Dc}),Object(Ue.jsx)(l.b,{path:"/analytics",component:Pc}),Object(Ue.jsx)(l.b,{path:"/reports",component:Rc}),Object(Ue.jsx)(l.b,{path:"/telephony",component:Bc}),Object(Ue.jsx)(l.b,{path:"/settings",component:Zs}),Object(Ue.jsx)(l.a,{from:"/",to:"/leans"})]})})]})})));var to={login:function(e){return{type:"LOGIN",token:e}},loguot:function(){return{type:"LOGUOT"}},addUser:function(e){return{type:"ADD_USER",user:e}},log_in:function(e,t){var n=de.getState(),r=ue({email:e,password:t});return function(e){fetch(n.data.url_server+"/login",r).then((function(e){return e.json()})).then((function(t){t.success?(sessionStorage.setItem("1xsndt",t.access_token),sessionStorage.setItem("user",JSON.stringify(t.user)),e({type:"ADD_DATA",field:"user",data:t.user}),e({type:"ADD_DATA",field:"login_status",data:!0}),e({type:"ADD_DATA",field:"token",data:t.access_token})):(e({type:"ADD_DATA",field:"error_message",data:t.message}),console.warn(t.message))})).catch((function(){return me("\u0417\u0430\u043f\u0440\u043e\u0441 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},no=Object(s.b)((function(e){return{serverUrl:e.data.url_server,error_message:e.data.error_message}}),to)((function(e){var t=function(t){var n=t.target.form;e.log_in(n.login.value,n.password.value)};return Object(Ue.jsx)("div",{className:"mainLoginContaner",children:Object(Ue.jsxs)("div",{className:"loginContanier",children:[Object(Ue.jsx)("h2",{children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),e.error_message?Object(Ue.jsx)("span",{className:"errorMessageLogin",children:e.error_message}):null,Object(Ue.jsxs)("form",{id:"loginForm",children:[Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("label",{className:"loginFormLable",children:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 Email"}),Object(Ue.jsx)("input",{id:"login",className:"loginFormInput",type:"text",onKeyPress:function(e){"Enter"===e.key&&t(e)}})]}),Object(Ue.jsxs)("div",{children:[Object(Ue.jsx)("label",{className:"loginFormLable",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(Ue.jsx)("input",{id:"password",className:"loginFormInput",type:"password",onKeyPress:function(e){"Enter"===e.key&&t(e)}})]}),Object(Ue.jsx)("div",{children:Object(Ue.jsx)("button",{className:"loginButtom",type:"button",onClick:t,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})})}));var ro=Object(s.b)((function(e){return{token:e.data.token}}))((function(e){return e.token?Object(Ue.jsx)(eo,{}):Object(Ue.jsx)(no,{})})),io=Object(Ue.jsx)(i.a.StrictMode,{children:Object(Ue.jsx)(s.a,{store:de,children:Object(Ue.jsx)(o.a,{children:Object(Ue.jsx)(ro,{})})})});a.a.render(io,document.getElementById("root"))},70:function(e,t,n){},76:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.cbfb8c78.chunk.js.map