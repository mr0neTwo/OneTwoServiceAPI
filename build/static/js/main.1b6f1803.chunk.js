(this["webpackJsonponetwoservice-react"]=this["webpackJsonponetwoservice-react"]||[]).push([[0],{35:function(e,t,n){},41:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),c=n(17),a=n.n(c),s=n(2),o=n(10),l=(n(35),n(9)),d=n(4),u=n.n(d),m=n(6),p=n(16),h=n(26),b=n(7),j=n(3),_=[{value:"create_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438"},{value:"do_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u043c"},{value:"see_all_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"edit_all_task",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u0432\u0441\u0435\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"}],f=[{value:"see_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"create_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"edit_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{value:"delete_leads",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}],v=[{value:"create_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"move_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"delete_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"assing_emploees",description:"\u041c\u043e\u0436\u0435\u0442 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0442\u044c \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f \u0432 \u0437\u0430\u043a\u0430\u0437"},{value:"see_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0435"},{value:"see_calls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0432\u043e\u043d\u043a\u0438"},{value:"edit_info_orders",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \xab\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435\xbb"},{value:"edit_operations_materials",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044f \xab\u0420\u0430\u0431\u043e\u0442\u044b \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b\xbb"},{value:"add_service_list",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u0438\u0437 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0430"},{value:"add_servece_not_list",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u0432 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0435"},{value:"add_materials_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441\u043e \u0441\u043a\u043b\u0430\u0434\u0430"},{value:"add_materials_not_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0435\u0442 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"},{value:"create_books",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u0439"},{value:"edit_service_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u0443\u0441\u043b\u0443\u0433"},{value:"edit_materials_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"},{value:"edit_closed_order",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"},{value:"generally_custom_filters",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u0431\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b"},{value:"cteate_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"}],O=[{value:"make_sales",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{value:"delete_sales",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{value:"sale_service",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"edit_sale_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443"}],g=[{value:"make_income",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043d\u043e\u0441\u0438\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"move_money",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"make_expenditure",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438"},{value:"backdating",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043d\u043e\u0441\u0438\u0442\u044c, \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u0442\u044c \u0434\u0435\u043d\u044c\u0433\u0438 \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c"},{value:"see_moving_money",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433"},{value:"see_moving_money_all_time",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0434\u0430\u0442"},{value:"delete_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"see_delete_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"recover_payments",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"print_moving_money",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433"},{value:"see_remains",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435"},{value:"edit_cash",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u0430\u0441\u0441\u044b"},{value:"choose_emploees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"},{value:"invoices",description:"\u0421\u0447\u0435\u0442\u0430"},{value:"see_clients_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0440\u0430\u0441\u0447\u0451\u0442\u044b"},{value:"create_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"delete_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"edit_refund",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u0443 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"},{value:"see_all_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"create_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0438\u044e/\u0432\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435"},{value:"see_seleted_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"},{value:"delete_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"},{value:"recover_payrolls",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u0417\u041f"},{value:"see_payment_profit",description:"\u0412\u0438\u0434\u0438\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0438\u0438 \u0438\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u0431\u044b\u043b\u0438"}],x=[{value:"see_remaining_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438"},{value:"see_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"create_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"edit_equipment_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"write_of_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"combine_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"move_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"see_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"create_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"delete_registrations",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"},{value:"write_of_warehouse",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},{value:"move_warehouse",description:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"see_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"see_inventory_total",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0438\u0442\u043e\u0433\u0438 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"create_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"delete_inventory",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"},{value:"see_refund_to_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"create_refund_to_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"},{value:"serial_accounting",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u0435\u0440\u0438\u0439\u043d\u044b\u0439 \u0443\u0447\u0435\u0442 \u0434\u043b\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"create_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"edit_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"see_deleted_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"delete_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"recover_warehouse_categories",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"create_new_part",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"edit_part",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"see_delete_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"delete_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"recover_parts",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"},{value:"delete_operation_of_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"}],y=[{value:"see_table_clients",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"},{value:"see_buyer",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u0435\u0439"},{value:"see_supplier",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432"},{value:"see_client_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"edit_client_balance",description:"\u041c\u043e\u0436\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"edit_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"delete_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"recover_client",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u0430\u043b\u0438\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"see_client_call",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0432\u043e\u043d\u043a\u0438"},{value:"edit_client_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u043a\u0438\u0434\u043a\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}],E=[{value:"indicators",description:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438"},{value:"analytic",description:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0442\u0447\u0435\u0442"},{value:"assortment",description:"\u0410\u043d\u0430\u043b\u0438\u0437 \u0430\u0441\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442\u0430"}],N=[{value:"print_report",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u0430"},{value:"report_all_date",description:"\u041c\u043e\u0436\u0435\u0442 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442 \u0437\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0434\u0430\u0442"},{value:"report_salary",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0435"},{value:"report_all_maney",description:"\u0412\u0441\u0435\u0433\u043e \u0434\u0435\u043d\u0435\u0433"},{value:"report_move_maney",description:"\u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432"},{value:"report_income_orders",description:"\u041f\u0440\u0438\u0431\u044b\u043b\u044c \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043c"},{value:"report_income_sale",description:"\u041f\u0440\u0438\u0431\u044b\u043b\u044c \u043e\u0442 \u043f\u0440\u043e\u0434\u0430\u0436"},{value:"report_create_order",description:"\u0421\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"report_close_order",description:"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"},{value:"report_work_order",description:"\u0417\u0430\u043a\u0430\u0437\u044b \u0432 \u0440\u0430\u0431\u043e\u0442\u0435"},{value:"report_ad_campaign",description:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0435 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438"},{value:"report_engineer",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f\u043c"},{value:"report_service",description:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c \u0438 \u0443\u0441\u043b\u0443\u0433\u0430\u043c"},{value:"report_turnover_goods",description:"\u041e\u0431\u043e\u0440\u043e\u0442\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"report_remaining_warehouse",description:"\u041e\u0441\u0442\u0430\u0442\u043a\u0438 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435"},{value:"report_write_of_warehouse",description:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0441\u043e \u0441\u043a\u043b\u0430\u0434\u0430"},{value:"report_good_need",description:"\u0422\u043e\u0432\u0430\u0440\u044b, \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438"},{value:"report_send_sms",description:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 SMS"},{value:"report_last_sms",description:"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 SMS"},{value:"report_reviews",description:"\u041e\u0442\u0437\u044b\u0432\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"},{value:"report_to_email",description:"\u041e\u0442\u0447\u0435\u0442 \u043d\u0430 email"},{value:"history_login",description:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0445\u043e\u0434\u043e\u0432"},{value:"report_call",description:"\u0417\u0432\u043e\u043d\u043a\u0438"}],w=[{value:"setting_generally",description:"\u041e\u0431\u0449\u0438\u0435"},{value:"setting_roles",description:"\u0420\u043e\u043b\u0438"},{value:"setting_employees",description:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"},{value:"setting_see_employees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432"},{value:"setting_recover_employees",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u0432\u0445 \u0441\u043e\u0442\u0440\u0434\u0443\u043d\u0438\u043a\u043e\u0432"},{value:"setting_branch",description:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_see_branch",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_recover_branch",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"},{value:"setting_warehouse",description:"\u0421\u043a\u043b\u0430\u0434\u044b"},{value:"setting_create_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_edit_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0430\u0434\u044b"},{value:"setting_delete_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_see_deleted_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043a\u043b\u0430\u0434\u044b"},{value:"setting_recover_warehouse",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435"},{value:"see_setting_tax",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043d\u0430\u043b\u043e\u0433\u043e\u0432"},{value:"create_tax",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430\u043b\u043e\u0433\u0438"},{value:"create_tax_rules",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u043b\u043e\u0433\u043e\u0432\u044b\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"},{value:"setting_status",description:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b"},{value:"setting_tags",description:"\u0422\u0435\u0433\u0438"},{value:"setting_alert",description:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_create_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_edit_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_see_deleted_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_delete_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_recover_not_template",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_create_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_edit_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_see_deleted_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_delete_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_recover_not_event",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"},{value:"setting_service",description:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"},{value:"setting_create_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_see_deleted_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_edit_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0441\u043b\u0443\u0433\u0438"},{value:"setting_delete_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0433\u0438"},{value:"setting_recover_service",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0438 \u0443\u0441\u043b\u0433\u0438"},{value:"setting_book",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"},{value:"setting_see_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_recover_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_join_equipment",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"},{value:"setting_template",description:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"},{value:"setting_price",description:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_create_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0446\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_edit_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0446\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"setting_price_show_deleted",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_price_delete",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_price_recover_deleted",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438"},{value:"setting_marketing",description:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433"}],k=[{permission:[{value:"to_lend",description:"\u041c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0441\u0447\u0451\u0442 \u0434\u043e\u043b\u0433\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"},{value:"see_purchase",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u043a\u0443\u043f\u043e\u0447\u043d\u0443\u044e \u0446\u0435\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},{value:"handle_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043a\u0438\u0434\u043a\u0438 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445"},{value:"handle_type_discount",description:"\u041c\u043e\u0436\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0438\u043f \u0441\u043a\u0438\u0434\u043a\u0438"},{value:"handle_cost_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445"},{value:"see_profit",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0440\u0430\u0441\u0447\u0451\u0442\u043d\u0443\u044e \u043f\u0440\u0438\u0431\u044b\u043b\u044c"},{value:"in_list_managers",description:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432"},{value:"in_list_engineers",description:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439"},{value:"send_sms",description:"\u041c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c SMS"},{value:"see_price",description:"\u041c\u043e\u0436\u0435\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0438\u0437\u0434\u0435\u043b\u0438\u044f"}],description:"\u041e\u0431\u0449\u0438\u0435"},{permission:_,description:"\u0417\u0430\u0434\u0430\u0447\u0438"},{permission:f,description:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"},{permission:v,description:"\u0417\u0430\u043a\u0430\u0437\u044b"},{permission:O,description:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"},{permission:g,description:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b"},{permission:x,description:"\u0421\u043a\u043b\u0430\u0434"},{permission:y,description:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"},{permission:E,description:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"},{permission:N,description:"\u041e\u0442\u0447\u0435\u0442\u044b"},{permission:w,description:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}],C=["show_cashbox_remains","show_cash_flow","incoming","incoming_move","outcoming","outcoming_move"],S=["show_warehouse_remains","warehouse_registration","move_in","return_from_client","write_off","move_out","add_to_order","add_to_sale","return_to_supplier"],T={alerts:[],menuRows:[{id:1,title:"\u0417\u0430\u0434\u0430\u0447\u0438",image:"task",url:"/tasks",group_name:"generally_menu",permission_keys:_.map((function(e){return e.value}))},{id:2,title:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",image:"M 3.527 6.987 a 0.5 0.5 0 0 0 -0.432 0.751 l 0.733 1.263 a 0.5 0.5 0 0 0 0.432 0.25 h 7.48 a 0.5 0.5 0 0 0 0.432 -0.25 l 0.733 -1.263 a 0.5 0.5 0 0 0 -0.432 -0.75 H 3.527 Z m 2.56 4.431 a 0.5 0.5 0 0 0 -0.433 0.75 l 0.69 1.2 a 0.5 0.5 0 0 0 0.434 0.25 h 2.444 a 0.5 0.5 0 0 0 0.434 -0.25 l 0.69 -1.2 a 0.5 0.5 0 0 0 -0.433 -0.75 H 6.087 Z M 0.867 2.382 a 0.5 0.5 0 0 0 -0.433 0.75 l 0.83 1.437 a 0.5 0.5 0 0 0 0.433 0.25 h 12.606 a 0.5 0.5 0 0 0 0.433 -0.25 l 0.83 -1.437 a 0.5 0.5 0 0 0 -0.433 -0.75 H 0.867 Z",url:"/leans",group_name:"generally_menu",permission_keys:f.map((function(e){return e.value}))},{id:3,title:"\u0417\u0430\u043a\u0430\u0437\u044b",image:"M 13.6 0 H 2.4 A 2.403 2.403 0 0 0 0 2.4 v 11.2 A 2.403 2.403 0 0 0 2.4 16 h 11.2 a 2.403 2.403 0 0 0 2.4 -2.4 V 2.4 A 2.403 2.403 0 0 0 13.6 0 Z M 2.4 1.6 h 11.2 a 0.801 0.801 0 0 1 0.8 0.8 v 7.2 h -1.972 a 1.598 1.598 0 0 0 -1.331 0.713 L 9.972 12 H 6.028 l -1.125 -1.688 A 1.598 1.598 0 0 0 3.572 9.6 H 1.6 V 2.4 a 0.8 0.8 0 0 1 0.8 -0.8 Z m 2.355 4.8 h 6.4 c 0.267 0 0.8 0.32 0.8 0.8 c 0 0.48 -0.533 0.8 -0.8 0.8 h -6.4 c -0.266 0 -0.8 -0.32 -0.8 -0.8 c 0 -0.48 0.534 -0.8 0.8 -0.8 Z m 6.4 -3.2 h -6.4 c -0.266 0 -0.8 0.32 -0.8 0.8 c 0 0.48 0.534 0.8 0.8 0.8 h 6.4 c 0.267 0 0.8 -0.32 0.8 -0.8 c 0 -0.48 -0.533 -0.8 -0.8 -0.8 Z",url:"/orders",group_name:"generally_menu",permission_keys:v.map((function(e){return e.value}))},{id:4,title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438",image:"M 1.472 0 a 0.656 0.656 0 0 0 0 1.311 h 0.976 V 8.793 a 0.652 0.652 0 0 0 0 0.046 v 2.68 a 2.289 2.289 0 1 0 2.726 1.217 h 4.837 a 2.288 2.288 0 1 0 2.07 -1.312 H 3.76 V 9.473 h 9.952 c 0.327 0 0.603 -0.24 0.65 -0.563 l 0.816 -5.713 a 0.656 0.656 0 0 0 -0.603 -0.746 L 3.76 1.677 V 0.656 A 0.656 0.656 0 0 0 3.104 0 H 1.472 Z m 10.593 12.736 h 0.025 a 0.976 0.976 0 1 1 -0.025 0 Z m -8.97 0 h 0.024 a 0.976 0.976 0 1 1 -0.024 0 Z",url:"/shops",group_name:"generally_menu",permission_keys:O.map((function(e){return e.value}))},{id:5,title:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b",image:"M 3.555 1.348 a 8 8 0 1 1 8.89 13.304 a 8 8 0 0 1 -8.89 -13.304 Z m 3.203 4.683 a 0.727 0.727 0 0 1 0.515 -0.213 h 2.909 a 0.727 0.727 0 1 0 0 -1.454 H 8.727 v -0.728 a 0.727 0.727 0 1 0 -1.454 0 v 0.728 a 2.182 2.182 0 1 0 0 4.363 h 1.454 a 0.727 0.727 0 1 1 0 1.455 H 5.818 a 0.727 0.727 0 0 0 0 1.454 h 1.455 v 0.728 a 0.727 0.727 0 0 0 1.454 0 v -0.728 a 2.182 2.182 0 0 0 0 -4.363 H 7.273 a 0.727 0.727 0 0 1 -0.515 -1.242 Z",url:"/payments",group_name:"generally_menu",permission_keys:g.map((function(e){return e.value}))},{id:6,title:"\u0421\u043a\u043b\u0430\u0434",image:"M5.5 0a1 1 0 00-1 1v5a1 1 0 001 1h5a1 1 0 001-1V1a1 1 0 00-1-1h-5zm1.2 1a.2.2 0 00-.2.2v1c0 .11.09.2.2.2h2.6a.2.2 0 00.2-.2v-1a.2.2 0 00-.2-.2H6.7zM1 9a1 1 0 00-1 1v5a1 1 0 001 1h5a1 1 0 001-1v-5a1 1 0 00-1-1H1zm1.2 1a.2.2 0 00-.2.2v1c0 .11.09.2.2.2h2.6a.2.2 0 00.2-.2v-1a.2.2 0 00-.2-.2H2.2zM9 10a1 1 0 011-1h5a1 1 0 011 1v5a1 1 0 01-1 1h-5a1 1 0 01-1-1v-5zm2 .2c0-.11.09-.2.2-.2h2.6c.11 0 .2.09.2.2v1a.2.2 0 01-.2.2h-2.6a.2.2 0 01-.2-.2v-1z",url:"/wherehouse",group_name:"generally_menu",permission_keys:x.map((function(e){return e.value}))},{id:7,title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",image:"M14.4 6.4c0 1.323-1.077 2.4-2.4 2.4a2.403 2.403 0 01-2.4-2.4C9.6 5.077 10.677 4 12 4s2.4 1.077 2.4 2.4zM8.8 4c0 1.765-1.435 3.2-3.2 3.2A3.203 3.203 0 012.4 4C2.4 2.235 3.835.8 5.6.8 7.365.8 8.8 2.235 8.8 4zM12 9.6c-.897 0-1.753.3-2.448.837A5.583 5.583 0 005.6 8.8 5.607 5.607 0 000 14.4a.8.8 0 00.8.8h9.6a.8.8 0 00.8-.8h4a.8.8 0 00.8-.8c0-2.206-1.794-4-4-4z",url:"/clients",group_name:"generally_menu",permission_keys:y.map((function(e){return e.value}))},{id:8,title:"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430",image:"M12.184.705a.889.889 0 00-1.311.06L6.879 5.556 3.953 4.094a.889.889 0 00-1.109.262L.178 7.91A.889.889 0 101.6 8.978l2.222-2.962 2.892 1.446a.889.889 0 001.08-.226l3.821-4.586 2.868 2.867A.889.889 0 0015.74 4.26L12.184.705zm-.678 5.074a.889.889 0 01.678.26l3.556 3.555c.166.166.26.392.26.628v4.445a.889.889 0 01-.889.889H.89a.889.889 0 01-.74-1.382L3.705 8.84a.889.889 0 011.137-.302l2.913 1.457L10.86 6.11a.889.889 0 01.645-.332z",url:"analytics",group_name:"report_menu",permission_keys:E.map((function(e){return e.value}))},{id:9,title:"\u041e\u0442\u0447\u0435\u0442\u044b",image:"M0 2a2 2 0 012-2h2v5H0V2zm0 5v7a2 2 0 002 2h2V7H0zm6 0v9h8a2 2 0 002-2V7H6zm10-2V2a2 2 0 00-2-2H6v5h10z",url:"/reports",group_name:"report_menu",permission_keys:N.map((function(e){return e.value}))},{id:10,title:"\u0417\u0432\u043e\u043d\u043a\u0438",image:"M1.882 0h3.765L7.53 4.706 5.176 6.118a10.353 10.353 0 004.706 4.705l1.412-2.352L16 10.353v3.765A1.882 1.882 0 0114.118 16 15.059 15.059 0 010 1.882 1.882 1.882 0 011.882 0z",url:"/telephony",group_name:"report_menu",permission_keys:["report_call"]},{id:11,title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",image:"M15.456 6.04l-1.512-.504.712-1.424a.8.8 0 00-.152-.912L12.8 1.496a.8.8 0 00-.92-.152l-1.424.712L9.952.544A.8.8 0 009.2 0H6.8a.8.8 0 00-.76.544l-.504 1.512-1.424-.712a.8.8 0 00-.912.152L1.496 3.2a.8.8 0 00-.152.92l.712 1.424-1.512.504A.8.8 0 000 6.8v2.4a.8.8 0 00.544.76l1.512.504-.712 1.424a.8.8 0 00.152.912L3.2 14.504a.8.8 0 00.92.152l1.424-.712.504 1.512a.8.8 0 00.76.544h2.4a.8.8 0 00.76-.544l.504-1.512 1.424.712a.8.8 0 00.904-.152l1.704-1.704a.8.8 0 00.152-.92l-.712-1.424 1.512-.504A.8.8 0 0016 9.2V6.8a.8.8 0 00-.544-.76zM8 11a3 3 0 100-6 3 3 0 000 6z",url:"/settings",group_name:"setting_menu",permission_keys:w.map((function(e){return e.value}))}],current_menu_row:"",settingMenu:[{id:1,title:"\u041e\u0431\u0449\u0438\u0435",url:"/settings/generally",group_name:"generally_setting",permission_key:"setting_generally"},{id:2,title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",url:"/settings/employees",group_name:"generally_setting",permission_key:"setting_employees"},{id:3,title:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",url:"/settings/branches",group_name:"generally_setting",permission_key:"setting_branch"},{id:4,title:"\u0421\u043a\u043b\u0430\u0434\u044b",url:"/settings/wherehouse",group_name:"generally_setting",permission_key:"setting_warehouse"},{id:5,title:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b",url:"/settings/status",group_name:"app_setting",permission_key:"setting_status"},{id:6,title:"\u0422\u0435\u0433\u0438",url:"/settings/tags",group_name:"app_setting",permission_key:"setting_tags"},{id:7,title:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f",url:"/settings/alerts",group_name:"app_setting",permission_key:"setting_alert"},{id:8,title:"\u041f\u0435\u0440\u0435\u0447\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433",url:"/settings/services_pricelist",group_name:"app_setting",permission_key:"setting_service"},{id:9,title:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438",url:"/settings/books",group_name:"app_setting",permission_key:"setting_book"},{id:10,title:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",url:"/settings/document-templates",group_name:"app_setting",permission_key:"setting_template"},{id:11,title:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438",url:"/settings/prices",group_name:"app_setting",permission_key:"setting_price"},{id:12,title:"\u041c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",url:"/settings/marketing",group_name:"app_setting",permission_key:"setting_marketing"}],current_setting_menu_row:"",user:JSON.parse(sessionStorage.getItem("user"))||{},status:[],status_group:[],order_type:[],equipment:[],discount_margin:[],roles:[],ad_campaign:[],generally_info:{},payrules:[],group_dict_service:[],dict_service:[],service_prices:[],counters:[],dictMalfunction:[],count_malfunction:0,dictPackagelist:[],count_packagelist:0,item_payments:[],count_item_payments:0,csrfToken:"",credentials:"same-origin",login_status:JSON.parse(sessionStorage.getItem("login_status"))||!1,error_message:"",url_server:"http://onetwonline.ru"},F={statusMenuVisible:{},statusSetCustomFilter:!1,stausListFilter:!1,typeListFilter:!1,managerListFilter:!1,engineerListFilter:!1,groupListFilter:!1,brandListFilter:!1,subtypeListFilter:!1,clientListFilter:!1,statusCreateNewFilter:!1,statusCreateNewRole:!1,statusEmployeeEditor:!1,employeeEditorRoleOptions:!1,statusOrderEditor:!1,statusCreateNewClient:!1,statusAdCampaignClient:!1,checkedOrderClient:!1,statusBranchEditor:!1,statusChooseIcon:!1,statusEquipmentEditor:!1,statusElementEditor:!1,statusCashboxEditor:!1,statusCashboxEmployeeEditor:!1,statusPaymentsEditor:!1,statusPaymentsCard:!1,statusStatusList:!1,statusSalaryEditor:!1,statusPriceEditor:!1,statusGroupServiceEditor:!1,statusServiceEditor:!1,statusOperationEditor:!1,statusPayrollEditor:!1,statusCellEditor:!1,statusWarehouseEditor:!1,statusWarehouseEmployeeEditor:!1,statusWarehouseCategoryEditor:!1,statusPartEditor:!1,statusOrderPartEditor:!1,statusOrderSticker:!1,statusOrderLoader:!1,checkOrderSticker:"true"===localStorage.getItem("checkOrderSticker"),statusNotTemplateEditor:!1,statusNotEventEditor:!1,needToResetOrder:!1,inputClientNameChecked:!0,inputClientPhoneChecked:[!0],inputClientDiscServChecked:!0,inputClientDiscMatChecked:!0,inputClientDiscGoodChecked:!0,inputRoleTitleChecked:!0,inputEmployeeNameChecked:!0,inputEmployeeEmailChecked:!0,inputEmployeeLoginChecked:!0,inputEmployeePasswordChecked:!0,inputEmployeeRoleChecked:!0,inputMalfunctionChecked:!0,checkedOrderKindofGood:!0,checkedOrderBrand:!0,checkedOrderSubtype:!0,inputMaindataNameChecked:!0,inputBranchNameChecked:!0,inputBranchPrefixChecked:!0,inputBranchPrefixDocChecked:!0,inputBookTitleChecked:!0,inputCashboxTitleChecked:!0,inputPaymentDescChecked:!0,inputPaymentCashflowChecked:!0,inputPaymentCashboxChecked:!0,inputPaymentEmployeeChecked:!0,inputPaymentSumChecked:!0,inputPriceTitleChecked:!0,inputDictServiceChecked:!0,inputServiceTitleChecked:!0,inputServiceCategoryIdChacked:!0,inputServicePriceChacked:!0,inputOperationEngineerChacked:!0,inputOperationTitleChacked:!0,inputPayrollDescChecked:!0,inputPayrollEmployeeChecked:!0,inputPayrollSumChecked:!0,inputSingleMalfunctionChecked:!0,inputWarehouseTitleChecked:!0,inputWCategoryTitleChecked:!0,inputWPartTitleChecked:!0,inputOrderPartTitleChacked:!0,inputOrderPartEngineerChecked:!0,inputNotTempTitleChecked:!0,inputNotTempTempleChecked:!0,inputNotEventEventChecked:!0,inputNotEventTemplateChecked:!0,inputFilterTitleChecked:!0,errorSameMail:!1,errorSameLogin:!1,statusRefreshPage:!1},A={clientFilter:{page:0,name:"",phone:"7"},search_word:"",badges:[],customFilters:[],title:"",general:!1,sort:JSON.parse(localStorage.getItem("sort"))||"desc",field_sort:JSON.parse(localStorage.getItem("field_sort"))||"id",page:JSON.parse(localStorage.getItem("page"))||0,engineer_id:JSON.parse(localStorage.getItem("engineer_id"))||null,overdue:JSON.parse(localStorage.getItem("overdue"))||null,status_id:JSON.parse(localStorage.getItem("status_id"))||null,status_overdue:JSON.parse(localStorage.getItem("status_overdue"))||null,urgent:JSON.parse(localStorage.getItem("urgent"))||null,order_type_id:JSON.parse(localStorage.getItem("order_type_id"))||null,manager_id:JSON.parse(localStorage.getItem("manager_id"))||null,created_at:JSON.parse(localStorage.getItem("created_at"))||null,kindof_good:JSON.parse(localStorage.getItem("kindof_good"))||null,brand:JSON.parse(localStorage.getItem("brand"))||null,subtype:JSON.parse(localStorage.getItem("subtype"))||null,client_id:JSON.parse(localStorage.getItem("client_id"))||null,search:"",temp_statuses:[],temp_order_types:[],temp_managers:[],temp_engineers:[],temp_created_at:[0,0],temp_kindof_good_id:null,temp_brand:null,temp_subtype:null,temp_client:{},active_badge:JSON.parse(localStorage.getItem("active_badge"))||0,active_filter:JSON.parse(localStorage.getItem("active_filter"))||0},P={title_create:"",edit:0,earnings_visibility:!1,leads_visibility:!1,orders_visibility:!1,list_permissions:[],visible_statuses:[],settable_statuses:[],settable_discount_margin:[]},D={employees:[],tabs:0,edit:0,showDeleted:!1,role_title:"",first_name:"",last_name:"",email:"",notes:"",phone:"",avatar:"",img:"",login:"",password:"",role_id:0,permissions:[],inn:"",doc_name:"",post:"",deleted:!1,avaStartPosition:[0,0],scale_img:100},R=[{id:1,title:"\u0417\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d",value:"CREATE_ORDER"},{id:2,title:"\u0418\u043d\u0436\u0435\u043d\u0435\u0440 \u043d\u0430\u0437\u0430\u043d\u0447\u0435\u043d",value:"ASSIGN_ENGINEER"},{id:3,title:"\u0418\u043d\u0436\u0435\u043d\u0435\u0440 \u0438\u0437\u043c\u0435\u043d\u0435\u043d",value:"CHANGE_ENGINEER"},{id:4,title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d",value:"ASSIGN_MANAGER"},{id:5,title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0438\u0437\u043c\u0435\u043d\u0435\u043d",value:"CHANGE_MANAGER"},{id:6,title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043a\u043b\u0438\u0435\u043d\u0442",value:"ADD_CLIENT"},{id:7,title:"\u041a\u043b\u0438\u0435\u043d\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d",value:"CHANGE_CLIENT"},{id:8,title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",value:"CHANGE_DATA"},{id:9,title:"\u0421\u0440\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d",value:"CHANGE_ESTIMATED_DONE_AT"},{id:10,title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f",value:"ADD_OPERATION"},{id:11,title:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0430",value:"DELETE_OPERATION"},{id:12,title:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430",value:"CHANGE_OPERATION"},{id:13,title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u044c",value:"ADD_ORDER_PART"},{id:14,title:"\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0430",value:"DELETE_ORDER_PART"},{id:15,title:"\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430",value:"CHANGE_ORDER_PART"},{id:16,title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",value:"ADD_PAYMENT"},{id:17,title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0443\u0434\u0430\u043b\u0435\u043d",value:"DELETE_PAYMENT"},{id:18,title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d",value:"CHANGE_STATUS"},{id:19,title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",value:"ADD_COMMENT"},{id:20,title:"SMS \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",value:"SEND_SMS"},{id:21,title:"Email \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",value:"SEND_EMAIL"},{id:22,title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430",value:"MOVE_TO"}],I=[{id:1,title:"\u0417\u0430\u043a\u0430\u0437 \u2116",field:"id",width:90,visible:!0,order:1},{id:2,title:"\u0421\u043e\u0437\u0434\u0430\u043d",field:"created_at",width:150,visible:!0,order:2},{id:3,title:"\u0421\u0440\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u0430",field:"estimated_done_at",width:150,visible:!0,order:3},{id:4,title:"\u0421\u0442\u0430\u0442\u0443\u0441",field:"status.name",width:150,visible:!0,order:4},{id:5,title:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e",field:"equipment",width:150,visible:!0,order:5},{id:6,title:"\u0422\u0438\u043f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",field:"kindof_good",width:150,visible:!0,order:6},{id:7,title:"\u0411\u0440\u0435\u043d\u0434",field:"brand",width:130,visible:!0,order:7},{id:8,title:"\u041c\u043e\u0434\u0443\u043b\u044c/\u0421\u0435\u0440\u0438\u044f",field:"subtype",width:130,visible:!0,order:8},{id:9,title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c",field:"malfunction",width:130,visible:!0,order:9},{id:10,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",field:"engineer_id",width:150,visible:!0,order:10},{id:11,title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 ",field:"manager_id",width:150,visible:!0,order:11},{id:12,title:"\u041a\u043b\u0438\u0435\u043d\u0442",field:"client.name",width:150,visible:!0,order:12},{id:13,title:"\u0426\u0435\u043d\u0430",field:"price",width:130,visible:!0,order:13},{id:14,title:"\u041a \u043e\u043f\u043b\u0430\u0442\u0435",field:"missed_payments",width:130,visible:!0,order:14},{id:15,title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",field:"engineer_notes",width:130,visible:!0,order:15},{id:16,title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430",field:"manager_notes",width:150,visible:!0,order:16},{id:17,title:"\u042f\u0447\u0435\u0439\u043a\u0430",field:"engineer_notes",width:150,visible:!0,order:17},{id:18,title:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",field:"ad_campaign_id",width:150,visible:!0,order:18}],B={ordersShow:[],count:0,events:[],edit:0,tabs:1,created_at:0,done_at:0,closed_at:0,assigned_at:0,duration:0,estimated_done_at:parseInt(Date.now()/1e3)+345600,scheduled_for:0,warranty_date:0,status_deadline:0,ad_campaign_id:1,branch_id:0,status:{},client:{},order_type_id:1,closed_by_id:0,created_by_id:0,manager_id:0,engineer_id:0,kindof_good:{},brand:{},subtype:{},model:{},operations:[],parts:[],attachments:[],payments:[],id_label:"",prefix:"",serial:"",malfunction:"",packagelist:"",appearance:"",engineer_notes:"",manager_notes:"",resume:"",cell:"",estimated_cost:0,missed_payments:0,discount_sum:0,payed:0,price:0,remaining:0,remaining_status:0,remaining_warranty:0,overdue:!1,status_overdue:!1,urgent:!1,warranty_measures:!1,event_filter:JSON.parse(localStorage.getItem("event_filter"))||R.map((function(e){return e.id})),event_comment:"",tableFields:JSON.parse(localStorage.getItem("tableFields"))||I,position_cursor:0,position_over:null},L={clients:[],juridical:!1,supplier:!1,conflicted:!1,should_send_email:!1,deleted:!1,name:"",name_doc:"",email:"",address:"",phone:[{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}],ad_campaign_id:1,discount_code:"",discount_goods:0,discount_goods_margin_id:1,discount_materials:0,discount_materials_margin_id:1,discount_services:0,discount_service_margin_id:0,notes:"",tags:[],ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",discount_good_type:!1,discount_materials_type:!1,discount_service_type:!1,tabs:0,phone_titles:["\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439","\u0420\u0430\u0431\u043e\u0447\u0438\u0439","\u0414\u043e\u043c\u0430\u0448\u043d\u0438\u0439"],statusPhoneList:[!1],statusAddTitle:[!1],page:0,filter_name:"",filter_phone:""},M={name:"",address:"",email:"",ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",description:"",phone:"",logo:""},V="M4 10v20c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-20h-22zM10 28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14z M26.5 4h-6.5v-2.5c0-0.825-0.675-1.5-1.5-1.5h-7c-0.825 0-1.5 0.675-1.5 1.5v2.5h-6.5c-0.825 0-1.5 0.675-1.5 1.5v2.5h26v-2.5c0-0.825-0.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z",G="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z",H="M16 2.899l13.409 26.726h-26.819l13.409-26.726zM16 0c-0.69 0-1.379 0.465-1.903 1.395l-13.659 27.222c-1.046 1.86-0.156 3.383 1.978 3.383h27.166c2.134 0 3.025-1.522 1.978-3.383h0l-13.659-27.222c-0.523-0.93-1.213-1.395-1.903-1.395v0z M18 26c0 1.105-0.895 2-2 2s-2-0.895-2-2c0-1.105 0.895-2 2-2s2 0.895 2 2z M16 22c-1.105 0-2-0.895-2-2v-6c0-1.105 0.895-2 2-2s2 0.895 2 2v6c0 1.105-0.895 2-2 2z",q="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM20.586 23.414l-6.586-6.586v-8.828h4v7.172l5.414 5.414-2.829 2.829z",W="M0 2v28h32v-28h-32zM12 20v-6h8v6h-8zM20 22v6h-8v-6h8zM20 6v6h-8v-6h8zM10 6v6h-8v-6h8zM2 14h8v6h-8v-6zM22 14h8v6h-8v-6zM22 12v-6h8v6h-8zM2 22h8v6h-8v-6zM22 28v-6h8v6h-8z",z="M30 8h-8v-2c0-1.1-0.9-2-2-2h-8c-1.1 0-2 0.9-2 2v2h-8c-1.1 0-2 0.9-2 2v18c0 1.1 0.9 2 2 2h28c1.1 0 2-0.9 2-2v-18c0-1.1-0.9-2-2-2zM12 6.004c0.001-0.001 0.002-0.003 0.004-0.004h7.993c0.001 0.001 0.003 0.002 0.004 0.004v1.996h-8v-1.996zM30 16h-4v3c0 0.55-0.45 1-1 1h-2c-0.55 0-1-0.45-1-1v-3h-12v3c0 0.55-0.45 1-1 1h-2c-0.55 0-1-0.45-1-1v-3h-4v-2h28v2z",U="M32 18v-2h-6.040c-0.183-2.271-0.993-4.345-2.24-6.008h5.061l2.189-8.758-1.94-0.485-1.811 7.242h-5.459c-0.028-0.022-0.056-0.043-0.084-0.064 0.21-0.609 0.324-1.263 0.324-1.944 0-3.305-2.686-5.984-6-5.984s-6 2.679-6 5.984c0 0.68 0.114 1.334 0.324 1.944-0.028 0.021-0.056 0.043-0.084 0.064h-5.459l-1.811-7.242-1.94 0.485 2.189 8.758h5.061c-1.246 1.663-2.056 3.736-2.24 6.008h-6.040v2h6.043c0.119 1.427 0.485 2.775 1.051 3.992h-3.875l-2.189 8.757 1.94 0.485 1.811-7.243h3.511c1.834 2.439 4.606 3.992 7.708 3.992s5.874-1.554 7.708-3.992h3.511l1.811 7.243 1.94-0.485-2.189-8.757h-3.875c0.567-1.217 0.932-2.565 1.051-3.992h6.043z",Y="M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z",K="M10 12h4v4h-4zM16 12h4v4h-4zM22 12h4v4h-4zM4 24h4v4h-4zM10 24h4v4h-4zM16 24h4v4h-4zM10 18h4v4h-4zM16 18h4v4h-4zM22 18h4v4h-4zM4 18h4v4h-4zM26 0v2h-4v-2h-14v2h-4v-2h-4v32h30v-32h-4zM28 30h-26v-22h26v22z",J="M11.086 22.086l2.829 2.829 8.914-8.914-8.914-8.914-2.828 2.828 6.086 6.086z",X="M20.914 9.914l-2.829-2.829-8.914 8.914 8.914 8.914 2.828-2.828-6.086-6.086z",Q="M9.914 11.086l-2.829 2.829 8.914 8.914 8.914-8.914-2.828-2.828-6.086 6.086z",Z="M16 0c-8.837 0-16 2.239-16 5v3l12 12v10c0 1.105 1.791 2 4 2s4-0.895 4-2v-10l12-12v-3c0-2.761-7.163-5-16-5zM2.95 4.338c0.748-0.427 1.799-0.832 3.040-1.171 2.748-0.752 6.303-1.167 10.011-1.167s7.262 0.414 10.011 1.167c1.241 0.34 2.292 0.745 3.040 1.171 0.494 0.281 0.76 0.519 0.884 0.662-0.124 0.142-0.391 0.38-0.884 0.662-0.748 0.427-1.8 0.832-3.040 1.171-2.748 0.752-6.303 1.167-10.011 1.167s-7.262-0.414-10.011-1.167c-1.24-0.34-2.292-0.745-3.040-1.171-0.494-0.282-0.76-0.519-0.884-0.662 0.124-0.142 0.391-0.38 0.884-0.662z",$="M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z",ee="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z M21 8l-5 5-5-5-3 3 5 5-5 5 3 3 5-5 5 5 3-3-5-5 5-5z",te={branches:[],current_branch:{},edit:0,name:"",address:"",phone:"",color:"grey",icon:G,orders_type_id:1,orders_type_strategy:"last",orders_prefix:"OTS",documents_prefix:"A",employees:[],deleted:!1,schedule:[{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:1},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:2},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:3},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:4},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:5},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:6},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:7}],showDeleted:!1},ne={equipment_types:[],equipment_type_count:0,equipment_brands:[],equipment_brand_count:0,equipment_subtypes:[],equipment_subtype_count:0,equipment_models:[],equipment_models_count:0,tabs:0,equipment_type:{},equipment_brand:{},equipment_subtype:{},equipment_model:{},title:"",icon:"",url:"",parent_id:0,branches:[],deleted:!1,img:"",direction:0,type:0,edit:0,choose_list:[],page_malfunction:0,selected_malfunction:[],page_packagelist:0,selected_packagelist:[],page_item_payments:0,selected_item_payments:[],filter_type:"",filter_brand:"",filter_subtype:"",filter_model:"",page_type:1,page_brand:1,page_subtype:1,page_model:1,showDeleted:!1,list_for_join:[]},re={cashboxes:[],tabs:0,edit:0,tabs_editor:0,title:"",balance:0,type:0,isGlobal:!1,isVirtual:!1,deleted:!1,permissions:C,employees:{},branch_id:0,showDeleted:!1,permissions_employee:0,current_cashbox:{}},ie=new Date,ce={payments:[],edit:0,sum:0,title:"",cashflow_category:"",description:"",deposit:0,income:"",outcome:"",direction:0,can_print_fiscal:!1,deleted:!1,is_fiscal:!1,created_at:0,custom_created_at:null,tags:[],relation_type:0,relation_id:null,cashbox_id:0,client_id:0,employee_id:0,order_id:0,target_cashbox_id:0,cashbox:{},client:{},employee:{},order:{},filter_created_at:[parseInt(ie.setHours(0,0,0,0)/1e3),parseInt(ie.setHours(23,59,59,999)/1e3)],filter_tags:[],current_type:0,context:{}},ae={edit:0,title:"",type_rule:4,order_type:1,method:0,coefficient:1,count_coeff:[{cost:0,coef:0}],fix_salary:0,deleted:!1,employee_id:0,check_status:0,list_type_rule:[{id:1,title:"\u0417\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:2,title:"\u0417\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:3,title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0443 \u0437\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0437\u0430\u043a\u0430\u0437\u0430"},{id:4,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u044b/\u0443\u0441\u043b\u0443\u0433\u0438"},{id:5,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e \u0437\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"},{id:6,title:"\u0417\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"},{id:7,title:"\u0417\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u0434\u043d\u0438"},{id:8,title:"\u0417\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0435 \u043c\u0435\u0441\u044f\u0446\u044b"}],statuses:[{id:4,title:"\u0413\u043e\u0442\u043e\u0432"},{id:6,title:"\u0417\u0430\u043a\u0440\u044b\u0442"}]},se={edit:0,margin:0,title:"",margin_type:1,deleted:!1,list_type_margin:[{id:2,title:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b"},{id:1,title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}]},oe={edit:0,group_edit:0,group_title:"",group_deleted:!1,title:"",price:0,cost:0,warranty:0,warranty_value:2592e3,code:"",earnings_percent:0,earnings_summ:0,deleted:!1,category_id:0,seted_categiry:null,fields:[{id:1,title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",field:"title"},{id:2,title:"\u0413\u0430\u0440\u0430\u043d\u0438\u0442\u0438\u044f",field:"werranty"},{id:3,title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",field:"cost"},{id:4,title:"\u0426\u0435\u043d\u0430",field:"price"},{id:5,title:"\u041a\u043e\u0434",field:"code"}],chosed_fields:Array(10).fill().map((function(e,t){return t+6})).concat([1,4])},le={edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",percent:!0,discount:0,warranty:!1,warranty_period:0,created_at:0,order_id:0,dict_id:0,warranty_value:2592e3},de=new Date,ue={payrolls:[],edit:0,description:"",income:0,outcome:0,direction:0,deleted:!1,reimburse:!1,created_at:null,custom_created_at:null,relation_type:0,relation_id:0,employee_id:0,order_id:null,setted_employee:0,showDeleted:!1,filter_created_at:[parseInt(de.setHours(0,0,0,0)/1e3),parseInt(de.setHours(23,59,59,999)/1e3)],payment_cashbox_type:0,payment_cashbox_id:0,payment_cashflow_category:0,month_balance:0},me={warehouses:[],warehouses_categories:[],tabs:0,edit:0,title:"",description:"",deleted:!1,isGlobal:!1,img_url:"",permissions:S,employees:{},branch:{},categories:[],img:"",branch_id:0,permissions_employee:0,title_category:"",parent_category_id:0,category_deleted:!1,current_category:{},current_parent_category:{},showDeleted:!1},pe=[{id:1,title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",field:"title"},{id:2,title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",field:"description"},{id:3,title:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430",field:"marking"},{id:4,title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",field:"article"},{id:5,title:"\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434",field:"barcode"},{id:6,title:"\u041a\u043e\u0434",field:"code"},{id:7,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",field:"warehouse_category"},{id:8,title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f",field:"doc_url"}],he={parts:[],count_parts:0,edit:0,title:"",description:"",marking:"",article:"",barcode:"",code:"",image_url:"",doc_url:"",specifications:[],deleted:!1,warehouse_category_id:0,warehouse_category:{},img:"",doc:"",page:0,showDeleted:!1,choosed_headers:JSON.parse(localStorage.getItem("choosed_headers"))||pe.map((function(e){return e.id}))},be={edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",deleted:!1,warranty_period:0,created_at:0,order_id:0,warranty_value:2592e3,percent:!0,discount:0},je={templates:[],edit:0,title:"",template:"",deleted:!1,showDeleted:!1},_e={events:[],tabs:0,edit:0,event:"",target_audience:0,notification_type:1,statuses:[],notification_template_id:0,template_title:"",template:"",deleted:!1,showDeleted:!1,filter_target_audience:0},fe=Object(p.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DATA_STATE":var n=["login_status","user"];return Object.keys(t.data).forEach((function(e){n.includes(e)&&sessionStorage.setItem(e,JSON.stringify(t.data[e]))})),Object(j.a)({},Object.assign(e,t.data));case"SHOW_ALERT":var r=e.alerts;return r.length>=3&&r.shift(),Object(j.a)(Object(j.a)({},e),{},{alerts:r.concat([t.alert])});case"CLOSE_ALERT":return Object(j.a)(Object(j.a)({},e),{},{alerts:e.alerts.filter((function(e){return e.id!==t.id}))});case"ADD_MENU_ROWS":return Object(j.a)(Object(j.a)({},e),{},{menuRows:t.rows});case"ADD_STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"ADD_STATUS_GROUP":return Object(j.a)(Object(j.a)({},e),{},{status_group:t.status_group});case"ADD_EMPLOYEES":return Object(j.a)(Object(j.a)({},e),{},{employees:t.employees});case"ADD_USER":return Object(j.a)(Object(j.a)({},e),{},{user:t.user,login_status:!0});case"ADD_BADGES":return Object(j.a)(Object(j.a)({},e),{},{badges:t.badges});case"ADD_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{equipment:t.equipment});case"ADD_SETTING_MENU":return Object(j.a)(Object(j.a)({},e),{},{settingMenu:t.rows.sort((function(e,t){return e.id-t.id}))});case"ADD_ROLES":return Object(j.a)(Object(j.a)({},e),{},{roles:t.roles});case"ADD_AD_CAMPAIGN":return Object(j.a)(Object(j.a)({},e),{},{ad_campaign:t.ad_campaign});case"ADD_DATA":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.data));default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_VISIBLE_STATE":return Object(j.a)({},Object.assign(e,t.data));case"INIT_STATUS_MENU_VISIBLE":return Object(j.a)(Object(j.a)({},e),{},{statusMenuVisible:t.data});case"CANGE_STATUS_MENU_VISIBLE":return Object(j.a)(Object(j.a)({},e),{},{statusMenuVisible:Object(j.a)(Object(j.a)({},e.statusMenuVisible),{},Object(b.a)({},t.id_order,!e.statusMenuVisible[t.id_order]))});case"EDIT_ROLE":return Object(j.a)(Object(j.a)({},e),{},{statusCreateNewRole:!e.statusCreateNewRole});case"CHANGE_EMPLOYEE_EDITOR_ROLE_OPTIONS":return Object(j.a)(Object(j.a)({},e),{},{employeeEditorRoleOptions:!e.employeeEditorRoleOptions});case"SET_ROLE_EMPLOYEE_EDITOR":return Object(j.a)(Object(j.a)({},e),{},{employeeEditorRoleOptions:!e.employeeEditorRoleOptions,inputEmployeeRoleChecked:!0});case"CHANGE_STATUS_AD_CAMPAIGN_CLIENT":case"SET_AD_CANMPAIGN_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{statusAdCampaignClient:!e.statusAdCampaignClient});case"SET_VISIBLE_FLAG":return"change"===t.value?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,!e[t.field])):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"SET_VISIBLE_LIST_FLAG":var n=e[t.field];return"change"===t.value?(n[t.idx]=!n[t.idx],Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n))):(n[t.idx]=t.value,Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n)));case"DELETE_FLAG":var r=e[t.field];return r.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,r));case"ADD_FLAG":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat([!0])));case"EDIT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{statusCreateNewClient:!0});case"CHANGE_EMPLOYEE_EDITOR_FORM":return"email"===t.field?Object(j.a)(Object(j.a)({},e),{},{errorSameMail:!1}):"login"===t.field?Object(j.a)(Object(j.a)({},e),{},{errorSameLogin:!1}):e;case"ADD_ANOTHER_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{inputMalfunctionChecked:e.inputMalfunctionChecked.concat([!0]),checkedOrderKindofGood:e.checkedOrderKindofGood.concat([!0]),checkedOrderBrand:e.checkedOrderBrand.concat([!0]),checkedOrderSubtype:e.checkedOrderSubtype.concat([!0])});case"DELETE_DEVICE":var i=e.inputMalfunctionChecked;i.splice(t.idx,1);var c=e.checkedOrderKindofGood;c.splice(t.idx,1);var a=e.checkedOrderBrand;a.splice(t.idx,1);var s=e.checkedOrderSubtype;return s.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{inputMalfunctionChecked:i,checkedOrderKindofGood:c,checkedOrderBrand:a,checkedOrderSubtype:s});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_FILTER_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_FILTER_STATE":var n=["sort","field_sort","page","engineer_id","overdue","status_id","status_overdue","urgent","order_type_id","manager_id","created_at","kindof_good","brand","subtype","client_id","active_badge","active_filter"];return Object.keys(t.data).forEach((function(e){n.includes(e)&&localStorage.setItem(e,JSON.stringify(t.data[e]))})),Object(j.a)({},Object.assign(e,t.data));case"SELECTED_FILTER":var r;return r=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(r)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,r));case"RESET_FILTER":return Object(j.a)(Object(j.a)({},e),{},{page:0,engineer_id:null,overdue:null,status_id:null,status_overdue:null,urgent:null,order_type_id:null,manager_id:null,created_at:null,kindof_good:null,brand:null,subtype:null,client_id:null,active_badge:0,active_filter:0});case"RESET_TEMP_FILTER":return Object(j.a)(Object(j.a)({},e),{},{temp_statuses:[],temp_order_types:[],temp_managers:[],temp_engineers:[],temp_created_at:[0,0],temp_kindof_good_id:null,temp_brand:null,temp_subtype:null,temp_client:{}});case"RESET_DATA_FILTER":return Object(j.a)(Object(j.a)({},e),{},{title:"",general:!1});case"CHANGE_NAME_CLIENTFILTER":return Object(j.a)(Object(j.a)({},e),{},{clientFilter:Object(j.a)(Object(j.a)({},e.clientFilter),{},{name:t.word,phone:""})});case"CHANGE_PHONE_CLIENTFILTER":return Object(j.a)(Object(j.a)({},e),{},{clientFilter:Object(j.a)(Object(j.a)({},e.clientFilter),{},{phone:t.word.replace(/[^0-9]/g,""),name:""})});default:return e}},role:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TITLE_CREATE_ROLE":return Object(j.a)(Object(j.a)({},e),{},{title_create:t.title});case"CHANGE_PERMISSION":return t.value.every((function(t){return e.list_permissions.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{list_permissions:e.list_permissions.filter((function(e){return!t.value.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{list_permissions:e.list_permissions.concat(t.value)});case"CHANGE_EARNINGS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{earnings_visibility:t.bool});case"CHANGE_LEADS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{leads_visibility:t.bool});case"CHANGE_ORDERS_VISIBILITY":return Object(j.a)(Object(j.a)({},e),{},{orders_visibility:t.bool});case"CHANGE_VISIBLE_STATUSES":return t.id.every((function(t){return e.visible_statuses.includes(t)}))?(console.log("true"),Object(j.a)(Object(j.a)({},e),{},{visible_statuses:e.visible_statuses.filter((function(e){return!t.id.includes(e)}))})):Object(j.a)(Object(j.a)({},e),{},{visible_statuses:e.visible_statuses.concat(t.id.filter((function(t){return!e.visible_statuses.includes(t)})))});case"CHANGE_SETTABLE_STATUSES":return t.id.every((function(t){return e.settable_statuses.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{settable_statuses:e.settable_statuses.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{settable_statuses:e.settable_statuses.concat(t.id.filter((function(t){return!e.settable_statuses.includes(t)})))});case"CHANGE_SETTABLE_MARGIN":return t.id.every((function(t){return e.settable_discount_margin.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{settable_discount_margin:e.settable_discount_margin.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{settable_discount_margin:e.settable_discount_margin.concat(t.id.filter((function(t){return!e.settable_discount_margin.includes(t)})))});case"EDIT_ROLE":return Object(j.a)(Object(j.a)({},e),{},{title_create:t.role.title,edit:t.role.id,earnings_visibility:t.role.earnings_visibility,leads_visibility:t.role.leads_visibility,orders_visibility:t.role.orders_visibility,list_permissions:t.role.permissions,visible_statuses:t.role.visible_statuses,settable_statuses:t.role.settable_statuses,settable_discount_margin:t.role.settable_discount_margin});case"SET_VISIBLE_FLAG":return"statusCreateNewRole"===t.field?Object(j.a)(Object(j.a)({},e),{},{title_create:"",edit:0,earnings_visibility:!1,leads_visibility:!1,orders_visibility:!1,list_permissions:[],visible_statuses:[],settable_statuses:[],settable_discount_margin:[]}):e;default:return e}},employee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_EMPLOYEE_STATE":return Object(j.a)({},Object.assign(e,t.data));case"SET_ROLE_EMPLOYEE_EDITOR":return Object(j.a)(Object(j.a)({},e),{},{role_id:t.role});case"CHANGE_SHOW_DELETED":return Object(j.a)(Object(j.a)({},e),{},{showDeleted:!e.showDeleted});case"EDIT_EMPLOYEE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.employee.id,first_name:t.employee.first_name||"",last_name:t.employee.last_name||"",email:t.employee.email||"",notes:t.employee.notes||"",phone:t.employee.phone||"",login:t.employee.login||"",role_id:t.employee.role.id,role_title:t.employee.role.title||"",permissions:t.employee.permissions||[],inn:t.employee.inn||"",doc_name:t.employee.doc_name||"",post:t.employee.post||"",deleted:t.employee.deleted,avatar:t.employee.avatar});case"RESET_EMPLOYEE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,first_name:"",last_name:"",email:"",notes:"",phone:"",login:"",password:"",role_title:"",role_id:0,permissions:[],inn:"",doc_name:"",post:"",deleted:!1,avatar:"",img:""});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ORDER_STATE":return Object(j.a)({},Object.assign(e,t.data));case"SELECTED_ORDER":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));case"CHANGE_ORDER_FORM":var r=e.equipments;return r[t.idx][t.field]=t.value,Object(j.a)({},Object.assign(e,{equipments:r}));case"CHANGE_ORDER_FIELD":var i=e.tableFields,c=i.findIndex((function(e){return e.id===t.id}));return i[c][t.field]=t.value,localStorage.setItem("tableFields",JSON.stringify(i)),Object(j.a)(Object(j.a)({},e),{},{tableFields:i});case"REORDER_ORDER_FIELD":var a=e.tableFields,s=a.findIndex((function(e){return e.id===t.id}));return a[s].order=t.order+.5,a=(a=a.sort((function(e,t){return e.order-t.order}))).map((function(e,t){return e.order=t,e})),localStorage.setItem("tableFields",JSON.stringify(a)),Object(j.a)(Object(j.a)({},e),{},{tableFields:a});case"ADD_ANOTHER_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{equipments:e.equipments.concat([{kindof_good:{},brand:{},subtype:{},model:{},malfunction:"",packagelist:"",appearance:"",urgent:!1}])});case"DELETE_DEVICE":var o=e.equipments;return o.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{equipments:o});case"CHANGE_ORDER_FORM_S":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"RESET_ORDER":return Object(j.a)(Object(j.a)({},e),{},{events:[],edit:0,tabs:1,created_at:0,done_at:0,closed_at:0,assigned_at:0,duration:0,estimated_done_at:parseInt(Date.now()/1e3)+345600,scheduled_for:0,warranty_date:0,status_deadline:0,ad_campaign_id:1,branch_id:0,status_id:0,client:{},order_type_id:1,closed_by_id:0,created_by_id:0,manager_id:0,engineer_id:0,kindof_good:{},brand:{},subtype:{},model:{},operations:[],parts:[],attachments:[],payments:[],id_label:"",prefix:"",serial:"",malfunction:"",packagelist:"",appearance:"",engineer_notes:"",manager_notes:"",resume:"",cell:"",estimated_cost:0,missed_payments:0,discount_sum:0,payed:0,price:0,remaining:0,remaining_status:0,remaining_warranty:0,overdue:!1,status_overdue:!1,urgent:!1,warranty_measures:!1,equipments:[{kindof_good:{},brand:{},subtype:{},model:{},malfunction:"",packagelist:"",appearance:"",urgent:!1}]});case"EDIT_ORDER":return Object(j.a)(Object(j.a)({},e),{},{edit:t.order.id,created_at:t.order.created_at,done_at:t.order.done_at,closed_at:t.order.closed_at,assigned_at:t.order.assigned_at,duration:t.order.duration,estimated_done_at:t.order.estimated_done_at,scheduled_for:t.order.scheduled_for,warranty_date:t.order.warranty_date,status_deadline:t.order.status_deadline,ad_campaign_id:t.order.ad_campaign.id,branch_id:t.order.branch.id,status:t.order.status,client:t.order.client,order_type_id:t.order.order_type.id,closed_by_id:t.order.closed_by_id,created_by_id:t.order.created_by_id,manager_id:t.order.manager_id,engineer_id:t.order.engineer_id,kindof_good:t.order.kindof_good,brand:t.order.brand,subtype:t.order.subtype,model:t.order.model,operations:t.order.operations,parts:t.order.parts,attachments:t.order.attachments,payments:t.order.payments,id_label:t.order.id_label,prefix:t.order.prefix,serial:t.order.serial,malfunction:t.order.malfunction,packagelist:t.order.packagelist,appearance:t.order.appearance,engineer_notes:t.order.engineer_notes||"",manager_notes:t.order.manager_notes||"",resume:t.order.resume||"",cell:t.order.cell||"",estimated_cost:t.order.estimated_cost,missed_payments:t.order.missed_payments,discount_sum:t.order.discount_sum,payed:t.order.payed,price:t.order.price,remaining:t.order.remaining,remaining_status:t.order.remaining_status,remaining_warranty:t.order.remaining_warranty,overdue:t.order.overdue,status_overdue:t.order.status_overdue,urgent:t.order.urgent,warranty_measures:t.order.warranty_measures});default:return e}},client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CLIENT_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_CLIENT_STATE":return Object(j.a)({},Object.assign(e,t.data));case"SET_CLIENT_CHECKBOX":return"change"===t.value?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,!e[t.field])):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_CLIENT_EDITOR_PHONE":var n=e.phone;return n[t.idx].number=t.value,Object(j.a)(Object(j.a)({},e),{},{phone:n});case"ADD_PHONE_COUNTER":return Object(j.a)(Object(j.a)({},e),{},{phone:e.phone.concat([{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}]),statusPhoneList:e.statusPhoneList.concat([!1])});case"DELETE_COUNT_NUMBER":var r=e.phone;r.splice(t.idx,1);var i=e.statusPhoneList;return i.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{phone:r,statusPhoneList:i});case"SET_PHONE_NOTIFY":var c=e.phone;return c[t.idx].notify=!c[t.idx].notify,Object(j.a)(Object(j.a)({},e),{},{phone:c});case"SET_PHONE_TITLE":var a=e.phone;a[t.idx].title=t.title;var s=e.statusPhoneList;return s[t.idx]=!s[t.idx],Object(j.a)(Object(j.a)({},e),{},{phone:a,statusPhoneList:s});case"CHANGE_STATUS_PHONE_LIST":var o=e.statusPhoneList;o[t.idx]=!o[t.idx];var l=e.statusAddTitle;return l[t.idx]=!1,Object(j.a)(Object(j.a)({},e),{},{statusPhoneList:o,statusAddTitle:l});case"CHANGE_STATUS_ADD_TITLE":var d=e.statusAddTitle;return d[t.idx]=!d[t.idx],Object(j.a)(Object(j.a)({},e),{},{statusAddTitle:d});case"SET_AD_CANMPAIGN_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{ad_campaign_id:t.id});case"ADD_CLIENT_TAG":return Object(j.a)(Object(j.a)({},e),{},{tags:e.tags.concat([t.tag])});case"DELETE_CLIENT_TAG":var u=e.tags;return u.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{tags:u});case"RESET_DATA_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:!1,supplier:!1,conflicted:!1,should_send_email:!1,deleted:!1,name:"",name_doc:"",email:"",address:"",phone:[{title:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439",number:"",notify:!1}],ad_campaign_id:1,discount_code:"",discount_goods:0,discount_goods_margin_id:1,discount_materials:0,discount_materials_margin_id:1,discount_services:0,discount_service_margin_id:0,notes:"",tags:[],ogrn:"",inn:"",kpp:"",juridical_address:"",director:"",bank_name:"",settlement_account:"",corr_account:"",bic:"",discount_good_type:!1,discount_materials_type:!1,discount_service_type:!1,edit:0,tabs:0,statusPhoneList:[!1],statusAddTitle:[!1]});case"CHANGE_CLIENT_TABS":return Object(j.a)(Object(j.a)({},e),{},{tabs:t.tab});case"EDIT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:t.client.juridical,supplier:t.client.supplier,conflicted:t.client.conflicted,should_send_email:t.client.should_send_email,deleted:t.client.deleted,name:t.client.name,name_doc:t.client.name_doc,email:t.client.email,address:t.client.address,phone:t.client.phone,ad_campaign_id:t.client.ad_campaign_id,discount_code:t.client.discount_code,discount_goods:t.client.discount_goods,discount_goods_margin_id:t.client.discount_goods_margin_id,discount_materials:t.client.discount_materials,discount_materials_margin_id:t.client.discount_materials_margin_id,discount_services:t.client.discount_services,discount_service_margin_id:t.client.discount_service_margin_id,notes:t.client.notes,tags:t.client.tags,ogrn:t.client.ogrn,inn:t.client.inn,kpp:t.client.kpp,juridical_address:t.client.juridical_address,director:t.client.director,bank_name:t.client.bank_name,settlement_account:t.client.settlement_account,corr_account:t.client.corr_account,bic:t.client.bic,discount_good_type:t.client.discount_good_type,discount_materials_type:t.client.discount_materials_type,discount_service_type:t.client.discount_service_type,edit:t.client.id});case"EDIT_CURRENT_CLIENT":return Object(j.a)(Object(j.a)({},e),{},{juridical:t.client.juridical,supplier:t.client.supplier,conflicted:t.client.conflicted,should_send_email:t.client.should_send_email,deleted:t.client.deleted,name:t.client.name,name_doc:t.client.name_doc,email:t.client.email,address:t.client.address,phone:t.client.phone,ad_campaign_id:t.client.ad_campaign_id,discount_code:t.client.discount_code,discount_goods:t.client.discount_goods,discount_goods_margin_id:t.client.discount_goods_margin_id,discount_materials:t.client.discount_materials,discount_materials_margin_id:t.client.discount_materials_margin_id,discount_services:t.client.discount_services,discount_service_margin_id:t.client.discount_service_margin_id,notes:t.client.notes,tags:t.client.tags,ogrn:t.client.ogrn,inn:t.client.inn,kpp:t.client.kpp,juridical_address:t.client.juridical_address,director:t.client.director,bank_name:t.client.bank_name,settlement_account:t.client.settlement_account,corr_account:t.client.corr_account,bic:t.client.bic,discount_good_type:t.client.discount_good_type,discount_materials_type:t.client.discount_materials_type,discount_service_type:t.client.discount_service_type,edit:t.client.id,tabs:1});default:return e}},maindata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MAINDATA_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"ADD_GENERALLY_INFO":return Object(j.a)(Object(j.a)({},e),{},{name:t.data.name,address:t.data.address,email:t.data.email,ogrn:t.data.ogrn,inn:t.data.inn,kpp:t.data.kpp,juridical_address:t.data.juridical_address,director:t.data.director,bank_name:t.data.bank_name,settlement_account:t.data.settlement_account,corr_account:t.data.corr_account,bic:t.data.bic,description:t.data.description,phone:t.data.phone,logo:t.data.logo});default:return e}},branch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BRANCH_STATE":return Object(j.a)({},Object.assign(e,t.data));case"CHANGE_SCHEDULE":var n=e.schedule;return n[t.idx][t.field]=t.value,Object(j.a)(Object(j.a)({},e),{},{schedule:n});case"SET_BRANCH_EMPLOYEE":return t.id.every((function(t){return e.employees.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{employees:e.employees.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{employees:e.employees.concat(t.id.filter((function(t){return!e.employees.includes(t)})))});case"RESET_BRANCH":return Object(j.a)(Object(j.a)({},e),{},{name:"",address:"",phone:"",color:"grey",icon:G,orders_type_id:1,orders_type_strategy:"last",orders_prefix:"OTS",documents_prefix:"A",employees:[],deleted:!1,schedule:[{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:1},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:2},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:3},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:4},{start_time:"9:00",end_time:"18:00",work_day:!0,week_day:5},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:6},{start_time:"9:00",end_time:"18:00",work_day:!1,week_day:7}],edit:0});case"EDIT_BRANCH":return Object(j.a)(Object(j.a)({},e),{},{name:t.branch.name,address:t.branch.address,phone:t.branch.phone,color:t.branch.color,icon:t.branch.icon,orders_type_id:t.branch.orders_type_id,orders_type_strategy:t.branch.orders_type_strategy,orders_prefix:t.branch.orders_prefix,documents_prefix:t.branch.documents_prefix,employees:t.branch.employees,deleted:t.branch.deleted,schedule:t.branch.schedule,edit:t.branch.id});default:return e}},book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BOOK_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_BOOK_STATE":return Object(j.a)({},Object.assign(e,t.data));case"CHOOSE_EQUIPMENT_BRANCHES":return t.id.every((function(t){return e.branches.includes(t)}))?Object(j.a)(Object(j.a)({},e),{},{branches:e.branches.filter((function(e){return!t.id.includes(e)}))}):Object(j.a)(Object(j.a)({},e),{},{branches:e.branches.concat(t.id.filter((function(t){return!e.branches.includes(t)})))});case"EDIT_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{title:t.equipment.title,icon:t.equipment.icon,url:t.equipment.url,parent_id:t.equipment.parent_id,branches:t.equipment.branches?t.equipment.branches:[],edit:t.equipment.id,deleted:t.equipment.deleted});case"RESET_BOOK_EQUIPMENT":return Object(j.a)(Object(j.a)({},e),{},{title:"",icon:"",url:"",parent_id:0,branches:[],deleted:!1,img:"",edit:0,page_malfunction:0,selected_malfunction:[],page_packagelist:0,selected_packagelist:[],page_item_payments:0,selected_item_payments:[],filter_type:"",filter_brand:"",filter_subtype:"",filter_model:"",page_type:1,page_brand:1,page_subtype:1,page_model:1,showDeleted:!1,list_for_join:[]});case"CHOOSE_BOOK_SELECTED":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));default:return e}},cashbox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CASHBOX_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_CASHBOX_STATE":var n=[];return Object.keys(t.data).forEach((function(e){n.includes(e)&&localStorage.setItem(e,JSON.stringify(t.data[e]))})),Object(j.a)({},Object.assign(e,t.data));case"CHOOSE_CASHBOX_SELECTED":return t.id.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.id.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.id.filter((function(n){return!e[t.field].includes(n)})))));case"RESET_CASHBOX":return Object(j.a)(Object(j.a)({},e),{},{title:"",balance:0,type:0,isGlobal:!1,isVirtual:!1,deleted:!1,permissions:C,employees:[],branch_id:0,permissions_employee:0});case"CHANGE_CASHBOX_PERMISSION":var r=e.employees;return"permissions"===t.field?r[e.permissions_employee].permissions.includes(t.value)?r[e.permissions_employee].permissions=r[e.permissions_employee].permissions.filter((function(e){return e!==t.value})):r[e.permissions_employee].permissions=r[e.permissions_employee].permissions.concat([t.value]):r[e.permissions_employee][[t.field]]=t.value,Object(j.a)(Object(j.a)({},e),{},{employees:r});case"EDIT_CASHBOX":return Object(j.a)(Object(j.a)({},e),{},{edit:t.cashbox.id,title:t.cashbox.title,balance:t.cashbox.balance,type:t.cashbox.type,isGlobal:t.cashbox.isGlobal,isVirtual:t.cashbox.isVirtual,deleted:t.cashbox.deleted,permissions:t.cashbox.permissions,employees:t.cashbox.employees,branch_id:t.cashbox.branch_id,permissions_employee:t.cashbox.permissions_employee});default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAYMENT_STATE":return Object(j.a)({},Object.assign(e,t.data));case"CHOOSE_PAYMENT_SELECTED":return t.id.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.id.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.id.filter((function(n){return!e[t.field].includes(n)})))));case"ADD_PAYMENT_TAG":return Object(j.a)(Object(j.a)({},e),{},{tags:e.tags.concat([t.tag])});case"DELETE_PAYMENT_TAG":var n=e.tags;return n.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{tags:n});case"RESET_PAYMENTS":return Object(j.a)(Object(j.a)({},e),{},{edit:0,sum:0,title:"",cashflow_category:"",description:"",deposit:0,income:"",outcome:"",direction:0,can_print_fiscal:!0,deleted:!1,is_fiscal:!1,created_at:0,custom_created_at:0,tags:[],relation_type:0,relation_id:null,cashbox_id:0,client_id:0,employee_id:0,order_id:0,target_cashbox_id:0,context:{}});case"SET_PAYMENT":return Object(j.a)(Object(j.a)({},e),{},{edit:t.payment.id,cashflow_category:t.payment.cashflow_category,description:t.payment.description,deposit:t.payment.deposit,income:t.payment.income,outcome:t.payment.outcome,direction:t.payment.direction,can_print_fiscal:t.payment.can_print_fiscal,deleted:t.payment.deleted,is_fiscal:t.payment.is_fiscal,created_at:t.payment.created_at,custom_created_at:t.payment.custom_created_at,tags:t.payment.tags,relation_type:t.payment.relation_type,relation_id:t.payment.relation_id,cashbox:t.payment.cashbox,client:t.payment.client,employee:t.payment.employee,order:t.payment.order,target_cashbox_id:t.payment.target_cashbox_id});default:return e}},salaryRule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SALARY_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"CHANGE_SALARY_COEF_FORM":var n=e.count_coeff;return n[t.idx][t.field]=parseInt(t.value),Object(j.a)(Object(j.a)({},e),{},{count_coeff:n});case"ADD_SALARY_COUNT_COEF":return Object(j.a)(Object(j.a)({},e),{},{count_coeff:e.count_coeff.concat([{cost:0,coef:0}])});case"DELETE_SALARY_COUNT_COEF":return Object(j.a)(Object(j.a)({},e),{},{count_coeff:e.count_coeff.filter((function(e,n){return n!==t.idx}))});case"EDIT_SALARY":return Object(j.a)(Object(j.a)({},e),{},{edit:t.salary_rule.id,description:t.salary_rule.description,type_rule:t.salary_rule.type_rule,order_type:t.salary_rule.order_type,method:t.salary_rule.method,coefficient:t.salary_rule.coefficient,count_coeff:t.salary_rule.count_coeff,fix_salary:t.salary_rule.fix_salary,deleted:t.salary_rule.deleted,employee_id:t.salary_rule.employee_id,check_status:t.salary_rule.check_status});case"RESET_SALARY_RULE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",type_rule:4,order_type:1,method:0,coefficient:0,count_coeff:[{cost:0,coef:0}],fix_salary:0,deleted:!1,employee_id:0,check_status:0});default:return e}},price:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PRICE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_PRICE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.price.id,margin:t.price.margin,title:t.price.title,margin_type:t.price.margin_type,deleted:t.price.deleted});case"RESET_PRICE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,margin:0,title:"",margin_type:0,deleted:!1});default:return e}},dictService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DICT_SERVICE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_GRUOP_DICT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{group_edit:t.group.id,group_title:t.group.title,group_deleted:t.group.deleted});case"EDIT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.service.id,title:t.service.title,price:t.service.price,cost:t.service.cost,warranty:t.service.warranty,code:t.service.code,earnings_percent:t.service.earnings_percent,earnings_summ:t.service.earnings_summ,deleted:t.service.deleted,category_id:t.service.category_id});case"RESET_GROPE_DICT_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{group_edit:0,group_title:"",group_deleted:!1});case"RESET_SERVICE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",price:0,cost:0,warranty:0,warranty_value:2592e3,code:"",earnings_percent:0,earnings_summ:0,deleted:!1,category_id:0});case"SELECTED_SERVICE":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},operation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_OPERATION_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_OPERATION":return Object(j.a)(Object(j.a)({},e),{},{edit:t.operation.id,amount:t.operation.amount,cost:t.operation.cost,discount_value:t.operation.discount_value,engineer_id:t.operation.engineer_id,price:t.operation.price,total:t.operation.total,title:t.operation.title,comment:t.operation.comment,percent:t.operation.percent,discount:t.operation.discount,warranty:t.operation.warranty,warranty_period:t.operation.warranty_period,created_at:t.operation.created_at,order_id:t.operation.order_id,dict_id:t.operation.dict_id});case"RESET_OPERATION":return Object(j.a)(Object(j.a)({},e),{},{edit:0,amount:1,cost:0,discount_value:0,price:0,total:0,title:"",comment:"",percent:!0,discount:0,warranty:!1,warranty_period:0,created_at:0,order_id:0,dict_id:0});case"SELECTED_OPERATION":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},payroll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAYROLL_STATE":return Object(j.a)({},Object.assign(e,t.data));case"EDIT_PAYROLL":return Object(j.a)(Object(j.a)({},e),{},{edit:t.payroll.id,description:t.payroll.description,income:t.payroll.income,outcome:t.payroll.outcome,direction:t.payroll.direction,deleted:t.payroll.deleted,reimburse:t.payroll.reimburse,created_at:t.payroll.created_at,custom_created_at:t.payroll.custom_created_at,relation_type:t.payroll.relation_type,relation_id:t.payroll.relation_id,employee_id:t.payroll.employee_id,order_id:t.payroll.order_id});case"RESET_PAYROLL":return Object(j.a)(Object(j.a)({},e),{},{edit:0,description:"",income:0,outcome:0,direction:0,deleted:!1,reimburse:!1,created_at:null,custom_created_at:null,relation_type:0,relation_id:0,employee_id:0,order_id:null,payment_cashbox_type:0,payment_cashbox_id:0,payment_cashflow_category:0});case"SELECTED_PAYROLL":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));default:return e}},warehouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_WAREHOUSE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_WAREHOUSE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.warehouse.id,title:t.warehouse.title,description:t.warehouse.description,deleted:t.warehouse.deleted,isGlobal:t.warehouse.isGlobal,permissions:t.warehouse.permissions,employees:t.warehouse.employees,branch:t.warehouse.branch,categories:t.warehouse.categories,branch_id:t.warehouse.branch.id});case"EDIT_WAREHOUSE_CATEGORY":return Object(j.a)(Object(j.a)({},e),{},{edit:t.warehouse_category.id,title_category:t.warehouse_category.title,parent_category_id:t.warehouse_category.parent_category_id,category_deleted:t.warehouse_category.deleted});case"RESET_WAREHOUSE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",description:"",deleted:!1,isGlobal:!1,permissions:S,employees:{},branch:{},categories:[],branch_id:0,permissions_employee:0,title_category:"",parent_category_id:0,warehouse_id:0,category_deleted:!1});case"SELECTED_WAREHOUSE":return t.value.every((function(n){return e[t.field].includes(n)}))?Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].filter((function(e){return!t.value.includes(e)})))):Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)})))));case"CHANGE_WAREHOUSE_PERMISSION":var n=e.employees;return"permissions"===t.field?n[e.permissions_employee].permissions.includes(t.value)?n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.filter((function(e){return e!==t.value})):n[e.permissions_employee].permissions=n[e.permissions_employee].permissions.concat([t.value]):n[e.permissions_employee][[t.field]]=t.value,Object(j.a)(Object(j.a)({},e),{},{employees:n});default:return e}},part:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PART_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:t.part.id,title:t.part.title,description:t.part.description,marking:t.part.marking,article:t.part.article,barcode:t.part.barcode,code:t.part.code,image_url:t.part.image_url,doc_url:t.part.doc_url,specifications:t.part.specifications,deleted:t.part.deleted,warehouse_category:t.part.warehouse_category});case"RESET_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",description:"",marking:"",article:"",barcode:"",code:"",image_url:"",doc_url:"",specifications:[],deleted:!1,img:"",doc:""});case"SELECTED_PART":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));case"CHANGE_PART_PROPERTY":var r=e.specifications;return r[t.idx][t.field]=t.value,Object(j.a)(Object(j.a)({},e),{},{specifications:r});case"ADD_PART_PROPERTY":return Object(j.a)(Object(j.a)({},e),{},{specifications:e.specifications.concat([{title:"",value:""}])});case"DELETE_PART_PROPERTY":var i=e.specifications;return i.splice(t.idx,1),Object(j.a)(Object(j.a)({},e),{},{specifications:e.specifications});default:return e}},orderPart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ORDER_PART_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_ORDER_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:t.order_part.id,amount:t.order_part.amount,cost:t.order_part.cost,discount_value:t.order_part.discount_value,engineer_id:t.order_part.engineer_id,price:t.order_part.price,total:t.order_part.total,title:t.order_part.title,comment:t.order_part.comment,deleted:t.order_part.deleted,warranty_period:t.order_part.warranty_period,created_at:t.order_part.created_at,order_id:t.order_part.order_id});case"RESET_ORDER_PART":return Object(j.a)(Object(j.a)({},e),{},{edit:0,amount:1,cost:0,discount_value:0,engineer_id:0,price:0,total:0,title:"",comment:"",deleted:!1,warranty_period:0,created_at:0,order_id:0,warranty_value:2592e3,percent:!0,discount:0});case"SELECTED_ORDER_PART":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}},notTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NOT_TEMPLATE_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_NOT_TEMPLATE":return Object(j.a)(Object(j.a)({},e),{},{edit:t.template.id,title:t.template.title,template:t.template.template,deleted:t.template.deleted});case"RESET_NOT_TEMPLATE":return Object(j.a)(Object(j.a)({},e),{},{edit:0,title:"",template:"",deleted:!1});default:return e}},notEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NOT_EVENT_FORM":return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,t.value));case"EDIT_NOT_EVENT":return Object(j.a)(Object(j.a)({},e),{},{edit:t.event.id,event:t.event.event,target_audience:t.event.target_audience,notification_type:t.event.notification_type,notification_template_id:t.event.template_id,statuses:t.event.statuses,deleted:t.event.deleted});case"RESET_NOT_EVENT":return Object(j.a)(Object(j.a)({},e),{},{edit:0,event:"",target_audience:0,notification_type:1,notification_template_id:0,statuses:[],template_title:"",template:"",deleted:!1});case"SELECTED_NOT_EVENT":var n;return n=t.value.every((function(n){return e[t.field].includes(n)}))?e[t.field].filter((function(e){return!t.value.includes(e)})):e[t.field].concat(t.value.filter((function(n){return!e[t.field].includes(n)}))),t.saveToApp&&localStorage.setItem(t.field,JSON.stringify(n)),Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},t.field,n));default:return e}}}),ve=Object(p.d)(fe,Object(p.c)(Object(p.a)(h.a)));function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ve.getState();return{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t.data.csrfToken},credentials:t.data.credentials,body:JSON.stringify(e)}}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.warn(n),"Unexpected token < in JSON at position 0"===t.message&&(sessionStorage.clear(),e({type:"CHANGE_VISIBLE_STATE",data:{statusRefreshPage:!0,statusOrderLoader:!1}})),Pe(e,"alert-danger",n)}function xe(e){return{type:"CANGE_STATUS_MENU_VISIBLE",id_order:e}}function ye(e){return{type:"CHANGE_PERMISSION",value:e}}function Ee(e,t){return{type:"SET_CLIENT_CHECKBOX",field:e,value:t}}function Ne(e,t){return{type:"SET_VISIBLE_FLAG",field:e,value:t}}function we(e){return{type:"CHANGE_VISIBLE_STATE",data:e}}function ke(e,t,n){return{type:"SET_VISIBLE_LIST_FLAG",field:e,idx:t,value:n}}function Ce(e,t){return{type:"CHANGE_ORDER_FORM_S",field:t,value:e}}function Se(e){return{type:"EDIT_CURRENT_CLIENT",client:e}}function Te(e){return{type:"SET_PAYMENT",payment:e}}function Fe(e,t){return{type:"CHANGE_PRICE_FORM",field:t,value:e}}function Ae(e,t){return{type:"CHANGE_DICT_SERVICE_FORM",field:t,value:e}}function Pe(e,t,n){var r={id:parseInt(Date.now()/1e3),type:t,text:n};e({type:"SHOW_ALERT",alert:r}),setTimeout((function(){e({type:"CLOSE_ALERT",id:r.id})}),3e3)}function De(e){var t=ve.getState();return function(n){fetch(t.data.url_server+"/get_clients",Oe({id:e})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"EDIT_CLIENT",client:e.data[0]}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Re(e){var t=ve.getState(),n=Oe({id:e});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/get_orders",n).then((function(e){return e.json()})).then((function(e){e.success?r({type:"EDIT_ORDER",order:e.data[0]}):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Ie(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_equipment_type",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_EQUIPMENT",equipment:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0438\u0437\u0434\u0435\u043b\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Be(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_discount_margin",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"discount_margin",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Le(){var e=ve.getState(),t=Oe({});return function(n){fetch(e.data.url_server+"/get_main_data",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_DATA_STATE",data:{generally_info:e.generally_info,user:e.user,order_type:e.order_type,counters:e.counts,ad_campaign:e.ad_campaign,item_payments:e.item_payments,status_group:e.status_group,service_prices:e.service_prices}}),n({type:"CHANGE_BRANCH_STATE",data:{branches:e.branch}}),n({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:e.cashboxes}}),n({type:"CHANGE_EMPLOYEE_STATE",data:{employees:e.employees}})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Me(){var e=ve.getState(),t=Oe({page:e.book.page_malfunction});return function(n){fetch(e.data.url_server+"/get_malfunction",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"dictMalfunction",data:e.data}),n({type:"ADD_DATA",field:"count_malfunction",data:e.count})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043b\u043e\u0432\u0430\u0440\u0430\u044f \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Ve(){var e=ve.getState(),t=["malfunction","packagelist","item_payments"],n=["dictMalfunction","dictPackagelist","item_payments"],r=Oe({del_ids:e.book["selected_".concat(t[e.book.type])]});return r.method="DELETE",function(){var i=Object(m.a)(u.a.mark((function i(c){return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(e.data.url_server+"/".concat(t[e.book.type]),r).catch((function(e){return ge(c,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0441\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return i.next=4,fetch(e.data.url_server+"/get_".concat(t[e.book.type]),Oe()).then((function(e){return e.json()})).then((function(r){r.success?(c({type:"ADD_DATA",field:n[e.book.type],data:r.data}),c({type:"ADD_DATA",field:"count_".concat(t[e.book.type]),data:r.count})):console.warn(r.message)})).catch((function(e){return ge(c,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}function Ge(){var e=ve.getState(),t=Oe({page:e.book.page_packagelist});return function(n){fetch(e.data.url_server+"/get_packagelist",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"dictPackagelist",data:e.data}),n({type:"ADD_DATA",field:"count_packagelist",data:e.count})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043f\u0438\u0441\u043a\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function He(){var e=ve.getState(),t=Oe({page:e.book.page_item_payments});return function(n){fetch(e.data.url_server+"/get_item_payments",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"ADD_DATA",field:"item_payments",data:e.data}),n({type:"ADD_DATA",field:"count_item_payments",data:e.count})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0442\u0430\u0442\u0435\u0439 \u043f\u043b\u0442\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function qe(){var e=ve.getState(),t=Oe({category_id:e.dictService.seted_categiry});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_dict_service",t).then((function(e){return e.json()})).then((function(e){e.success?r({type:"ADD_DATA",field:"dict_service",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function We(e){return{type:"CHANGE_EMPLOYEE_STATE",data:e}}function ze(e){return{type:"EDIT_EMPLOYEE",employee:e}}function Ue(){return{deleted:ve.getState().employee.showDeleted,page:0}}function Ye(e){var t=ve.getState();return function(n){fetch(t.data.url_server+"/get_employee",Oe(e)).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_EMPLOYEE_STATE",data:{employees:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Ke(){var e=ve.getState(),t=Oe({id:e.employee.edit,first_name:e.employee.first_name,last_name:e.employee.last_name,email:e.employee.email,notes:e.employee.notes,phone:e.employee.phone.replace(/[^0-9]/g,""),password:e.employee.password,role_id:e.employee.role_id,login:e.employee.login,inn:e.employee.inn,doc_name:e.employee.doc_name,avatar:e.employee.avatar,img:e.employee.img||null,filter:Ue()});return t.method="PUT",function(n){fetch(e.data.url_server+"/employee",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_EMPLOYEE_STATE",data:{employees:e.employees}}),n({type:"CHANGE_VISIBLE_STATE",data:{statusEmployeeEditor:!1}}),Pe(n,"alert-success","\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function Je(e){return{type:"CHANGE_BRANCH_STATE",data:e}}function Xe(){var e=ve.getState();return{employee_id:e.data.user.id,deleted:e.branch.showDeleted,page:0}}function Qe(e){return{type:"CHANGE_DATA_STATE",data:e}}var Ze=n(0);var $e={changeDataState:Qe},et=Object(s.b)((function(e){return{menuRows:e.data.menuRows,current_branch:e.branch.current_branch,current_menu_row:e.data.current_menu_row}}),$e)((function(e){return Object(l.g)().location.pathname===e.row.url&&e.changeDataState({current_menu_row:e.row.url}),Object(Ze.jsxs)(o.b,{className:"menuRow",to:e.row.url,style:e.current_menu_row===e.row.url?{backgroundColor:"#53585c",borderLeftColor:e.current_branch.color}:null,onClick:function(){return e.changeDataState({current_menu_row:e.row.url})},children:["task"===e.row.image?Object(Ze.jsx)("div",{className:"taskNumber",children:Object(Ze.jsx)("span",{className:"taskNumber1",children:"8"})}):Object(Ze.jsx)("svg",{className:"sidebarIcon",children:Object(Ze.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:e.row.image})}),Object(Ze.jsx)("span",{className:"didebarItemsText",children:e.row.title})]})}));var tt=function(e){var t=e.group;return Object(Ze.jsx)("div",{children:t.map((function(e){return Object(Ze.jsx)(et,{row:e},e.id)}))})};var nt={editEmployee:ze},rt=Object(s.b)((function(e){return{user:e.data.user}}),nt)((function(e){return Object(Ze.jsx)(o.b,{to:"/user",children:Object(Ze.jsx)("div",{className:"avatar",children:Object(Ze.jsx)("img",{src:"".concat("http://onetwonline.ru","/").concat(e.user.avatar),className:"imgAvatar",alt:"User avatar"})})})})),it=n(5),ct=function(e){return Object(Ze.jsx)("svg",{className:e.className?e.className:"icon-branch",viewBox:e.viewBox?e.viewBox:"0 0 32 32",style:{fill:e.color},children:Object(Ze.jsx)("path",{d:e.icon})})},at={changeBranchState:Je},st=Object(s.b)((function(e){return{current_branch:e.branch.current_branch,branches:e.branch.branches,user_id:e.data.user.id}}),at)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"menuBranch",onClick:function(){return c(!i)},children:[Object(Ze.jsx)(ct,{className:"smalIcon",icon:e.current_branch.icon,color:e.current_branch.color}),Object(Ze.jsx)("div",{className:"sidebarBranch",children:e.current_branch.name})]}),i?Object(Ze.jsx)("div",{className:"listOptionsBranch",children:e.branches.filter((function(t){return t.employees.includes(e.user_id)&&!t.deleted})).map((function(t){return Object(Ze.jsxs)("div",{className:"listBranch",onClick:function(){return function(t){e.changeBranchState({current_branch:t}),c(!1)}(t)},children:[Object(Ze.jsx)(ct,{className:"smalIcon",icon:t.icon,color:t.color}),Object(Ze.jsx)("div",{className:"ml5",children:t.name})]},t.id)}))}):null]})}));var ot=Object(s.b)((function(e){return{menuRows:e.data.menuRows,permission:e.data.user.role.permissions,current_branch:e.branch.current_branch}}))((function(e){var t=e.menuRows.filter((function(t){return"generally_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))})),n=e.menuRows.filter((function(t){return"report_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))})),r=e.menuRows.filter((function(t){return"setting_menu"===t.group_name&&t.permission_keys.some((function(t){return e.permission.includes(t)}))}));return Object(Ze.jsxs)("div",{className:"sidebarMain",children:[Object(Ze.jsx)(rt,{}),e.current_branch?Object(Ze.jsx)(st,{}):null,Object(Ze.jsx)("hr",{className:"hrMenu"}),t.length?Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(tt,{group:t},1011),Object(Ze.jsx)("hr",{className:"hrMenu"})]}):null,n.length?Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(tt,{group:n},1012),Object(Ze.jsx)("hr",{className:"hrMenu"})]}):null,r.length?Object(Ze.jsx)(tt,{group:r},1013):null]})})),lt=n(20),dt=n.n(lt);function ut(e){return{type:"CHANGE_FILTER_STATE",data:e}}function mt(){return{type:"RESET_FILTER"}}var pt={changeFilterState:ut,resetFilter:mt},ht=Object(s.b)((function(e){return{filter:e.filter}}),pt)((function(e){var t=Object(r.useState)(""),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{className:"Header",children:[Object(Ze.jsx)("div",{className:"headerTitle",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ze.jsx)("div",{className:"imputSearch",children:Object(Ze.jsx)("form",{children:Object(Ze.jsx)("input",{className:"imputSearchForm",placeholder:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430",onChange:function(t){return function(t){c(t.target.value),i||e.changeFilterState({search:""})}(t)},onKeyPressCapture:function(t){return function(t){"Enter"===t.key&&(t.preventDefault(),e.filter.active_badge||e.resetFilter(),"Enter"===t.key&&e.changeFilterState({search:i}))}(t)},value:i})})})]})})),bt={changeFilterState:ut,resetFilter:mt},jt=Object(s.b)((function(e){return{active_badge:e.filter.active_badge}}),bt)((function(e){return Object(Ze.jsxs)("div",{className:"mainFilter",style:{backgroundColor:e.badge.color,opacity:e.active_badge===e.badge.id||0===e.active_badge?1:.3},onClick:function(){e.active_badge!==e.badge.id?e.changeFilterState(Object(j.a)(Object(j.a)({},e.badge.filter),{},{active_badge:e.badge.id,active_filter:0})):e.resetFilter()},children:[Object(Ze.jsx)("div",{className:"pd5",children:Object(Ze.jsx)(ct,{icon:e.badge.icon,className:"icon-s25",color:"white"})}),Object(Ze.jsxs)("div",{className:"filterName",children:[Object(Ze.jsxs)("div",{className:"filterName-value",children:[e.badge.count," ",1===e.badge.count?"\u0437\u0430\u043a\u0430\u0437":e.badge.count<5?"\u0437\u0430\u043a\u0430\u0437\u0430":"\u0437\u0430\u043a\u0430\u0437\u043e\u0432"]}),Object(Ze.jsxs)("div",{className:"filterName-title",children:[" ",e.badge.title]})]})]})})),_t=Object(s.b)((function(e){return{badges:e.filter.badges}}))((function(e){return Object(Ze.jsx)("div",{className:"mainFilters",children:e.badges.map((function(e){return e.count?Object(Ze.jsx)(jt,{badge:e},e.id):null}))})}));function ft(e){return{type:"CHANGE_ORDER_STATE",data:e}}function vt(){return{type:"RESET_ORDER"}}function Ot(e,t,n){return{type:"CHANGE_ORDER_FIELD",id:e,field:t,value:n}}function gt(){var e=ve.getState();return{sort:e.filter.sort,field_sort:e.filter.field_sort,page:e.filter.page,engineer_id:e.data.user.role.orders_visibility?e.filter.engineer_id:e.filter.engineer_id.concat([e.data.user.id]),overdue:e.filter.overdue,status_id:e.filter.status_id,status_overdue:e.filter.status_overdue,urgent:e.filter.urgent,order_type_id:e.filter.order_type_id,manager_id:e.filter.manager_id,created_at:e.filter.created_at,kindof_good_id:e.filter.kindof_good,brand_id:e.filter.brand,subtype_id:e.filter.subtype,client_id:e.filter.client_id,branch_id:e.branch.current_branch.id,search:e.filter.search,update_badges:!0}}function xt(){var e=ve.getState(),t=Oe(gt());return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!0});case 2:return n.next=4,fetch(e.data.url_server+"/get_orders",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.data,count:e.count}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function yt(e,t){var n=ve.getState(),r=gt();r.update_order=n.order.edit;var i=Oe({order_id:t,status_id:e,filter:r});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!0});case 2:return e.next=4,fetch(n.data.url_server+"/change_order_status",i).then((function(e){return e.json()})).then((function(e){e.success?(n.order.edit&&t({type:"EDIT_ORDER",order:e.order}),t({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.data,count:e.count,events:e.events||[]}}),t({type:"CHANGE_FILTER_STATE",data:{badges:e.badges}}),t({type:"EDIT_ORDER",order:e.order}),n.view.checkOrderSticker&&t({type:"CHANGE_VISIBLE_STATE",data:{statusOrderSticker:!0,needToResetOrder:!0}}),t({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.data,count:e.count,events:e.events||[]}}),t({type:"CHANGE_FILTER_STATE",data:{badges:e.badges}}),Pe(t,"alert-success","\u0421\u0442\u0430\u0442\u0443\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return e.next=6,t({type:"SET_VISIBLE_FLAG",field:"statusOrderLoader",value:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Et(e,t){return{type:"CHANGE_BOOK_FORM",field:t,value:e}}function Nt(e){return{type:"CHANGE_BOOK_STATE",data:e}}function wt(){return{type:"RESET_BOOK_EQUIPMENT"}}function kt(e,t){return{type:"CHOOSE_BOOK_SELECTED",field:t,value:e}}function Ct(){var e=ve.getState(),t=Oe({title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted});return function(n){fetch(e.data.url_server+"/get_equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),n({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}function St(){var e=ve.getState(),t=Oe({title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0440\u0435\u043d\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function Tt(){var e=ve.getState(),t=Oe({title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function Ft(){var e=ve.getState(),t=Oe({title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/get_equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}n(41);var At=function(e){return Object(Ze.jsx)("div",{className:e.className,children:Object(Ze.jsxs)("div",{className:"lds-spinner",children:[Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{}),Object(Ze.jsx)("div",{})]})})},Pt=Object(s.b)((function(e){return{employees:e.employee.employees}}))((function(e){return Object(Ze.jsxs)("td",{children:[Object(Ze.jsx)("div",{children:function(t){if(t){var n=e.employees.find((function(e){return e.id===t}));return n?"".concat(n.last_name," ").concat(n.first_name):""}}(e.order.created_by_id)}),Object(Ze.jsx)("div",{className:"orderDate",children:new Date(1e3*e.order.created_at).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace("\u0433.,","")})]})})),Dt=Object(s.b)(null,{})((function(e){return Object(Ze.jsx)("td",{className:"orderLabel tableRow",children:Object(Ze.jsx)(o.b,{className:"orderLink",to:{pathname:"/orders/".concat(e.order.id),state:{order_id:e.order.id}},children:Object(Ze.jsx)("span",{className:e.order.urgent&&e.order.status.group<4?"fire-text":null,children:e.order.id_label})})})})),Rt=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsxs)("td",{children:[Object(Ze.jsxs)("div",{className:"estimated-top",children:[Object(Ze.jsx)(ct,{icon:q,className:"clockEstimated",color:!e.order.overdue&&e.order.status.group<4?"#f0ad4e":"#ebebeb"}),Object(Ze.jsx)("span",{children:function(e,t){if(t>3)return"-";var n=Math.round(e/60);if(Math.abs(n)<60)return"".concat(n,"\u043c.");var r=Math.round(e/3600);if(Math.abs(r)<48)return"".concat(r,"\u0447.");var i=Math.round(e/86400);return"".concat(i,"\u0434.")}(e.order.remaining,e.order.status.group)})]}),Object(Ze.jsx)("div",{className:"orderDate",children:new Date(1e3*e.order.estimated_done_at).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace("\u0433.,","")})]})}));var It={changeFilterState:ut,changeOrderField:Ot,changeOrderState:ft,reorderOrderField:function(e,t){return{type:"REORDER_ORDER_FIELD",id:e,order:t}}},Bt=Object(s.b)((function(e){return{filter:e.filter,order:e.order}}),It)((function(e){var t=Object(r.useState)(e.data.width),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){var n=t.pageX-e.order.position_cursor;n&&c(i+n)},s=function t(n){var r=n.pageX-e.order.position_cursor;c(i+r),e.changeOrderField(e.data.id,"width",i+r),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",t)};return Object(Ze.jsx)("th",{className:"tableColumnHeader",style:{minWidth:"".concat(i,"px")},children:Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{className:"ml5 w100 ",onClick:function(){return e.changeFilterState({field_sort:e.data.field,sort:"asc"===e.filter.sort?"desc":"asc"})},draggable:!0,onDragEnd:function(){e.reorderOrderField(e.data.id,e.order.position_over),e.changeOrderState({position_over:null})},children:[e.data.title,Object(Ze.jsx)("span",{children:e.filter.field_sort===e.data.field?"asc"===e.filter.sort?"\u2193":"\u2191":null})]}),Object(Ze.jsx)("div",{style:{height:"40px"},className:"curResize",onMouseDown:function(t){e.changeOrderState({position_cursor:t.pageX}),window.addEventListener("mousemove",a),window.addEventListener("mouseup",s)}}),Object(Ze.jsx)("div",{style:{display:e.order.position_over===e.data.order?"block":"none"},className:"dragOver"}),Object(Ze.jsx)("div",{className:"overArea",onDragOver:function(){return t=e.data.order,void(e.order.position_over!==t&&e.changeOrderState({position_over:t}));var t}})]})})}));function Lt(e){return{type:"CHANGE_CASHBOX_STATE",data:e}}function Mt(e,t){return{type:"CHANGE_CASHBOX_PERMISSION",value:e,field:t}}function Vt(){var e=ve.getState();return{deleted:e.cashbox.showDeleted,branch_id:Object.values(e.branch.current_branch).length?e.branch.current_branch.id:null}}function Gt(e){return{type:"CHANGE_PAYMENT_STATE",data:e}}function Ht(){return{type:"RESET_PAYMENTS"}}function qt(){var e=ve.getState(),t=Oe({custom_created_at:e.payment.filter_created_at,cashbox_id:e.cashbox.current_cashbox.id,tags:e.payment.filter_tags.length?e.payment.filter_tags:null});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/get_payments",t).then((function(e){return e.json()})).then((function(e){e.success&&r({type:"CHANGE_PAYMENT_STATE",data:{payments:e.data}})})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var Wt={changeStatusMenuVisible:xe,changeStatus:yt,addOrders:xt,refreshDataOrder:Re,changePaymentState:Gt,changeVisibleState:we,editCurrentClient:Se},zt=Object(s.b)((function(e){return{status:e.data.status,current_user_id:e.data.user.id}}),Wt)((function(e){return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)("span",{children:e.groupName}),e.status.filter((function(t){return t.group===e.groupIdx+1})).map((function(t){return Object(Ze.jsx)("li",{className:"statusListRow",style:{backgroundColor:t.color},onClick:function(){return function(t){if(5===e.groupIdx&&e.order.price!==e.order.payed){var n,r=e.order.price>e.order.payed;e.changePaymentState((n={direction:r?2:1},Object(b.a)(n,r?"income":"outcome",Math.abs(e.order.missed_payments)),Object(b.a)(n,"client_id",e.order.client.id),Object(b.a)(n,"description",r?"\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label):"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label)),Object(b.a)(n,"cashflow_category",r?2:8),Object(b.a)(n,"employee_id",e.current_user_id),Object(b.a)(n,"order_id",e.order.edit||e.order.id),Object(b.a)(n,"context",{type:"closed_order",order_id:e.order.edit||e.order.id,status_id:t.id}),n)),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})}else e.order.edit?e.changeStatus(t.id,e.order.edit):(e.changeStatus(t.id,e.order.id),e.changeStatusMenuVisible(e.order.id))}(t)},children:t.name},t.id)}))]})}));var Ut={changeStatusMenuVisible:xe,setVisibleFlag:Ne},Yt=Object(s.b)(null,Ut)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("statusListOrderForm")||(e.changeStatusMenuVisible(e.order.id),e.setVisibleFlag("statusStatusList",!1))};return Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(Ze.jsx)("div",{className:"statusList",id:"statusList",children:["\u041d\u043e\u0432\u044b\u0435","\u041d\u0430 \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438","\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435","\u0413\u043e\u0442\u043e\u0432\u044b\u0435","","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e","\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u043d\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"].map((function(t,n){return Object(Ze.jsx)(zt,{groupName:t,groupIdx:n,order:e.order},n+t)}))})})),Kt={changeStatusMenuVisible:xe},Jt=Object(s.b)((function(e){return{statusMenuVisible:e.view.statusMenuVisible}}),Kt)((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"orderStatus",children:Object(Ze.jsxs)("span",{children:[Object(Ze.jsxs)("button",{className:"statusButtom",type:"button",style:{backgroundColor:e.order.status.color},onClick:function(){return e.changeStatusMenuVisible(e.order.id)},children:[e.order.status.name,Object(Ze.jsx)("span",{className:"statusSeparate",children:" | \u1a06"})]}),e.statusMenuVisible[[e.order.id]]?Object(Ze.jsx)(Yt,{order:e.order}):null]})})})})),Xt=Object(s.b)(null,null)((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("span",{className:"tableText",children:e.order.kindof_good.title})})})),Qt=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("span",{className:"tableText",children:e.order.brand.title})})})),Zt=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"tableText tableOne",children:e.order.malfunction})})})),$t=Object(s.b)((function(e){return{employees:e.employee.employees}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{children:function(t){if(t){var n=e.employees.find((function(e){return e.id===t}));return n?"".concat(n.last_name," ").concat(n.first_name):""}}(e.order.engineer_id)})})})),en={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},tn={year:"numeric",month:"numeric",day:"numeric"};function nn(e){return"+".concat(e.slice(0,1),"(").concat(e.slice(1,4),") ").concat(e.slice(4,7),"-").concat(e.slice(7,9),"-").concat(e.slice(9,11))}function rn(e){return!(e<0||e>100)&&!isNaN(e)}function cn(e){return"".concat(e.last_name," ").concat(e.first_name)}function an(e){return new Date(1e3*e).toLocaleString("ru",en).replace("\u0433.,","")}function sn(){var e=new Date,t=new Date;return t.setDate(1),t.setHours(0,0,0,0),[parseInt(t/1e3),parseInt(e/1e3)]}function on(e){if(!e)return"";switch(e.length){case 0:return"";case 1:return"+".concat(e[0]);case 2:return"+".concat(e[0]," (").concat(e[1]);case 3:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]);case 4:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3]);case 5:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]);case 6:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]);case 7:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6]);case 8:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]);case 9:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8]);case 10:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8],"-").concat(e[9]);case 11:return"+".concat(e[0]," (").concat(e[1]).concat(e[2]).concat(e[3],") ").concat(e[4]).concat(e[5]).concat(e[6],"-").concat(e[7]).concat(e[8],"-").concat(e[9]).concat(e[10])}}var ln=Object(s.b)((function(e){return{permissions:e.data.user.role.permissions}}))((function(e){return e.permissions.includes("see_client")?Object(Ze.jsxs)("td",{children:[Object(Ze.jsx)("div",{className:"tableClientName noWr",children:e.order.client.name}),Object(Ze.jsx)("div",{className:"orderDate noWr",children:nn(e.order.client.phone[0].number)})]}):Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{})})})),dn=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{className:"tablePrice",children:Object(Ze.jsx)("span",{children:e.order.price||null})})})),un=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"tableText tableOne",children:e.order.engineer_notes})})})),mn=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsxs)("div",{className:"tableText row",children:[Object(Ze.jsx)("div",{children:Object(Ze.jsx)("img",{alt:"",className:"icon_equipment",src:e.order.kindof_good.icon})}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"noWr",children:[e.order.kindof_good.icon?null:Object(Ze.jsx)("span",{className:"",children:e.order.kindof_good.title}),Object(Ze.jsx)("span",{className:"ml5",children:e.order.brand.title})]}),Object(Ze.jsxs)("div",{className:"noWr",children:[Object(Ze.jsx)("span",{children:e.order.subtype.title}),Object(Ze.jsx)("span",{className:"orderDate ml5",children:e.order.model.title})]})]})]})})}));function pn(e,t){return{type:"CHANGE_CLIENT_FORM",field:t,value:e}}function hn(e){return{type:"CHANGE_CLIENT_STATE",data:e}}function bn(){var e=ve.getState(),t=Oe({page:e.client.page,name:e.client.filter_name,phone:e.client.filter_phone});return function(n){fetch(e.data.url_server+"/get_clients",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_CLIENT_STATE",data:{clients:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}var jn=function(e){var t=e.create?Object(Ze.jsx)("div",{className:"blueButton mr-lf-0 ",onClick:e.create,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}):null,n=e.save?Object(Ze.jsx)("div",{className:"blueButton mr-lf-0",onClick:e.save,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):null,r=e.close?Object(Ze.jsx)("div",{className:"whiteBlueBotton",onClick:e.close,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}):null,i=e.delete?Object(Ze.jsx)("div",{className:"whiteButton simbolBotton",onClick:e.delete,children:Object(Ze.jsx)("svg",{className:"icon-table-red-basket",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{d:V})})}):null,c=e.recover?Object(Ze.jsxs)("div",{className:"".concat(e.recover?"blueButton":"greyDisbledButton"," mr-lf-0"),onClick:e.recover,children:[Object(Ze.jsx)("svg",{className:"icon-recover",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{d:"M32 12h-12l4.485-4.485c-2.267-2.266-5.28-3.515-8.485-3.515s-6.219 1.248-8.485 3.515c-2.266 2.267-3.515 5.28-3.515 8.485s1.248 6.219 3.515 8.485c2.267 2.266 5.28 3.515 8.485 3.515s6.219-1.248 8.485-3.515c0.189-0.189 0.371-0.384 0.546-0.583l3.010 2.634c-2.933 3.349-7.239 5.464-12.041 5.464-8.837 0-16-7.163-16-16s7.163-16 16-16c4.418 0 8.418 1.791 11.313 4.687l4.687-4.687v12z"})}),"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"]}):null;return Object(Ze.jsxs)("div",{className:"buttons_ mt15",children:[Object(Ze.jsxs)("div",{className:"buttons",children:[e.edit?e.deleted?c:n:t,r]}),e.edit&&!e.deleted?i:null]})},_n=function(e){var t=Object(r.useState)(!!e.checked&&e.checked),n=Object(it.a)(t,2),i=n[0],c=n[1];return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsxs)("div",{className:"checkButton",children:[Object(Ze.jsx)("div",{className:i?"checkButtonTwo":"checkButtonOne",onClick:e.disabled?null:function(){c(!0),e.func1()},children:e.name[0]}),Object(Ze.jsx)("div",{className:i?"checkButtonOne":"checkButtonTwo",onClick:e.disabled?null:function(){c(!1),e.func2()},children:e.name[1]})]})]})},fn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),vn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0432\u043e\u043d\u043a\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),On=function(e){var t=Object(r.useState)(""),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0422\u0435\u0433\u0438"}),Object(Ze.jsxs)("div",{className:"tagBox",children:[Object(Ze.jsx)("div",{className:"icon_tag"}),e.tags.map((function(t,n){return Object(Ze.jsxs)("div",{className:"tag",children:[Object(Ze.jsx)("div",{className:"icon_close",onClick:function(){return e.daleteTag(n)}}),Object(Ze.jsx)("div",{children:t})]},n)})),Object(Ze.jsx)("input",{className:"optionFilterInput w150",onKeyPress:function(t){"Enter"===t.key&&function(t){e.addTag(t.target.value),c("")}(t)},value:i,onChange:function(e){return c(e.target.value)}})]})]})},gn={setVisibleFlag:Ne},xn=Object(s.b)(null,gn)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("chooseOfList".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=e.list.find((function(t){return t.id===e.current_id})),o=e.noChoosed||"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0442\u0438\u043f";return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:e.className,style:{width:e.width?e.width:"250px"},id:"chooseOfList".concat(e.id),children:[Object(Ze.jsxs)("div",{className:"lableImput",children:[e.title,e.checkedFlag?Object(Ze.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ze.jsxs)("div",{className:"optionsButton",onClick:e.disabled?null:function(){return c(!i)},style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,children:[Object(Ze.jsx)("div",{className:"noWr",children:e.employee?s?"".concat(s.last_name," ").concat(s.first_name):"\u043d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d":s?s.title||s.name:o}),Object(Ze.jsx)("span",{children:"\u1a06"})]}),e.checkedFlag&&!e.checked?Object(Ze.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c"}):null,i?Object(Ze.jsx)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:e.list.map((function(t){return Object(Ze.jsx)("div",{className:"options",onClick:e.checkedFlag?function(){return function(t){e.setElement(t.id,e.field?e.field:null),c(!1),e.setVisibleFlag(e.checkedFlag,!0)}(t)}:function(){return function(t){e.setElement(t.id,e.field?e.field:null),c(!1)}(t)},children:e.employee?"".concat(t.last_name," ").concat(t.first_name):t.title?t.title:t.name},t.id)}))}):null]})})),yn={setVisibleFlag:Ne},En=Object(s.b)((function(e){return{}}),yn)((function(e){return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsxs)("div",{className:"lableImput",children:[e.title,e.redStar?Object(Ze.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("input",{className:"".concat(e.unit?"numberInput":"textInput"," ").concat(e.disabled?"ds":null," ").concat(e.inputClassName),style:{width:e.width?e.width:null,borderColor:e.checkedFlag&&!e.checked?"red":null},name:e.name,onChange:e.isPhone?function(t){var n=t.target.value.replace(/[^0-9]/g,"");n.length<12&&e.onChange(n)}:e.onChange,value:e.isPhone?on(e.value):e.value,onBlur:e.checkedFlag?function(t){return e.setVisibleFlag(e.checkedFlag,!!t.target.value)}:null,disabled:e.disabled}),e.unit?Object(Ze.jsx)("div",{className:"ml5",children:e.unit}):null]}),e.checkedFlag&&!e.checked?Object(Ze.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})})),Nn={setVisibleFlag:Ne},wn=Object(s.b)((function(e){return{}}),Nn)((function(e){return Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsxs)("div",{className:"lableImput",children:[e.title,e.redStar?Object(Ze.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ze.jsx)("textarea",{className:"textInput",name:e.name,onChange:e.onChange,value:e.value,onBlur:e.checkedFlag?function(t){return e.setVisibleFlag(e.checkedFlag,!!t.target.value)}:null,style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,disabled:e.disabled}),e.checkedFlag&&!e.checked?Object(Ze.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})})),kn={changeClientForm:pn,setClietnCheckbox:Ee,addClientTag:function(e){return{type:"ADD_CLIENT_TAG",tag:e}},deleteClientTag:function(e){return{type:"DELETE_CLIENT_TAG",idx:e}},setVisibleFlag:Ne},Cn=Object(s.b)((function(e){return{client:e.client,discount_margin:e.data.discount_margin,inputClientDiscServChecked:e.view.inputClientDiscServChecked,inputClientDiscMatChecked:e.view.inputClientDiscMatChecked,inputClientDiscGoodChecked:e.view.inputClientDiscGoodChecked}}),kn)((function(e){return Object(Ze.jsxs)("div",{className:"clientGenerally",children:[Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u041f\u0440\u043e\u0447\u0435\u0435"}),Object(Ze.jsx)(En,{className:"mt15 w250",title:"\u0421\u043a\u0438\u0434\u043e\u0447\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u0430",onChange:function(t){return e.changeClientForm(t.target.value,"discount_code")},value:e.client.discount_code,disabled:e.client.deleted}),Object(Ze.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ze.jsx)(_n,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438 \u0432 \u0417\u0430\u043a\u0430\u0437\u0435 \u0438 \u0421\u0447\u0435\u0442\u0435",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_service_type",!1)},func2:function(){return e.setClietnCheckbox("discount_service_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_service_type?Object(Ze.jsx)(xn,{id:111,className:"ml30 mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&1===e.margin_type})),field:"discount_service_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_service_margin_id,width:"150px"}):Object(Ze.jsx)(En,{className:"ml30 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_services")},value:e.client.discount_services,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscServChecked",checked:rn(e.client.discount_services),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ze.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ze.jsx)(_n,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0432 \u0417\u0430\u043a\u0430\u0437\u0435 \u0438 \u0421\u0447\u0435\u0442\u0435",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_materials_type",!1)},func2:function(){return e.setClietnCheckbox("discount_materials_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_materials_type?Object(Ze.jsx)(xn,{id:11,className:"mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&2===e.margin_type})),field:"discount_materials_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_materials_margin_id,width:"150px"}):Object(Ze.jsx)(En,{className:"ml15 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_materials")},value:e.client.discount_materials,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscMatChecked",checked:rn(e.client.discount_materials),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ze.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ze.jsx)(_n,{className:"mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u041f\u0440\u043e\u0434\u0430\u0436\u0430\u0445",name:["\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f","\u041e\u0442 \u0442\u0438\u043f\u0430 \u0446\u0435\u043d\u044b"],func1:function(){return e.setClietnCheckbox("discount_good_type",!1)},func2:function(){return e.setClietnCheckbox("discount_good_type",!0)},checked:!0,disabled:e.client.deleted}),e.client.discount_good_type?Object(Ze.jsx)(xn,{id:12,className:"ml30 mt35 h27",list:e.discount_margin.filter((function(e){return!e.deleted&&2===e.margin_type})),field:"discount_goods_margin_id",setElement:e.changeClientForm,current_id:e.client.discount_goods_margin_id,width:"150px"}):Object(Ze.jsx)(En,{className:"ml30 mt35",onChange:function(t){return e.changeClientForm(t.target.value.replace(/[^0-9]/g,""),"discount_goods")},value:e.client.discount_goods,unit:"%",disabled:e.client.deleted,checkedFlag:"inputClientDiscGoodChecked",checked:rn(e.client.discount_goods),errorMassage:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 0 \u0434\u043e 100"})]}),Object(Ze.jsx)(wn,{className:"mt15",title:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeClientForm(t.target.value,"notes")},value:e.client.notes,disabled:e.client.deleted}),Object(Ze.jsx)(On,{tags:e.client.tags,addTag:e.addClientTag,daleteTag:e.deleteClientTag})]})})),Sn={changeStatusPhoneList:function(e){return{type:"CHANGE_STATUS_PHONE_LIST",idx:e}},setPhoneTitle:function(e,t){return{type:"SET_PHONE_TITLE",idx:e,title:t}},changeStatusAddTitle:function(e){return{type:"CHANGE_STATUS_ADD_TITLE",idx:e}}},Tn=Object(s.b)((function(e){return{client:e.client}}),Sn)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("listOptionsOfPhones".concat(e.idx))||e.client.statusPhoneList[e.idx]&&e.changeStatusPhoneList(e.idx)};return Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(Ze.jsxs)("div",{id:"listOptionsOfPhones".concat(e.idx),children:[Object(Ze.jsxs)("div",{className:"lableImput mt15 curP",onClick:function(){return e.changeStatusPhoneList(e.idx)},children:[e.title,0===e.idx?Object(Ze.jsx)("span",{className:"redStar",children:"*"}):null,Object(Ze.jsx)("span",{className:"smallIcon",children:"\u1a06"})]}),e.client.statusPhoneList[e.idx]?Object(Ze.jsxs)("div",{className:"listOptionsPhones",children:[e.client.phone_titles.map((function(t){return Object(Ze.jsx)("div",{className:"options",onClick:function(){e.setPhoneTitle(e.idx,t)},children:t},t)})),Object(Ze.jsx)("div",{className:"btmsts",children:e.client.statusAddTitle[e.idx]?Object(Ze.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&e.setPhoneTitle(e.idx,t.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ze.jsx)("div",{className:"btnstsTitle",onClick:function(){return e.changeStatusAddTitle(e.idx)},children:"\u0417\u0430\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u0435"})})]}):null]})})),Fn={changeClientEditorPhone:function(e,t){return{type:"CHANGE_CLIENT_EDITOR_PHONE",idx:e,value:t}},addPhoneCounter:function(){return{type:"ADD_PHONE_COUNTER"}},deleteCountNumber:function(e){return{type:"DELETE_COUNT_NUMBER",idx:e}},setPhoneNotify:function(e){return{type:"SET_PHONE_NOTIFY",idx:e}},setVisibleListFlag:ke,addVisibleFlag:function(e){return{type:"ADD_FLAG",field:e}},deleteVisibleFlag:function(e,t){return{type:"DELETE_FLAG",field:e,idx:t}}},An=Object(s.b)((function(e){return{client:e.client,view:e.view}}),Fn)((function(e){return Object(Ze.jsxs)("div",{children:[e.client.phone.map((function(t,n){return Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(Tn,{idx:n,title:t.title}),Object(Ze.jsxs)("div",{className:"inputPhoneBox",children:[Object(Ze.jsx)("input",{className:"textInput w250",onChange:function(t){return function(t,n){var r=n.target.value.replace(/[^0-9]/g,"");r.length<12&&e.changeClientEditorPhone(t,r)}(n,t)},value:on(t.number),onBlur:function(t){return e.setVisibleListFlag("inputClientPhoneChecked",n,11===t.target.value.replace(/[^0-9]/g,"").length)},style:e.view.inputClientPhoneChecked[n]?null:{borderColor:"red"}}),0!==n?Object(Ze.jsx)("div",{onClick:function(){e.deleteCountNumber(n),e.deleteVisibleFlag("inputClientPhoneChecked",n)},children:Object(Ze.jsx)("svg",{className:"icon-deletePhone",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{d:V})})}):null]}),e.view.inputClientPhoneChecked[n]?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),Object(Ze.jsxs)("div",{className:"checkbox mt5",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(){return e.setPhoneNotify(n)},checked:t.notify}),Object(Ze.jsx)("label",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c SMS"})]})]},n)})),Object(Ze.jsx)("div",{className:"addPhone",onClick:function(){e.addPhoneCounter(),e.addVisibleFlag("inputClientPhoneChecked")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d"})]})})),Pn={changeClientForm:pn},Dn=Object(s.b)((function(e){return{client:e.client}}),Pn)((function(e){return Object(Ze.jsxs)("div",{className:"clientGenerally",children:[Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041e\u0413\u0420\u041d",onChange:function(t){return e.changeClientForm(t.target.value,"ogrn")},value:e.client.ogrn}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0418\u041d\u041d",onChange:function(t){return e.changeClientForm(t.target.value,"inn")},value:e.client.inn}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041a\u041f\u041f",onChange:function(t){return e.changeClientForm(t.target.value,"kpp")},value:e.client.kpp}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeClientForm(t.target.value,"juridical_address")},value:e.client.juridical_address}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440",onChange:function(t){return e.changeClientForm(t.target.value,"director")},value:e.client.director}),Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u0411\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438\u0435 \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b"}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",onChange:function(t){return e.changeClientForm(t.target.value,"bank_name")},value:e.client.bank_name}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0420/\u0421",onChange:function(t){return e.changeClientEditorForm(t.target.value,"settlement_account")},value:e.client.settlement_account}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041a/\u0421",onChange:function(t){return e.changeClientForm(t.target.value,"corr_account")},value:e.client.corr_account}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0411\u0418\u041a",onChange:function(t){return e.changeClientForm(t.target.value,"bic")},value:e.client.bic})]})})),Rn={changeClientForm:pn,setClietnCheckbox:Ee,changeStatusAdCampaignClient:function(){return{type:"CHANGE_STATUS_AD_CAMPAIGN_CLIENT"}},setAdCampaignClient:function(e){return{type:"SET_AD_CANMPAIGN_CLIENT",id:e}},setVisibleFlag:Ne},In=Object(s.b)((function(e){return{client:e.client,statusPhoneList:e.view.statusPhoneList,ad_campaign:e.data.ad_campaign,statusAdCampaignClient:e.view.statusAdCampaignClient,inputClientNameChecked:e.view.inputClientNameChecked}}),Rn)((function(e){return Object(Ze.jsxs)("div",{className:"clientGenerally",children:[Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(Ze.jsx)(En,{className:"w250 mt15",title:e.client.juridical?"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438":"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u0442\u0430",redStar:!0,onChange:function(t){return e.changeClientForm(t.target.value,"name")},value:e.client.name,checkedFlag:"inputClientNameChecked",checked:e.inputClientNameChecked}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",onChange:function(t){return e.changeClientForm(t.target.value,"name_doc")},value:e.client.name_doc}),Object(Ze.jsx)(An,{}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"Email",onChange:function(t){return e.changeClientForm(t.target.value,"email")},value:e.client.email}),Object(Ze.jsxs)("div",{className:"checkbox mt5",children:[Object(Ze.jsx)("input",{type:"checkbox",name:"should_send_email",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.should_send_email}),Object(Ze.jsx)("label",{children:"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c Email"})]}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeClientForm(t.target.value,"address")},value:e.client.address}),Object(Ze.jsx)(xn,{id:13,className:"mt15 h52",title:"\u041e\u0442\u043a\u0443\u0434\u0430 \u043a\u043b\u0438\u0435\u043d\u0442 \u043e \u043d\u0430\u0441 \u0443\u0437\u043d\u0430\u043b",list:e.ad_campaign,setElement:e.setAdCampaignClient,current_id:e.client.ad_campaign_id,width:"250px"}),e.client.juridical?Object(Ze.jsx)(Dn,{}):null]})})),Bn={setClietnCheckbox:Ee},Ln=Object(s.b)((function(e){return{client:e.client}}),Bn)((function(e){return Object(Ze.jsxs)("div",{className:"buttons mt15",children:[Object(Ze.jsxs)("div",{className:"checkButton",children:[Object(Ze.jsx)("div",{className:e.client.juridical?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.setClietnCheckbox("juridical",!1)},children:"\u0424\u0438\u0437. \u043b\u0438\u0446\u043e"}),Object(Ze.jsx)("div",{className:e.client.juridical?"checkButtonTwo":"checkButtonOne",name:"juridical",onClick:function(t){return e.setClietnCheckbox("juridical",!0)},children:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"})]}),Object(Ze.jsxs)("div",{className:"subCheckbox",children:[Object(Ze.jsx)("input",{type:"checkbox",name:"supplier",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.supplier}),Object(Ze.jsxs)("label",{children:[Object(Ze.jsx)("svg",{className:"icon-black",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 18l-4-8h-6v-4c0-1.1-0.9-2-2-2h-18c-1.1 0-2 0.9-2 2v16l2 2h2.536c-0.341 0.588-0.536 1.271-0.536 2 0 2.209 1.791 4 4 4s4-1.791 4-4c0-0.729-0.196-1.412-0.536-2h11.073c-0.341 0.588-0.537 1.271-0.537 2 0 2.209 1.791 4 4 4s4-1.791 4-4c0-0.729-0.196-1.412-0.537-2h2.537v-6zM22 18v-6h4.146l3 6h-7.146z"})}),Object(Ze.jsx)("span",{children:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"})]})]}),Object(Ze.jsxs)("div",{className:"subCheckbox",children:[Object(Ze.jsx)("input",{type:"checkbox",name:"conflicted",onChange:function(t){return e.setClietnCheckbox(t.target.name,"change")},checked:e.client.conflicted}),Object(Ze.jsxs)("label",{children:[Object(Ze.jsx)("svg",{className:"icon-red",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM22 8c1.105 0 2 0.895 2 2s-0.895 2-2 2-2-0.895-2-2 0.895-2 2-2zM10 8c1.105 0 2 0.895 2 2s-0.895 2-2 2-2-0.895-2-2 0.895-2 2-2zM22.003 24.398c-1.224-2.036-3.454-3.398-6.003-3.398s-4.779 1.362-6.003 3.398l-2.573-1.544c1.749-2.908 4.935-4.855 8.576-4.855s6.827 1.946 8.576 4.855l-2.573 1.544z"})}),Object(Ze.jsx)("span",{children:"\u041a\u043e\u043d\u0444\u043b\u0438\u043a\u0442\u043d\u044b\u0439"})]})]})]})})),Mn=function(){return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(Ln,{}),Object(Ze.jsx)(In,{}),Object(Ze.jsx)(Cn,{})]})},Vn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Gn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Hn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u041f\u043b\u0430\u0442\u0435\u0436\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),qn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"SMS"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Wn=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0430\u0434\u0430\u0447\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),zn=function(e){return Object(Ze.jsx)("div",{className:"tabs ".concat(e.className),children:e.list.map((function(t,n){return Object(Ze.jsx)("div",{className:e.tab===n?"tabOn":"tab",onClick:function(){return e.func(n)},children:t},n)}))})},Un={setVisibleFlag:Ne,resetDataClient:function(){return{type:"RESET_DATA_CLIENT"}},setVisibleListFlag:ke,createNewClient:function(){var e=ve.getState(),t=Oe({juridical:e.client.juridical,supplier:e.client.supplier,conflicted:e.client.conflicted,should_send_email:e.client.should_send_email,discount_good_type:e.client.discount_good_type,discount_materials_type:e.client.discount_materials_type,name:e.client.name,name_doc:e.client.name_doc,email:e.client.email,address:e.client.address,discount_code:e.client.discount_code,notes:e.client.notes,ogrn:e.client.ogrn,inn:e.client.inn,kpp:e.client.kpp,juridical_address:e.client.juridical_address,director:e.client.director,bank_name:e.client.bank_name,settlement_account:e.client.settlement_account,corr_account:e.client.corr_account,bic:e.client.bic,discount_goods:e.client.discount_goods,discount_materials:e.client.discount_materials,discount_services:e.client.discount_services,ad_campaign_id:e.client.ad_campaign_id,discount_goods_margin_id:e.client.discount_goods_margin_id,discount_materials_margin_id:e.client.discount_materials_margin_id,discount_service_margin_id:e.client.discount_service_margin_id,discount_service_type:e.client.discount_service_type,tags:e.client.tags,phone:e.client.phone});return function(n){fetch(e.data.url_server+"/clients",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_ORDER_FORM_S",field:"client",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1}),n({type:"RESET_DATA_CLIENT"})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},saveChangeClient:function(){var e=ve.getState(),t=Oe({id:e.client.edit,juridical:e.client.juridical,supplier:e.client.supplier,conflicted:e.client.conflicted,should_send_email:e.client.should_send_email,discount_good_type:e.client.discount_good_type,discount_materials_type:e.client.discount_materials_type,discount_service_type:e.client.discount_service_type,name:e.client.name,name_doc:e.client.name_doc,email:e.client.email,address:e.client.address,discount_code:e.client.discount_code,notes:e.client.notes,ogrn:e.client.ogrn,inn:e.client.inn,kpp:e.client.kpp,juridical_address:e.client.juridical_address,director:e.client.director,bank_name:e.client.bank_name,settlement_account:e.client.settlement_account,corr_account:e.client.corr_account,bic:e.client.bic,discount_goods:e.client.discount_goods,discount_materials:e.client.discount_materials,discount_services:e.client.discount_services,ad_campaign_id:e.client.ad_campaign_id,discount_goods_margin_id:e.client.discount_goods_margin_id,discount_materials_margin_id:e.client.discount_materials_margin_id,discount_service_margin_id:e.client.discount_service_margin_id,tags:e.client.tags,phone:e.client.phone});return t.method="PUT",function(n){fetch(e.data.url_server+"/clients",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_ORDER_FORM_S",field:"client",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},deleteClient:function(e){var t=ve.getState(),n=Oe({id:t.client.edit,deleted:e});return n.method="PUT",function(e){fetch(t.data.url_server+"/clients",n).then((function(e){return e.json()})).then((function(t){t.success?(e({type:"CHANGE_ORDER_FORM_S",field:"client",value:{}}),e({type:"RESET_DATA_CLIENT"}),e({type:"SET_VISIBLE_FLAG",field:"statusCreateNewClient",value:!1})):console.warn(t.message)})).catch((function(t){return ge(e,t,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeClientState:hn},Yn=Object(s.b)((function(e){return{view:e.view,client:e.client,permissions:e.data.user.role.permissions}}),Un)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("createNewClient")||e.view.statusCreateNewClient&&e.resetDataClient()};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow mw50",id:"createNewClient",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.client.edit?e.client.name:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442"}),Object(Ze.jsx)("div",{className:"contentEditor",children:e.client.edit?Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(zn,{className:"mt15",list:["\u041e\u0431\u0449\u0438\u0435","\u0411\u0430\u043b\u0430\u043d\u0441","\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0417\u0430\u043a\u0430\u0437\u044b","\u041f\u043b\u0430\u0442\u0435\u0436\u0438","\u0417\u0432\u043e\u043d\u043a\u0438","SMS","\u0417\u0430\u0434\u0430\u0447\u0438"],tab:e.client.tabs,func:function(t){return e.changeClientState({tabs:t})}}),0===e.client.tabs?Object(Ze.jsx)(Mn,{}):null,1===e.client.tabs?Object(Ze.jsx)(fn,{}):null,2===e.client.tabs?Object(Ze.jsx)(Vn,{}):null,3===e.client.tabs?Object(Ze.jsx)(Gn,{}):null,4===e.client.tabs?Object(Ze.jsx)(Hn,{}):null,5===e.client.tabs?Object(Ze.jsx)(vn,{}):null,6===e.client.tabs?Object(Ze.jsx)(qn,{}):null,7===e.client.tabs?Object(Ze.jsx)(Wn,{}):null]}):Object(Ze.jsx)(Mn,{})}),Object(Ze.jsx)(jn,{edit:e.client.edit,create:function(){e.client.name&&e.view.inputClientPhoneChecked.every((function(e){return e}))&&rn(e.client.discount_materials)&&rn(e.client.discount_goods)&&rn(e.client.discount_services)?e.createNewClient():(e.client.name||e.setVisibleFlag("inputClientNameChecked",!1),rn(e.client.discount_materials)||e.setVisibleFlag("inputClientDiscMatChecked",!1),rn(e.client.discount_goods)||e.setVisibleFlag("inputClientDiscGoodChecked",!1),rn(e.client.discount_services)||e.setVisibleFlag("inputClientDiscServChecked",!1),e.client.phone.forEach((function(t,n){11!==t.number.replace(/[^0-9]/g,"").length&&e.setVisibleListFlag("inputClientPhoneChecked",n,!1)})))},save:function(){e.client.name&&e.view.inputClientPhoneChecked.every((function(e){return e}))&&rn(e.client.discount_materials)&&rn(e.client.discount_goods)&&rn(e.client.discount_services)?e.saveChangeClient():(e.client.name||e.setVisibleFlag("inputClientNameChecked",!1),rn(e.client.discount_materials)||e.setVisibleFlag("inputClientDiscMatChecked",!1),rn(e.client.discount_goods)||e.setVisibleFlag("inputClientDiscGoodChecked",!1),rn(e.client.discount_services)||e.setVisibleFlag("inputClientDiscServChecked",!1),e.client.phone.forEach((function(t,n){11!==t.number.replace(/[^0-9]/g,"").length&&e.setVisibleListFlag("inputClientPhoneChecked",n,!1)})))},delete:e.permissions.includes("delete_client")?function(){return e.deleteClient(!0)}:null,recover:e.permissions.includes("recover_client")?function(){return e.deleteClient(!1)}:null,close:function(){return e.setVisibleFlag("statusCreateNewClient",!1)},deleted:e.client.deleted})]})})})),Kn={changePaymentState:Gt,editCurrentClient:Se,changeClientState:hn,changeVisibleState:we},Jn=Object(s.b)((function(e){return{clients:e.client.clients,phone:e.filter.clientFilter.phone,view:e.view,client:e.order.client}}),Kn)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("listClientsOfOfPayments")||e.path.map((function(e){return e.id})).includes("clientInputBoxOfPayments")||c(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ze.jsxs)("div",{className:"w400 h52",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsxs)("div",{id:"clientInputBoxOfPayments",className:"orderInputBox",onClick:function(){return c(!0)},children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeClientState({filter_name:t.target.value})}}),Object(Ze.jsx)("div",{className:"simbolButton",onClick:function(){return e.changeVisibleState({statusCreateNewClient:!0})},children:"+"}),Object(Ze.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),i?Object(Ze.jsx)("div",{className:"listFilter",id:"listClientsOfOfPayments",children:e.clients.map((function(t){return Object(Ze.jsxs)("div",{className:"rowGropList",onClick:function(){c(!1),e.editCurrentClient(t),e.changePaymentState({client_id:t.id})},children:[Object(Ze.jsx)("div",{children:t.name}),Object(Ze.jsx)("div",{className:"orderDate",children:t.phone[0]?nn(t.phone[0].number):null})]},t.id)}))}):null]}),e.view.statusCreateNewClient?Object(Ze.jsx)(Yn,{}):null]})})),Xn={editClient:De},Qn=Object(s.b)((function(e){return{client:e.client,statusCreateNewClient:e.view.statusCreateNewClient}}),Xn)((function(e){return Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsxs)("div",{className:"clientCard",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("svg",{className:"icon-client",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"})}),Object(Ze.jsx)("span",{className:"clientCardName",onClick:e.edit,children:e.client.name})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("span",{className:"clientCardTitle",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),Object(Ze.jsxs)("span",{className:"clientCardText",children:[" ",e.client.phone[0]?nn(e.client.phone[0].number):null]})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("span",{className:"clientCardTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(Ze.jsx)("span",{className:"clientCardText",children:"000 (\u043a\u043b\u0438\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u0442 \u043d\u0430\u043c)"})]})]}),Object(Ze.jsx)("div",{className:"crossButtom",onClick:e.close,children:"\u2573"})]}),e.statusCreateNewClient?Object(Ze.jsx)(Yn,{}):null]})})),Zn={changePaymentState:Gt,setVisibleFlag:Ne},$n=Object(s.b)((function(e){return{payment:e.payment,inputPaymentSumChecked:e.view.inputPaymentSumChecked,cashboxes:e.cashbox.cashboxes}}),Zn)((function(e){var t=e.payment.cashbox_id?e.cashboxes.find((function(t){return t.id===e.payment.cashbox_id})).title:"",n=['\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b "'.concat(t,'"'),"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b","\u0412\u043d\u0435\u0441\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0443"],r=e.payment.outcome?e.payment.outcome:e.payment.income;return Object(Ze.jsx)("div",{className:"receiptBox",children:Object(Ze.jsx)("div",{className:"receipt mt15",children:Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"tae w80",children:"\u0421\u0443\u043c\u043c\u0430, \u0440\u0443\u0431."})]})}),Object(Ze.jsxs)("tbody",{children:[Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{children:e.payment.edit?e.payment.description:n[e.payment.direction]}),Object(Ze.jsx)("td",{className:"eal",children:e.payment.edit?Object(Ze.jsx)("div",{children:r}):Object(Ze.jsx)("input",{className:"w70",style:e.inputPaymentSumChecked?null:{borderColor:"red"},onChange:function(t){return e.changePaymentState(Object(b.a)({},2===e.payment.direction?"income":"outcome",t.target.value.replace(/[^0-9.,]/g,"")))},value:r,onBlur:function(){return e.setVisibleFlag("inputPaymentSumChecked",2===e.payment.direction?!!e.payment.income:!!e.payment.outcome)},disabled:"closed_order"===e.payment.context.type})})]}),Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{className:"tae",children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(Ze.jsx)("td",{className:"eal",children:Object(Ze.jsx)("div",{className:"sum",children:"".concat(r," \u0440\u0443\u0431")})})]})]})]})})})})),er=function(e){return e.invisible?null:Object(Ze.jsxs)("div",{className:"calandarTime",children:[Object(Ze.jsxs)("div",{className:"mtime",children:[Object(Ze.jsx)("div",{className:"hsm",children:new Date(e.current_date).getHours()}),Object(Ze.jsxs)("div",{className:"ssm",children:[Object(Ze.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setHours(new Date(e.current_date).getHours()+1))},children:"\u25b2"}),Object(Ze.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setHours(new Date(e.current_date).getHours()-1))},children:"\u25bc"})]})]}),":",Object(Ze.jsxs)("div",{className:"mtime",children:[Object(Ze.jsx)("div",{className:"hsm",children:new Date(e.current_date).getMinutes()}),Object(Ze.jsxs)("div",{className:"ssm",children:[Object(Ze.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setMinutes(new Date(e.current_date).getMinutes()+1))},children:"\u25b2"}),Object(Ze.jsx)("div",{onClick:function(){return e.func(new Date(e.current_date).setMinutes(new Date(e.current_date).getMinutes()-1))},children:"\u25bc"})]})]})]})},tr=function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"];return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"calendarNavi",children:[Object(Ze.jsx)("div",{className:"nextB",onClick:function(){return e.setCurrent_day(new Date(e.current_date.setMonth(e.current_date.getMonth()-1)))},children:"<"}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{className:"currMonth",onClick:function(){return e.setVisibleListMonth(!e.visibleListMonth)},children:[Object(Ze.jsx)("div",{children:a[e.current_date.getMonth()]}),Object(Ze.jsx)("div",{className:"gu",children:"\u1a06"})]}),i?Object(Ze.jsx)("input",{className:"optionFilterInput w30",autoFocus:!0,onChange:function(t){return function(t){var n=t.replace(/[^0-9]/g,"");t>9999&&(n=9999),t<0&&(n=0),e.setCurrent_day(new Date(e.current_date.setFullYear(n)))}(t.target.value)},value:e.current_date.getFullYear(),onBlur:function(){return c(!1)}}):Object(Ze.jsx)("div",{className:"pd5",onDoubleClick:function(){return c(!0)},children:e.current_date.getFullYear()}),Object(Ze.jsxs)("div",{className:"nextY",children:[Object(Ze.jsx)("div",{className:"gy",onClick:function(){return e.setCurrent_day(new Date(e.current_date.setFullYear(e.current_date.getFullYear()+1)))},children:"\u25b2"}),Object(Ze.jsx)("div",{className:"gy",onClick:function(){return e.setCurrent_day(new Date(e.current_date.setFullYear(e.current_date.getFullYear()-1)))},children:"\u25bc"})]})]}),Object(Ze.jsx)("div",{className:"nextB",onClick:function(){return e.setCurrent_day(new Date(e.current_date.setMonth(e.current_date.getMonth()+1)))},children:">"})]}),e.visibleListMonth?Object(Ze.jsx)("div",{className:"monthList",id:"monthList",children:a.map((function(t,n){return Object(Ze.jsx)("div",{className:"month",onClick:function(){e.setCurrent_day(new Date(e.current_date.setMonth(n))),e.setVisibleListMonth(!e.visibleListMonth)},children:t},n)}))}):null]})},nr=function(e){return e.invisible?null:Object(Ze.jsxs)("div",{id:"listCalendarOption",className:"listOptionsChoose",style:{width:e.width},children:[e.allDate?Object(Ze.jsx)("div",{className:"options",onClick:function(){e.func([0,0]),e.setListVisible(!1)},children:"\u0412\u0441\u0435 \u0432\u0440\u0435\u043c\u044f"}):null,Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setHours(0,0,0,0);var n=new Date;n.setHours(23,59,59,999),e.func([t,n]),e.setListVisible(!1)},children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setTime(t.getTime()-24*(t.getDay()-1||7)*60*60*1e3),t.setHours(0,0,0,0);var n=new Date;e.func([t,n]),e.setListVisible(!1)},children:"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setDate(1),t.setHours(0,0,0,0);var n=new Date;e.func([t,n]),e.setListVisible(!1)},children:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setMonth(0),t.setDate(1),t.setHours(0,0,0,0);var n=new Date;e.func([t,n]),e.setListVisible(!1)},children:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0433\u043e\u0434"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setTime(t.getTime()-24*((t.getDay()-1||7)+7)*60*60*1e3),t.setHours(0,0,0,0);var n=new Date;n.setDate(t.getDate()+6),n.setHours(23,59,59,999),e.func([t,n]),e.setListVisible(!1)},children:"\u041f\u0440\u043e\u0448\u043b\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){var t=new Date;t.setMonth(t.getMonth()-1),t.setDate(1),t.setHours(0,0,0,0);var n=new Date;n.setMonth(t.getMonth()+1),n.setDate(1),n.setTime(n.getTime()-864e5),n.setHours(23,59,59,999),e.func([t,n]),e.setListVisible(!1)},children:"\u041f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"}),Object(Ze.jsx)("div",{className:"options",onClick:function(){e.setListVisible(!1),e.setVisibleCalendar(!0)},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0430\u0442\u044b"})]})},rr=function(e){var t=Object(r.useState)(new Date),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(it.a)(d,2),m=u[0],p=u[1],h=Object(r.useState)(0),b=Object(it.a)(h,2),j=b[0],_=b[1],f=Object(r.useState)(0),v=Object(it.a)(f,2),O=v[0],g=v[1],x=Object(r.useState)(!1),y=Object(it.a)(x,2),E=y[0],N=y[1],w=function(e){e.path.map((function(e){return e.id})).includes("monthList")||o&&l(!1),e.path.map((function(e){return e.id})).includes("calendar")||m&&p(!1),e.path.map((function(e){return e.id})).includes("listCalendarOption")||E&&N(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",w),function(){window.removeEventListener("click",w)}}));var k=new Date(i);k.setDate(1),k.setTime(k.getTime()-24*(k.getDay()||7)*60*60*1e3);for(var C=[],S=0;S<42;S++)C[S]=new Date(k.getTime()+864e5),k.setTime(k.getTime()+864e5);var T=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},F=function(t){var n="calendarDay",r=t.getMonth()===i.getMonth()?"":"calgr";if(e.range){if(e.current_date&&e.current_date[0]&&e.current_date[1])return[n,r,T(new Date(1e3*e.current_date[0]),t)||T(new Date(1e3*e.current_date[1]),t)?"settedDay":"",e.current_date[0]<t/1e3&&t/1e3<e.current_date[1]?"settedSecondDay":""].join(" ");return[n,r,T(j||new Date(0),t)?"settedDay":"",function(e){return!(!j||!O)&&(j/1e3<e/1e3&&e/1e3<=O/1e3||j/1e3>e/1e3&&e/1e3>=O/1e3)}(t)?"settedSecondDay":""].join(" ")}return[n,r,T(new Date(e.current_date),t)?"settedDay":""].join(" ")},A=e.range?e.current_date&&e.current_date.some((function(e){return e}))?function(e){var t=new Date(1e3*e[0]).toLocaleString("ru",tn).replace("\u0433.,",""),n=new Date(1e3*e[1]).toLocaleString("ru",tn).replace("\u0433.,","");return"".concat(t," - ").concat(n)}(e.current_date):"\u041b\u044e\u0431\u0430\u044f":an(e.current_date/1e3);return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:e.className,style:{width:e.width},children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsxs)("div",{className:"dateContaner",onClick:function(){e.range?N(!0):p(!0)},children:[Object(Ze.jsx)(ct,{className:"icon-s2 mlr5",icon:K,color:"gray"}),Object(Ze.jsx)("div",{children:A})]}),Object(Ze.jsx)(nr,{width:e.width,invisible:!E,allDate:e.allDate,setListVisible:N,setVisibleCalendar:p,func:function(t){return e.func(t)}}),m&&!e.disabled?Object(Ze.jsxs)("div",{className:e.showTop?"calendar_top":"calendar_down",id:"calendar",children:[Object(Ze.jsx)(tr,{func:function(t){return e.func(t)},current_date:i,setCurrent_day:c,setVisibleListMonth:l,visibleListMonth:o}),Object(Ze.jsx)("div",{className:"row",children:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"].map((function(e,t){return Object(Ze.jsx)("div",{className:"calendarWeekDay",children:e},t)}))}),Object(Ze.jsx)("div",{className:"calendarDays",children:C.map((function(t,n){return Object(Ze.jsx)("div",{className:F(t),onClick:function(){return function(t){e.range?j?(e.func(function(e){var t=e.sort((function(e,t){return e>t?1:-1}));return t[0].setHours(0,0,0,0),t[1].setHours(23,59,59,999),t}([j,t])),_(0)):(e.func([0,0]),_(t)):(e.func(t),c(new Date(t)))}(t)},onMouseOver:function(){return g(t)},onMouseOut:function(){return g(0)},children:t.getDate()},n)}))}),Object(Ze.jsx)(er,{func:function(t){return e.func(t)},current_date:e.current_date,invisible:e.range})]}):null]})},ir={changePaymentState:Gt,changeVisibleState:we,addClients:bn,addItemPayments:He,addPaymentTag:function(e){return{type:"ADD_PAYMENT_TAG",tag:e}},deletePaymentTag:function(e){return{type:"DELETE_PAYMENT_TAG",idx:e}},createPayment:function(e){var t=ve.getState(),n=Math.round(Date.now()/1e3),r=t.cashbox.cashboxes.find((function(e){return e.id===t.payment.cashbox_id})).title,i=t.payment.target_cashbox_id?t.cashbox.cashboxes.find((function(e){return e.id===t.payment.target_cashbox_id})).title:"",c='\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u0438\u0437 \u043a\u0430\u0441\u0441\u044b "'.concat(r,'" \u0432 \u043a\u0430\u0441\u0441\u0443 "').concat(i,'".'),a={cashflow_category:t.payment.direction?t.data.item_payments.find((function(e){return e.id===t.payment.cashflow_category})).title:null,description:t.payment.direction?t.payment.description:c+t.payment.description,deposit:t.cashbox.cashboxes.find((function(e){return e.id===t.payment.cashbox_id})).balance+t.payment.income-t.payment.outcome,income:parseFloat(t.payment.income.toString().replace(",","."))||0,outcome:-parseFloat(t.payment.outcome.toString().replace(",","."))||0,direction:t.payment.direction,deleted:!1,can_print_fiscal:t.payment.can_print_fiscal,is_fiscal:t.payment.is_fiscal,created_at:n,custom_created_at:t.payment.custom_created_at||n,tags:t.payment.tags,relation_type:t.payment.relation_type,cashbox_id:t.payment.cashbox_id?t.payment.cashbox_id:null,client_id:t.payment.client_id?t.payment.client_id:null,employee_id:t.payment.employee_id,order_id:t.payment.order_id?t.payment.order_id:null,target_cashbox_id:t.payment.direction?null:t.payment.target_cashbox_id};if("payment"===e.type&&(a.filter_cashboxes=Vt(),a.filter_payments={custom_created_at:t.payment.filter_created_at,cashbox_id:t.cashbox.current_cashbox.id,tags:t.payment.filter_tags.length?t.payment.filter_tags:null,deleted:null}),"order"===e.type){var s=gt();s.update_order=t.order.edit,a.filter_order=s}if("closed_order"===e.type){var o=gt();o.update_order=t.order.edit,a.closed_order={order_id:e.order_id,status_id:e.status_id,filter:o}}var l=Oe(a);return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(t.data.url_server+"/payments",l).then((function(e){return e.json()})).then((function(n){n.success?("payment"===e.type&&(r({type:"CHANGE_PAYMENT_STATE",data:{payments:n.payments}}),r({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:n.cashboxes}})),"order"===e.type&&(r({type:"EDIT_ORDER",order:n.order}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:n.orders,events:n.events}})),"closed_order"===e.type&&(t.order.edit&&(r({type:"EDIT_ORDER",order:n.order}),r({type:"CHANGE_ORDER_STATE",data:{events:n.events}})),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:n.orders,count:n.orders_count}}),r({type:"CHANGE_FILTER_STATE",data:{badges:n.badges}})),Pe(r,"alert-success","\u041f\u043b\u0430\u0442\u0435\u0436 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(n.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"RESET_PAYMENTS"});case 6:return n.next=8,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1,statusPaymentsEditor:!1}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPayments:Ht,changeStatus:yt,refreshDataOrder:Re,changeStatusMenuVisible:xe},cr=Object(s.b)((function(e){return{view:e.view,payment:e.payment,permissions:e.data.user.role.permissions,filter:e.filter,client:e.client,cashboxes:e.cashbox.cashboxes,current_branch_id:e.branch.current_branch.id,item_payments:e.data.item_payments,employees:e.employee.employees,user_id:e.data.user.id,current_cashbox:e.cashbox.current_cashbox,order_edit:e.order.edit}}),ir)((function(e){var t=function(){e.changeVisibleState({inputPaymentSumChecked:!0,inputPaymentCashboxChecked:!0,inputPaymentDescChecked:!0,inputPaymentCashflowChecked:!0,inputPaymentEmployeeChecked:!0,statusPaymentsEditor:!1}),e.resetPayments()},n=function(e){e.path.map((function(e){return e.id})).includes("paymentsEditorWiondow")||e.path.map((function(e){return e.id})).includes("createNewOrder")||e.path.map((function(e){return e.id})).includes("344")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name,e.client.filter_phone]);var i=Object(r.useState)(!1),c=Object(it.a)(i,2),a=c[0],s=c[1],o=e.cashboxes.filter((function(t){return t.type===e.payment.current_type&&(e.payment.direction||t.id!==e.payment.cashbox_id)}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow wmn500",id:"paymentsEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:["\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433","\u0420\u0430\u0441\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433","\u041f\u0440\u0438\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433"][e.payment.direction]}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(_n,{className:"mt15 mr-rg-20",title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f",name:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435","\u0417\u0430\u0434\u0430\u043d\u043d\u043e\u0435"],func1:function(){s(!1),e.changePaymentState({custom_created_at:null})},func2:function(){s(!0),e.changePaymentState({custom_created_at:parseInt(new Date/1e3)})},checked:!0,disabled:!e.permissions.includes("backdating")}),Object(Ze.jsx)(rr,{className:"h31",width:"250px",func:function(t){return e.changePaymentState({custom_created_at:parseInt(t/1e3)})},current_date:1e3*e.payment.custom_created_at,invisible:!a})]}),e.payment.direction?e.payment.client_id?Object(Ze.jsx)(Qn,{edit:function(){return e.changeVisibleState({statusCreateNewClient:!0})},close:function(){return e.changeVisibleState({client_id:0})}}):Object(Ze.jsx)(Jn,{}):null,Object(Ze.jsx)($n,{}),Object(Ze.jsxs)("div",{className:"row mt15 al-itm-fs",children:[Object(Ze.jsx)(_n,{className:"",title:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",name:["\u041d\u0430\u043b.","\u0411\u0435\u0437\u043d\u0430\u043b."],func1:function(){var t;e.changePaymentState((t={},Object(b.a)(t,e.payment.direction?"cashbox_id":"target_cashbox_id",0),Object(b.a)(t,"current_type",0),t))},func2:function(){var t;e.changePaymentState((t={},Object(b.a)(t,e.payment.direction?"cashbox_id":"target_cashbox_id",0),Object(b.a)(t,"current_type",1),t))},checked:!e.current_cashbox.type}),Object(Ze.jsx)(xn,{id:20,title:"\u041a\u0430\u0441\u0441\u0430",className:"ml10 h52",list:o,setElement:function(t){return e.changePaymentState(Object(b.a)({},e.payment.direction?"cashbox_id":"target_cashbox_id",t))},current_id:e.payment.direction?e.payment.cashbox_id:e.payment.target_cashbox_id,width:"250px",checkedFlag:"inputPaymentCashboxChecked",checked:e.view.inputPaymentCashboxChecked,disabled:e.payment.deleted})]}),Object(Ze.jsx)(wn,{className:"mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changePaymentState({description:t.target.value})},value:e.payment.description,checkedFlag:"inputPaymentDescChecked",checked:e.view.inputPaymentDescChecked,redStar:!0,disabled:e.payment.deleted}),Object(Ze.jsx)(xn,{id:41,title:"\u0421\u0442\u0430\u0442\u044c\u044f",className:"mt15 h52",list:e.item_payments.filter((function(t){return t.direction===e.payment.direction})),field:"cashflow_category",setElement:function(t){return e.changePaymentState({cashflow_category:t})},current_id:e.payment.cashflow_category,width:"250px",checkedFlag:"inputPaymentCashflowChecked",checked:e.view.inputPaymentCashflowChecked,disabled:e.payment.deleted,invisible:!e.payment.direction}),Object(Ze.jsx)(xn,{id:22,title:"\u041a\u0430\u0441\u0441\u0438\u0440",className:"mt15 h52",list:e.employees.filter((function(e){return!e.deleted})),field:"employee_id",setElement:function(t){return e.changePaymentState({employee_id:t})},current_id:e.payment.employee_id,width:"250px",employee:!0,checkedFlag:"inputPaymentEmployeeChecked",checked:e.view.inputPaymentEmployeeChecked,disabled:!e.permissions.includes("choose_emploees")}),Object(Ze.jsx)(On,{className:"mt15",tags:e.payment.tags,addTag:e.addPaymentTag,daleteTag:e.deletePaymentTag})]}),Object(Ze.jsx)(jn,{edit:e.payment.edit,create:function(){(e.payment.income||e.payment.outcome)&&(e.payment.cashbox_id&&e.payment.direction||e.payment.target_cashbox_id&&!e.payment.direction)&&e.payment.description&&(e.payment.cashflow_category||!e.payment.direction)&&e.payment.employee_id?e.createPayment(e.payment.context):(e.payment.income||e.payment.outcome||e.changeVisibleState({inputPaymentSumChecked:!1}),e.payment.cashbox_id&&e.payment.direction||e.payment.target_cashbox_id&&!e.payment.direction||e.changeVisibleState({inputPaymentCashboxChecked:!1}),e.payment.description||e.changeVisibleState({inputPaymentDescChecked:!1}),e.payment.cashflow_category||e.changeVisibleState({inputPaymentCashflowChecked:!1}),e.payment.employee_id||e.changeVisibleState({inputPaymentEmployeeChecked:!1}))},delete:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!0)}:null,recover:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!1)}:null,close:t,deleted:e.payment.deleted})]})})})),ar={setVisibleFlag:Ne},sr=Object(s.b)((function(e){return{order:e.order,current_branch:e.branch.current_branch,statusStatusList:e.view.statusStatusList,statusPaymentsEditor:e.view.statusPaymentsEditor}}),ar)((function(e){var t=e.current_branch?Object(Ze.jsx)(ct,{icon:e.current_branch.icon,color:e.current_branch.color,className:"icon-sm8"}):null,n=e.order.urgent?Object(Ze.jsx)(ct,{icon:"M10.031 32c-2.133-4.438-0.997-6.981 0.642-9.376 1.795-2.624 2.258-5.221 2.258-5.221s1.411 1.834 0.847 4.703c2.493-2.775 2.963-7.196 2.587-8.889 5.635 3.938 8.043 12.464 4.798 18.783 17.262-9.767 4.294-24.38 2.036-26.027 0.753 1.646 0.895 4.433-0.625 5.785-2.573-9.759-8.937-11.759-8.937-11.759 0.753 5.033-2.728 10.536-6.084 14.648-0.118-2.007-0.243-3.392-1.298-5.312-0.237 3.646-3.023 6.617-3.777 10.27-1.022 4.946 0.765 8.568 7.555 12.394z",color:"red",className:"icon-sm8"}):null,r=!e.order.overdue&&e.order.status.group<4?Object(Ze.jsx)(ct,{icon:q,color:"#f0ad4e",className:"icon-sm8"}):null;return Object(Ze.jsxs)("div",{className:"createNewTitle",children:[e.order.edit?Object(Ze.jsxs)("div",{className:"statusListOrder",children:[Object(Ze.jsxs)("span",{children:["\u0417\u0430\u043a\u0430\u0437 \u2116 ",e.order.id_label]}),Object(Ze.jsxs)("span",{className:"ml10 fsz12",children:[Object(Ze.jsxs)("button",{id:"statusListOrderForm",className:"statusButtom",type:"button",style:{backgroundColor:e.order.status.color},onClick:function(){return e.setVisibleFlag("statusStatusList",!0)},children:[e.order.status.name,Object(Ze.jsx)("span",{className:"statusSeparate",children:" | \u1a06"})]}),e.statusStatusList?Object(Ze.jsx)(Yt,{order:e.order}):null]}),Object(Ze.jsx)("span",{className:"ml10",children:t}),Object(Ze.jsx)("span",{className:"ml5",children:n}),Object(Ze.jsx)("span",{className:"ml5",children:r})]}):"\u041d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",e.statusPaymentsEditor?Object(Ze.jsx)(cr,{}):null]})})),or={changeOrderFormS:Ce},lr=Object(s.b)((function(e){return{employees:e.employee.employees,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,user:e.data.user,status_group:e.order.status.group}}),or)((function(e){var t=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_managers")}));t=t.some((function(t){return t.id===e.manager_id}))||!e.manager_id?t:t.concat([e.employees.find((function(t){return t.id===e.manager_id}))]);var n=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_engineers")}));return n=n.some((function(t){return t.id===e.engineer_id}))||!e.engineer_id?n:n.concat([e.employees.find((function(t){return t.id===e.engineer_id}))]),Object(Ze.jsxs)("div",{className:"boxAssingEmployee",children:[Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(xn,{id:17,list:t,setElement:e.changeOrderFormS,current_id:e.manager_id?e.manager_id:0,width:"250px",className:"pd-lf-5",field:"manager_id",employee:!0,disabled:!e.user.role.permissions.includes("assing_emploees")||e.status_group>3})})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(xn,{id:18,list:n,setElement:e.changeOrderFormS,current_id:e.engineer_id?e.engineer_id:0,width:"250px",className:"pd-lf-5",field:"engineer_id",employee:!0,disabled:!e.user.role.permissions.includes("assing_emploees")||e.status_group>3})})]})]})})),dr={editClient:De,changeOrderFormS:Ce},ur=Object(s.b)((function(e){return{client:e.order.client,statusCreateNewClient:e.view.statusCreateNewClient}}),dr)((function(e){return Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle"}),Object(Ze.jsxs)("div",{className:"clientCard",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("svg",{className:"icon-client",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"})}),Object(Ze.jsx)("span",{className:"clientCardName",onClick:function(){return e.editClient(e.client.id)},children:e.client.name})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("span",{className:"clientCardTitle",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"}),Object(Ze.jsxs)("span",{className:"clientCardText",children:[" ",e.client.phone[0]?nn(e.client.phone[0].number):null]})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("span",{className:"clientCardTitle",children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(Ze.jsx)("span",{className:"clientCardText",children:"000 (\u043a\u043b\u0438\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u0442 \u043d\u0430\u043c)"})]})]}),Object(Ze.jsx)("div",{className:"crossButtom",onClick:function(){return e.changeOrderFormS({},"client")},children:"\u2573"})]}),e.statusCreateNewClient?Object(Ze.jsx)(Yn,{}):null]})})),mr={setVisibleFlag:Ne,changeOrderFormS:Ce,changeClientState:hn,changeVisibleState:we},pr=Object(s.b)((function(e){return{clients:e.client.clients,phone:e.client.filter_phone,name:e.client.filter_name,view:e.view,client:e.order.client}}),mr)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1],d=function(e){e.path.map((function(e){return e.id})).includes("listFilterOfOrOrder")||e.path.map((function(e){return e.id})).includes("orderInputBoxOfOrder")||i&&c(!1)},u=function(e){e.path.map((function(e){return e.id})).includes("orderInputBoxOfOrderPhone")||e.path.map((function(e){return e.id})).includes("listFilterOfOrOrderPhone")||o&&l(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",d),window.addEventListener("click",u),function(){window.removeEventListener("click",d),window.removeEventListener("click",u)}})),Object(Ze.jsxs)("div",{className:"cleintForm",children:[Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:["\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsxs)("div",{id:"orderInputBoxOfOrder",className:"orderInputBox",onClick:function(){return c(!0)},style:e.view.checkedOrderClient?{borderColor:"red"}:null,children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeClientState({filter_name:t.target.value})},value:e.name}),Object(Ze.jsx)("div",{className:"simbolButton",onClick:function(){return e.changeVisibleState({statusCreateNewClient:!0})},children:"+"}),Object(Ze.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),e.view.checkedOrderClient?Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}):null,i?Object(Ze.jsx)("div",{className:"listFilter",id:"listFilterOfOrOrder",children:e.clients.map((function(t){return Object(Ze.jsxs)("div",{className:"rowGropList",onClick:function(){e.changeOrderFormS(t,"client"),c(!1)},children:[Object(Ze.jsx)("div",{children:t.name}),Object(Ze.jsx)("div",{className:"orderDate",children:t.phone[0]?nn(t.phone[0].number):null})]},t.id)}))}):null]})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsxs)("div",{id:"orderInputBoxOfOrderPhone",className:"orderInputBox",onClick:function(){return l(!0)},children:[Object(Ze.jsx)(En,{className:"w100",inputClassName:"optionFilterInput",onChange:function(t){return e.changeClientState({filter_phone:t})},value:e.phone,isPhone:!0}),Object(Ze.jsx)("div",{className:"simbolButton",onClick:function(){return e.changeVisibleState({statusCreateNewClient:!0})},children:"+"}),Object(Ze.jsx)("div",{className:"simbolButton",children:"\u1a06"})]}),o?Object(Ze.jsx)("div",{className:"listFilter",id:"listFilterOfOrOrderPhone",children:e.clients.map((function(t){return Object(Ze.jsxs)("div",{className:"rowGropList",onClick:function(){e.changeOrderFormS(t,"client"),l(!1)},children:[Object(Ze.jsx)("div",{children:t.name}),Object(Ze.jsx)("div",{className:"orderDate",children:t.phone[0]?nn(t.phone[0].number):null})]},t.id)}))}):null]})]}),e.view.statusCreateNewClient?Object(Ze.jsx)(Yn,{}):null]})})),hr={changeOrderFormS:Ce},br=Object(s.b)((function(e){return{order_type:e.data.order_type,order:e.order,permissions:e.data.user.role.permissions}}),hr)((function(e){return Object(Ze.jsxs)("div",{className:"formRow mt15",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(xn,{id:17,list:e.order_type,setElement:e.changeOrderFormS,current_id:e.order.order_type_id,width:"150px",className:"pd-lf-5",field:"order_type_id",disabled:!e.permissions.includes("edit_info_orders")||e.order.status_group>3})})]})})),jr={changeVisibleState:we},_r=Object(s.b)((function(e){return{}}),jr)((function(e){return Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:[e.title,e.checkedFlag?Object(Ze.jsx)("span",{className:"redStar",children:"*"}):null]}),Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsx)("input",{className:"textInput",name:e.name,onChange:e.onChange,value:e.value,onBlur:e.checkedFlag?function(t){return e.changeVisibleState(Object(b.a)({},e.checkedFlag,!!t.target.value))}:null,style:e.checkedFlag&&!e.checked?{borderColor:"red"}:null,disabled:e.disabled}),e.checkedFlag&&!e.checked?Object(Ze.jsx)("div",{className:"errorMassageInput",children:e.errorMassage?e.errorMassage:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}):null]})]})})),fr={createEquipmentBrand:function(e){var t=ve.getState(),n=Oe({title:e,equipment_type_id:t.order.kindof_good.id,branches:t.branch.branches.map((function(e){return e.id})),deleted:!1,filter:{title:e,equipment_type_id:t.book.equipment_type.id,deleted:t.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_brand",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),Pe(r,"alert-success","\u0411\u0440\u0435\u043d\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u0435\u043d\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeVisibleState:we,addEquipmentBrand:St,changeBookState:Nt,changeOrderState:ft},vr=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),fr)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_type).length&&e.addEquipmentBrand()}),[e.book.equipment_type,e.book.filter_brand]);e.order.edit;var d=!Object.values(e.book.equipment_type).length,u=!!Object.values(e.order.brand).length,m=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfBrand")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfBrand")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",m),function(){window.removeEventListener("click",m)}}));return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("button",{id:"optionsOrderTextOfBrand",style:e.view.checkedOrderBrand?null:{borderColor:"red"},className:d?"optionsUnavaliable":"optionsFilterText",onClick:function(){return c(!0)},disabled:d||u,children:[Object(Ze.jsx)("input",{className:d?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookState({filter_brand:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0431\u0440\u0435\u043d\u0434",value:u?e.order.brand.title:e.book.filter_brand,disabled:d||u}),u&&e.permissions.includes("edit_info_orders")?Object(Ze.jsx)("div",{onClick:function(){e.changeOrderState({brand:{},subtype:{},model:{}}),e.changeBookState({equipment_brand:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:Q,className:"icon-s2"})]}),e.view.checkedOrderBrand?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i&&!d?Object(Ze.jsxs)("div",{className:"listFilter",id:"listOrderOfBrand",children:[e.book.equipment_brands.map((function(t){return o?null:Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeOrderState({brand:t}),e.changeBookState({equipment_brand:t,filter_brand:""}),c(!1),l(!1),e.changeVisibleState({checkedOrderBrand:!0})}(t)},children:t.title},t.id)})),Object(Ze.jsx)("div",{className:"btmsts",children:o?Object(Ze.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onChange:function(t){return e.changeBookState({filter_brand:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentBrand(t.target.value),l(!1))},onBlur:function(){return l(!1)},value:e.book.filter_brand,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ze.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0440\u0435\u043d\u0434"})})]}):null]})})),Or={createEquipmentType:function(e){var t=ve.getState(),n=Oe({title:e,icon:t.book.icon,url:t.book.url,branches:t.branch.branches.map((function(e){return e.id})),deleted:!1,filter:{title:e,deleted:t.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_type",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),Pe(r,"alert-success","\u0422\u0438\u043f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addEquipmentType:Ct,changeBookState:Nt,changeOrderState:ft,changeVisibleState:we},gr=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),Or)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){e.addEquipmentType()}),[e.book.filter_type]);var d=!!Object.values(e.order.kindof_good).length,u=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfGroup")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfGroup")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",u),function(){window.removeEventListener("click",u)}}));return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("button",{className:"optionsFilterText",id:"optionsOrderTextOfGroup",onClick:function(){return c(!0)},disabled:d,style:e.view.checkedOrderKindofGood?null:{borderColor:"red"},children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeBookState({filter_type:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443",value:d?e.order.kindof_good.title:e.book.filter_type,disabled:d}),d&&e.permissions.includes("edit_info_orders")?Object(Ze.jsx)("div",{onClick:function(){e.changeOrderState({kindof_good:{},brand:{},subtype:{},model:{}}),e.changeBookState({equipment_type:{}}),e.changeVisibleState({checkedOrderKindofGood:!0})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:Q,className:"icon-s2"})]}),e.view.checkedOrderKindofGood?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i?Object(Ze.jsxs)("div",{className:"listFilter",id:"listOrderOfGroup",children:[e.book.equipment_types.map((function(t){return o?null:Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeOrderState({kindof_good:t}),e.changeBookState({filter_type:"",equipment_type:t}),c(!1),l(!1)}(t)},children:t.title},t.id)})),Object(Ze.jsx)("div",{className:"btmsts",children:o?Object(Ze.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onChange:function(t){return e.changeBookState({filter_type:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentType(t.target.value),l(!1))},onBlur:function(){return l(!1)},value:e.book.filter_type,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ze.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0438\u043f"})})]}):null]})})),xr={createEquipmentModel:function(e){var t=ve.getState(),n=Oe({title:e,equipment_subtype_id:t.order.subtype.id,branches:t.branch.branches.map((function(e){return e.id})),deleted:!1,filter:{title:e,equipment_subtype_id:t.book.equipment_subtype.id,deleted:t.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_model",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count}),Pe(r,"alert-success","\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeOrderState:ft,addEquipmentModel:Ft,changeBookState:Nt},yr=Object(s.b)((function(e){return{order:e.order,book:e.book,permissions:e.data.user.role.permissions}}),xr)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_subtype).length&&e.addEquipmentModel()}),[e.book.equipment_subtype,e.book.filter_model]);var d=!Object.values(e.book.equipment_subtype).length,u=!!Object.values(e.order.model).length,m=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfModel")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfModel")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",m),function(){window.removeEventListener("click",m)}}));return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("button",{className:d?"optionsUnavaliable":"optionsFilterText",id:"optionsOrderTextOfModel",onClick:function(){return c(!0)},disabled:d||u,children:[Object(Ze.jsx)("input",{className:d?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookState({filter_model:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u044c",value:u?e.order.model.title:e.book.filter_model,disabled:d||u}),u&&e.permissions.includes("edit_info_orders")?Object(Ze.jsx)("div",{onClick:function(){e.changeOrderState({model:{}}),e.changeBookState({equipment_model:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:Q,className:"icon-s2"})]}),i&&!d?Object(Ze.jsxs)("div",{className:"listFilter",id:"listOrderOfModel",children:[e.book.equipment_models.map((function(t){return o?null:Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeOrderState({model:t}),e.changeBookState({equipment_model:t,filter_model:""}),c(!1),l(!1)}(t)},children:t.title},t.id)})),Object(Ze.jsx)("div",{className:"btmsts",children:o?Object(Ze.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onChange:function(t){return e.changeBookState({filter_model:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.createEquipmentModel(t.target.value),l(!1))},onBlur:function(){return l(!1)},value:e.book.filter_model,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ze.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"})})]}):null]})})),Er=Object(s.b)((function(e){return{}}),{})((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"rowGropList",onClick:e.onClick,onMouseOver:function(){return c(!0)},onMouseOut:function(){return c(!1)},children:e.subtype.title}),i&&e.subtype.url?Object(Ze.jsx)("div",{className:"subtypePicture",children:Object(Ze.jsx)("img",{className:"setSubtypeImg",src:"".concat("","/").concat(e.subtype.url)})}):null]})})),Nr={cteateEquipmentSubtype:function(e){var t=ve.getState(),n=Oe({title:e,equipment_brand_id:t.order.brand.id,branches:t.branch.branches.map((function(e){return e.id})),deleted:!1,filter:{title:e,equipment_brand_id:t.book.equipment_brand.id,deleted:t.book.showDeleted}});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/equipment_subtype",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),Pe(r,"alert-success","\u041c\u043e\u0434\u0443\u043b\u044c/\u0441\u0435\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043c\u043e\u0434\u0443\u043b\u044f/\u0441\u0435\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeVisibleState:we,addEquipmentSubtype:Tt,changeBookState:Nt,changeOrderState:ft},wr=Object(s.b)((function(e){return{order:e.order,view:e.view,book:e.book,permissions:e.data.user.role.permissions}}),Nr)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){Object.values(e.book.equipment_brand).length&&e.addEquipmentSubtype()}),[e.book.equipment_brand,e.book.filter_subtype]);var d=!Object.values(e.book.equipment_brand).length,u=!!Object.values(e.order.subtype).length,m=function(e){e.path.map((function(e){return e.id})).includes("listOrderOfSubtype")||e.path.map((function(e){return e.id})).includes("optionsOrderTextOfSubtype")||i&&(c(!1),l(!1))};Object(r.useEffect)((function(){return window.addEventListener("click",m),function(){window.removeEventListener("click",m)}}));return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("button",{className:d?"optionsUnavaliable":"optionsFilterText",id:"optionsOrderTextOfSubtype",onClick:function(){return c(!0)},disabled:d||u,style:e.view.checkedOrderSubtype?null:{borderColor:"red"},children:[Object(Ze.jsx)("input",{className:d?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeBookState({filter_subtype:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e",value:u?e.order.subtype.title:e.book.filter_subtype,disabled:d||u}),u&&e.permissions.includes("edit_info_orders")?Object(Ze.jsx)("div",{onClick:function(){e.changeOrderState({subtype:{},model:{}}),e.changeBookState({equipment_subtype:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:Q,className:"icon-s2"})]}),e.view.checkedOrderSubtype?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}),i&&!d?Object(Ze.jsxs)("div",{className:"listFilter",id:"listOrderOfSubtype",children:[e.book.equipment_subtypes.map((function(t){return o?null:Object(Ze.jsx)(Er,{subtype:t,onClick:function(){return function(t){e.changeOrderState({subtype:t}),e.changeBookState({equipment_subtype:t,filter_subtype:""}),c(!1),l(!1),e.changeVisibleState({checkedOrderSubtype:!0})}(t)}},t.id)})),Object(Ze.jsx)("div",{className:"btmsts",children:o?Object(Ze.jsx)("input",{className:"optionFilterInput",autoFocus:!0,onChange:function(t){return e.changeBookState({filter_subtype:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.cteateEquipmentSubtype(t.target.value),l(!1))},onBlur:function(){return l(!1)},value:e.book.filter_subtype,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0435\u0442\u0435 Enter"}):Object(Ze.jsx)("div",{className:"btnstsTitle",onClick:function(){return l(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e"})})]}):null]})})),kr={changeOrderForm:function(e,t,n){return{type:"CHANGE_ORDER_FORM",idx:e,field:t,value:n}},addAnotherEquipment:function(){return{type:"ADD_ANOTHER_EQUIPMENT"}},deleteDevice:function(e){return{type:"DELETE_DEVICE",idx:e}},changeOrderFormS:Ce},Cr=Object(s.b)((function(e){return{order:e.order,view:e.view,permissions:e.data.user.role.permissions}}),kr)((function(e){return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"formRow mt15",children:[Object(Ze.jsx)("div",{className:"optionsTitle"}),Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u0418\u0437\u0434\u0435\u043b\u0438e \u0438 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c"})]}),Object(Ze.jsxs)("div",{className:"orderDevice",children:[Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:["\u0422\u0438\u043f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(gr,{idx:0})})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:["\u0411\u0440\u0435\u043d\u0434",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(vr,{idx:0})})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsxs)("div",{className:"optionsTitle",children:["\u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(wr,{idx:0})})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(yr,{idx:0})})]}),Object(Ze.jsx)(_r,{idx:23,className:"formRow",title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u044c",name:"malfunction",onChange:function(t){return e.changeOrderFormS(t.target.value,"malfunction")},value:e.order.malfunction,checkedFlag:"inputMalfunctionChecked",checked:e.view.inputMalfunctionChecked,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ze.jsx)(_r,{className:"formRow",title:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f",name:"packagelist",onChange:function(t){return e.changeOrderFormS(t.target.value,"packagelist")},value:e.order.packagelist,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ze.jsx)(_r,{className:"formRow",title:"\u0412\u043d\u0435\u0448\u0438\u043d\u0439 \u0432\u0438\u0434",name:"appearance",onChange:function(t){return e.changeOrderFormS(t.target.value,"appearance")},value:e.order.appearance,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0421\u0440\u043e\u0447\u043d\u043e"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsxs)("div",{className:"checkbox pd-tb-5 al-itm-fs",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(t){return e.changeOrderFormS(t.target.checked,"urgent")},checked:e.order.urgent,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ze.jsx)("label",{})]})})]})]})]})})),Sr={changeOrderFormS:Ce},Tr=Object(s.b)((function(e){return{ad_campaign:e.data.ad_campaign,order:e.order,permissions:e.data.user.role.permissions}}),Sr)((function(e){return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0420\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(xn,{id:14,list:e.ad_campaign,setElement:e.changeOrderFormS,field:"ad_campaign_id",current_id:e.order.ad_campaign_id,width:"250px",disabled:!e.permissions.includes("edit_info_orders")})})]}),Object(Ze.jsx)(Cr,{}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle"}),Object(Ze.jsx)("div",{className:"orderFormTitle mt15",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})]}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u0440\u0438\u0435\u043c\u0449\u0438\u043a\u0430"}),Object(Ze.jsx)("div",{className:"blockImput mh",children:Object(Ze.jsx)("textarea",{className:"textInput",name:"manager_notes",onChange:function(t){return e.changeOrderFormS(t.target.value,"manager_notes")},value:e.order.manager_notes,disabled:!e.permissions.includes("edit_info_orders")})})]}),Object(Ze.jsx)(_r,{className:"formRow",title:"\u041e\u0440\u0438\u0435\u0442\u043d\u0438\u0440\u043e\u0432\u0430\u0447\u043d\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",name:"estimated_cost",onChange:function(t){return e.changeOrderFormS(t.target.value.replace(/[^0-9]/g,""),"estimated_cost")},value:e.order.estimated_cost,disabled:!e.permissions.includes("edit_info_orders")}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle",children:"\u0414\u0430\u0442\u0430 \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)(rr,{func:function(t){return e.changeOrderFormS(parseInt(t/1e3),"estimated_done_at")},current_date:1e3*e.order.estimated_done_at,disabled:e.order.status.group>3||!e.permissions.includes("edit_info_orders"),showTop:!0})})]})]})})),Fr=Object(s.b)((function(e){return{order:e.order,permissions:e.data.user.role.permissions}}),null)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)(br,{}),Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("div",{className:"optionsTitle"}),Object(Ze.jsx)("div",{className:"orderFormTitle",children:"\u041a\u043b\u0438\u0435\u043d\u0442"})]}),e.permissions.includes("see_client")?Object.values(e.order.client).length?Object(Ze.jsx)(ur,{}):Object(Ze.jsx)(pr,{}):null,Object(Ze.jsx)(Tr,{}),Object(Ze.jsx)(lr,{})]})}));function Ar(e,t){return{type:"CHANGE_OPERATION_FORM",field:t,value:e}}function Pr(){return{type:"RESET_OPERATION"}}function Dr(e){var t=ve.getState(),n=Oe({id:t.operation.edit,order_id:t.order.edit,deleted:e});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return r.next=4,fetch(t.data.url_server+"/operations",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"EDIT_ORDER",order:t.data}),i({type:"CHANGE_ORDER_STATE",data:{events:t.events||[]}}),Pe(i,"alert-success",e?"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return r.next=6,i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}var Rr={setVisibleFlag:Ne,resetOperation:Pr,changeOperationForm:Ar,createCustomOperation:function(){var e=ve.getState(),t=Oe({title:e.operation.title,price:e.operation.price||0,amount:e.operation.amount,cost:e.operation.cost||0,discount_value:e.operation.discount_value||0,engineer_id:e.operation.engineer_id,total:e.operation.total||0,comment:e.operation.comment,percent:e.operation.percent,discount:e.operation.discount,warranty_period:e.operation.warranty_period,order_id:e.order.edit,dict_id:null,order_type_id:e.order.order_type_id,filter_order:gt()});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/operations",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.data}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.orders,events:e.events||[]}}),Pe(r,"alert-success","\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveOperation:function(){var e=ve.getState(),t=Oe({id:e.operation.edit,title:e.operation.title,price:e.operation.price||0,amount:e.operation.amount,cost:e.operation.cost||0,discount_value:e.operation.discount_value||0,engineer_id:e.operation.engineer_id,total:e.operation.total||0,comment:e.operation.comment,percent:e.operation.percent,discount:e.operation.discount,warranty_period:e.operation.warranty_period,order_id:e.order.edit,filter_order:gt()});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/operations",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.data}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.orders,events:e.events||[]}}),Pe(r,"alert-success","\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteOperation:Dr},Ir=Object(s.b)((function(e){return{operation:e.operation,view:e.view,employees:e.employee.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),Rr)((function(e){var t=function(){e.resetOperation(),e.setVisibleFlag("statusOperationEditor",!1),e.setVisibleFlag("inputOperationTitleChacked",!0),e.setVisibleFlag("inputOperationEngineerChacked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("operationEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){var t=e.operation.percent?e.operation.price*e.operation.amount*e.operation.discount/100:e.operation.discount*e.operation.amount;e.changeOperationForm(t,"discount_value")}),[e.operation.discount,e.operation.percent,e.operation.amount]),Object(r.useEffect)((function(){e.changeOperationForm(e.operation.price*e.operation.amount-e.operation.discount_value,"total")}),[e.operation.price,e.operation.discount_value,e.operation.amount]);return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow mwp",id:"operationEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle fsz20",children:e.operation.edit?e.operation.title:"\u041d\u043e\u0432\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeOperationForm(t.target.value,"title")},value:e.operation.title,checkedFlag:"inputOperationTitleChacked",checked:e.view.inputOperationTitleChacked,disabled:e.operation.deleted,invisible:e.operation.edit,redStar:!0}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.operation.price,unit:"\u0440\u0443\u0431.",disabled:e.operation.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(t){return e.changeOperationForm(parseInt(t.target.value.replace(/[^0-9.]/g,"")),"amount")},value:e.operation.amount,unit:" ",disabled:e.operation.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.operation.cost,unit:"\u0440\u0443\u0431.",disabled:e.operation.deleted}),Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9]/g,""),"discount")},value:e.operation.discount,unit:" ",disabled:e.operation.deleted}),Object(Ze.jsx)(_n,{className:"ml30",name:["\u0440\u0443\u0431.","%"],func1:function(){return e.changeOperationForm(!1,"percent")},func2:function(){return e.changeOperationForm(!0,"percent")},disabled:e.operation.deleted})]}),Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeOperationForm(t.target.value.replace(/[^0-9]/g,"")*e.operation.warranty_value,"warranty_period")},value:parseInt(e.operation.warranty_period/e.operation.warranty_value),unit:" ",disabled:e.operation.deleted}),Object(Ze.jsx)(_n,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeOperationForm(86400,"warranty_value")},func2:function(){return e.changeOperationForm(2592e3,"warranty_value")},disabled:e.operation.deleted})]}),Object(Ze.jsx)(xn,{id:24,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",className:"mt15",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),field:"engineer_id",setElement:e.changeOperationForm,current_id:e.operation.engineer_id,employee:!0,width:"250px",checkedFlag:"inputOperationEngineerChacked",checked:e.view.inputOperationEngineerChacked,disabled:e.operation.deleted}),Object(Ze.jsx)(wn,{className:"w250 mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOperationForm(t.target.value,"comment")},value:e.operation.comment,disabled:e.operation.deleted}),Object(Ze.jsxs)("div",{className:"mt15",children:["\u0421\u0443\u043c\u043c\u0430 \u0441\u043a\u0438\u0434\u043a\u0438: ",e.operation.discount_value]}),Object(Ze.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",e.operation.total]})]}),Object(Ze.jsx)(jn,{edit:e.operation.edit,deleted:e.operation.deleted,create:function(){e.operation.title&&e.operation.engineer_id?(e.createCustomOperation(),t()):(e.operation.title||e.setVisibleFlag("inputOperationTitleChacked",!1),e.operation.engineer_id||e.setVisibleFlag("inputOperationEngineerChacked",!1))},save:function(){e.operation.title&&e.operation.engineer_id?(e.saveOperation(),t()):(e.operation.title||e.setVisibleFlag("inputOperationTitleChacked",!1),e.operation.engineer_id||e.setVisibleFlag("inputOperationEngineerChacked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteOperation(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteOperation(!1)}:null,close:t})]})})})),Br=function(e){return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsx)("button",{id:e.id,className:e.invisible?"disabledButton":e.className,onClick:e.onClick,disabled:e.invisible||e.disabled,children:Object(Ze.jsxs)("div",{className:"row",children:[e.icon?Object(Ze.jsx)(ct,{icon:e.icon,className:e.iconClassName,color:e.iconColor}):null,e.title?Object(Ze.jsx)("div",{className:"ml5",children:e.title}):null]})})};n(42);function Lr(){return{type:"RESET_ORDER_PART"}}function Mr(e){var t=ve.getState(),n=Oe({id:t.orderPart.edit,order_id:t.order.edit,deleted:e,filter_order:gt()});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return r.next=4,fetch(t.data.url_server+"/order_parts",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"EDIT_ORDER",order:t.order}),i({type:"CHANGE_ORDER_STATE",data:{ordersShow:t.orders,events:t.events||[]}}),Pe(i,"alert-success",e?"\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430":"\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return r.next=6,i({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}var Vr={setVisibleFlag:Ne,resetOrderPart:Lr,changeOrderPartForm:function(e,t){return{type:"CHANGE_ORDER_PART_FORM",field:t,value:e}},createCustomOrderPart:function(){var e=ve.getState(),t=Oe({amount:e.orderPart.amount,cost:e.orderPart.cost||0,discount_value:e.orderPart.discount_value||0,engineer_id:e.orderPart.engineer_id,price:e.orderPart.price||0,total:e.orderPart.total||0,title:e.orderPart.title,comment:e.orderPart.comment,deleted:!1,warranty_period:e.orderPart.warranty_period,order_id:e.order.edit,order_type_id:e.order.order_type_id,filter_order:gt()});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/order_parts",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.order}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.orders,events:e.events||[]}}),Pe(r,"alert-success","\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0447\u0430\u0441\u0442\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveOrderPart:function(){var e=ve.getState(),t=Oe({id:e.orderPart.edit,amount:e.orderPart.amount,cost:e.orderPart.cost||0,discount_value:e.orderPart.discount_value||0,engineer_id:e.orderPart.engineer_id,price:e.orderPart.price||0,total:e.orderPart.total||0,title:e.orderPart.title,comment:e.orderPart.comment,warranty_period:e.orderPart.warranty_period,order_id:e.order.edit,filter_order:gt()});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/order_parts",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.order}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.orders,events:e.events||[]}}),Pe(r,"alert-success","\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0435\u0438\u0435 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteOrderPart:Mr},Gr=Object(s.b)((function(e){return{orderPart:e.orderPart,view:e.view,employees:e.employee.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),Vr)((function(e){var t=function(){e.setVisibleFlag("inputOrderPartEngineerChecked",!0),e.setVisibleFlag("inputOrderPartTitleChacked",!0),e.setVisibleFlag("statusOrderPartEditor",!1),e.resetOrderPart()},n=function(e){e.path.map((function(e){return e.id})).includes("orderPartEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){var t=e.orderPart.percent?e.orderPart.price*e.orderPart.amount*e.orderPart.discount/100:e.orderPart.discount;e.changeOrderPartForm(t,"discount_value")}),[e.orderPart.discount,e.orderPart.percent,e.orderPart.amount]),Object(r.useEffect)((function(){var t=e.orderPart.price*e.orderPart.amount-e.orderPart.discount_value;e.changeOrderPartForm(t,"total")}),[e.orderPart.price,e.orderPart.discount_value,e.orderPart.amount]);return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow mwp",id:"orderPartEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle fsz20",children:e.orderPart.edit?e.orderPart.title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeOrderPartForm(t.target.value,"title")},value:e.orderPart.title,checkedFlag:"inputOrderPartTitleChacked",checked:e.view.inputOrderPartTitleChacked,disabled:e.orderPart.deleted,invisible:e.orderPart.edit,redStar:!0}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.orderPart.price,unit:"\u0440\u0443\u0431.",disabled:e.orderPart.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(t){return e.changeOrderPartForm(parseInt(t.target.value.replace(/[^0-9.]/g,"")),"amount")},value:e.orderPart.amount,unit:" ",disabled:e.orderPart.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.orderPart.cost,unit:"\u0440\u0443\u0431.",disabled:e.orderPart.deleted}),Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u043a\u0438\u0434\u043a\u0430",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9]/g,""),"discount")},value:e.orderPart.discount,unit:" ",disabled:e.orderPart.deleted}),Object(Ze.jsx)(_n,{className:"ml30",name:["\u0440\u0443\u0431.","%"],func1:function(){return e.changeOrderPartForm(!1,"percent")},func2:function(){return e.changeOrderPartForm(!0,"percent")},disabled:e.orderPart.deleted})]}),Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeOrderPartForm(t.target.value.replace(/[^0-9]/g,"")*e.orderPart.warranty_value,"warranty_period")},value:parseInt(e.orderPart.warranty_period/e.orderPart.warranty_value),unit:" ",disabled:e.orderPart.deleted}),Object(Ze.jsx)(_n,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeOrderPartForm(86400,"warranty_value")},func2:function(){return e.changeOrderPartForm(2592e3,"warranty_value")},disabled:e.orderPart.deleted})]}),Object(Ze.jsx)(xn,{id:24,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",className:"mt15",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),field:"engineer_id",setElement:e.changeOrderPartForm,current_id:e.orderPart.engineer_id,employee:!0,width:"250px",checkedFlag:"inputOrderPartEngineerChecked",checked:e.view.inputOrderPartEngineerChecked,disabled:e.orderPart.deleted}),Object(Ze.jsx)(wn,{className:"w250 mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOrderPartForm(t.target.value,"comment")},value:e.orderPart.comment,disabled:e.orderPart.deleted}),Object(Ze.jsxs)("div",{className:"mt15",children:["\u0421\u0443\u043c\u043c\u0430 \u0441\u043a\u0438\u0434\u043a\u0438: ",e.orderPart.discount_value]}),Object(Ze.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",e.orderPart.total]})]}),Object(Ze.jsx)(jn,{edit:e.orderPart.edit,deleted:e.orderPart.deleted,create:function(){e.orderPart.title&&e.orderPart.engineer_id?(e.createCustomOrderPart(),t()):(e.orderPart.title||e.setVisibleFlag("inputOrderPartTitleChacked",!1),e.orderPart.engineer_id||e.setVisibleFlag("inputOrderPartEngineerChecked",!1))},save:function(){e.orderPart.title&&e.orderPart.engineer_id?(e.saveOrderPart(),t()):(e.orderPart.title||e.setVisibleFlag("inputOrderPartTitleChacked",!1),e.orderPart.engineer_id||e.setVisibleFlag("inputOrderPartEngineerChecked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteOrderPart(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteOrderPart(!1)}:null,close:t})]})})})),Hr={createOperation:function(e){var t=ve.getState(),n=function(e,t){if(t.order.client.discount_service_type){var n=t.data.service_prices.find((function(n){return n.service_id===e.id&&n.discount_margin_id===t.order.client.discount_service_margin_id}));return n?n.cost:0}return e.price}(e,t),r=t.order.client.discount_service_type?e.price-n:e.price*t.order.client.discount_services/100||0,i=Oe({amount:1,cost:e.cost||0,discount_value:r,engineer_id:t.operation.engineer_id,price:e.price||0,total:t.order.client.discount_service_type?n:n-r,title:e.title,comment:"",percent:!t.order.client.discount_service_type,discount:t.order.client.discount_service_type?r||0:t.order.client.discount_services,warranty_period:e.warranty_period,order_id:t.order.edit,dict_id:e.id,earnings_percent:e.earnings_percent,earnings_summ:e.earnings_summ,order_type_id:t.order.order_type_id,filter_order:gt()});return function(){var e=Object(m.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return e.next=4,fetch(t.data.url_server+"/operations",i).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"EDIT_ORDER",order:e.data}),n({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.orders,events:e.events||[]}}),Pe(n,"alert-success","\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return e.next=6,n({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setVisibleFlag:Ne},qr=Object(s.b)((function(e){return{dict_service:e.data.dict_service,statusOperationEditor:e.view.statusOperationEditor,statusOrderPartEditor:e.view.statusOrderPartEditor,status_group:e.order.status.group}}),Hr)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(""),s=Object(it.a)(a,2),o=s[0],l=s[1],d=e.status_group>3,u=function(e){e.path.map((function(e){return e.id})).includes("listSetWorks")||e.path.map((function(e){return e.id})).includes("setWorks")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",u),function(){window.removeEventListener("click",u)}}));var m=Object(r.useMemo)((function(){return e.dict_service.filter((function(e){return!e.deleted&&e.title.toLowerCase().includes(o.toLowerCase())}))}),[o]);return Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{className:"mt15 w400",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430"}),Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsx)("div",{id:"setWorks",className:"orderInputBox",onClick:function(){return c(!0)},children:Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(e){return l(e.target.value)},velue:o,disabled:d})}),i&&!d?Object(Ze.jsxs)("div",{className:"listFilter",id:"listSetWorks",children:[m.map((function(t){return Object(Ze.jsxs)("div",{className:"rowGropList",onClick:function(){return function(t){e.createOperation(t),c(!1)}(t)},children:[Object(Ze.jsx)("div",{className:"fc-gr",children:t.title}),Object(Ze.jsxs)("div",{className:"fc-gr",children:[t.price," \u0440\u0443\u0431."]})]},t.id)})),Object(Ze.jsxs)("div",{className:"btmsts",children:[Object(Ze.jsx)(Br,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0443",className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusOperationEditor",!0)}}),Object(Ze.jsx)(Br,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u043a \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusOrderPartEditor",!0)}})]})]}):null]})]}),e.statusOperationEditor?Object(Ze.jsx)(Ir,{}):null,e.statusOrderPartEditor?Object(Ze.jsx)(Gr,{}):null,Object(Ze.jsx)("div",{className:"setOrderOr",children:" \u0438\u043b\u0438 "}),Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0422\u043e\u0432\u0430\u0440\u044b/\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u0438"}),Object(Ze.jsxs)("div",{className:"addPartsBox",children:[Object(Ze.jsx)(ct,{icon:"M0 4h4v20h-4zM6 4h2v20h-2zM10 4h2v20h-2zM16 4h2v20h-2zM24 4h2v20h-2zM30 4h2v20h-2zM20 4h1v20h-1zM14 4h1v20h-1zM27 4h1v20h-1zM0 26h2v2h-2zM6 26h2v2h-2zM10 26h2v2h-2zM20 26h2v2h-2zM30 26h2v2h-2zM24 26h4v2h-4zM14 26h4v2h-4z",className:"icon-s1"}),Object(Ze.jsx)("div",{className:"ml10",children:"\u0421\u043e \u0441\u043a\u043b\u0430\u0434\u0430"})]})]})]})})),Wr={editOperation:function(e){return{type:"EDIT_OPERATION",operation:e}},setVisibleFlag:Ne,deleteOperation:Dr,resetOperation:Pr,changeOrderFormS:Ce,deleteOrderPart:Mr,editOrderPart:function(e){return{type:"EDIT_ORDER_PART",order_part:e}},resetOrderPart:Lr},zr=Object(s.b)((function(e){return{order:e.order,employees:e.employee.employees,permissions:e.data.user.role.permissions}}),Wr)((function(e){var t=e.order.status.group>3||!e.permissions.includes("edit_operations_materials"),n=function(t){e.editOperation(t),e.setVisibleFlag("statusOperationEditor",!0)},r=function(t){e.editOrderPart(t),e.setVisibleFlag("statusOrderPartEditor",!0)};return Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w10"}),Object(Ze.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"w50 tae",children:"\u041a\u043e\u043b-\u0432\u043e"}),Object(Ze.jsx)("th",{className:"w70 tae",children:"\u0426\u0435\u043d\u0430"}),Object(Ze.jsx)("th",{className:"w70 tae",children:"\u0421\u043a\u0438\u0434\u043a\u0430"}),Object(Ze.jsx)("th",{className:"w70 tae",children:"\u0421\u0443\u043c\u043c\u0430"}),Object(Ze.jsx)("th",{})]})}),e.employees.map((function(i){return e.order.operations.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).length||e.order.parts.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).length?Object(Ze.jsxs)("tbody",{children:[Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{}),Object(Ze.jsx)("td",{className:"txtb",colSpan:"5",children:"".concat(i.first_name," ").concat(i.last_name)})]}),e.order.operations.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).map((function(r){return Object(Ze.jsxs)("tr",{className:"fillcol",onDoubleClick:t?null:function(){return n(r)},children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)(ct,{className:"icon-s1",icon:z,color:"#aaa"})}),Object(Ze.jsxs)("td",{children:[r.title,r.comment?" (".concat(r.comment,")"):null]}),Object(Ze.jsx)("td",{className:"tae",children:r.amount}),Object(Ze.jsx)("td",{className:"tae",children:r.price*r.amount}),Object(Ze.jsx)("td",{className:"tae",children:r.discount_value/r.amount}),Object(Ze.jsx)("td",{className:"tae",children:r.total}),Object(Ze.jsx)("td",{children:t?null:Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{onClick:function(){return n(r)},children:Object(Ze.jsx)(ct,{className:"icon-s2 curP ml5",icon:Y})}),Object(Ze.jsx)("div",{onClick:function(){return function(t){e.editOperation(t),e.deleteOperation(!0),e.resetOperation()}(r)},children:Object(Ze.jsx)(ct,{className:"icon-s2 curP ml5",icon:V})})]})})]},r.id)})),e.order.parts.filter((function(e){return!e.deleted&&e.engineer_id===i.id})).map((function(n){return Object(Ze.jsxs)("tr",{className:"fillcol",onDoubleClick:t?null:function(){return r(n)},children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)(ct,{className:"icon-s1",icon:U,color:"#aaa"})}),Object(Ze.jsxs)("td",{children:[n.title,n.comment?" (".concat(n.comment,")"):null]}),Object(Ze.jsx)("td",{className:"tae",children:n.amount}),Object(Ze.jsx)("td",{className:"tae",children:n.price*n.amount}),Object(Ze.jsx)("td",{className:"tae",children:n.discount_value/n.amount}),Object(Ze.jsx)("td",{className:"tae",children:n.total}),Object(Ze.jsx)("td",{children:t?null:Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{onClick:function(){return r(n)},children:Object(Ze.jsx)(ct,{className:"icon-s2 curP ml5",icon:Y})}),Object(Ze.jsx)("div",{onClick:function(){return function(t){e.editOrderPart(t),e.deleteOrderPart(!0),e.resetOrderPart()}(n)},children:Object(Ze.jsx)(ct,{className:"icon-s2 curP ml5",icon:V})})]})})]},n.id)}))]},i.id):null})),Object(Ze.jsxs)("tbody",{children:[Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{className:"tae",colSpan:"4",children:"\u0418\u0442\u043e\u0433\u043e \u0441\u043a\u0438\u0434\u043a\u0430:"}),Object(Ze.jsx)("td",{className:"tae",children:e.order.discount_sum}),Object(Ze.jsx)("td",{children:"\u0440\u0443\u0431."})]}),Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{className:"tae",colSpan:"4",children:"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430:"}),Object(Ze.jsx)("td",{className:"tae",children:e.order.price}),Object(Ze.jsx)("td",{children:"\u0440\u0443\u0431."})]})]})]})})),Ur=[{id:1,title:"A1",width:"48px",height:"48px",color:"grey"},{id:2,title:"A2",width:"48px",height:"48px",color:"grey"},{id:3,title:"A3",width:"48px",height:"48px",color:"grey"},{id:4,title:"A4",width:"48px",height:"48px",color:"grey"},{id:5,title:"A5",width:"48px",height:"48px",color:"grey"},{id:6,title:"A6",width:"48px",height:"48px",color:"grey"},{id:7,title:"B1",width:"48px",height:"48px",color:"grey"},{id:8,title:"B2",width:"48px",height:"48px",color:"grey"},{id:9,title:"B3",width:"48px",height:"48px",color:"grey"},{id:10,title:"B4",width:"48px",height:"48px",color:"grey"},{id:11,title:"B5",width:"48px",height:"48px",color:"grey"},{id:12,title:"B6",width:"48px",height:"48px",color:"grey"},{id:13,title:"C1",width:"48px",height:"48px",color:"grey"},{id:14,title:"C2",width:"48px",height:"48px",color:"grey"},{id:15,title:"C3",width:"48px",height:"48px",color:"grey"},{id:16,title:"C4",width:"48px",height:"48px",color:"grey"},{id:17,title:"C5",width:"48px",height:"48px",color:"grey"},{id:18,title:"C6",width:"48px",height:"48px",color:"grey"},{id:19,title:"D1",width:"48px",height:"48px",color:"grey"},{id:20,title:"D2",width:"48px",height:"48px",color:"grey"},{id:21,title:"D3",width:"48px",height:"48px",color:"grey"},{id:22,title:"D4",width:"48px",height:"48px",color:"grey"},{id:23,title:"D5",width:"48px",height:"48px",color:"grey"},{id:24,title:"D6",width:"48px",height:"48px",color:"grey"},{id:25,title:"E1",width:"48px",height:"48px",color:"grey"},{id:26,title:"E2",width:"48px",height:"48px",color:"grey"},{id:27,title:"E3",width:"48px",height:"48px",color:"grey"},{id:28,title:"E4",width:"48px",height:"48px",color:"grey"},{id:29,title:"E5",width:"48px",height:"48px",color:"grey"},{id:30,title:"E6",width:"48px",height:"48px",color:"grey"},{id:31,title:"F1",width:"100px",height:"48px",color:"grey"},{id:32,title:"F2",width:"100px",height:"48px",color:"grey"},{id:33,title:"F3",width:"100px",height:"48px",color:"grey"},{id:34,title:"G1",width:"100px",height:"48px",color:"grey"},{id:35,title:"G2",width:"100px",height:"48px",color:"grey"},{id:36,title:"G3",width:"100px",height:"48px",color:"grey"},{id:37,title:"H1",width:"100px",height:"48px",color:"grey"},{id:38,title:"H2",width:"100px",height:"48px",color:"grey"},{id:39,title:"H3",width:"100px",height:"48px",color:"grey"},{id:40,title:"I1",width:"100px",height:"48px",color:"grey"},{id:41,title:"I2",width:"100px",height:"48px",color:"grey"},{id:42,title:"I3",width:"100px",height:"48px",color:"grey"},{id:43,title:"J1",width:"100px",height:"100px",color:"grey"},{id:44,title:"J2",width:"100px",height:"100px",color:"grey"},{id:45,title:"J3",width:"100px",height:"100px",color:"grey"},{id:46,title:"K1",width:"100px",height:"100px",color:"grey"},{id:47,title:"K2",width:"100px",height:"100px",color:"grey"},{id:48,title:"K3",width:"100px",height:"100px",color:"grey"}],Yr={setVisibleFlag:Ne,changeOrderFormS:Ce},Kr=Object(s.b)((function(e){return{}}),Yr)((function(e){var t=function(){e.setVisibleFlag("statusCellEditor",!1)},n=function(e){e.path.map((function(e){return e.id})).includes("cellEditor")||t()};return Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(Ze.jsx)("div",{className:"centerBlock",children:Object(Ze.jsxs)("div",{className:"blockWindow",id:"cellEditor",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0447\u0435\u0439\u043a\u0443"}),Object(Ze.jsx)("div",{className:"cellContainer",children:Ur.map((function(n){return Object(Ze.jsx)("div",{style:{width:n.width,height:n.height,backgroundColor:n.color},className:"cell",onClick:function(){e.changeOrderFormS(n.title,"cell"),t()},children:n.title},n.id)}))})]})})})),Jr={setVisibleFlag:Ne},Xr=Object(s.b)((function(e){return{order:e.order,statusCellEditor:e.view.statusCellEditor}}),Jr)((function(e){return Object(Ze.jsxs)("div",{className:"mt15",style:{width:"150px"},children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u042f\u0447\u0435\u0439\u043a\u0430"}),Object(Ze.jsxs)("div",{className:"optionsButton",onClick:function(){return e.setVisibleFlag("statusCellEditor",!0)},children:[Object(Ze.jsx)("div",{className:"noWr w100 tac",children:e.order.cell||"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u044f\u0447\u0435\u0439\u043a\u0443"}),Object(Ze.jsx)("span",{children:"\u1a06"})]}),e.statusCellEditor?Object(Ze.jsx)(Kr,{}):null]})})),Qr={changeOrderFormS:Ce,changeOperationForm:Ar},Zr=Object(s.b)((function(e){return{employees:e.employee.employees,order:e.order,current_user_id:e.data.user.id,current_engineer_id:e.operation.engineer_id}}),Qr)((function(e){var t=e.employees.filter((function(e){return!e.deleted&&e.role.permissions.includes("in_list_engineers")})),n=t.some((function(t){return t.id===e.current_engineer_id}));return Object(r.useEffect)((function(){var t=e.order.engineer_id&&n?e.order.engineer_id:e.current_user_id;e.changeOperationForm(t,"engineer_id")}),[]),Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsxs)("div",{className:"blockImput",children:[Object(Ze.jsx)(xn,{id:18,title:"\u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c",list:t,setElement:e.changeOperationForm,current_id:n?e.current_engineer_id:0,width:"200px",field:"engineer_id",employee:!0}),Object(Ze.jsx)(qr,{}),Object(Ze.jsx)(zr,{}),Object(Ze.jsx)(wn,{className:"mt15",title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f",onChange:function(t){return e.changeOrderFormS(t.target.value,"engineer_notes")},value:e.order.engineer_notes}),Object(Ze.jsx)(wn,{className:"mt15",title:"\u0412\u0435\u0440\u0434\u0438\u043a\u0442 / \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changeOrderFormS(t.target.value,"resume")},value:e.order.resume}),Object(Ze.jsx)(Xr,{})]})})})),$r=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsxs)("div",{className:"row ".concat(e.className),children:[Object(Ze.jsx)("span",{className:"lableImput",children:e.title}),Object(Ze.jsx)("span",{className:"ml5",children:e.text})]})})),ei={setVisibleFlag:Ne,resetPayments:Ht,deletePayment:function(e){var t=ve.getState(),n={id:t.payment.edit,relation_type:t.payment.relation_type,relation_id:t.payment.relation_id?t.payment.relation_id:null,order_id:t.payment.order.id,deleted:e};if(t.order.edit){var r=gt();r.update_order=t.order.edit,n.filter_order=r}else n.filter_cashboxes={deleted:null},n.filter_payments={custom_created_at:t.payment.filter_created_at,cashbox_id:t.cashbox.current_cashbox.id,tags:t.payment.filter_tags.length?t.payment.filter_tags:null,deleted:null};var i=Oe(n);return i.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(t.data.url_server+"/payments",i).then((function(e){return e.json()})).then((function(n){n.success&&(t.order.edit?(r({type:"EDIT_ORDER",order:n.order}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:n.orders,events:n.events}})):(r({type:"CHANGE_PAYMENT_STATE",data:{payments:n.payments}}),r({type:"RESET_PAYMENTS"}),r({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:n.cashboxes}})),r({type:"CHANGE_VISIBLE_STATE",data:{statusPaymentsCard:!1}})),Pe(r,"alert-success",e?"\u041f\u043b\u0430\u0442\u0435\u0436 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d":"\u041f\u043b\u0430\u0442\u0435\u0436 \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"RESET_PAYMENTS"});case 6:return n.next=8,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},ti=Object(s.b)((function(e){return{payment:e.payment,cashboxes:e.cashbox.cashboxes,permissions:e.data.user.role.permissions}}),ei)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("paymentsCardWiondow")||e.setVisibleFlag("statusPaymentsCard",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow wsp",id:"paymentsCardWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:["\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433","\u0420\u0430\u0441\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433","\u041f\u0440\u0438\u0445\u043e\u0434 \u0434\u0435\u043d\u0435\u0433"][e.payment.direction]}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)($n,{}),Object(Ze.jsx)($r,{className:"mt15",title:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b:",text:e.payment.cashbox.type?"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u0430\u044f":"\u041d\u0430\u043b\u0438\u0447\u043d\u0430\u044f"}),Object(Ze.jsx)($r,{className:"mt5",title:"\u041a\u0430\u0441\u0441\u0430:",text:e.payment.cashbox.title}),e.payment.cashflow_category?Object(Ze.jsx)($r,{className:"mt5",title:"\u0421\u0442\u0430\u0442\u044c\u044f:",text:e.payment.cashflow_category}):null,Object.values(e.payment.client).length?Object(Ze.jsx)($r,{className:"mt5",title:"\u041a\u043b\u0438\u0435\u0442:",text:e.payment.client.name}):null,Object(Ze.jsx)($r,{className:"mt5",title:"\u041a\u0430\u0441\u0441\u0438\u0440:",text:e.payment.employee.name})]}),Object(Ze.jsx)(jn,{edit:e.payment.edit,delete:e.permissions.includes("delete_payments")?function(){return e.deletePayment(!0)}:null,recover:e.permissions.includes("recover_payments")?function(){return e.deletePayment(!1)}:null,close:function(){e.setVisibleFlag("statusPaymentsCard",!1),e.resetPayments()},deleted:e.payment.deleted})]})})})),ni={setPayment:Te,setVisibleFlag:Ne},ri=Object(s.b)((function(e){return{order:e.order,statusPaymentsCard:e.view.statusPaymentsCard}}),ni)((function(e){return Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w160",children:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"}),Object(Ze.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"w91 tac",children:"\u0421\u0443\u043c\u043c\u0430"})]})}),Object(Ze.jsxs)("tbody",{children:[e.order.payments.filter((function(e){return!e.deleted})).map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){e.setPayment(t),e.setVisibleFlag("statusPaymentsCard",!0)},children:[Object(Ze.jsxs)("td",{children:[Object(Ze.jsx)("div",{children:t.employee.name}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"cgr",children:an(t.custom_created_at)}),t.created_at!==t.custom_created_at?Object(Ze.jsx)("div",{title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(an(t.created_at)),children:Object(Ze.jsx)(ct,{className:"icon-s2 ml5",icon:H,color:"red"})}):null]})]}),Object(Ze.jsx)("td",{children:t.description}),2===t.direction?Object(Ze.jsx)("td",{className:"greenFont tac",children:t.income}):Object(Ze.jsx)("td",{className:"redFont tac",children:t.outcome})]},t.id)})),Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{}),Object(Ze.jsx)("td",{className:"tae",children:"\u0418\u0442\u043e\u0433\u043e \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439:"}),Object(Ze.jsxs)("td",{className:"tae",children:[e.order.payed," \u0440\u0443\u0431."]})]}),Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{}),Object(Ze.jsx)("td",{className:"tae",children:"\u0417\u0430\u043a\u0430\u0437 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443:"}),Object(Ze.jsxs)("td",{className:"tae",children:[e.order.price," \u0440\u0443\u0431."]})]}),Object(Ze.jsxs)("tr",{className:"ss",children:[Object(Ze.jsx)("td",{}),Object(Ze.jsx)("td",{className:"tae",children:e.order.missed_payments>0?"\u041a\u043b\u0438\u0435\u043d\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043c:":"\u041c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u0443"}),Object(Ze.jsxs)("td",{className:"tae",style:{color:e.order.missed_payments>0?"#5cb85c":"#f74e4d"},children:[Math.abs(e.order.missed_payments)," \u0440\u0443\u0431."]})]})]})]}),e.statusPaymentsCard?Object(Ze.jsx)(ti,{}):null]})})),ii={changeVisibleState:we,changePaymentState:Gt,editCurrentClient:Se},ci=Object(s.b)((function(e){return{employees:e.employee.employees,order:e.order,view:e.view,current_user_id:e.data.user.id}}),ii)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsxs)("div",{className:"row mt15",id:"btorderpay",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430",onClick:function(){e.changePaymentState({direction:2,client_id:e.order.client.id,description:"\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label),cashflow_category:2,employee_id:e.current_user_id,order_id:e.order.edit,context:{type:"order"}}),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})},invisible:!1,disabled:!1}),Object(Ze.jsx)(Br,{className:"greenButton bcr ml10",title:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430",onClick:function(){e.changePaymentState({direction:1,client_id:e.order.client.id,description:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u043f\u043e \u0437\u0430\u043a\u0430\u0437\u0443 \u2116 ".concat(e.order.id_label),cashflow_category:8,employee_id:e.current_user_id,order_id:e.order.edit,context:{type:"order"}}),e.editCurrentClient(e.order.client),e.changeVisibleState({statusPaymentsEditor:!0})},invisible:!1,disabled:!1})]}),Object(Ze.jsx)(ri,{})]})})),ai=function(e){return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:"checkbox ".concat(e.className),children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:e.onChange,checked:e.checked,disabled:e.disabled}),Object(Ze.jsx)("label",{children:e.label})]})},si={setVisibleFlag:Ne},oi=Object(s.b)((function(e){return{order:e.order,checkOrderSticker:e.view.checkOrderSticker}}),si)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("orderPrint")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));return Object(Ze.jsxs)("div",{style:{width:"67px",height:"25px"},id:"orderPrint",children:[Object(Ze.jsx)("div",{className:"row",onClick:function(){return c(!i)},children:Object(Ze.jsxs)("div",{className:"whiteButton m0 pd05 ml10",children:[Object(Ze.jsx)(ct,{icon:"M8 2h16v4h-16v-4z M30 8h-28c-1.1 0-2 0.9-2 2v10c0 1.1 0.9 2 2 2h6v8h16v-8h6c1.1 0 2-0.9 2-2v-10c0-1.1-0.9-2-2-2zM4 14c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM22 28h-12v-10h12v10z",className:"icon-s4 pd1"}),Object(Ze.jsx)(ct,{icon:Q,className:"icon-s4 pd1"})]})}),i?Object(Ze.jsxs)("div",{className:"listprint",children:[Object(Ze.jsx)(ai,{label:"\u041f\u0440\u0438\u0435\u043c\u043d\u0430\u044f \u044d\u0442\u0438\u043a\u0435\u0442\u043a\u0430",onChange:function(t){e.setVisibleFlag("checkOrderSticker",t.target.checked),localStorage.setItem("checkOrderSticker",t.target.checked)},checked:e.checkOrderSticker}),Object(Ze.jsx)(Br,{className:"blueButton ml30",title:"\u041f\u0435\u0447\u0430\u0442\u044c",onClick:function(){e.setVisibleFlag("statusOrderSticker",e.checkOrderSticker),c(!1)},invisible:!e.order.edit})]}):null]})})),li=function(e){var t=new Date(1e3*e.event.created_at).toLocaleString("ru",{hour:"numeric",minute:"numeric"});return Object(Ze.jsx)("div",{className:"eventElement evFerst",children:Object(Ze.jsxs)("div",{className:"row jc-sb",children:[Object(Ze.jsx)("div",{className:"statusListRow mt0",style:{backgroundColor:e.event.current_status.color},title:e.employee,children:e.event.changed[0].new.title}),Object(Ze.jsx)("div",{className:"cgr",children:t})]})})},di=function(e){var t=function(e){return(e.current&&e.current.title?e.current.title.toString().length:0)+(e.new&&e.new.title?e.new.title.toString().length:0)>40},n=new Date(1e3*e.event.created_at).toLocaleString("ru",{hour:"numeric",minute:"numeric"});return Object(Ze.jsx)("div",{className:"eventElement",children:e.event.changed.map((function(r,i){return Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"row jc-sb",children:[Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{style:{backgroundColor:e.event.current_status.color,display:i?"none":null,marginLeft:i?"30px":null},className:"boxHistoryIcon",title:e.employee,children:Object(Ze.jsx)(ct,{className:"icon-s2",icon:(c=e.event.event_type,["ASSIGN_ENGINEER","CHANGE_ENGINEER","ASSIGN_MANAGER","CHANGE_MANAGER","ADD_CLIENT","CHANGE_CLIENT"].includes(c)?"M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z":"CHANGE_ESTIMATED_DONE_AT"===c?K:"ADD_OPERATION"===c?z:"ADD_ORDER_PART"===c?U:["DELETE_OPERATION","DELETE_ORDER_PART","DELETE_PAYMENT"].includes(c)?V:["ADD_COMMENT","SEND_SMS"].includes(c)?"M16 6c-1.717 0-3.375 0.271-4.928 0.804-1.46 0.502-2.76 1.211-3.863 2.108-2.069 1.681-3.209 3.843-3.209 6.088 0 1.259 0.35 2.481 1.039 3.63 0.711 1.185 1.781 2.268 3.093 3.133 0.949 0.625 1.587 1.623 1.755 2.747 0.056 0.375 0.091 0.753 0.105 1.129 0.233-0.194 0.461-0.401 0.684-0.624 0.755-0.755 1.774-1.172 2.828-1.172 0.168 0 0.336 0.011 0.505 0.032 0.655 0.083 1.325 0.126 1.99 0.126 1.717 0 3.375-0.271 4.928-0.804 1.46-0.502 2.76-1.211 3.863-2.108 2.069-1.681 3.209-3.843 3.209-6.088s-1.14-4.407-3.209-6.088c-1.104-0.897-2.404-1.606-3.863-2.108-1.553-0.534-3.211-0.804-4.928-0.804zM16 2v0c8.837 0 16 5.82 16 13s-7.163 13-16 13c-0.849 0-1.682-0.054-2.495-0.158-3.437 3.437-7.539 4.053-11.505 4.144v-0.841c2.142-1.049 4-2.961 4-5.145 0-0.305-0.024-0.604-0.068-0.897-3.619-2.383-5.932-6.024-5.932-10.103 0-7.18 7.163-13 16-13z":"SEND_EMAIL"===c?"M29 4h-26c-1.65 0-3 1.35-3 3v20c0 1.65 1.35 3 3 3h26c1.65 0 3-1.35 3-3v-20c0-1.65-1.35-3-3-3zM12.461 17.199l-8.461 6.59v-15.676l8.461 9.086zM5.512 8h20.976l-10.488 7.875-10.488-7.875zM12.79 17.553l3.21 3.447 3.21-3.447 6.58 8.447h-19.579l6.58-8.447zM19.539 17.199l8.461-9.086v15.676l-8.461-6.59z":"MOVE_TO"===c?"M4 10h20v6l8-8-8-8v6h-24v12h4zM28 22h-20v-6l-8 8 8 8v-6h24v-12h-4z":"ADD_PAYMENT"===c?"M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM15 29c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM16 16v-4h4v-2h-4v-2h-2v2h-4v8h4v4h-4v2h4v2h2v-2h4l-0-8h-4zM14 16h-2v-4h2v4zM18 22h-2v-4h2v4z":Y),color:"white"})}),Object(Ze.jsx)("div",{className:"ml10 txtb",style:{marginLeft:i?"28px":null},children:r.title})]}),Object(Ze.jsx)("div",{className:"cgr",children:n})]}),Object(Ze.jsxs)("div",{className:"".concat(t(r)?null:"row"," ml30"),children:[r.current&&r.current.title?Object(Ze.jsx)("div",{className:"",children:r.current.title}):null,r.current&&r.current.title?Object(Ze.jsx)(ct,{className:"icon-sm8 mlr5",icon:t(r)?"M27.414 19.414l-10 10c-0.781 0.781-2.047 0.781-2.828 0l-10-10c-0.781-0.781-0.781-2.047 0-2.828s2.047-0.781 2.828 0l6.586 6.586v-19.172c0-1.105 0.895-2 2-2s2 0.895 2 2v19.172l6.586-6.586c0.39-0.39 0.902-0.586 1.414-0.586s1.024 0.195 1.414 0.586c0.781 0.781 0.781 2.047 0 2.828z":"M19.414 27.414l10-10c0.781-0.781 0.781-2.047 0-2.828l-10-10c-0.781-0.781-2.047-0.781-2.828 0s-0.781 2.047 0 2.828l6.586 6.586h-19.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h19.172l-6.586 6.586c-0.39 0.39-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414c0.781 0.781 2.047 0.781 2.828 0z"}):null,Object(Ze.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:r.new.title})]})]});var c}))})},ui=Object(s.b)((function(e){return{events:e.order.events,event_filter:e.order.event_filter,employees:e.employee.employees}}),{})((function(e){var t=Object(r.useState)(0),n=Object(it.a)(t,2),i=(n[0],n[1],function(e,t){return e=new Date(1e3*e),t=new Date(1e3*t),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}),c={year:"numeric",month:"long",day:"numeric"},a=function(e){return new Date(1e3*e).toLocaleString("ru",c).replace("\u0433.","")},s=R.filter((function(t){return e.event_filter.includes(t.id)})).map((function(e){return e.value}));function o(t){if(t){var n=e.employees.find((function(e){return e.id===t}));return n?"".concat(n.last_name," ").concat(n.first_name):""}}return Object(Ze.jsx)("div",{className:"contentEditor mt15",children:Object(Ze.jsx)("div",{className:"ml30 h100",children:e.events.filter((function(e){return s.includes(e.event_type)})).map((function(t,n){return"CREATE_ORDER"===t.event_type||"CHANGE_STATUS"===t.event_type?Object(Ze.jsxs)("div",{children:["CREATE_ORDER"!==t.event_type||n&&i(t.created_at,e.events[n-1].created_at)?null:Object(Ze.jsx)("div",{className:"dateEvent",children:a(t.created_at)}),Object(Ze.jsxs)("div",{className:"orderEvent",style:{borderColor:t.current_status.color},children:["CHANGE_STATUS"!==t.event_type||n&&i(t.created_at,e.events[n-1].created_at)?null:Object(Ze.jsx)("div",{className:"dateEvent",children:a(t.created_at)}),Object(Ze.jsx)(li,{event:t,employee:o(t.employee_id)})]})]},t.id):Object(Ze.jsxs)("div",{className:"orderEvent",style:{borderColor:t.current_status.color},children:[n&&i(t.created_at,e.events[n-1].created_at)?null:Object(Ze.jsx)("div",{className:"dateEvent",children:a(t.created_at)}),Object(Ze.jsx)(di,{event:t,employee:o(t.employee_id)})]},t.id)}))})})})),mi=function(e){var t=Object(r.useState)(!0),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("tableFields".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=Object(r.useRef)();return Object(r.useEffect)((function(){var t=e.list.filter((function(t){return e.checked_list.includes(t.id)}));t.length===e.list.length?(s.current.indeterminate=!1,s.current.checked=!0):t.length?s.current.indeterminate=!0:(s.current.indeterminate=!1,s.current.checked=!1)}),[e.checked_list]),Object(r.useEffect)((function(){c(!1)}),[]),Object(Ze.jsxs)("div",{id:"tableFields".concat(e.id),style:{width:"67px",height:"26px"},className:"tableFields ml10 ".concat(e.className),children:[Object(Ze.jsxs)("div",{className:"chooseFieldButton pd1",onClick:function(){return c(!i)},children:[Object(Ze.jsx)("div",{className:"cl11",children:Object(Ze.jsx)(ct,{icon:e.icon||W,className:"icon-table"})}),Object(Ze.jsx)("div",{className:"cl12",children:Object(Ze.jsx)(ct,{icon:Q,className:"icon-table"})})]}),i?Object(Ze.jsxs)("div",{className:e.classNameMenu,style:{minHeight:e.height},children:[Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{ref:s,type:"checkbox",onChange:function(){return e.func(e.list.map((function(e){return e.id})),e.field)},disabled:e.disabled}),Object(Ze.jsx)("label",{children:"\u0412\u0441\u0435"})]}),e.list.map((function(t){return Object(Ze.jsx)("div",{className:"options",children:Object(Ze.jsx)(ai,{className:"ml10",label:t.title,onChange:function(){return e.func([t.id],e.field,!0)},checked:e.checked_list.includes(t.id)})},t.id)}))]}):null]})},pi={changeOrderState:ft,addEventComment:function(){var e=ve.getState(),t=Oe({order_id:e.order.edit,current_status_id:e.order.status.id,branch_id:e.branch.current_branch.id,comment:e.order.event_comment});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/order_comment",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_ORDER_STATE",data:{events:e.events||[],event_comment:""}}),Pe(r,"alert-success","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},hi=Object(s.b)((function(e){return{order:e.order}}),pi)((function(e){var t=i.a.useRef(null);return Object(r.useLayoutEffect)((function(){t.current.style.height="16px",t.current.style.height="".concat(Math.max(t.current.scrollHeight-10,16),"px")}),[e.order.event_comment]),Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("div",{className:"orderCommentBox",children:Object(Ze.jsx)("textarea",{ref:t,style:{minHeight:16,resize:"none"},className:"commentInput",onChange:function(t){return e.changeOrderState({event_comment:t.target.value})},value:e.order.event_comment,onKeyPress:function(t){return"Enter"===t.key&&t.shiftKey?(t.preventDefault(),void e.changeOrderState({event_comment:t.target.value+"\n"})):"Enter"===t.key?(t.preventDefault(),void e.addEventComment()):void 0},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f"})}),Object(Ze.jsxs)("p",{className:"m0 ml15 mt5",children:[Object(Ze.jsx)("b",{children:"Enter"}),", \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"]}),Object(Ze.jsxs)("p",{className:"m0 ml15",children:[Object(Ze.jsx)("b",{children:"Shift + Enter"}),", \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u0441\u0442\u0440\u043e\u0447\u043a\u0443"]})]})})),bi={selectedOrder:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_ORDER",field:t,value:e,saveToApp:n}}},ji=Object(s.b)((function(e){return{order:e.order}}),bi)((function(e){return Object(Ze.jsxs)("div",{className:"orderHistory",children:[Object(Ze.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ze.jsx)(oi,{}),Object(Ze.jsx)(mi,{id:"orderEvents",className:"ml5",height:"200px",classNameMenu:"aventFilterMenu",list:R,checked_list:e.order.event_filter,func:e.selectedOrder,field:"event_filter",icon:Z})]}),e.order.events.length?Object(Ze.jsx)(ui,{}):null,Object(Ze.jsx)(hi,{})]})})),_i={changeVisibleState:we,addClients:bn,addDiscountMargin:Be,createOrder:function(){var e=ve.getState(),t=Oe({estimated_done_at:e.order.estimated_done_at,order_type_id:e.order.order_type_id,client_id:e.order.client.id,ad_campaign_id:e.order.ad_campaign_id,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,created_by_id:e.data.user.id,branch_id:e.branch.current_branch.id,status_id:1,kindof_good_id:e.order.kindof_good.id,brand_id:e.order.brand.id,subtype_id:e.order.subtype.id,model_id:e.order.model.id||null,malfunction:e.order.malfunction,packagelist:e.order.packagelist,appearance:e.order.appearance,urgent:e.order.urgent,manager_notes:e.order.manager_notes,estimated_cost:e.order.estimated_cost,filter:gt()});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0,statusOrderEditor:!1}});case 2:return n.next=4,fetch(e.data.url_server+"/orders",t).then((function(e){return e.json()})).then((function(t){t.success?(r({type:"EDIT_ORDER",order:t.order}),e.view.checkOrderSticker&&r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderSticker:!0,needToResetOrder:!0}}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:t.data,count:t.count,events:t.events||[]}}),r({type:"CHANGE_FILTER_STATE",data:{badges:t.badges}}),Pe(r,"alert-success","\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")):console.warn(t.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:if(!e.view.checkOrderSticker){n.next=9;break}return n.next=7,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderSticker:!0}});case 7:n.next=11;break;case 9:return n.next=11,r({type:"RESET_ORDER"});case 11:return n.next=13,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},changeOrderState:ft,resetOrder:vt,addDictService:qe,saveOrder:function(){var e=ve.getState(),t=Oe({id:e.order.edit,assigned_at:e.order.assigned_at,duration:e.order.duration,estimated_done_at:e.order.estimated_done_at,scheduled_for:e.order.scheduled_for,warranty_date:e.order.warranty_date,status_deadline:e.order.status_deadline,ad_campaign_id:e.order.ad_campaign_id,client_id:e.order.client.id,order_type_id:e.order_type_id,manager_id:e.order.manager_id,engineer_id:e.order.engineer_id,kindof_good_id:e.order.kindof_good.id,brand_id:e.order.brand.id,subtype_id:e.order.subtype.id,model_id:e.order.model.id,serial:e.order.serial,malfunction:e.order.malfunction,packagelist:e.order.packagelist,appearance:e.order.appearance,engineer_notes:e.order.engineer_notes,manager_notes:e.order.manager_notes,resume:e.order.resume,cell:e.order.cell,estimated_cost:e.order.estimated_cost,urgent:e.order.urgent,filter:gt()});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!0}});case 2:return n.next=4,fetch(e.data.url_server+"/orders",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.order}),r({type:"CHANGE_ORDER_STATE",data:{ordersShow:e.data,count:e.count,events:e.events||[]}}),r({type:"CHANGE_FILTER_STATE",data:{badges:e.badges}}),Pe(r,"alert-success","\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:return n.next=6,r({type:"CHANGE_VISIBLE_STATE",data:{statusOrderLoader:!1}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},addOrders:xt,resetBookEquipment:wt,getOrder:function(e){var t=ve.getState(),n=Oe({id:e});return function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/get_order",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"EDIT_ORDER",order:e.data}),r({type:"CHANGE_ORDER_STATE",data:{events:e.events||[]}})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},fi=Object(s.b)((function(e){return{filter:e.filter,order:e.order,client:e.client}}),_i)((function(e){var t=Object(l.g)(),n=t.location.state&&t.location.state.order_id;Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name,e.client.filter_phone]),Object(r.useEffect)((function(){e.addDiscountMargin(),e.addDictService(),e.resetBookEquipment()}),[]);var i=function(){e.changeVisibleState({statusOrderEditor:!1,checkedOrderClient:!1,checkedOrderKindofGood:!0,checkedOrderBrand:!0,checkedOrderSubtype:!0}),e.resetOrder(),n&&t.goBack()},c=function(e){e.path.map((function(e){return e.id})).includes("addOrder")||e.path.map((function(e){return e.id})).includes("createNewOrder")||e.path.map((function(e){return e.id})).includes("paymentsEditorWiondow")||i()};Object(r.useEffect)((function(){return window.addEventListener("click",c),function(){window.removeEventListener("click",c)}})),Object(r.useEffect)((function(){n&&e.getOrder(t.location.state.order_id)}),[]);return n&&!e.order.edit?null:Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"createNewOrder",children:[Object(Ze.jsxs)("div",{className:"cteateNewOrderContent",children:[Object(Ze.jsxs)("div",{className:"createOrderForm",children:[Object(Ze.jsx)(sr,{}),e.order.edit?Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(zn,{list:["\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435","\u0420\u0430\u0431\u043e\u0442\u044b \u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b","\u041f\u043b\u0430\u0442\u0435\u0436\u0438"],func:function(t){return e.changeOrderState({tabs:t})},tab:e.order.tabs}),0===e.order.tabs?Object(Ze.jsx)(Fr,{}):null,1===e.order.tabs?Object(Ze.jsx)(Zr,{}):null,2===e.order.tabs?Object(Ze.jsx)(ci,{}):null]}):Object(Ze.jsx)(Fr,{})]}),Object(Ze.jsx)(ji,{})]}),Object(Ze.jsx)("div",{className:"boxOrderButtons",children:Object(Ze.jsx)(jn,{edit:e.order.edit,create:function(){Object.values(e.order.client).length&&Object.values(e.order.kindof_good).length&&Object.values(e.order.brand).length&&Object.values(e.order.subtype).length&&e.order.malfunction?e.createOrder():(Object.values(e.order.client).length||e.changeVisibleState({checkedOrderClient:!0}),Object.values(e.order.kindof_good).length||e.changeVisibleState({checkedOrderKindofGood:!1}),Object.values(e.order.brand).length||e.changeVisibleState({checkedOrderBrand:!1}),Object.values(e.order.subtype).length||e.changeVisibleState({checkedOrderSubtype:!1}),e.order.malfunction||e.changeVisibleState({inputMalfunctionChecked:!1}))},save:function(){Object.values(e.order.client).length&&Object.values(e.order.kindof_good).length&&Object.values(e.order.brand).length&&Object.values(e.order.subtype).length?e.saveOrder():(Object.values(e.order.client).length||e.changeVisibleState({checkedOrderClient:!0}),Object.values(e.order.kindof_good).length||e.changeVisibleState({checkedOrderKindofGood:!1}),Object.values(e.order.brand).length||e.changeVisibleState({checkedOrderBrand:!1}),Object.values(e.order.subtype).length||e.changeVisibleState({checkedOrderSubtype:!1}),e.order.malfunction||e.changeVisibleState({inputMalfunctionChecked:!1}))},close:i})})]})})})),vi=n(27),Oi={year:"numeric",month:"numeric",day:"numeric"},gi=Object(r.forwardRef)((function(e,t){var n=new Date(1e3*e.order.created_at);return Object(Ze.jsxs)("div",{className:"orderSticker",ref:t,children:[Object(Ze.jsxs)("div",{className:"row fs16",children:[Object(Ze.jsx)("div",{children:"OneTwoService"}),Object(Ze.jsx)("div",{className:"ml30",children:e.order.id_label})]}),Object(Ze.jsx)("div",{className:" ",children:"".concat(n.toLocaleString("ru",Oi).replace("\u0433.,",""),"  \u0413a\u0440\u0430\u043d\u0442\u0438\u044f \u0434\u043e: _____")}),Object(Ze.jsx)("div",{children:e.order.client.name}),Object(Ze.jsx)("div",{children:e.order.malfunction}),Object(Ze.jsx)("div",{children:"\u0420\u0430\u0431\u043e\u0442\u0430/\u0434\u0430\u0442\u0430:______________"}),Object(Ze.jsx)("div",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439_____________"})]})})),xi=Object(s.b)((function(e){return{order:e.order}}),{})((function(e){var t=Object(r.useRef)(),n=Object(vi.useReactToPrint)({content:function(){return t.current},onAfterPrint:e.onAfterPrint});return Object(r.useEffect)((function(){n()})),Object(Ze.jsx)("div",{style:{display:"none"},children:Object(Ze.jsx)(gi,{ref:t,order:e.order})})})),yi=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("span",{className:"tableText",children:e.order.subtype.title})})})),Ei=Object(s.b)((function(e){return{employees:e.employee.employees}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"noWr",children:function(t){if(t){var n=e.employees.find((function(e){return e.id===t}));return n?"".concat(n.last_name," ").concat(n.first_name):""}}(e.order.manager_id)})})})),Ni=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{className:"tablePrice",children:Object(Ze.jsx)("span",{children:e.order.missed_payments||null})})})),wi=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"tableText tableOne",children:e.order.manager_notes})})})),ki=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"tableText tableOne",children:e.order.cell})})})),Ci=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{className:"tableText tableOne",children:e.order.ad_campaign.name})})})),Si={addOrders:xt,initStatusMenuVisible:function(e){return{type:"INIT_STATUS_MENU_VISIBLE",data:e}},changeVisibleState:we,editOrder:function(e){return{type:"EDIT_ORDER",order:e}},changeBookState:Nt,resetOrder:vt},Ti=Object(s.b)((function(e){return{order:e.order,employees:e.employee.employees,user:e.data.user,view:e.view,mainFilter:e.filter.mainFilter}}),Si)((function(e){var t=Object(l.g)();Object(r.useEffect)((function(){var t={};e.order.ordersShow.forEach((function(e){t[e.id]=!1})),e.initStatusMenuVisible(t)}),[e.order.ordersShow]);var n=Object(r.useMemo)((function(){return e.order.tableFields.filter((function(e){return e.visible}))}),[e.order,e.order.tableFields]),i=Object(r.useRef)(null);return e.employees?Object(Ze.jsxs)("div",{className:"tableOrdersBox",children:[Object(Ze.jsxs)("table",{id:"tableOrders",ref:i,children:[Object(Ze.jsx)("thead",{className:"tableThead",children:Object(Ze.jsx)("tr",{children:n.map((function(e){return Object(Ze.jsx)(Bt,{data:e,tableHeight:i.current?i.current.offsetHeight:40},e.id)}))})}),Object(Ze.jsx)("tbody",{children:e.order.ordersShow.map((function(r){return Object(Ze.jsx)("tr",{className:"orderTableRows",onDoubleClick:function(){return function(n){e.changeBookState({equipment_type:n.kindof_good,equipment_brand:n.brand,equipment_subtype:n.subtype,equipment_model:n.model}),t.push("/orders/".concat(n.id),{order_id:n.id})}(r)},children:n.map((function(e){return function(e,t){switch(e.id){case 1:return Object(Ze.jsx)(Dt,{order:t},e.id);case 2:return Object(Ze.jsx)(Pt,{order:t},e.id);case 3:return Object(Ze.jsx)(Rt,{order:t},e.id);case 4:return Object(Ze.jsx)(Jt,{order:t},e.id);case 5:return Object(Ze.jsx)(mn,{order:t},e.id);case 6:return Object(Ze.jsx)(Xt,{order:t},e.id);case 7:return Object(Ze.jsx)(Qt,{order:t},e.id);case 8:return Object(Ze.jsx)(yi,{order:t},e.id);case 9:return Object(Ze.jsx)(Zt,{order:t},e.id);case 10:return Object(Ze.jsx)($t,{order:t},e.id);case 11:return Object(Ze.jsx)(Ei,{order:t},e.id);case 12:return Object(Ze.jsx)(ln,{order:t},e.id);case 13:return Object(Ze.jsx)(dn,{order:t},e.id);case 14:return Object(Ze.jsx)(Ni,{order:t},e.id);case 15:return Object(Ze.jsx)(un,{order:t},e.id);case 16:return Object(Ze.jsx)(wi,{order:t},e.id);case 17:return Object(Ze.jsx)(ki,{order:t},e.id);case 18:return Object(Ze.jsx)(Ci,{order:t},e.id);default:return null}}(e,r)}))},r.id)}))})]}),e.view.statusOrderEditor?Object(Ze.jsx)(fi,{}):null,e.view.statusPaymentsEditor?Object(Ze.jsx)(cr,{}):null,e.view.statusOrderSticker?Object(Ze.jsx)(xi,{onAfterPrint:function(){e.changeVisibleState({statusOrderSticker:!1}),e.view.needToResetOrder&&(e.resetOrder(),e.changeVisibleState({needToResetOrder:!1}))}}):null]}):Object(Ze.jsx)(At,{})})),Fi={changeFilterState:ut,addClientToTempFilter:function(e){var t=ve.getState();return function(n){fetch(t.data.url_server+"/get_clients",Oe({id:e})).then((function(e){return e.json()})).then((function(e){e.success?e.count&&n({type:"CHANGE_FILTER_STATE",data:{temp_client:e.data[0]}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u043b\u0438\u0435\u043d\u0442a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},Ai=Object(s.b)((function(e){return{filter:e.filter}}),Fi)((function(e){function t(){return(t=Object(m.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.filter.active_filter!==e.data.id?(e.data.filters.client_id&&e.addClientToTempFilter(e.data.filters.client_id[0]),e.changeFilterState(Object(j.a)(Object(j.a)({},e.data.filters),{},{active_filter:e.data.id,active_badge:0,search:"",temp_statuses:e.data.filters.status_id||[],temp_order_types:e.data.filters.order_type_id||[],temp_managers:e.data.filters.manager_id||[],temp_engineers:e.data.filters.engineer_id||[],temp_created_at:e.data.filters.created_at||[0,0],temp_kindof_good_id:e.data.filters.kindof_good,temp_brand:e.data.filters.brand,temp_subtype:e.data.filters.subtype,temp_client:{}}))):e.changeFilterState({active_filter:0,page:0,engineer_id:null,overdue:null,status_id:null,status_overdue:null,urgent:null,order_type_id:null,manager_id:null,created_at:null,kindof_good:null,brand:null,subtype:null,client_id:null});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(Ze.jsx)("div",{className:"customFilter",onClick:function(){return t.apply(this,arguments)},style:{backgroundColor:e.data.id===e.filter.active_filter?"#eeeeef":"white",opacity:e.data.id===e.filter.active_filter||0===e.filter.active_filter?1:.5},children:e.data.title})})),Pi={changeVisibleState:we,createCustomFilter:function(){var e=ve.getState(),t=Oe({title:e.filter.title,general:e.filter.general,employee_id:e.data.user.id,filters:{page:0,engineer_id:e.filter.temp_engineers.length?e.filter.temp_engineers:null,overdue:null,status_id:e.filter.temp_statuses.length?e.filter.temp_statuses:null,status_overdue:null,urgent:null,order_type_id:e.filter.temp_order_types.length?e.filter.temp_order_types:null,manager_id:e.filter.temp_managers.length?e.filter.temp_managers:null,created_at:e.filter.temp_created_at.some((function(e){return e}))?e.filter.temp_created_at:null,kindof_good:e.filter.temp_kindof_good_id,brand:e.filter.temp_brand,subtype:e.filter.temp_subtype,client_id:Object.values(e.filter.temp_client).length?[e.filter.temp_client.id]:null}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/custom_filters",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusCreateNewFilter:!1}}),r({type:"RESET_DATA_FILTER"}),Pe(r,"alert-success","\u0424\u0438\u043b\u044c\u0442\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435  \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},changeFilterState:ut},Di=Object(s.b)((function(e){return{filter:e.filter,inputFilterTitleChecked:e.view.inputFilterTitleChecked}}),Pi)((function(e){var t=function(){e.changeVisibleState({statusCreateNewFilter:!1,inputFilterTitleChecked:!0})},n=function(e){e.path.map((function(e){return e.id})).includes("createNewFilterWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"createNewFilterWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle w515",children:e.filter.active_filter?e.filter.title:"\u041d\u043e\u0432\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeFilterState({title:t.target.value})},value:e.filter.title,checkedFlag:"inputFilterTitleChecked",checked:e.inputFilterTitleChecked,redStar:!0}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041e\u0431\u0449\u0438\u0439",onChange:function(t){return e.changeFilterState({general:t.target.checked})},checked:e.filter.general})]}),Object(Ze.jsx)(jn,{edit:e.filter.active_filter,create:function(){e.filter.title?e.createCustomFilter():e.changeVisibleState({inputFilterTitleChecked:!1})},close:t})]})})})),Ri=Object(s.b)((function(e){return{statuses:e.data.status}}),{})((function(e){var t=Object(r.useRef)(),n=e.statuses.filter((function(t){return t.group===e.group}));Object(r.useEffect)((function(){var r=n.filter((function(t){return e.current_list.includes(t.id)}));r.length===n.length?(t.current.indeterminate=!1,t.current.checked=!0):r.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.current_list]);var i=function(t){e.func(t)};return Object(Ze.jsxs)("div",{className:"chackboxes",children:[Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return i(n.map((function(e){return e.id})))}}),Object(Ze.jsx)("label",{children:e.label})]}),n.map((function(t){return Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(ai,{className:"ml20",labelClassName:"statuses",color:t.color,onChange:function(){return i([t.id])},checked:e.current_list.includes(t.id),invisible:t.deleted}),Object(Ze.jsx)("div",{className:"statuses",style:{backgroundColor:t.color},children:t.name})]},t.id)}))]})})),Ii=Object(s.b)((function(e){return{status_group:e.data.status_group.filter((function(e){return e.type_group<8&&5!==e.type_group})),statuses:e.data.status.filter((function(e){return e.group<8}))}}),{})((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("chooseOfListStatuses")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=e.statuses.map((function(e){return e.id}));return e.invisible?null:Object(Ze.jsxs)("div",{className:e.className,style:{width:e.width?e.width:"250px"},id:"chooseOfListStatuses",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b"}),Object(Ze.jsxs)("div",{className:"optionsButton al-itm-ct",onClick:e.disabled?null:function(){return c(!i)},children:[Object(Ze.jsx)("div",{className:"noWr",children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(e.current_list.length)}),Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2",color:"grey"})]}),i?Object(Ze.jsxs)("div",{className:"liststatus",children:[Object(Ze.jsx)("div",{className:"blocList",style:{width:e.width?e.width:"250px"},children:e.status_group.map((function(t){return Object(Ze.jsx)(Ri,{label:t.name,group:t.type_group,func:function(t){return e.func(t)},current_list:e.current_list},t.id)}))}),Object(Ze.jsxs)("div",{className:"btmsts",children:[Object(Ze.jsx)(Br,{className:"whiteBlueBotton",title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435",onClick:function(){return e.func(s)},disabled:e.current_list.length===s.length}),Object(Ze.jsx)(Br,{className:"whiteBlueBotton",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0441\u0435",onClick:function(){return e.func_clear()}})]})]}):null]})})),Bi=function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("chooseOfList".concat(e.id))||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=Object(r.useRef)();Object(r.useEffect)((function(){if(s.current){var t=e.list.filter((function(t){return e.checked_list.includes(t.id)}));t.length===e.list.length?(s.current.indeterminate=!1,s.current.checked=!0):t.length?s.current.indeterminate=!0:(s.current.indeterminate=!1,s.current.checked=!1)}}),[e.checked_list,i]);return Object(Ze.jsxs)("div",{style:{width:e.width?e.width:"250px"},id:"chooseOfList".concat(e.id),className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsxs)("div",{className:"optionsButton al-itm-ct",onClick:function(){return c(!i)},children:[Object(Ze.jsx)("div",{children:function(t){switch(t){case 0:return"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e";case e.list.length:return"\u0412\u0441\u0435";default:return"\u0412\u044b\u0431\u0440\u0430\u043d\u043e ".concat(t)}}(e.checked_list.length)}),Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2",color:"#282e33"})]}),i?Object(Ze.jsxs)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:[Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{ref:s,type:"checkbox",onChange:function(){return e.func(e.list.map((function(e){return e.id})))},disabled:e.disabled}),Object(Ze.jsx)("label",{children:e.mainLable})]}),e.list.map((function(t){return Object(Ze.jsx)("div",{className:"options",children:Object(Ze.jsx)(ai,{className:"ml10",label:e.employee?"".concat(t.last_name," ").concat(t.first_name):t.title?t.title:t.name,onChange:function(){return e.func([t.id])},checked:e.checked_list.includes(t.id),disabled:e.disabled})},t.id)}))]}):null]})},Li=function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("ChooseWithSearch".concat(e.id))||i&&c(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ze.jsxs)("div",{id:"ChooseWithSearch".concat(e.id),style:{width:e.width?e.width:"250px"},className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsxs)("button",{className:e.disabled?"optionsUnavaliable":"optionsFilterText",onClick:function(){return c(!0)},disabled:e.disabled||Object.values(e.current_element).length,children:[Object(Ze.jsx)("input",{className:e.disabled?"optionsUnavaliable":"optionFilterInput",onChange:function(t){return e.changeFilter(t.target.value)},placeholder:e.placeholder,value:Object.values(e.current_element).length?e.current_element:e.filter,disabled:e.disabled||Object.values(e.current_element).length}),Object.values(e.current_element).length?Object(Ze.jsx)("div",{className:"al-itm-ct",onClick:function(){return e.setElement({})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2"})]}),i?Object(Ze.jsx)("div",{className:"listOptionsChoose",style:{width:e.width?e.width:"250px"},children:e.list.map((function(t,n){return Object(Ze.jsx)("div",{className:"options",onClick:function(){e.setElement(t),c(!1)},children:t.title||t.name},n)}))}):null]})},Mi={addEquipmentType:Ct,changeBookState:Nt,changeFilterState:ut},Vi=Object(s.b)((function(e){return{filter:e.filter,book:e.book}}),Mi)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){e.addEquipmentType()}),[e.book.filter_type]);var a=!!Object.values(e.book.equipment_type).length,s=function(e){e.path.map((function(e){return e.id})).includes("listFilterOfGroup")||e.path.map((function(e){return e.id})).includes("optionsFilterTextOfGroup")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",s),function(){window.removeEventListener("click",s)}}));return Object(Ze.jsxs)("div",{className:"mt15 h52",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0422\u0438\u043f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(Ze.jsxs)("button",{id:"optionsFilterTextOfGroup",className:"optionsFilterText",onClick:function(){return c(!0)},disabled:a,children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeBookState({filter_type:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443",value:a?e.book.equipment_type.title:e.book.filter_type,disabled:a}),a?Object(Ze.jsx)("div",{onClick:function(){e.changeFilterState({temp_kindof_good_id:null,temp_brand:null,temp_subtype:null}),e.changeBookState({filter_type:"",filter_brand:"",filter_subtype:"",equipment_type:{},equipment_brand:{},equipment_subtype:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2"})]}),i?Object(Ze.jsx)("div",{className:"listFilter",id:"listFilterOfGroup",children:e.book.equipment_types.map((function(t){return Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeFilterState({temp_kindof_good_id:t.id}),e.changeBookState({equipment_type:t}),c(!1)}(t)},children:t.title},t.id)}))}):null]})})),Gi={addEquipmentBrand:St,changeBookState:Nt,changeFilterState:ut},Hi=Object(s.b)((function(e){return{filter:e.filter,book:e.book}}),Gi)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){e.addEquipmentBrand()}),[e.book.filter_brand,e.book.equipment_type]);var a=!!Object.values(e.book.equipment_brand).length,s=!!Object.values(e.book.equipment_type).length,o=function(e){e.path.map((function(e){return e.id})).includes("listFilterOfBrand")||e.path.map((function(e){return e.id})).includes("optionsFilterTextOfBrand")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",o),function(){window.removeEventListener("click",o)}}));return Object(Ze.jsxs)("div",{className:"mt15 h52",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0411\u0440\u0435\u043d\u0434"}),Object(Ze.jsxs)("button",{id:"optionsFilterTextOfBrand",className:"optionsFilterText",onClick:function(){return c(!0)},disabled:a||!s,children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeBookState({filter_brand:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u0431\u0440\u0435\u043d\u0434",value:a?e.book.equipment_brand.title:e.book.filter_brand,disabled:a||!s}),a?Object(Ze.jsx)("div",{onClick:function(){e.changeFilterState({temp_brand:null,temp_subtype:null}),e.changeBookState({filter_brand:"",filter_subtype:"",equipment_brand:{},equipment_subtype:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2"})]}),i?Object(Ze.jsx)("div",{className:"listFilter",id:"listFilterOfBrand",children:e.book.equipment_brands.map((function(t){return Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeFilterState({temp_brand:t.id}),e.changeBookState({equipment_brand:t}),c(!1)}(t)},children:t.title},t.id)}))}):null]})})),qi={addEquipmentSubtype:Tt,changeBookState:Nt,changeFilterState:ut},Wi=Object(s.b)((function(e){return{filter:e.filter,book:e.book}}),qi)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){e.addEquipmentSubtype()}),[e.book.filter_subtype,e.book.equipment_brand]);var a=!!Object.values(e.book.equipment_subtype).length,s=!!Object.values(e.book.equipment_brand).length,o=!!Object.values(e.book.equipment_type).length,l=function(e){e.path.map((function(e){return e.id})).includes("listFilterOfSubtype")||e.path.map((function(e){return e.id})).includes("optionsFilterTextOfSubtype")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",l),function(){window.removeEventListener("click",l)}}));return Object(Ze.jsxs)("div",{className:"mt15 h52",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u041c\u043e\u0434\u0443\u043b\u044c/\u0421\u0435\u0440\u0438\u044f"}),Object(Ze.jsxs)("button",{id:"optionsFilterTextOfSubtype",className:"optionsFilterText",onClick:function(){return c(!0)},disabled:a||!o||!s,children:[Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changeBookState({filter_subtype:t.target.value})},placeholder:"\u0412\u044b\u0431\u0438\u0440\u0435\u0442\u0435 \u041c\u043e\u0434\u0443\u043b\u044c/\u0421\u0435\u0440\u0438\u044e",value:a?e.book.equipment_subtype.title:e.book.filter_subtype,disabled:a||!o||!s}),a?Object(Ze.jsx)("div",{onClick:function(){e.changeFilterState({temp_subtype:null}),e.changeBookState({filter_subtype:"",equipment_subtype:{}})},children:Object(Ze.jsx)(ct,{icon:ee,className:"icon-close"})}):Object(Ze.jsx)(ct,{icon:i?Q:X,className:"icon-s2"})]}),i?Object(Ze.jsx)("div",{className:"listFilter",id:"listFilterOfSubtype",children:e.book.equipment_subtypes.map((function(t){return Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){return function(t){e.changeFilterState({temp_subtype:t.id}),e.changeBookState({equipment_subtype:t}),c(!1)}(t)},children:t.title},t.id)}))}):null]})})),zi={addClients:bn,resetTempFilter:function(){return{type:"RESET_TEMP_FILTER"}},deleteFilter:function(){var e=ve.getState(),t=Oe({id:e.filter.active_filter,employee_id:e.data.user.id});return t.method="DELETE",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/custom_filters",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data,active_filter:0}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusCreateNewFilter:!1}}),r({type:"RESET_DATA_FILTER"}),Pe(r,"alert-success","\u0424\u0438\u043b\u044c\u0442\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},selectedFilter:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_FILTER",field:t,value:e,saveToApp:n}},changeFilterState:ut,changeVisibleState:we,changeClientState:hn},Ui=Object(s.b)((function(e){return{statusCreateNewFilter:e.view.statusCreateNewFilter,filter:e.filter,order_type:e.data.order_type,employees:e.employee.employees.filter((function(e){return!e.deleted})),client:e.client,user:e.data.user,temp_client:e.filter.temp_client}}),zi)((function(e){Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name]);return Object(Ze.jsxs)("div",{className:"setCustomFilter",children:[Object(Ze.jsxs)("div",{className:"row jc-c",children:[Object(Ze.jsxs)("div",{className:"jc-sb w100 m10",children:[Object(Ze.jsx)(Ii,{className:"h52",width:"100%",func:function(t){return e.selectedFilter(t,"temp_statuses")},func_clear:function(){return e.changeFilterState({temp_statuses:[]})},current_list:e.filter.temp_statuses}),Object(Ze.jsx)(Vi,{}),Object(Ze.jsx)(Li,{id:"filterClient",className:"mt15 h52",width:"100%",title:"\u041a\u043b\u0438\u0435\u043d\u0442",list:e.client.clients,current_element:Object.values(e.temp_client).length?e.temp_client.name:"",setElement:function(t){return e.changeFilterState({temp_client:t})},filter:e.client.filter_name,changeFilter:function(t){return e.changeClientState({filter_name:t})},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",disabled:!1})]}),Object(Ze.jsxs)("div",{className:"jc-sb w100 m10",children:[Object(Ze.jsx)(Bi,{id:"idTypeOrders",className:"h52",width:"100%",title:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430",mainLable:"\u0412\u0441\u0435",list:e.order_type,checked_list:e.filter.temp_order_types,func:function(t){return e.selectedFilter(t,"temp_order_types")}}),Object(Ze.jsx)(Hi,{}),Object(Ze.jsx)(Bi,{id:"idManagerOrders",className:"h52 mt15",width:"100%",title:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440",mainLable:"\u0412\u0441\u0435",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_managers")})),employee:!0,checked_list:e.filter.temp_managers,func:function(t){return e.selectedFilter(t,"temp_managers")}})]}),Object(Ze.jsxs)("div",{className:"jc-sb w100 m10",children:[Object(Ze.jsx)(rr,{className:"h52",title:"\u0414\u0430\u0442\u0430",width:"100%",range:!0,allDate:!0,func:function(t){return e.changeFilterState({temp_created_at:t.map((function(e){return parseInt(e/1e3)}))})},current_date:e.filter.temp_created_at}),Object(Ze.jsx)(Wi,{}),Object(Ze.jsx)(Bi,{id:"idEngineerOrders",className:"h52 mt15",width:"100%",title:"\u0418\u043d\u0436\u0435\u043d\u0435\u0440",mainLable:"\u0412\u0441\u0435",list:e.employees.filter((function(e){return e.role.permissions.includes("in_list_engineers")})),employee:!0,checked_list:e.filter.temp_engineers,func:function(t){return e.selectedFilter(t,"temp_engineers")},disabled:!e.user.role.orders_visibility})]})]}),Object(Ze.jsxs)("div",{className:"buttons fs14 mt15",children:[Object(Ze.jsx)(Br,{className:"blueButton",title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",onClick:function(){var t={page:0,engineer_id:e.filter.temp_engineers.length?e.filter.temp_engineers:null,overdue:null,status_id:e.filter.temp_statuses.length?e.filter.temp_statuses:null,status_overdue:null,urgent:null,order_type_id:e.filter.temp_order_types.length?e.filter.temp_order_types:null,manager_id:e.filter.temp_managers.length?e.filter.temp_managers:null,created_at:e.filter.temp_created_at.length&&e.filter.temp_created_at.every((function(e){return 0===e}))?null:e.filter.temp_created_at,kindof_good:e.filter.temp_kindof_good_id,brand:e.filter.temp_brand,subtype:e.filter.temp_subtype,client_id:Object.values(e.filter.temp_client).length?[e.filter.temp_client.id]:null,active_badge:0,active_filter:0};e.changeFilterState(t)}}),e.filter.active_filter?Object(Ze.jsx)(Br,{className:"whiteButton bcr",icon:V,iconClassName:"icon-s1 pd1",iconColor:"white",onClick:function(){return e.deleteFilter()}}):Object(Ze.jsx)(Br,{className:"whiteButton",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",onClick:function(){return e.changeVisibleState({statusCreateNewFilter:!0})}}),Object(Ze.jsx)(Br,{className:"whiteButton",title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u044b",onClick:function(){return e.resetTempFilter()},icon:$,iconClassName:"icon-sm8",iconColor:"#282e33"})]}),e.statusCreateNewFilter?Object(Ze.jsx)(Di,{}):null]})})),Yi={changeOrderField:Ot},Ki=Object(s.b)((function(e){return{order:e.order}}),Yi)((function(e){var t=Object(r.useState)(!0),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("tableOrderFields")||i&&c(!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(r.useEffect)((function(){c(!1)}),[]),Object(Ze.jsxs)("div",{id:"tableOrderFields",className:"tableFields otf_pos ",children:[Object(Ze.jsxs)("div",{className:"chooseFieldButton pd2",onClick:function(){return c(!i)},children:[Object(Ze.jsx)("div",{className:"cl11",children:Object(Ze.jsx)(ct,{icon:e.icon||W,className:"icon-table"})}),Object(Ze.jsx)("div",{className:"cl12",children:Object(Ze.jsx)(ct,{icon:Q,className:"icon-table"})})]}),i?Object(Ze.jsx)("div",{className:"listOptionField",children:Object(Ze.jsx)("div",{style:{overflow:"auto"},children:e.order.tableFields.map((function(t){return Object(Ze.jsx)("div",{className:"options",children:Object(Ze.jsx)(ai,{className:"ml10",label:t.title,onChange:function(n){return e.changeOrderField(t.id,"visible",n.target.checked)},checked:t.visible})},t.id)}))})}):null]})})),Ji={setVisibleFlag:Ne,changeOrderState:ft,changeFilterState:ut},Xi=Object(s.b)((function(e){return{customFilters:e.filter.customFilters,statusSetCustomFilter:e.view.statusSetCustomFilter,permissions:e.data.user.role.permissions,statusOrderEditor:e.view.statusOrderEditor,user:e.data.user,edit:e.order.edit,schedule:e.branch.current_branch.schedule}}),Ji)((function(e){return Object(Ze.jsxs)("div",{className:"mainCustomPanel ",children:[Object(Ze.jsxs)("div",{className:"customPanel",children:[Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(Br,{id:"addOrder",className:"greenButton",title:"+ \u0417\u0430\u043a\u0430\u0437",onClick:function(){for(var t=new Date,n=function(n){t.setDate(t.getDate()+1);var i=t.getDay()||7;e.schedule.find((function(e){return e.week_day===i})).work_day&&n++,r=n},r=0;r<4;)n(r);e.changeOrderState({manager_id:e.user.id,estimated_done_at:parseInt(t/1e3)}),e.setVisibleFlag("statusOrderEditor",!0)},invisible:!e.permissions.includes("create_orders")}),Object(Ze.jsxs)("div",{className:"customFilters",children:[Object(Ze.jsx)(Br,{className:"customFilter",title:"\u0424\u0438\u043b\u044c\u0442\u0440",onClick:function(){e.setVisibleFlag("statusSetCustomFilter","change"),e.changeFilterState({active_badge:0,active_filter:0})},invisible:!1,icon:Z,iconClassName:"icon-s2",iconColor:"282e33"}),e.customFilters.map((function(e){return Object(Ze.jsx)(Ai,{data:e},e.id)}))]})]}),Object(Ze.jsx)(Ki,{})]}),e.statusSetCustomFilter?Object(Ze.jsx)(Ui,{}):null]})}));var Qi={addOrders:xt,addStatusGroup:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_status_group",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_STATUS_GROUP",status_group:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0433\u0440\u0443\u043f\u043f \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addCustomFilters:function(){var e=ve.getState(),t=Oe({employee_id:e.data.user.id});return function(n){fetch(e.data.url_server+"/get_custom_filters",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_FILTER_STATE",data:{customFilters:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addAdCampaign:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_ad_campaign",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_AD_CAMPAIGN",ad_campaign:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addEquipment:Ie,addBadges:function(){var e=ve.getState(),t=Oe({employee_access:e.data.user.role.orders_visibility?null:e.data.user.id});return function(n){fetch(e.data.url_server+"/bagges",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_FILTER_STATE",data:{badges:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 temple \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeFilterState:ut,changeFilterForm:function(e,t){return{type:"CHANGE_FILTER_FORM",field:t,value:e}}},Zi=Object(s.b)((function(e){return{filter:e.filter,count:e.order.count,ordersShow:e.order.ordersShow,statusOrderLoader:e.view.statusOrderLoader,current_branch:e.branch.current_branch}}),Qi)((function(e){return Object(r.useEffect)((function(){Object.values(e.current_branch).length&&e.addOrders()}),[e.filter.sort,e.filter.field_sort,e.filter.page,e.filter.engineer_id,e.filter.overdue,e.filter.status_id,e.filter.status_overdue,e.filter.urgent,e.filter.order_type_id,e.filter.manager_id,e.filter.created_at,e.filter.kindof_good,e.filter.brand,e.filter.subtype,e.filter.client_id,e.filter.search,e.current_branch]),Object(r.useEffect)((function(){e.addStatusGroup(),e.addCustomFilters(),e.addAdCampaign()}),[]),Object(r.useEffect)((function(){e.addBadges()}),[]),Object(Ze.jsxs)("div",{className:"pageContent",children:[Object(Ze.jsx)(ht,{oderSearch:""}),Object(Ze.jsx)(_t,{}),Object(Ze.jsx)(Xi,{}),e.ordersShow?Object(Ze.jsx)(Ti,{}):Object(Ze.jsx)(At,{}),Object(Ze.jsxs)("div",{className:"tableAllPage",children:[Object(Ze.jsx)(dt.a,{pageCount:e.count%50>0?e.count/50:e.count/50-1,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(t){var n=t.selected?t.selected:0;e.changeFilterState({page:n})},forcePage:e.page,previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"pages-pagination",containerClassName:"pagination",pageClassName:"pages-pagination",activeClassName:"active",nextClassName:"pages-pagination",previousClassName:"pages-pagination"}),Object(Ze.jsxs)("div",{className:"tablePageCount",children:["\u0412\u0441\u0435\u0433\u043e - ",e.count]})]}),e.statusOrderLoader?Object(Ze.jsx)(At,{className:"orderLoader"}):null]})})),$i=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0430\u0434\u0430\u0447"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),ec=function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://onetwoonline.moizvonki.ru/api/v1",t={user_name:"stasmen66@gmail.com",api_key:"1zww7we8zoq53rm32cmewjnjx683asms",action:"calls.send_sms",to:"79002888475",text:"\u0411\u0440\u0430\u0442 \u043f\u0440\u0438\u0432\u0435\u0442!"},e.prev=2,n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","Content-Length":"2"},body:JSON.stringify(t)},e.next=6,fetch("https://onetwoonline.moizvonki.ru/api/v1",n).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"}),Object(Ze.jsx)("button",{onClick:function(){!function(){e.apply(this,arguments)}()},className:"dataDownload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})},tc=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u0434\u0430\u0436\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),nc={editCashbox:function(e){return{type:"EDIT_CASHBOX",cashbox:e}},changeCashboxState:Lt,changePaymentState:Gt,changeVisibleState:we},rc=Object(s.b)((function(e){return{user:e.data.user,activ_cashbox_id:e.cashbox.current_cashbox.id}}),nc)((function(e){var t=function(t){return t===e.activ_cashbox_id},n=e.user.role.permissions.includes("edit_cash"),r=e.user.role.permissions.includes("make_income")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("incoming"):e.cashbox.employees[e.user.id].permissions.includes("incoming")),i=e.user.role.permissions.includes("make_expenditure")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("outcoming"):e.cashbox.employees[e.user.id].permissions.includes("outcoming")),c=e.user.role.permissions.includes("move_money")&&t(e.cashbox.id)&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("outcoming_move"):e.cashbox.employees[e.user.id].permissions.includes("outcoming_move")),a=e.user.role.permissions.includes("see_remains")&&(e.cashbox.employees[e.user.id].like_cashbox?e.cashbox.permissions.includes("show_cashbox_remains"):e.cashbox.employees[e.user.id].permissions.includes("show_cashbox_remains"));return Object(Ze.jsxs)("div",{className:"cashbox ".concat(t(e.cashbox.id)&&!e.cashbox.deleted?"bcg":"cgr"),onClick:function(){return e.changeCashboxState({current_cashbox:e.cashbox})},children:[Object(Ze.jsxs)("div",{className:"icons",children:[Object(Ze.jsx)("div",{children:Object(Ze.jsx)(ct,{className:"smalIcon",icon:"M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM23.487 22c0.268-1.264 0.437-2.606 0.492-4h3.983c-0.104 1.381-0.426 2.722-0.959 4h-3.516zM6.513 12c-0.268 1.264-0.437 2.606-0.492 4h-3.983c0.104-1.381 0.426-2.722 0.959-4h3.516zM21.439 12c0.3 1.28 0.481 2.62 0.54 4h-5.979v-4h5.439zM16 10v-5.854c0.456 0.133 0.908 0.355 1.351 0.668 0.831 0.586 1.625 1.488 2.298 2.609 0.465 0.775 0.867 1.638 1.203 2.578h-4.852zM10.351 7.422c0.673-1.121 1.467-2.023 2.298-2.609 0.443-0.313 0.895-0.535 1.351-0.668v5.854h-4.852c0.336-0.94 0.738-1.803 1.203-2.578zM14 12v4h-5.979c0.059-1.38 0.24-2.72 0.54-4h5.439zM2.997 22c-0.533-1.278-0.854-2.619-0.959-4h3.983c0.055 1.394 0.224 2.736 0.492 4h-3.516zM8.021 18h5.979v4h-5.439c-0.3-1.28-0.481-2.62-0.54-4zM14 24v5.854c-0.456-0.133-0.908-0.355-1.351-0.668-0.831-0.586-1.625-1.488-2.298-2.609-0.465-0.775-0.867-1.638-1.203-2.578h4.852zM19.649 26.578c-0.673 1.121-1.467 2.023-2.298 2.609-0.443 0.312-0.895 0.535-1.351 0.668v-5.854h4.852c-0.336 0.94-0.738 1.802-1.203 2.578zM16 22v-4h5.979c-0.059 1.38-0.24 2.72-0.54 4h-5.439zM23.98 16c-0.055-1.394-0.224-2.736-0.492-4h3.516c0.533 1.278 0.855 2.619 0.959 4h-3.983zM25.958 10h-2.997c-0.582-1.836-1.387-3.447-2.354-4.732 1.329 0.636 2.533 1.488 3.585 2.54 0.671 0.671 1.261 1.404 1.766 2.192zM5.808 7.808c1.052-1.052 2.256-1.904 3.585-2.54-0.967 1.285-1.771 2.896-2.354 4.732h-2.997c0.504-0.788 1.094-1.521 1.766-2.192zM4.042 24h2.997c0.583 1.836 1.387 3.447 2.354 4.732-1.329-0.636-2.533-1.488-3.585-2.54-0.671-0.671-1.261-1.404-1.766-2.192zM24.192 26.192c-1.052 1.052-2.256 1.904-3.585 2.54 0.967-1.285 1.771-2.896 2.354-4.732h2.997c-0.504 0.788-1.094 1.521-1.766 2.192z",color:t(e.cashbox.id)&&e.cashbox.isGlobal?"grey":"white"})}),Object(Ze.jsx)("div",{onClick:n?function(){e.editCashbox(e.cashbox),e.changeVisibleState({statusCashboxEditor:!0})}:null,children:Object(Ze.jsx)(ct,{className:"smalIcon curP",icon:"M29.181 19.070c-1.679-2.908-0.669-6.634 2.255-8.328l-3.145-5.447c-0.898 0.527-1.943 0.829-3.058 0.829-3.361 0-6.085-2.742-6.085-6.125h-6.289c0.008 1.044-0.252 2.103-0.811 3.070-1.679 2.908-5.411 3.897-8.339 2.211l-3.144 5.447c0.905 0.515 1.689 1.268 2.246 2.234 1.676 2.903 0.672 6.623-2.241 8.319l3.145 5.447c0.895-0.522 1.935-0.82 3.044-0.82 3.35 0 6.067 2.725 6.084 6.092h6.289c-0.003-1.034 0.259-2.080 0.811-3.038 1.676-2.903 5.399-3.894 8.325-2.219l3.145-5.447c-0.899-0.515-1.678-1.266-2.232-2.226zM16 22.479c-3.578 0-6.479-2.901-6.479-6.479s2.901-6.479 6.479-6.479c3.578 0 6.479 2.901 6.479 6.479s-2.901 6.479-6.479 6.479z",color:t(e.cashbox.id)&&n?"grey":"white"})})]}),Object(Ze.jsx)("div",{children:e.cashbox.title.toUpperCase()}),a?Object(Ze.jsx)("div",{className:"cacsboxBalance",children:"".concat(e.cashbox.balance?parseFloat(e.cashbox.balance).toFixed(2):0," \u0440\u0443\u0431.")}):null,Object(Ze.jsxs)("div",{className:"row jc-c",children:[Object(Ze.jsx)(Br,{title:"+ \u041f\u0440\u0438\u0445\u043e\u0434",className:e.cashbox.deleted?"whiteButton m10":"greenButton m10",onClick:function(){e.changePaymentState({direction:2,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,invisible:!r}),Object(Ze.jsx)(Br,{id:"344",title:"- \u0420\u0430\u0441\u0445\u043e\u0434",className:e.cashbox.deleted?"whiteButton m10":"greenButton bcr m10",onClick:function(){e.changePaymentState({direction:1,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,invisible:!i})]}),Object(Ze.jsx)(Br,{title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",className:"whiteButton",onClick:function(){e.changePaymentState({direction:0,context:{type:"payment"},current_type:e.cashbox.type,employee_id:e.user.id,cashbox_id:e.cashbox.id}),e.changeVisibleState({statusPaymentsEditor:!0})},disabled:e.cashbox.deleted,invisible:!c})]})})),ic=function(e){return Object(Ze.jsxs)("div",{className:"warningOrange",style:{width:e.width},children:[Object(Ze.jsx)("div",{children:Object(Ze.jsx)(ct,{icon:H,color:"#efac4e"})}),Object(Ze.jsx)("div",{className:"ml10",children:e.text})]})},cc={setVisibleFlag:Ne,changeCashboxPermissions:Mt},ac=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,cashbox:e.cashbox}}),cc)((function(e){var t=Object(r.useState)(e.cashbox.employees[e.cashbox.permissions_employee].like_cashbox),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("cashboxEmployeeEditor")||e.setVisibleFlag("statusCashboxEmployeeEditor",!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ze.jsx)("div",{className:"centerBlock",children:Object(Ze.jsxs)("div",{className:"blockWindow",id:"cashboxEmployeeEditor",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"".concat(e.employee.last_name," ").concat(e.employee.first_name)}),Object(Ze.jsx)("div",{className:"createNewTitle mt0",children:e.employee.role_title}),Object(Ze.jsx)(ic,{text:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0435\u0433\u043e \u0440\u043e\u043b\u0438",width:"500px"}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430",name:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u043a\u0430\u0441\u0441\u044b","\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435"],func1:function(){c(!0),e.changeCashboxPermissions(!0,"like_cashbox")},func2:function(){c(!1),e.changeCashboxPermissions(!1,"like_cashbox")},checked:e.cashbox.employees[e.cashbox.permissions_employee].like_cashbox,disabled:e.cashbox.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435",onChange:function(){return e.changeCashboxPermissions("show_cashbox_remains","permissions")},checked:i?e.cashbox.permissions.includes("show_cashbox_remains"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("show_cashbox_remains"),disabled:e.cashbox.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a",onChange:function(){return e.changeCashboxPermissions("show_cash_flow","permissions")},checked:i?e.cashbox.permissions.includes("show_cash_flow"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("show_cash_flow"),disabled:e.cashbox.deleted||i}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.changeCashboxPermissions("incoming","permissions")},checked:i?e.cashbox.permissions.includes("incoming"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("incoming"),disabled:e.cashbox.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeCashboxPermissions("incoming_move","permissions")},checked:i?e.cashbox.permissions.includes("incoming_move"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("incoming_move"),disabled:e.cashbox.deleted||i})]}),Object(Ze.jsxs)("div",{className:"ml30",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.changeCashboxPermissions("outcoming","permissions")},checked:i?e.cashbox.permissions.includes("outcoming"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("outcoming"),disabled:e.cashbox.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeCashboxPermissions("outcoming_move","permissions")},checked:i?e.cashbox.permissions.includes("outcoming_move"):e.cashbox.employees[e.cashbox.permissions_employee].permissions.includes("outcoming_move"),disabled:e.cashbox.deleted||i})]})]}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"blueButton mr-lf-0",onClick:function(){return e.setVisibleFlag("statusCashboxEmployeeEditor",!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Ze.jsx)("div",{className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusCashboxEmployeeEditor",!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})})),sc={setVisibleFlag:Ne,editEmployee:ze,changeCashboxState:Lt,changeCashboxPermissions:Mt},oc=Object(s.b)((function(e){return{employees:e.employee.employees.filter((function(e){return!e.deleted&&0!==e.id})),cashbox:e.cashbox,statusCashboxEmployeeEditor:e.view.statusCashboxEmployeeEditor}}),sc)((function(e){return Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w15"}),Object(Ze.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ze.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0430"})]})}),Object(Ze.jsx)("tbody",{children:e.employees.map((function(t){return Object(Ze.jsxs)("tr",{onDoubleClick:function(){return function(t){e.changeCashboxState({permissions_employee:t.id}),e.editEmployee(t),e.setVisibleFlag("statusCashboxEmployeeEditor",!0)}(t)},children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)(ai,{onChange:function(n){return r=t.id,i=n.target.checked,e.changeCashboxState({permissions_employee:r}),void e.changeCashboxPermissions(i,"available");var r,i},checked:e.cashbox.employees[t.id].available,disabled:e.cashbox.deleted})}),Object(Ze.jsx)("td",{children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ze.jsx)("td",{children:e.cashbox.employees[t.id].available?e.cashbox.employees[t.id].like_cashbox?"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u043a\u0430\u0441\u0441\u044b":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"})]},t.id)}))})]}),e.statusCashboxEmployeeEditor?Object(Ze.jsx)(ac,{}):null]})})),lc={changeCashboxState:Lt,chooseCashboxSelected:function(e,t){return{type:"CHOOSE_CASHBOX_SELECTED",id:e,field:t}}},dc=Object(s.b)((function(e){return{cashbox:e.cashbox,view:e.view}}),lc)((function(e){return Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeCashboxState({title:t.target.value})},value:e.cashbox.title,checkedFlag:"inputCashboxTitleChecked",checked:e.view.inputCashboxTitleChecked,redStar:!0,disabled:e.cashbox.deleted}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u0422\u0438\u043f",name:["\u041a\u0430\u0441\u0441\u0430 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u041a\u0430\u0441\u0441\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"],func1:function(){return e.changeCashboxState({isGlobal:!0})},func2:function(){return e.changeCashboxState({isGlobal:!1})},checked:e.cashbox.isGlobal,disabled:e.cashbox.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0441\u0441\u0430",onChange:function(t){return e.changeCashboxState({isVirtual:t.target.checked})},checked:e.cashbox.isVirtual,disabled:e.cashbox.deleted}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0440\u0430\u0441\u0447\u0435\u0442\u0430",name:["\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0439","\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0439"],func1:function(){return e.changeCashboxState({type:0})},func2:function(){return e.changeCashboxState({type:1})},checked:!0,disabled:e.cashbox.deleted}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043a\u0430\u0441\u0441\u043e\u0439"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043e\u043a \u0434\u0435\u043d\u0435\u0433 \u0432 \u043a\u0430\u0441\u0441\u0435",onChange:function(){return e.chooseCashboxSelected(["show_cashbox_remains"],"permissions")},checked:e.cashbox.permissions.includes("show_cashbox_remains"),disabled:e.cashbox.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0439 \u043f\u043e\u0442\u043e\u043a",onChange:function(){return e.chooseCashboxSelected(["show_cash_flow"],"permissions")},checked:e.cashbox.permissions.includes("show_cash_flow"),disabled:e.cashbox.deleted}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.chooseCashboxSelected(["incoming"],"permissions")},checked:e.cashbox.permissions.includes("incoming"),disabled:e.cashbox.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseCashboxSelected(["incoming_move"],"permissions")},checked:e.cashbox.permissions.includes("incoming_move"),disabled:e.cashbox.deleted})]}),Object(Ze.jsxs)("div",{className:"ml30",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0440\u0438\u0445\u043e\u0434",onChange:function(){return e.chooseCashboxSelected(["outcoming"],"permissions")},checked:e.cashbox.permissions.includes("outcoming"),disabled:e.cashbox.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseCashboxSelected(["outcoming_move"],"permissions")},checked:e.cashbox.permissions.includes("outcoming_move"),disabled:e.cashbox.deleted})]})]})]})})),uc={changeCashboxState:Lt,setVisibleFlag:Ne,createCashbox:function(){var e=ve.getState(),t=Oe({title:e.cashbox.title,balance:e.cashbox.balance,type:e.cashbox.type,isGlobal:e.cashbox.isGlobal,isVirtual:e.cashbox.isVirtual,deleted:e.cashbox.deleted,permissions:e.cashbox.permissions,employees:e.cashbox.employees,branch_id:e.branch.current_branch.id,filter:Vt()});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/cashbox",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:e.cashboxes}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusCashboxEditor:!1}}),r({type:"RESET_CASHBOX"}),Pe(r,"alert-success","\u041a\u0430\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveEditCashbox:function(){var e=ve.getState(),t=Oe({id:e.cashbox.edit,title:e.cashbox.title,balance:e.cashbox.balance,type:e.cashbox.type,isGlobal:e.cashbox.isGlobal,isVirtual:e.cashbox.isVirtual,deleted:e.cashbox.deleted,permissions:e.cashbox.permissions,employees:e.cashbox.employees,branch_id:e.branch.current_branch.id,filter:Vt()});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/cashbox",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:e.cashboxes}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusCashboxEditor:!1}}),r({type:"RESET_CASHBOX"}),Pe(r,"alert-success","\u041a\u0430\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteCashbox:function(e){var t=ve.getState(),n=Oe({id:t.cashbox.edit,deleted:e,filter:Vt()});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/cashbox",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:t.cashboxes}}),i({type:"CHANGE_VISIBLE_STATE",data:{statusCashboxEditor:!1}}),i({type:"RESET_CASHBOX"}),Pe(i,"alert-success",e?"\u041a\u0430\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430":"\u041a\u0430\u0441\u0441\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0441\u0441\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},mc=Object(s.b)((function(e){return{cashbox:e.cashbox,employees:e.employee.employees,view:e.view,permissions:e.data.user.role.permissions}}),uc)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("cashboxEditorWiondow")||e.setVisibleFlag("statusCashboxEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}})),Object(r.useEffect)((function(){if(!e.cashbox.edit){var t={};e.employees.filter((function(e){return!e.deleted})).forEach((function(e){t[e.id]={},t[e.id].available=!0,t[e.id].like_cashbox=!0,t[e.id].permissions=C})),e.changeCashboxState({employees:t})}}),[]);return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow wmn500",id:"cashboxEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.cashbox.edit?e.cashbox.title:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0441\u0441\u0430"}),Object(Ze.jsx)(zn,{list:["\u041e\u0431\u0449\u0438\u0435","\u0414\u043ec\u0442\u0443\u043f"],func:function(t){return e.changeCashboxState({tabs_editor:t})},tab:e.cashbox.tabs_editor,tab_field:"tabs_editor"}),0===e.cashbox.tabs_editor?Object(Ze.jsx)(dc,{}):null,1===e.cashbox.tabs_editor?Object(Ze.jsx)(oc,{}):null,Object(Ze.jsx)(jn,{edit:e.cashbox.edit,create:function(){e.cashbox.title?e.createCashbox():e.cashbox.title||e.setVisibleFlag("inputCashboxTitleChecked",!1)},save:function(){e.cashbox.title?e.saveEditCashbox():e.cashbox.title||e.setVisibleFlag("inputCashboxTitleChecked",!1)},delete:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!0)}:null,recover:e.permissions.includes("edit_cash")?function(){return e.deleteCashbox(!1)}:null,close:function(){return e.setVisibleFlag("statusCashboxEditor",!1)},deleted:e.cashbox.deleted})]})})})),pc={setVisibleFlag:Ne,setPayment:Te},hc=Object(s.b)((function(e){return{payments:e.payment.payments,employees:e.employee.employees,user:e.data.user,current_cashbox:e.cashbox.current_cashbox,permissions:e.data.user.role.permissions}}),pc)((function(e){var t=Object(r.useState)(0),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(0),s=Object(it.a)(a,2),o=s[0],l=s[1];Object(r.useEffect)((function(){var t=0,n=0;e.payments.filter((function(e){return!e.deleted})).forEach((function(e){t+=e.income,n+=e.outcome})),c(t),l(n)}),[e.payments]);var d=function(){var t=!1;return Object.values(e.current_cashbox).length&&(t=e.current_cashbox.employees[e.user.id].like_cashbox?e.current_cashbox.permissions.includes("show_cashbox_remains"):e.current_cashbox.employees[e.user.id].permissions.includes("show_cashbox_remains")),t&&e.user.role.permissions.includes("see_remains")},u=e.payments.filter((function(t){return e.showDeleted||!t.deleted})).filter((function(t){return e.permissions.includes("see_payment_profit")||"\u041f\u0440\u0438\u0431\u044b\u043b\u044c"!==t.cashflow_category}));return Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{className:"",children:[Object(Ze.jsx)("th",{className:"w150",children:"\u0421\u043e\u0437\u0434\u0430\u043d"}),Object(Ze.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"w91",children:"\u041f\u0440\u0438\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ze.jsx)("th",{className:"w91",children:"\u0420\u0430\u0441\u0445\u043e\u0434, \u0440\u0443\u0431."}),d()?Object(Ze.jsx)("th",{className:"w91",children:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a, \u0440\u0443\u0431."}):null]})}),Object(Ze.jsxs)("tbody",{children:[u.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){e.setPayment(t),e.setVisibleFlag("statusPaymentsCard",!0)},children:[Object(Ze.jsxs)("td",{children:[Object(Ze.jsx)("div",{children:t.employee.name}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"cgr",children:an(t.custom_created_at)}),t.created_at!==t.custom_created_at?Object(Ze.jsx)("div",{title:"\u041f\u043b\u0430\u0442\u0435\u0436 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(an(t.created_at)),children:Object(Ze.jsx)(ct,{className:"icon-s2 ml5",icon:H,color:"red"})}):null]})]}),Object(Ze.jsxs)("td",{children:[Object(Ze.jsxs)("div",{children:[t.description,t.client.name?" (\u041a\u043b\u0438\u0435\u043d\u0442: ".concat(t.client.name,")"):null]}),t.direction?Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(ct,{className:"icon-s1",icon:"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z",color:"#acacac"}),Object(Ze.jsx)("div",{className:"tac ml5 cgr",children:t.cashflow_category})]}):null]}),Object(Ze.jsx)("td",{className:t.income?"greenFont tac":"tac",children:t.income}),Object(Ze.jsx)("td",{className:t.outcome?"redFont tac":"tac",children:t.outcome}),d()?Object(Ze.jsx)("td",{className:"tac",children:t.deposit?parseFloat(t.deposit).toFixed(2):0}):null]},t.id)})),Object(Ze.jsxs)("tr",{children:[Object(Ze.jsxs)("td",{colSpan:"2",children:["\u0412\u0441\u0435\u0433\u043e - ",u.length]}),Object(Ze.jsxs)("td",{className:"txtb tac",children:[i.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ze.jsxs)("td",{className:"txtb tac",children:[o.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ze.jsx)("td",{})]})]})]})})),bc={changePaymentState:Gt,addPayments:qt},jc=Object(s.b)((function(e){return{current_cashbox:e.cashbox.current_cashbox,filter_created_at:e.payment.filter_created_at,permissions:e.data.user.role.permissions}}),bc)((function(e){Object(r.useEffect)((function(){e.current_cashbox&&e.addPayments()}),[e.current_cashbox]);var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{className:"ml30 w100",children:[Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(ct,{icon:"M4 28h28v4h-32v-32h4zM9 26c-1.657 0-3-1.343-3-3s1.343-3 3-3c0.088 0 0.176 0.005 0.262 0.012l3.225-5.375c-0.307-0.471-0.487-1.033-0.487-1.638 0-1.657 1.343-3 3-3s3 1.343 3 3c0 0.604-0.179 1.167-0.487 1.638l3.225 5.375c0.086-0.007 0.174-0.012 0.262-0.012 0.067 0 0.133 0.003 0.198 0.007l5.324-9.316c-0.329-0.482-0.522-1.064-0.522-1.691 0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3-0.067 0-0.133-0.003-0.198-0.007l-5.324 9.316c0.329 0.481 0.522 1.064 0.522 1.691 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-0.604 0.179-1.167 0.487-1.638l-3.225-5.375c-0.086 0.007-0.174 0.012-0.262 0.012s-0.176-0.005-0.262-0.012l-3.225 5.375c0.307 0.471 0.487 1.033 0.487 1.637 0 1.657-1.343 3-3 3z"}),Object(Ze.jsx)("h3",{className:"ml5",children:'\u0414\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0433 \u043f\u043e \u043a\u0430\u0441\u0441\u0435 "'.concat(e.current_cashbox?e.current_cashbox.title:"",'"')})]}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(rr,{className:"h27",width:"250px",range:!0,func:function(t){return e.changePaymentState({filter_created_at:t.map((function(e){return parseInt(e/1e3)}))})},current_date:e.filter_created_at,ivisible:!e.permissions.includes("see_moving_money_all_time")}),Object(Ze.jsx)(Br,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",className:"blueButton",onClick:function(){return e.addPayments()},invisible:!e.permissions.includes("see_moving_money_all_time")}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},value:i,invisible:!e.permissions.includes("see_delete_payments")})]}),Object(Ze.jsx)(hc,{showDeleted:i})]})})),_c={changeVisibleState:we,addCashboxes:function(){var e=ve.getState(),t=Oe(Vt());return function(n){fetch(e.data.url_server+"/get_cashbox",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_CASHBOX_STATE",data:{cashboxes:e.data,current_cashbox:e.data.length?e.data[0]:{}}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0441\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeCashboxState:Lt,addPayments:qt},fc=Object(s.b)((function(e){return{view:e.view,cashbox:e.cashbox,user:e.data.user,current_branch:e.branch.current_branch,permissions:e.data.user.role.permissions}}),_c)((function(e){return Object(r.useEffect)((function(){Object.values(e.current_branch).length&&e.addCashboxes()}),[e.cashbox.showDeleted,e.current_branch]),Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{className:"cashboxes",children:[Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeCashboxState({showDeleted:t.target.checked})},checked:e.cashbox.showDeleted}),e.cashbox.cashboxes.map((function(e){return Object(Ze.jsx)(rc,{cashbox:e,active:e.active},e.id)})),e.user.role.permissions.includes("edit_cash")?Object(Ze.jsx)("div",{className:"whiteButton",onClick:function(){return e.changeVisibleState({statusCashboxEditor:!0})},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0441\u0441\u0443"}):null]}),e.permissions.includes("see_moving_money")?Object(Ze.jsx)(jc,{}):null]}),e.view.statusPaymentsCard?Object(Ze.jsx)(ti,{}):null,e.view.statusPaymentsEditor?Object(Ze.jsx)(cr,{}):null,e.view.statusCashboxEditor?Object(Ze.jsx)(mc,{}):null]})}));function vc(e){return{type:"CHANGE_PAYROLL_STATE",data:e}}function Oc(){var e=ve.getState();return{custom_created_at:e.payroll.filter_created_at,employee_id:e.payroll.setted_employee,deleted:e.payroll.showDeleted}}function gc(){var e=ve.getState(),t=Oe(Oc());return function(n){fetch(e.data.url_server+"/get_payrolls",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_PAYROLL_STATE",data:{payrolls:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}var xc={editPayroll:function(e){return{type:"EDIT_PAYROLL",payroll:e}},setVisibleFlag:Ne},yc=Object(s.b)((function(e){return{payrolls:e.payroll.payrolls}}),xc)((function(e){var t=Object(r.useState)(0),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(0),s=Object(it.a)(a,2),o=s[0],l=s[1],d=["","C\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430","\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u041f\u0440\u043e\u0434\u0430\u0436\u0430","\u041e\u043a\u043b\u0430\u0434","","\u041f\u0440\u0435\u043c\u0438\u044f","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f","\u0412\u043e\u0437\u0432\u0440\u0430\u0442","\u0412\u044b\u043f\u043b\u0430\u0442\u0430"];return Object(r.useEffect)((function(){var t=0,n=0;e.payrolls.filter((function(e){return!e.deleted})).forEach((function(e){t+=e.income,n+=e.outcome})),c(t),l(n)}),[e.payrolls]),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w135",children:"\u0414\u0430\u0442\u0430"}),Object(Ze.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"w91",children:"\u041f\u0440\u0438\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ze.jsx)("th",{className:"w91",children:"\u0420\u0430\u0441\u0445\u043e\u0434, \u0440\u0443\u0431."}),Object(Ze.jsx)("th",{className:"w91",children:"\u0411\u0430\u043b\u0430\u043d\u0441, \u0440\u0443\u0431."})]})}),Object(Ze.jsxs)("tbody",{children:[e.payrolls.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted redBorder":null,onDoubleClick:function(){return function(t){e.editPayroll(t),e.setVisibleFlag("statusPayrollEditor",!0)}(t)},children:[Object(Ze.jsx)("td",{className:"pd-lr-5",children:Object(Ze.jsxs)("div",{children:[Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{children:d[t.relation_type]}),t.created_at!==t.custom_created_at?Object(Ze.jsx)("div",{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0437\u0430\u0434\u043d\u0438\u043c \u0447\u0438\u0441\u043b\u043e\u043c\n".concat(an(t.created_at)),children:Object(Ze.jsx)(ct,{className:"icon-s2 ml5",icon:H,color:"red"})}):null]}),Object(Ze.jsx)("div",{className:"cgr",children:an(t.custom_created_at)})]})}),Object(Ze.jsx)("td",{className:"pd-lr-5",children:t.description}),Object(Ze.jsx)("td",{className:t.income?"greenFont tac":"tac",children:t.income}),Object(Ze.jsx)("td",{className:t.outcome?"redFont tac":"tac",children:t.outcome}),Object(Ze.jsx)("td",{className:"tac",children:t.deposit?t.deposit.toFixed(2):0})]},t.id)})),Object(Ze.jsxs)("tr",{children:[Object(Ze.jsxs)("td",{colSpan:"2",children:["\u0412\u0441\u0435\u0433\u043e - ",e.payrolls.length]}),Object(Ze.jsxs)("td",{className:"txtb tac",children:[i.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ze.jsxs)("td",{className:"txtb tac",children:[o.toFixed(2)," \u0440\u0443\u0431."]}),Object(Ze.jsx)("td",{})]})]})]})})),Ec={changePayrollState:vc},Nc=Object(s.b)((function(e){return{view:e.view,payroll:e.payroll,permissions:e.data.user.role.permissions,employees:e.employee.employees.filter((function(e){return!e.deleted})),cashboxes:e.cashbox.cashboxes,item_payments:e.data.item_payments}}),Ec)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=e.cashboxes.filter((function(t){return t.type===e.payroll.payment_cashbox_type}));return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(_n,{className:"mt15 mr-rg-20",title:"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f",name:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435","\u0417\u0430\u0434\u0430\u043d\u043d\u043e\u0435"],func1:function(){c(!1),e.changePayrollState({custom_created_at:null})},func2:function(){c(!0),e.changePayrollState({custom_created_at:parseInt(new Date/1e3)})},checked:!0}),Object(Ze.jsx)(rr,{className:"h31",width:"250px",func:function(t){return e.changePayrollState({custom_created_at:parseInt(t/1e3)})},current_date:1e3*e.payroll.custom_created_at,invisible:!i})]}),Object(Ze.jsx)(En,{className:"mt15",width:"70px",title:"\u0421\u0443\u043c\u043c\u0430",onChange:function(t){return e.changePayrollState(Object(b.a)({},2===e.payroll.direction?"income":"outcome",parseFloat(t.target.value.replace(/[^0-9.]/g,""))))},value:e.payroll.outcome?e.payroll.outcome:e.payroll.income,unit:"\u0440\u0443\u0431.",checkedFlag:"inputPayrollSumChecked",checked:e.view.inputPayrollSumChecked,disabled:e.payroll.deleted,redStar:!0}),Object(Ze.jsx)(xn,{id:"employeePayroll",title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",className:"mt15",list:e.employees,setElement:function(t){return e.changePayrollState({employee_id:t})},current_id:e.payroll.employee_id,width:"250px",employee:!0,checkedFlag:"inputPayrollEmployeeChecked",checked:e.view.inputPayrollEmployeeChecked,disabled:e.payroll.deleted}),Object(Ze.jsx)(wn,{className:"mt15",title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:function(t){return e.changePayrollState({description:t.target.value})},value:e.payroll.description,checkedFlag:"inputPayrollDescChecked",checked:e.view.inputPayrollDescChecked,redStar:!0,disabled:e.payroll.deleted}),12===e.payroll.relation_type?Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"orderFormTitle mt15",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"}),Object(Ze.jsxs)("div",{className:"row mt15 al-itm-fs",children:[Object(Ze.jsx)(_n,{className:"",title:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",name:["\u041d\u0430\u043b.","\u0411\u0435\u0437\u043d\u0430\u043b."],func1:function(){e.changePayrollState({payment_cashbox_type:0})},func2:function(){e.changePayrollState({payment_cashbox_type:1})},checked:!e.payroll.payment_cashbox_type}),Object(Ze.jsx)(xn,{id:20,title:"\u041a\u0430\u0441\u0441\u0430",className:"ml10 h52",list:a,setElement:function(t){return e.changePayrollState({payment_cashbox_id:t})},current_id:e.payroll.payment_cashbox_id,width:"250px",checkedFlag:"inputPaymentCashboxChecked",checked:e.view.inputPaymentCashboxChecked,disabled:e.payroll.deleted})]}),Object(Ze.jsx)(xn,{id:41,title:"\u0421\u0442\u0430\u0442\u044c\u044f",className:"mt15 h52",list:e.item_payments.filter((function(e){return 1===e.direction})),setElement:function(t){return e.changePayrollState({payment_cashflow_category:t})},current_id:e.payroll.payment_cashflow_category,width:"250px",checkedFlag:"inputPaymentCashflowChecked",checked:e.view.inputPaymentCashflowChecked,disabled:e.payroll.deleted})]}):null]})})),wc=Object(s.b)((function(e){return{payroll:e.payroll,employees:e.employee.employees}}),{})((function(e){return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("span",{className:"txtb",children:"\u0414\u0430\u0442\u0430:"}),Object(Ze.jsx)("span",{className:"ml5",children:an(e.payroll.created_at)})]}),Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("span",{className:"txtb",children:"\u0421\u0443\u043c\u043c\u0430:"}),Object(Ze.jsxs)("span",{className:"ml5",children:[2==e.payroll.direction?e.payroll.income:e.payroll.outcome," \u0440\u0443\u0431."]})]}),Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("span",{className:"txtb",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a:"}),Object(Ze.jsx)("span",{className:"ml5",children:cn(e.employees.find((function(t){return t.id===e.payroll.employee_id})))})]}),Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("span",{className:"txtb",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"}),Object(Ze.jsx)("span",{className:"ml5",children:e.payroll.description})]})]})})),kc={changePayrollState:vc,setVisibleFlag:Ne,resetPayroll:function(){return{type:"RESET_PAYROLL"}},createPayroll:function(){var e=ve.getState(),t=Math.round(Date.now()/1e3),n=Oe({description:e.payroll.description,income:e.payroll.income,outcome:-e.payroll.outcome,direction:e.payroll.direction,deleted:e.payroll.deleted,reimburse:e.payroll.reimburse,created_at:t,custom_created_at:e.payroll.custom_created_at||t,relation_type:e.payroll.relation_type,relation_id:e.payroll.relation_id,employee_id:e.payroll.employee_id,order_id:e.payroll.order_id,payment:12===e.payroll.relation_type?{cashbox_id:e.payroll.payment_cashbox_id,cashflow_category:e.payroll.payment_cashflow_category}:null,filter:Oc()});return function(){var t=Object(m.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.url_server+"/payroll",n).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_PAYROLL_STATE",data:{payrolls:e.payrolls}}),r({type:"RESET_PAYROLL"}),r({type:"CHANGE_VISIBLE_STATE",data:{statusPayrollEditor:!1}}),Pe(r,"alert-success","\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deletePayroll:function(e){var t=ve.getState(),n=Oe({id:t.payroll.edit,deleted:e,filter:Oc()});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:fetch(t.data.url_server+"/payroll",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_PAYROLL_STATE",data:{payrolls:t.payrolls}}),i({type:"RESET_PAYROLL"}),i({type:"CHANGE_VISIBLE_STATE",data:{statusPayrollEditor:!1}}),Pe(i,"alert-success",e?"\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e":"\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},Cc=Object(s.b)((function(e){return{view:e.view,payroll:e.payroll,permissions:e.data.user.role.permissions,employees:e.employee.employees.filter((function(e){return!e.deleted}))}}),kc)((function(e){var t=function(){e.setVisibleFlag("statusPayrollEditor",!1),e.setVisibleFlag("inputPayrollDescChecked",!0),e.setVisibleFlag("inputPayrollEmployeeChecked",!0),e.setVisibleFlag("inputPaymentCashboxChecked",!0),e.setVisibleFlag("inputPaymentCashflowChecked",!0),e.resetPayroll()},n=function(e){e.path.map((function(e){return e.id})).includes("payrollEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow w500",id:"payrollEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.payroll.edit?["","C\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430","\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u0420\u0430\u0431\u043e\u0442\u0430","\u041f\u0440\u043e\u0434\u0430\u0436\u0430","\u041e\u043a\u043b\u0430\u0434","","\u041f\u0440\u0435\u043c\u0438\u044f","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u044f","\u0412\u043e\u0437\u0432\u0440\u0430\u0442"][e.payroll.relation_type]:["","\u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435","\u041f\u0440\u0435\u043c\u0438\u044f"][e.payroll.direction]}),Object(Ze.jsx)("div",{className:"contentEditor",children:e.payroll.edit?Object(Ze.jsx)(wc,{}):Object(Ze.jsx)(Nc,{})}),Object(Ze.jsx)(jn,{edit:e.payroll.edit,create:function(){(e.payroll.income||e.payroll.outcome)&&e.payroll.employee_id&&e.payroll.description&&(12!==e.payroll.relation_type||e.payroll.payment_cashbox_id)&&(12!==e.payroll.relation_type||e.payroll.payment_cashflow_category)?e.createPayroll():(e.payroll.income||e.payroll.outcome||e.setVisibleFlag("inputPayrollSumChecked",!1),e.payroll.employee_id||e.setVisibleFlag("inputPayrollEmployeeChecked",!1),e.payroll.description||e.setVisibleFlag("inputPayrollDescChecked",!1),e.payroll.payment_cashbox_id||e.setVisibleFlag("inputPaymentCashboxChecked",!1),e.payroll.payment_cashflow_category||e.setVisibleFlag("inputPaymentCashflowChecked",!1))},delete:e.permissions.includes("delete_payrolls")?function(){return e.deletePayroll(!0)}:null,recover:e.permissions.includes("recover_payrolls")?function(){return e.deletePayroll(!1)}:null,close:t,deleted:e.payroll.deleted})]})})})),Sc={changePayrollState:vc,addPayrolls:gc,addMonthBalance:function(){var e=ve.getState(),t=Oe({custom_created_at:sn(),employee_id:e.payroll.setted_employee});return function(n){fetch(e.data.url_server+"/get_payroll_sum",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_PAYROLL_STATE",data:{month_balance:e.sum}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u0430\u043b\u0430\u043d\u0441\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addEmployees:Ye,setVisibleFlag:Ne},Tc=Object(s.b)((function(e){return{employees:e.employee.employees,payroll:e.payroll,permissions:e.data.user.role.permissions,statusPayrollEditor:e.view.statusPayrollEditor}}),Sc)((function(e){Object(r.useEffect)((function(){e.addMonthBalance(),e.addEmployees()}),[e.payroll.setted_employee]);var t=Object(r.useMemo)((function(){return e.employees.find((function(t){return t.id===e.payroll.setted_employee}))}),[e.payroll.setted_employee]),n=e.payroll.month_balance;return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsx)("div",{className:"createNewTitle fsz20 mt0",children:cn(t)}),Object(Ze.jsxs)("div",{className:"txtb",children:[Object(Ze.jsx)("span",{children:"\u041d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043c\u0435\u0441\u044f\u0446\u0435: "}),Object(Ze.jsx)("span",{className:n>=0?"greenFont ml5":"redFont ml5",children:n?n.toFixed(2):0})," \u0440\u0443\u0431."]}),Object(Ze.jsxs)("div",{className:"txtb",children:[Object(Ze.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441:"}),Object(Ze.jsx)("span",{className:t.balance>=0?"greenFont ml5":"redFont ml5",children:t.balance?t.balance.toFixed(2):0})," \u0440\u0443\u0431."]}),Object(Ze.jsx)(Br,{title:"\u0412\u044b\u043f\u043b\u0430\u0442\u0438\u0442\u044c",className:"greenButton bcr",onClick:function(){e.changePayrollState({direction:1,relation_type:12,description:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u043d\u043e\u0439 \u043f\u043b\u0430\u0442\u044b",employee_id:e.payroll.setted_employee}),e.setVisibleFlag("statusPayrollEditor",!0)}}),Object(Ze.jsxs)("div",{className:"row mt15 jc-sb",children:[Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(rr,{className:"h27",width:"250px",range:!0,func:function(t){return e.changePayrollState({filter_created_at:t.map((function(e){return parseInt(e/1e3)}))})},current_date:e.payroll.filter_created_at}),Object(Ze.jsx)(Br,{className:"blueButton",title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",onClick:function(){return e.addPayrolls()}}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changePayrollState({showDeleted:t.target.checked})},value:e.payroll.showDeleted,invisible:!e.permissions.includes("see_seleted_payrolls")})]}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u041f\u0440\u0435\u043c\u0438\u044f",onClick:function(){e.changePayrollState({direction:2,relation_type:9,employee_id:e.payroll.setted_employee}),e.setVisibleFlag("statusPayrollEditor",!0)},invisible:!e.permissions.includes("create_payrolls")}),Object(Ze.jsx)(Br,{className:"greenButton bcr m10",title:"- \u0412\u0437\u044b\u0441\u043a\u0430\u043d\u0438\u0435",onClick:function(){e.changePayrollState({direction:1,relation_type:10,employee_id:e.payroll.setted_employee}),e.setVisibleFlag("statusPayrollEditor",!0)},invisible:!e.permissions.includes("create_payrolls")})]})]}),e.statusPayrollEditor?Object(Ze.jsx)(Cc,{}):null,Object(Ze.jsx)(yc,{})]})})),Fc={changePayrollState:vc},Ac=Object(s.b)((function(e){return{employees:e.employee.employees.filter((function(e){return!e.deleted&&0!==e.id})),payroll:e.payroll}}),Fc)((function(e){var t=Object(r.useState)(0),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var t=0;e.employees.filter((function(e){return 1!==e.id})).forEach((function(e){t+=e.balance})),t=t?t.toFixed(2):0,c(t)}),[e.employees]),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ze.jsx)("th",{children:"\u0411\u0430\u043b\u0430\u043d\u0441"})]})}),Object(Ze.jsxs)("tbody",{children:[e.employees.map((function(t){return Object(Ze.jsxs)("tr",{onClick:function(){return e.changePayrollState({setted_employee:t.id})},style:t.id===e.payroll.setted_employee?{backgroundColor:"#cae1f5"}:null,children:[Object(Ze.jsx)("td",{children:cn(t)}),Object(Ze.jsx)("td",{children:t.balance?t.balance.toFixed(2):0})]},t.id)})),Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{children:"\u0418\u0442\u043e\u0433:"}),Object(Ze.jsx)("td",{children:i})]})]})]})})),Pc={addPayrolls:gc,changePayrollState:vc},Dc=Object(s.b)((function(e){return{payroll:e.payroll,permissions:e.data.user.role.permissions,user_id:e.data.user.id}}),Pc)((function(e){return Object(r.useEffect)((function(){e.addPayrolls()}),[e.payroll.setted_employee]),Object(r.useEffect)((function(){e.changePayrollState({setted_employee:e.user_id})}),[]),Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)("p",{children:"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u043c \u0433\u0440\u0430\u0444\u0438\u043a \u0441\u044e\u0434\u0430"}),e.permissions.includes("see_all_payrolls")?Object(Ze.jsxs)("div",{className:"row al-itm-fs",children:[Object(Ze.jsx)("div",{className:"w250",children:Object(Ze.jsx)(Ac,{})}),Object(Ze.jsx)("div",{className:"ml30",children:e.payroll.setted_employee?Object(Ze.jsx)(Tc,{}):null})]}):e.payroll.setted_employee?Object(Ze.jsx)(Tc,{}):null]})})),Rc={changeCashboxState:Lt},Ic=Object(s.b)((function(e){return{tabs:e.cashbox.tabs,statusOrderLoader:e.view.statusOrderLoader}}),Rc)((function(e){return Object(Ze.jsxs)("div",{className:"pageContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b"})}),Object(Ze.jsx)(zn,{list:["\u041f\u043b\u0430\u0442\u0435\u0436\u0438","\u0412\u0437\u0430\u0438\u043c\u043e\u0440\u0430\u0441\u0447\u0435\u0442\u044b","\u0421\u0447\u0435\u0442\u0430","\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u044b"],func:function(t){return e.changeCashboxState({tabs:t})},tab:e.tabs}),0===e.tabs?Object(Ze.jsx)(fc,{}):null,(e.tabs,null),(e.tabs,null),3===e.tabs?Object(Ze.jsx)(Dc,{}):null,e.statusOrderLoader?Object(Ze.jsx)(At,{className:"orderLoader"}):null]})}));function Bc(e,t){return{type:"CHANGE_WAREHOUSE_FORM",field:t,value:e}}function Lc(){return{type:"RESET_WAREHOUSE"}}function Mc(e,t){return{type:"CHANGE_WAREHOUSE_PERMISSION",field:t,value:e}}function Vc(e,t){return{type:"CHANGE_PART_FORM",field:t,value:e}}var Gc=function e(t){var n=Object(r.useState)(!!t.edit),i=Object(it.a)(n,2),c=i[0],a=i[1];return t.edit===t.category.id?null:Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)("div",{className:"row hovblue",children:Object(Ze.jsxs)("div",{className:"row w100 ",children:[Object(Ze.jsx)("div",{onClick:function(){return a(!c)},children:t.category.categories.length?Object(Ze.jsx)(ct,{className:"icon-s1 pd1",icon:c?Q:J}):Object(Ze.jsx)("div",{className:"ml15"})}),Object(Ze.jsx)("div",{className:t.category.deleted?"rowDeleted noWr":"noWr",onClick:function(){return t.choose(t.category)},children:t.category.title})]})}),c?Object(Ze.jsx)("div",{className:"ml10",children:t.category.categories.map((function(n){return Object(Ze.jsx)(e,{edit:t.edit,category:n,choose:function(e){return t.choose(e)}},n.id)}))}):null]})},Hc={changeWarehouseForm:Bc},qc=Object(s.b)((function(e){return{warehouse:e.warehouse}}),Hc)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!!e.warehouse.edit),s=Object(it.a)(a,2),o=s[0],l=s[1],d=e.warehouse.warehouses_categories[0],u=function(t){c(!1),e.changeWarehouseForm(t,"current_parent_category")};return Object(Ze.jsxs)("div",{className:"w250 mt15",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ze.jsxs)("div",{className:"optionsButton",onClick:function(){return c(!i&&!e.warehouse.category_deleted)},children:[Object(Ze.jsx)("div",{className:"noWr",children:e.warehouse.current_parent_category.title}),Object(Ze.jsx)(ct,{className:"icon-s2",icon:i?Q:X})]}),i&&!e.disabled?Object(Ze.jsxs)("div",{className:"listOptionsChoose pos-a",children:[Object(Ze.jsxs)("div",{className:"row hovblue",children:[Object(Ze.jsx)("div",{onClick:function(){return l(!o)},children:Object(Ze.jsx)(ct,{className:"icon-s1",icon:o?Q:J})}),Object(Ze.jsx)("div",{onClick:function(){return u(d)},children:d.title})]}),o?Object(Ze.jsx)("div",{className:"ml10",children:d.categories.map((function(t){return Object(Ze.jsx)(Gc,{edit:e.warehouse.edit,category:t,choose:function(e){return u(e)}},t.id)}))}):null]}):null]})})),Wc={setVisibleFlag:Ne,changeWarehouseForm:Bc,createWarehouseCategory:function(){var e=ve.getState(),t=Oe({title:e.warehouse.title_category,parent_category_id:e.warehouse.current_parent_category.id,deleted:e.warehouse.category_deleted}),n=Oe({id:1,deleted:e.warehouse.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/warehouse_category",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_warehouse_category",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},resetWarehouse:Lc,saveWarehouseCategory:function(){var e=ve.getState(),t=Oe({id:e.warehouse.edit,title:e.warehouse.title_category,parent_category_id:e.warehouse.current_parent_category.id});t.method="PUT";var n=Oe({id:1,deleted:e.warehouse.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/warehouse_category",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_warehouse_category",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteWarehouseCategory:function(e){var t=ve.getState(),n=Oe({id:t.warehouse.edit,deleted:e});n.method="PUT";var r=Oe({id:1,deleted:t.warehouse.showDeleted});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/warehouse_category",n).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_warehouse_category",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusWarehouseCategoryEditor",value:!1}),i({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},zc=Object(s.b)((function(e){return{warehouse:e.warehouse,inputWCategoryTitleChecked:e.view.inputWCategoryTitleChecked,permissions:e.data.user.role.permissions}}),Wc)((function(e){var t=function(){e.setVisibleFlag("statusWarehouseCategoryEditor",!1),e.setVisibleFlag("inputWCategoryTitleChecked",!0),e.resetWarehouse()},n=function(e){e.path.map((function(e){return e.id})).includes("wgategoryEditorWindow")||e.path.map((function(e){return e.id})).includes("btaddWC")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("delete_warehouse_categories"),c=e.permissions.includes("recover_warehouse_categories");return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"wgategoryEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",onChange:function(t){return e.changeWarehouseForm(t.target.value,"title_category")},value:e.warehouse.title_category,checkedFlag:"inputWCategoryTitleChecked",checked:e.inputWCategoryTitleChecked,redStar:!0,disabled:e.warehouse.category_deleted}),Object(Ze.jsx)(qc,{})]}),Object(Ze.jsx)(jn,{edit:e.warehouse.edit,deleted:e.warehouse.category_deleted,create:function(){e.warehouse.title_category?e.createWarehouseCategory():e.setVisibleFlag("inputWCategoryTitleChecked",!1)},save:function(){e.warehouse.title_category?e.saveWarehouseCategory():e.setVisibleFlag("inputWCategoryTitleChecked",!1)},delete:i?function(){return e.deleteWarehouseCategory(!0)}:null,recover:c?function(){return e.deleteWarehouseCategory(!1)}:null,close:t})]})})})),Uc=function e(t){var n=Object(r.useState)(!1),i=Object(it.a)(n,2),c=i[0],a=i[1];return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsxs)("tr",{className:"row hovblue",style:t.category.id===t.current.id?{backgroundColor:"#cae1f5"}:null,onClick:function(){t.choose(t.category),t.choose_parent_category(t.parent_category),a(!c)},onDoubleClick:function(){return t.edit(t.category)},children:[Object(Ze.jsxs)("td",{className:"row w100 pd5",children:[t.category.categories.length?Object(Ze.jsx)(ct,{className:"icon-s1 pd1",icon:c?Q:J}):Object(Ze.jsx)("div",{className:"ml15"}),Object(Ze.jsx)("div",{className:t.category.deleted?"rowDeleted noWr":"noWr",children:t.category.title})]}),Object(Ze.jsx)("td",{className:"w70 pd5 tac",children:t.category.categories.length})]}),c?Object(Ze.jsx)("div",{className:"ml10",children:t.category.categories.map((function(n){return Object(Ze.jsx)(e,{category:n,choose:function(e){return t.choose(e)},current:t.current,parent_category:t.category,choose_parent_category:function(e){return t.choose_parent_category(e)},edit:function(e){return t.edit(e)}},n.id)}))}):null]})},Yc={changeWarehouseForm:Bc,editWarehouseCategory:function(e){return{type:"EDIT_WAREHOUSE_CATEGORY",warehouse_category:e}},setVisibleFlag:Ne},Kc=Object(s.b)((function(e){return{warehouse:e.warehouse,permissions:e.data.user.role.permissions}}),Yc)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=e.warehouse.warehouses_categories[0]||{id:1,title:"\u0412\u0441\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",categories:[]};return Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{className:"had",children:Object(Ze.jsxs)("tr",{className:"row",children:[Object(Ze.jsx)("th",{className:"w100 pd5",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ze.jsx)("th",{className:"w70 pd5 tac",children:"\u041a\u043e\u043b-\u0432\u043e"})]})}),Object(Ze.jsxs)("tbody",{children:[Object(Ze.jsxs)("tr",{className:"row hovblue",style:a.id===e.warehouse.current_category.id?{backgroundColor:"#cae1f5"}:null,onClick:function(){e.changeWarehouseForm(a,"current_category"),c(!i)},children:[Object(Ze.jsxs)("td",{className:"row w100 pd5",children:[Object(Ze.jsx)(ct,{className:"icon-s1",icon:i?Q:J}),Object(Ze.jsx)("div",{className:"noWr",children:a.title})]}),Object(Ze.jsx)("td",{className:"w70 pd5 tac",children:a.categories.length})]}),i?Object(Ze.jsx)("div",{className:"ml10",children:a.categories.map((function(t){return Object(Ze.jsx)(Uc,{category:t,choose:function(t){return e.changeWarehouseForm(t,"current_category")},current:e.warehouse.current_category,parent_category:a,choose_parent_category:function(t){return e.changeWarehouseForm(t,"current_parent_category")},edit:function(t){return function(t){e.permissions.includes("edit_warehouse_categories")&&(e.editWarehouseCategory(t),e.changeWarehouseForm(e.warehouse.current_parent_category,"current_parent_category"),e.setVisibleFlag("statusWarehouseCategoryEditor",!0))}(t)}},t.id)}))}):null]})]})})),Jc=function(e){return Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsx)("div",{className:e.value||e.url?"showPicture":"addPicture",children:Object(Ze.jsxs)("label",{className:"label",children:[e.value||e.url?Object(Ze.jsx)("img",{src:e.value||"".concat("","/").concat(e.url),className:"showPicture"}):Object(Ze.jsx)("i",{className:"material-icons",children:"attach_file"}),Object(Ze.jsx)("input",{className:"",type:"file",accept:"image/*",onChange:function(t){var n=new FileReader;n.onload=function(t){e.onChange(t.target.result)},n.readAsDataURL(t.target.files[0])},disabled:e.disabled})]})})]})},Xc={changePartProperty:function(e,t,n){return{type:"CHANGE_PART_PROPERTY",value:e,idx:t,field:n}},deletePartProperty:function(e){return{type:"DELETE_PART_PROPERTY",idx:e}}},Qc=Object(s.b)((function(e){return{part:e.part}}),Xc)((function(e){var t=Object(r.useState)(!e.title),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!e.value),s=Object(it.a)(a,2),o=s[0],l=s[1],d=e.part.deleted;return Object(Ze.jsxs)("tr",{className:"fillcol",children:[Object(Ze.jsx)("td",{children:i&&!d?Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changePartProperty(t.target.value,e.idx,"title")},value:e.title,autoFocus:!0,onBlur:function(){return c(!e.title)},onKeyPress:function(t){"Enter"===t.key&&c(!e.title)},placeholder:"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e"}):Object(Ze.jsx)("div",{className:"w100",onDoubleClick:function(){return c(!0)},children:e.title})}),Object(Ze.jsx)("td",{children:o&&!d?Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){return e.changePartProperty(t.target.value,e.idx,"value")},value:e.value,autoFocus:!0,onBlur:function(){return l(!e.value)},onKeyPress:function(t){"Enter"===t.key&&l(!e.value)},placeholder:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}):Object(Ze.jsx)("div",{className:"ml30",onDoubleClick:function(){return l(!0)},children:e.value})}),Object(Ze.jsx)("td",{onClick:d?null:function(){return e.deletePartProperty(e.idx)},children:Object(Ze.jsx)(ct,{icon:V,className:"icon-s1"})})]})})),Zc={addPartProperty:function(){return{type:"ADD_PART_PROPERTY"}}},$c=Object(s.b)((function(e){return{part:e.part}}),Zc)((function(e){return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),Object(Ze.jsx)("div",{className:"mwmc",children:Object(Ze.jsx)("table",{children:Object(Ze.jsx)("tbody",{children:e.part.specifications.map((function(e,t){return Object(Ze.jsx)(Qc,{idx:t,title:e.title,value:e.value},t)}))})})}),Object(Ze.jsx)(Br,{className:"whiteBlueBotton",title:"+ \u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e",onClick:function(){return e.addPartProperty()},disabled:e.part.deleted})]})})),ea=function(e){var t=e.url?e.url.split("/").pop():"",n=Object(r.useState)(t),i=Object(it.a)(n,2),c=i[0],a=i[1];return Object(Ze.jsxs)("div",{className:e.className,children:[Object(Ze.jsx)("div",{className:"lableImput",children:e.title}),Object(Ze.jsxs)("div",{className:"row",children:[e.value?Object(Ze.jsx)("div",{className:"noWr w150",children:c}):e.url?Object(Ze.jsx)("a",{className:"noWr w150",href:"".concat("","/").concat(e.url),target:"_blank",children:"Datasheet.pdf"}):null,Object(Ze.jsxs)("label",{className:"label",children:[e.value||e.url?Object(Ze.jsx)("div",{className:"whiteBlueBotton",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0430\u0439\u043b"}):Object(Ze.jsx)("div",{className:"whiteBlueBotton",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b"}),Object(Ze.jsx)("input",{className:"addDoc",type:"file",accept:"application/pdf",onChange:function(t){var n=new FileReader;n.onload=function(t){e.onChange(t.target.result)},n.readAsDataURL(t.target.files[0]),a(t.target.files[0].name)},disabled:e.disabled})]})]})]})},ta={setVisibleFlag:Ne,changePartForm:Vc,resetPart:function(){return{type:"RESET_PART"}},createPart:function(){var e=ve.getState(),t=Oe({title:e.part.title,description:e.part.description,marking:e.part.marking,article:e.part.article,barcode:e.part.barcode,code:e.part.code,specifications:e.part.specifications,deleted:!1,warehouse_category_id:e.warehouse.current_parent_category.id,img:e.part.img,doc:e.part.doc}),n=Oe({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/parts",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_parts",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePart:function(){var e=ve.getState(),t=Oe({id:e.part.edit,title:e.part.title,description:e.part.description,marking:e.part.marking,article:e.part.article,barcode:e.part.barcode,code:e.part.code,specifications:e.part.specifications,warehouse_category_id:e.warehouse.current_parent_category.id,img:e.part.img,doc:e.part.doc});t.method="PUT";var n=Oe({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/parts",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u0435\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_parts",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deletePart:function(e){var t=ve.getState(),n=Oe({id:t.part.edit,deleted:e});n.method="PUT";var r=Oe({page:t.part.page,deleted:t.part.showDeleted,warehouse_category_id:t.warehouse.current_category.id});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/parts",n).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_parts",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),i({type:"RESET_PART"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},na=Object(s.b)((function(e){return{part:e.part,inputWPartTitleChecked:e.view.inputWPartTitleChecked,permissions:e.data.user.role.permissions}}),ta)((function(e){var t=function(){e.setVisibleFlag("statusPartEditor",!1),e.setVisibleFlag("inputWPartTitleChecked",!0),e.resetPart()},n=function(e){e.path.map((function(e){return e.id})).includes("wpartEditorWindow")||e.path.map((function(e){return e.id})).includes("btaddWP")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("delete_parts"),c=e.permissions.includes("recover_parts");return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"wpartEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.part.edit?e.part.title:"\u041d\u043e\u0432\u044b\u0439 \u0442\u043e\u0432\u0430\u0440"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(Jc,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",url:e.part.image_url,onChange:function(t){return e.changePartForm(t,"img")},value:e.part.img,disabled:e.part.deleted}),Object(Ze.jsx)(ea,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",url:e.part.doc_url,onChange:function(t){return e.changePartForm(t,"doc")},value:e.part.doc,disabled:e.part.deleted})]}),Object(Ze.jsxs)("div",{className:"ml30",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePartForm(t.target.value,"title")},value:e.part.title,checkedFlag:"inputWPartTitleChecked",checked:e.inputWPartTitleChecked,redStar:!0,disabled:e.part.deleted}),Object(Ze.jsx)(qc,{disabled:e.part.deleted}),Object(Ze.jsx)(wn,{className:"w250 mt15",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePartForm(t.target.value,"description")},value:e.part.description,disabled:e.part.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430",onChange:function(t){return e.changePartForm(t.target.value,"marking")},value:e.part.marking,disabled:e.part.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",onChange:function(t){return e.changePartForm(t.target.value,"article")},value:e.part.article,disabled:e.part.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0428\u0442\u0440\u0438\u0445 \u043a\u043e\u0434",onChange:function(t){return e.changePartForm(t.target.value,"barcode")},value:e.part.barcode,disabled:e.part.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041a\u043e\u0434",onChange:function(t){return e.changePartForm(t.target.value,"code")},value:e.part.code,disabled:e.part.deleted})]})]}),Object(Ze.jsx)($c,{})]}),Object(Ze.jsx)(jn,{edit:e.part.edit,deleted:e.part.deleted,create:function(){e.part.title?e.createPart():e.setVisibleFlag("inputWPartTitleChecked",!1)},save:function(){e.part.title?e.savePart():e.setVisibleFlag("inputWPartTitleChecked",!1)},delete:i?function(){return e.deletePart(!0)}:null,recover:c?function(){return e.deletePart(!1)}:null,close:t})]})})}));var ra={setVisibleFlag:Ne,editPart:function(e){return{type:"EDIT_PART",part:e}},changeWarehouseForm:Bc},ia=Object(s.b)((function(e){return{part:e.part,warehouse:e.warehouse}}),ra)((function(e){var t=pe.filter((function(t){return e.part.choosed_headers.includes(t.id)}));return Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsx)("tr",{children:t.map((function(e){return Object(Ze.jsx)("th",{children:e.title},e.id)}))})}),Object(Ze.jsx)("tbody",{children:e.part.parts.map((function(n){return Object(Ze.jsx)("tr",{className:n.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.editPart(t),e.setVisibleFlag("statusPartEditor",!0),e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category")}(n)},children:t.map((function(e){return"doc_url"===e.field?Object(Ze.jsx)("td",{children:n[e.field]?Object(Ze.jsx)("a",{href:"".concat("","/").concat(n[e.field]),target:"_blank",children:n[e.field].split("/").pop()}):null},e.title+n.id):"warehouse_category"===e.field?Object(Ze.jsx)("td",{children:n[e.field].title},e.title+n.id):Object(Ze.jsx)("td",{children:n[e.field]},e.title+n.id)}))},n.id)}))})]})})),ca={setVisibleFlag:Ne,addWarehouseCategories:function(){var e=ve.getState(),t=Oe({id:1,deleted:e.warehouse.showDeleted});return function(n){fetch(e.data.url_server+"/get_warehouse_category",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses_categories",value:e.data}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeWarehouseForm:Bc,addParts:function(){var e=ve.getState(),t=Oe({page:e.part.page,deleted:e.part.showDeleted,warehouse_category_id:e.warehouse.current_category.id});return function(n){fetch(e.data.url_server+"/get_parts",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_PART_FORM",field:"parts",value:e.data}),n({type:"SET_VISIBLE_FLAG",field:"statusPartEditor",value:!1}),n({type:"RESET_PART"})):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},choosePartSelected:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_PART",field:t,value:e,saveToApp:n}},changePartForm:Vc},aa=Object(s.b)((function(e){return{statusWarehouseCategoryEditor:e.view.statusWarehouseCategoryEditor,statusPartEditor:e.view.statusPartEditor,warehouse:e.warehouse,part:e.part,permissions:e.data.user.role.permissions}}),ca)((function(e){Object(r.useEffect)((function(){e.addWarehouseCategories()}),[e.warehouse.showDeleted]),Object(r.useEffect)((function(){e.addParts()}),[e.part.showDeleted,e.part.page,e.warehouse.current_category]);return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{className:"wmn300 overv",children:[Object(Ze.jsxs)("div",{className:"row al-itm-ct",children:[Object(Ze.jsx)(Br,{id:"btaddWC",className:"greenButton",title:"+ \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onClick:function(){e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category"),e.setVisibleFlag("statusWarehouseCategoryEditor",!0)},invisible:!e.permissions.includes("create_warehouse_categories")}),Object(Ze.jsx)(ai,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.checked,"showDeleted")},checked:e.warehouse.showDeleted,invisible:!e.permissions.includes("see_deleted_warehouse_categories")})]}),e.statusWarehouseCategoryEditor?Object(Ze.jsx)(zc,{}):null,Object(Ze.jsx)(Kc,{})]}),Object(Ze.jsxs)("div",{className:"ml10 w100",children:[Object(Ze.jsxs)("div",{className:"row jc-sb",children:[Object(Ze.jsxs)("div",{className:"row al-itm-ct",children:[Object(Ze.jsx)(Br,{id:"btaddWP",className:"greenButton",title:"+ \u0422\u043e\u0432\u0430\u0440",onClick:function(){e.changeWarehouseForm(e.warehouse.current_category,"current_parent_category"),e.setVisibleFlag("statusPartEditor",!0)},invisible:!e.permissions.includes("create_new_part")}),Object(Ze.jsx)(ai,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changePartForm(t.target.checked,"showDeleted")},checked:e.part.showDeleted,invisible:!e.permissions.includes("see_delete_parts")})]}),Object(Ze.jsx)(mi,{id:"part",height:"185px",classNameMenu:"listOption",list:pe,checked_list:e.part.choosed_headers,func:e.choosePartSelected,field:"choosed_headers"})]}),e.statusPartEditor?Object(Ze.jsx)(na,{}):null,Object(Ze.jsx)(ia,{})]})]})})})),sa=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),oa=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),la=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),da=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),ua=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u044b"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),ma=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"contentTab",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0441\u0442\u0430\u0442\u043a\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),pa={changeWarehouseForm:Bc},ha=Object(s.b)((function(e){return{tabs:e.warehouse.tabs}}),pa)((function(e){return Object(Ze.jsxs)("div",{className:"pageContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0421\u043b\u0430\u0434\u044b"})}),Object(Ze.jsx)("div",{className:"settingPageBody"}),Object(Ze.jsx)(zn,{list:["\u041e\u0441\u0442\u0430\u0442\u043a\u0438","\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u044f","\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u044f","\u041f\u0435\u0440\u043c\u0435\u0449\u0435\u043d\u0438\u044f","\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0438\u0437\u0430\u0446\u0438\u0438","\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443","\u0422\u043e\u0432\u0430\u0440\u044b \u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"],func:function(t){return e.changeWarehouseForm(t,"tabs")},tab:e.tabs}),0===e.tabs?Object(Ze.jsx)(ua,{}):null,1===e.tabs?Object(Ze.jsx)(sa,{}):null,2===e.tabs?Object(Ze.jsx)(oa,{}):null,3===e.tabs?Object(Ze.jsx)(la,{}):null,4===e.tabs?Object(Ze.jsx)(da,{}):null,5===e.tabs?Object(Ze.jsx)(ma,{}):null,6===e.tabs?Object(Ze.jsx)(aa,{}):null]})})),ba=n(28),ja={addClients:bn},_a=Object(s.b)((function(e){return{client:e.client}}),ja)((function(e){Object(r.useEffect)((function(){e.addClients()}),[e.client.filter_name,e.client.filter_phone]);var t=i.a.useMemo((function(){return e.client.clients.map((function(e){return{name:e.name,phone:e.phone.length?nn(e.phone[0].number):"",name_doc:e.name_doc,email:e.email,address:e.address,notes:e.notes}}))}),[e.client.clients]),n=i.a.useMemo((function(){return[{Header:"\u0418\u043c\u044f",accessor:"name"},{Header:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",accessor:"phone"},{Header:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",accessor:"name_doc"},{Header:"Email",accessor:"email"},{Header:"\u0410\u0434\u0440\u0435\u0441\u0441",accessor:"address"},{Header:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",accessor:"notes"}]}),[]),c=Object(ba.useTable)({columns:n,data:t}),a=c.getTableProps,s=c.getTableBodyProps,o=c.headerGroups,l=c.rows,d=c.prepareRow;return Object(Ze.jsxs)("table",Object(j.a)(Object(j.a)({},a()),{},{children:[Object(Ze.jsx)("thead",{children:o.map((function(e){return Object(Ze.jsx)("tr",Object(j.a)(Object(j.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(Ze.jsx)("th",Object(j.a)(Object(j.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(Ze.jsx)("tbody",Object(j.a)(Object(j.a)({},s()),{},{children:l.map((function(e){return d(e),Object(Ze.jsx)("tr",Object(j.a)(Object(j.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(Ze.jsx)("td",Object(j.a)(Object(j.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})),fa=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsxs)("div",{className:"pageContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"})}),Object(Ze.jsx)(_a,{})]})})),va=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Oa=Object(s.b)()((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u0447\u0435\u0442\u044b"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),ga=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0437\u0432\u043e\u043d\u043a\u0438"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})}));var xa={changeDataState:Qe},ya=Object(s.b)((function(e){return{settingMenu:e.data.settingMenu,current_setting_menu_row:e.data.current_setting_menu_row}}),xa)((function(e){var t=Object(l.g)();return t.location.pathname===e.row.url&&t.location.pathname!==e.current_setting_menu_row&&e.changeDataState({current_setting_menu_row:e.row.url}),Object(Ze.jsx)(o.b,{className:"settingRow",to:e.row.url,style:{backgroundColor:e.current_setting_menu_row===e.row.url?"#939699":"#53585c",color:e.current_setting_menu_row===e.row.url?"#fff":null},onClick:function(){return e.changeDataState({current_setting_menu_row:e.row.url})},children:Object(Ze.jsx)("span",{className:"didebarItemsText",children:e.row.title})})}));var Ea=function(e){var t=e.group;return Object(Ze.jsx)("div",{children:t.map((function(e){return Object(Ze.jsx)(ya,{row:e},e.id)}))})};var Na=Object(s.b)((function(e){return{permission:e.data.user.role.permissions,settingMenu:e.data.settingMenu}}))((function(e){return e.settingMenu?Object(Ze.jsxs)("div",{className:"settingMenuMain",children:[Object(Ze.jsx)(Ea,{group:e.settingMenu.filter((function(t){return"generally_setting"===t.group_name&&e.permission.includes(t.permission_key)}))},2011),Object(Ze.jsx)("hr",{className:"hrMenu"}),Object(Ze.jsx)(Ea,{group:e.settingMenu.filter((function(t){return"app_setting"===t.group_name&&e.permission.includes(t.permission_key)}))},2012)]}):Object(Ze.jsx)(At,{})})),wa={changeMaindataForm:function(e,t){return{type:"CHANGE_MAINDATA_FORM",field:e,value:t}},saveGenerallyInfo:function(){var e=ve.getState(),t=Oe({id:1,name:e.maindata.name,address:e.maindata.address,email:e.maindata.email,ogrn:e.maindata.ogrn,inn:e.maindata.inn,kpp:e.maindata.kpp,juridical_address:e.maindata.juridical_address,director:e.maindata.director,bank_name:e.maindata.bank_name,settlement_account:e.maindata.settlement_account,corr_account:e.maindata.corr_account,bic:e.maindata.bic,description:e.maindata.description,phone:e.maindata.phone,logo:e.maindata.logo});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/generally_info",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_generally_info",Oe()).then((function(e){return e.json()})).then((function(e){e.success?r({type:"ADD_GENERALLY_INFO",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},ka=Object(s.b)((function(e){return{maindata:e.maindata,view:e.view}}),wa)((function(e){return Object(Ze.jsxs)("div",{className:"settingSubpage",children:[Object(Ze.jsxs)("div",{className:"formRow",children:[Object(Ze.jsx)("svg",{className:"icon-table",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{d:"M32 18.451l-16-12.42-16 12.42v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8h-8v-12l12-9z"})}),Object(Ze.jsx)("h4",{children:"\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})]}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",onChange:function(t){return e.changeMaindataForm("name",t.target.value)},value:e.maindata.name,checkedFlag:"inputMaindataNameChecked",checked:e.view.inputMaindataNameChecked,redStar:!0}),Object(Ze.jsx)(wn,{className:"wm500 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeMaindataForm("address",t.target.value)},value:e.maindata.address}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"Email",onChange:function(t){return e.changeMaindataForm("email",t.target.value)},value:e.maindata.email}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u041e\u0413\u0420\u041d",onChange:function(t){return e.changeMaindataForm("ogrn",t.target.value)},value:e.maindata.ogrn}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u041a\u041f\u041f",onChange:function(t){return e.changeMaindataForm("kpp",t.target.value)},value:e.maindata.kpp}),Object(Ze.jsx)(wn,{className:"wm500 mt15",title:"\u042e\u0440\u0435\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeMaindataForm("juridical_address",t.target.value)},value:e.maindata.juridical_address}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440",onChange:function(t){return e.changeMaindataForm("director",t.target.value)},value:e.maindata.director}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",onChange:function(t){return e.changeMaindataForm("bank_name",t.target.value)},value:e.maindata.bank_name}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u0420/\u0421",onChange:function(t){return e.changeMaindataForm("settlement_account",t.target.value)},value:e.maindata.settlement_account}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u041a/\u0441",onChange:function(t){return e.changeMaindataForm("corr_account",t.target.value)},value:e.maindata.corr_account}),Object(Ze.jsx)(En,{className:"wm500 mt15",title:"\u0411\u0418\u041a",onChange:function(t){return e.changeMaindataForm("bic",t.target.value)},value:e.maindata.bic}),Object(Ze.jsx)("div",{className:"blueButton buttonSaveSet",onClick:function(){return e.saveGenerallyInfo()},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})),Ca=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u041e\u0431\u0449\u0438\u0435"})}),Object(Ze.jsx)("div",{className:"settingPageBody",children:Object(Ze.jsx)(ka,{})})]})}));var Sa={setVisibleFlag:Ne,changeSalaryRuleForm:function(e,t){return{type:"CHANGE_SALARY_FORM",field:t,value:e}},addSalaryCountCoef:function(){return{type:"ADD_SALARY_COUNT_COEF"}},changeSalaryCoefForm:function(e,t,n){return{type:"CHANGE_SALARY_COEF_FORM",idx:e,field:t,value:n}},deleteSalaryCountCoef:function(e){return{type:"DELETE_SALARY_COUNT_COEF",idx:e}},createSalaryRule:function(){var e=ve.getState(),t=Oe({title:e.salaryRule.list_type_rule.find((function(t){return t.id===e.salaryRule.type_rule})).title,type_rule:e.salaryRule.type_rule,order_type:e.salaryRule.order_type,method:e.salaryRule.method,coefficient:e.salaryRule.coefficient,count_coeff:e.salaryRule.count_coeff,fix_salary:e.salaryRule.fix_salary,deleted:e.salaryRule.deleted,employee_id:e.data.user.id,check_status:e.salaryRule.check_status});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/payrule",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_payrules",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPayrule:function(){return{type:"RESET_SALARY_RULE"}},saveSalaryRule:function(){var e=ve.getState(),t=Oe({id:e.salaryRule.edit,title:e.salaryRule.list_type_rule.find((function(t){return t.id===e.salaryRule.type_rule})).title,type_rule:e.salaryRule.type_rule,order_type:e.salaryRule.order_type,method:e.salaryRule.method,coefficient:e.salaryRule.coefficient,count_coeff:e.salaryRule.count_coeff,fix_salary:e.salaryRule.fix_salary,deleted:e.salaryRule.deleted,employee_id:e.data.user.id,check_status:e.salaryRule.check_status});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/payrule",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_payrules",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteSalaryRule:function(e){var t=ve.getState(),n=Oe({id:t.salaryRule.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/payrule",n).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_payrules",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"payrules",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusSalaryEditor",value:!1}),r({type:"RESET_SALARY_RULE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ta=Object(s.b)((function(e){return{salaryRule:e.salaryRule,order_type:e.data.order_type}}),Sa)((function(e){var t=function(){e.setVisibleFlag("statusSalaryEditor",!1),e.resetPayrule()},n=function(e){e.path.map((function(e){return e.id})).includes("salaryEditor")||t()};return Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(Ze.jsx)("div",{className:"centerBlockFix",children:Object(Ze.jsxs)("div",{className:"blockWindowFix wmx750 wmn750",id:"salaryEditor",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.salaryRule.edit?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e"}),Object(Ze.jsxs)("div",{className:"row h90 al-itm-bl",children:[Object(Ze.jsx)(xn,{id:21,title:"\u041f\u0440\u0430\u0432\u0438\u043b\u043e",className:"mt15",list:e.salaryRule.list_type_rule,field:"type_rule",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.type_rule,width:"250px"}),Object(Ze.jsx)(xn,{id:31,title:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430",className:"mt15 ml10",list:e.order_type,field:"order_type",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.order_type,width:"150px",invisible:![1,2,3,4,5].includes(e.salaryRule.type_rule)}),Object(Ze.jsx)(xn,{id:26,title:"\u0421\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443",className:"mt15 ml10",list:e.salaryRule.statuses,field:"check_status",setElement:e.changeSalaryRuleForm,current_id:e.salaryRule.check_status,width:"150px",invisible:![1,2,3,4,5].includes(e.salaryRule.type_rule)}),Object(Ze.jsx)(_n,{className:"mt15 ml10",title:"\u041c\u0435\u0442\u043e\u0434 \u0440\u0430\u0441\u0447\u0435\u0442\u0430",name:["%","\u0440\u0443\u0431"],func1:function(){return e.changeSalaryRuleForm(0,"method")},func2:function(){return e.changeSalaryRuleForm(1,"method")},checked:!0,invisible:![1,2,3,4,5,6].includes(e.salaryRule.type_rule)})]}),[4,5,6].includes(e.salaryRule.type_rule)?Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(ic,{text:"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0440\u0430\u0432\u0438\u043b\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442\u044c \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438"}),Object(Ze.jsxs)("div",{className:"row mt15",children:[Object(Ze.jsx)("div",{className:"numruond",children:"1"}),Object(Ze.jsx)("div",{children:"\u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u0435\u0441\u043b\u0438 \u0432 \u043f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442\u0435 \u0443\u0441\u043b\u0443\u0433 \u0432 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f, \u0442\u043e \u0432 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u0417\u041f \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043c\u043d\u043e\u0436\u0435\u043d\u043d\u043e\u0435 \u043d\u0430 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442"})]}),Object(Ze.jsxs)("div",{className:"row mt15 jc-c",children:[Object(Ze.jsx)("div",{className:"txtb",children:"\u041a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442"}),Object(Ze.jsx)(En,{className:"ml10",width:"70px",onChange:function(t){return e.changeSalaryRuleForm(parseFloat(t.target.value.replace(/[^0-9.]/g,"")),"coefficient")},value:e.salaryRule.coefficient})]}),Object(Ze.jsxs)("div",{className:"row mt15",children:[Object(Ze.jsx)("div",{className:"numruond",children:"2"}),Object(Ze.jsx)("div",{children:"\u0414\u043b\u044f \u0432\u0441\u0435\u0445 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u043b\u0443\u0433 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0440\u0430\u0441\u0447\u0435\u0442\u0430:"})]})]}):null,[1,2,3,4,5,6].includes(e.salaryRule.type_rule)?e.salaryRule.count_coeff.map((function(t,n){return Object(Ze.jsxs)("div",{className:"coef_row",children:[Object(Ze.jsx)("div",{children:"\u0415\u0441\u043b\u0438 \u0441\u0443\u043c\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(Ze.jsx)("div",{className:"ml10",children:"\u2265"}),Object(Ze.jsx)(En,{className:"ml10",width:"50px",onChange:function(t){return e.changeSalaryCoefForm(n,"cost",t.target.value.replace(/[^0-9]/g,""))},unit:"\u0440\u0443\u0431,",value:t.cost}),Object(Ze.jsx)("div",{className:"ml10",children:"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442"}),Object(Ze.jsx)(En,{className:"ml10",width:"50px",onChange:function(t){return e.changeSalaryCoefForm(n,"coef",t.target.value.replace(/[^0-9]/g,""))},unit:e.salaryRule.method?"\u0440\u0443\u0431.":"%",value:t.coef}),n?Object(Ze.jsx)("div",{onClick:function(){return e.deleteSalaryCountCoef(n)},children:Object(Ze.jsx)(ct,{className:"icon-s2 ml10",icon:V})}):null]},n)})):null,[1,2,3,4,5,6].includes(e.salaryRule.type_rule)?Object(Ze.jsx)("div",{className:"row mt15 jc-c",children:Object(Ze.jsx)("button",{className:"whiteButton",onClick:function(){return e.addSalaryCountCoef()},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})}):null,[7,8].includes(e.salaryRule.type_rule)?Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(ic,{text:"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0440\u0430\u0432\u0438\u043b\u0443 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0447\u0438\u0442\u0432\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u0433\u0440\u0430\u0444\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0447\u0438\u0445 \u0441\u043c\u0435\u043d"}),Object(Ze.jsx)(En,{className:"mt15",title:"\u0421\u0442\u0430\u0432\u043a\u0430",width:"50px",onChange:function(t){return e.changeSalaryRuleForm(parseInt(t.target.value.replace(/[^0-9]/g,"")),"fix_salary")},unit:"\u0440\u0443\u0431.",value:e.salaryRule.fix_salary})]}):null,Object(Ze.jsx)(jn,{edit:e.salaryRule.edit,create:function(){return e.createSalaryRule()},save:function(){return e.saveSalaryRule()},delete:function(){return e.deleteSalaryRule(!0)},close:t})]})})})),Fa={setVisibleFlag:Ne,editPayrule:function(e){return{type:"EDIT_SALARY",salary_rule:e}}},Aa=Object(s.b)((function(e){return{statusSalaryEditor:e.view.statusSalaryEditor,payrules:e.data.payrules,employee_id:e.employee.edit}}),Fa)((function(e){return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430"}),Object(Ze.jsx)("div",{className:"greenButton",onClick:function(){return e.setVisibleFlag("statusSalaryEditor",!0)},children:"+ \u041f\u0440\u0430\u0432\u0438\u043b\u043e"}),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsx)("tr",{children:Object(Ze.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"})})}),Object(Ze.jsx)("tbody",{children:e.payrules.filter((function(t){return!t.deleted&&e.employee_id===t.employee_id})).map((function(t){return Object(Ze.jsx)("tr",{onDoubleClick:function(){e.editPayrule(t),e.setVisibleFlag("statusSalaryEditor",!0)},children:Object(Ze.jsx)("td",{children:t.title})},t.id)}))})]}),e.statusSalaryEditor?Object(Ze.jsx)(Ta,{}):null]})}));var Pa={changeEmployeeState:We},Da=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,employeeEditorRoleOptions:e.view.employeeEditorRoleOptions,view:e.view}}),Pa)((function(e){return Object(Ze.jsxs)("div",{className:"employeeGenterally",children:[Object(Ze.jsxs)("div",{className:"buttons",children:[Object(Ze.jsx)("div",{className:"flexColumn mr-rg-20",children:Object(Ze.jsx)(En,{className:"w250",title:"\u0418\u043c\u044f",onChange:function(t){return e.changeEmployeeState({first_name:t.target.value})},value:e.employee.first_name,checkedFlag:"inputEmployeeNameChecked",checked:e.view.inputEmployeeNameChecked,redStar:!0,disabled:e.employee.deleted})}),Object(Ze.jsx)("div",{className:"flexColumn",children:Object(Ze.jsx)(En,{className:"w250",title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",onChange:function(t){return e.changeEmployeeState({last_name:t.target.value})},value:e.employee.last_name,disabled:e.employee.deleted})})]}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"email",onChange:function(t){return e.changeEmployeeState({email:t.target.value})},value:e.employee.email,checkedFlag:"inputEmployeeEmailChecked",checked:e.view.inputEmployeeEmailChecked,redStar:!0,disabled:e.employee.deleted}),e.view.errorSameMail?Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u0422\u0430\u043a\u043e\u0439 email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):null,Object(Ze.jsx)(En,{className:"w250 mt15",title:"login",onChange:function(t){return e.changeEmployeeState({login:t.target.value})},value:e.employee.login,checkedFlag:"inputEmployeeLoginChecked",checked:e.view.inputEmployeeLoginChecked,redStar:!0,disabled:e.employee.deleted}),e.view.errorSameLogin?Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u0422\u0430\u043a\u043e\u0439 Login \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):null,Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(t){return e.changeEmployeeState({password:t.target.value})},value:e.employee.password,checkedFlag:e.employee.edit?null:"inputEmployeePasswordChecked",checked:e.view.inputEmployeePasswordChecked,redStar:!e.employee.edit,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(t){return e.changeEmployeeState({phone:t})},value:e.employee.phone,disabled:e.employee.deleted,isPhone:!0}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0418\u041d\u041d \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",onChange:function(t){return e.changeEmployeeState({inn:t.target.value})},value:e.employee.inn,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0418\u043c\u044f \u0432 \u043f\u0435\u0447\u0430\u0442\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445",onChange:function(t){return e.changeEmployeeState({doc_name:t.target.value})},value:e.employee.doc_name,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"mt15",title:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeEmployeeState({notes:t.target.value})},value:e.employee.notes,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeEmployeeState({post:t.target.value})},value:e.employee.post,disabled:e.employee.deleted}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0420\u043e\u043b\u044c"}),Object(Ze.jsx)(xn,{id:19,className:"mt15",list:e.roles,setElement:function(t){return e.changeEmployeeState({role_id:t})},current_id:e.employee.role_id,width:"250px",disabled:e.employee.deleted}),e.view.inputEmployeeRoleChecked?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0440\u043e\u043b\u044c"}),e.employee.edit?Object(Ze.jsx)(Aa,{}):null]})}));var Ra=Object(s.b)()((function(e){return Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})),Ia={changeEmployeeState:We,changeVisibleState:we,createEmployee:function(){var e=ve.getState(),t=Oe({first_name:e.employee.first_name,last_name:e.employee.last_name,email:e.employee.email,notes:e.employee.notes,phone:e.employee.phone.replace(/[^0-9]/g,""),password:e.employee.password,role_id:e.employee.role_id,login:e.employee.login,inn:e.employee.inn,doc_name:e.employee.doc_name,avatar:e.employee.avatar,img:e.employee.img||null,filter:Ue()});return function(n){fetch(e.data.url_server+"/employee",t).then((function(e){return e.json()})).then((function(e){e.success?(n({type:"CHANGE_EMPLOYEE_STATE",data:{employees:e.employees}}),n({type:"CHANGE_VISIBLE_STATE",data:{statusEmployeeEditor:!1}}),Pe(n,"alert-success","\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},saveEditEmployee:Ke,deleteEmployee:function(e){var t=ve.getState(),n=Oe({id:t.employee.edit,deleted:e,filter:Ue()});return n.method="PUT",function(r){fetch(t.data.url_server+"/employee",n).then((function(e){return e.json()})).then((function(t){t.success?(r({type:"CHANGE_EMPLOYEE_STATE",data:{employees:t.employees}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusEmployeeEditor:!1}}),Pe(r,"alert-success",e?"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0443\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d":"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")):console.warn(t.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addPayrules:function(){var e=ve.getState();return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.url_server+"/get_payrules",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"payrules",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ba=Object(s.b)((function(e){return{tabs:e.employee.tabs,edit:e.employee.edit,employee:e.employee,permissions:e.data.user.role.permissions}}),Ia)((function(e){var t=function(){e.changeVisibleState({statusEmployeeEditor:!1,inputEmployeeNameChecked:!0,inputEmployeeEmailChecked:!0,inputEmployeeLoginChecked:!0,inputEmployeePasswordChecked:!0,inputEmployeeRoleChecked:!0})},n=function(e){e.path.map((function(e){return e.id})).includes("createNewRoleWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.addPayrules()}),[]);return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"createNewRoleWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.edit?"".concat(e.employee.last_name," ").concat(e.employee.first_name):"\u041d\u043e\u0432\u044b\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ze.jsx)(zn,{list:["\u041e\u0431\u0449\u0438\u0435","\u0414\u043e\u0441\u0442\u0443\u043f"],func:function(t){return e.changeEmployeeState({tabs:t})},tab:e.tabs}),0===e.tabs?Object(Ze.jsx)(Da,{}):null,1===e.tabs?Object(Ze.jsx)(Ra,{}):null,Object(Ze.jsx)(jn,{edit:e.edit,create:function(){e.employee.first_name&&e.employee.email&&e.employee.login&&e.employee.password&&0!==e.employee.role_id?e.createEmployee():(e.employee.first_name||e.changeVisibleState({inputEmployeeNameChecked:!1}),e.employee.email||e.changeVisibleState({inputEmployeeEmailChecked:!1}),e.employee.login||e.changeVisibleState({inputEmployeeLoginChecked:!1}),e.employee.password||e.changeVisibleState({inputEmployeePasswordChecked:!1}),0===e.employee.role_id&&e.changeVisibleState({inputEmployeeRoleChecked:!1}))},save:function(){e.employee.first_name&&e.employee.email&&e.employee.login?e.saveEditEmployee():(e.employee.first_name||e.changeVisibleState({inputEmployeeNameChecked:!1}),e.employee.email||e.changeVisibleState({inputEmployeeEmailChecked:!1}),e.employee.login||e.changeVisibleState({inputEmployeeLoginChecked:!1}))},delete:function(){return e.deleteEmployee(!0)},recover:e.permissions.includes("setting_recover_employees")?function(){return e.deleteEmployee(!1)}:null,close:t,deleted:e.employee.deleted})]})})})),La={changePermissions:ye},Ma=Object(s.b)((function(e){return{list_permissions:e.role.list_permissions}}),La)((function(e){return Object(Ze.jsxs)("div",{className:"subCheckbox",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(){return e.changePermissions([e.value])},checked:e.list_permissions.includes(e.value)}),Object(Ze.jsx)("label",{children:e.description})]})})),Va={changePermissions:ye},Ga=Object(s.b)((function(e){return{list_permissions:e.role.list_permissions}}),Va)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.data.permission.filter((function(t){return e.list_permissions.includes(t.value)}));n.length===e.data.permission.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.list_permissions]),Object(Ze.jsxs)("div",{className:"chackboxes",children:[Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return e.changePermissions(e.data.permission.map((function(e){return e.value})))}}),Object(Ze.jsx)("label",{children:e.data.description})]}),e.data.permission.map((function(e,t){return Object(Ze.jsx)(Ma,{value:e.value,description:e.description},t)}))]})}));var Ha={changeVisibleStatuses:function(e){return{type:"CHANGE_VISIBLE_STATUSES",id:e}},changeSettableStatuses:function(e){return{type:"CHANGE_SETTABLE_STATUSES",id:e}}},qa=Object(s.b)((function(e){return{visible_statuses:e.role.visible_statuses,settable_statuses:e.role.settable_statuses}}),Ha)((function(e){var t=Object(r.useRef)();Object(r.useEffect)((function(){var n=e.status.filter((function(t){return e.visible_statuses.includes(t.id)}));n.length===e.status.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.visible_statuses]);var n=Object(r.useRef)();return Object(r.useEffect)((function(){var t=e.status.filter((function(t){return e.settable_statuses.includes(t.id)}));t.length===e.status.length?(n.current.indeterminate=!1,n.current.checked=!0):t.length?n.current.indeterminate=!0:(n.current.indeterminate=!1,n.current.checked=!1)}),[e.settable_statuses]),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Ze.jsx)("th",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",ref:t,onChange:function(){return e.changeVisibleStatuses(e.status.map((function(e){return e.id})))}}),Object(Ze.jsx)("label",{children:"\u0412\u0438\u0434\u0435\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u044b \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435"})]})}),Object(Ze.jsx)("th",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",ref:n,onChange:function(){return e.changeSettableStatuses(e.status.map((function(e){return e.id})))}}),Object(Ze.jsx)("label",{children:"\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})]})})]})}),Object(Ze.jsx)("tbody",{children:e.status.map((function(t){return Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)("div",{style:{backgroundColor:t.color},className:"statusListRow",children:t.name})}),Object(Ze.jsx)("td",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(){return e.changeVisibleStatuses([t.id])},checked:e.visible_statuses.includes(t.id)}),Object(Ze.jsx)("label",{})]})}),Object(Ze.jsx)("td",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(){return e.changeSettableStatuses([t.id])},checked:e.settable_statuses.includes(t.id)}),Object(Ze.jsx)("label",{})]})})]},t.id)}))})]})}));var Wa={cahngeOrdersVisibility:function(e){return{type:"CHANGE_ORDERS_VISIBILITY",bool:e}},cahngeLeadsVisibility:function(e){return{type:"CHANGE_LEADS_VISIBILITY",bool:e}},cahngeEarningsVisibility:function(e){return{type:"CHANGE_EARNINGS_VISIBILITY",bool:e}}},za=Object(s.b)((function(e){return{earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility}}),Wa)((function(e){return Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u041e\u0442\u0435\u0442 \u043f\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c"}),Object(Ze.jsxs)("div",{className:"checkButton",children:[Object(Ze.jsx)("div",{className:e.earnings_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeEarningsVisibility(!0)},children:"\u041f\u043e \u0432\u0441\u0435\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430\u043c"}),Object(Ze.jsx)("div",{className:e.earnings_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeEarningsVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u044e \u0417\u041f"})]}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(Ze.jsxs)("div",{className:"checkButton",children:[Object(Ze.jsx)("div",{className:e.orders_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeOrdersVisibility(!0)},children:"\u0412\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"}),Object(Ze.jsx)("div",{className:e.orders_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeOrdersVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"})]}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ze.jsxs)("div",{className:"checkButton",children:[Object(Ze.jsx)("div",{className:e.leads_visibility?"checkButtonTwo":"checkButtonOne",onClick:function(){return e.cahngeLeadsVisibility(!0)},children:"\u0412\u0441\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"}),Object(Ze.jsx)("div",{className:e.leads_visibility?"checkButtonOne":"checkButtonTwo",onClick:function(){return e.cahngeLeadsVisibility(!1)},children:"\u0422\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"})]})]})}));var Ua={changeSettableMargin:function(e){return{type:"CHANGE_SETTABLE_MARGIN",id:e}}},Ya=Object(s.b)((function(e){return{discount_margin:e.data.discount_margin,settable_discount_margin:e.role.settable_discount_margin}}),Ua)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.discount_margin.filter((function(t){return e.settable_discount_margin.includes(t.id)}));n.length===e.discount_margin.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.settable_discount_margin]),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"headerCheckbox",children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",ref:t,onChange:function(){return e.changeSettableMargin(e.discount_margin.map((function(e){return e.id})))}}),Object(Ze.jsx)("label",{})]})}),Object(Ze.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})]})}),Object(Ze.jsx)("tbody",{children:e.discount_margin.map((function(t){return Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",onChange:function(){return e.changeSettableMargin([t.id])},checked:e.settable_discount_margin.includes(t.id)}),Object(Ze.jsx)("label",{})]})}),Object(Ze.jsx)("td",{children:t.title})]},t.id)}))})]})})),Ka={changeTitleCreateRole:function(e){return{type:"CHANGE_TITLE_CREATE_ROLE",title:e}},createRole:function(){var e=ve.getState(),t=Oe({title:e.role.title_create,earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility,permissions:e.role.list_permissions,settable_statuses:e.role.settable_statuses,visible_statuses:e.role.visible_statuses,settable_discount_margin:e.role.settable_discount_margin});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",Oe()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEditRole:function(){var e=ve.getState(),t=Oe({id:e.role.edit,title:e.role.title_create,earnings_visibility:e.role.earnings_visibility,leads_visibility:e.role.leads_visibility,orders_visibility:e.role.orders_visibility,permissions:e.role.list_permissions,settable_statuses:e.role.settable_statuses,visible_statuses:e.role.visible_statuses,settable_discount_margin:e.role.settable_discount_margin});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",Oe()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteRole:function(){var e=ve.getState(),t=Oe({id:e.role.edit});return t.method="DELETE",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/roles",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_roles",Oe()).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_ROLES",roles:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusCreateNewRole",value:!1})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setVisibleFlag:Ne},Ja=Object(s.b)((function(e){return{title_create:e.role.title_create,edit:e.role.edit,status:e.data.status,inputRoleTitleChecked:e.view.inputRoleTitleChecked}}),Ka)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("createNewRoleWiondow")||e.setVisibleFlag("statusCreateNewRole",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"createNewRoleWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.edit?e.title_create:" \u041d\u043e\u0432\u0430\u044f \u0440\u043e\u043b\u044c"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("div",{className:"lableImput",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(Ze.jsx)("span",{className:"redStar",children:"*"})]}),Object(Ze.jsx)("input",{className:"textInput",onChange:function(t){return e.changeTitleCreateRole(t.target.value)},value:e.title_create,onBlur:function(t){return e.setVisibleFlag("inputRoleTitleChecked",!!t.target.value)},style:e.inputRoleTitleChecked?null:{borderColor:"red"}}),e.inputRoleTitleChecked?null:Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u041d\u0435\u043e\u0431\u043e\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),k.map((function(e,t){return Object(Ze.jsx)(Ga,{data:e},t)})),Object(Ze.jsx)(za,{}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Ze.jsx)(qa,{status:e.status.filter((function(e){return e.group<8}))}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439"}),Object(Ze.jsx)(qa,{status:e.status.filter((function(e){return e.group>7}))}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0446\u0435\u043d\u0430\u043c"}),Object(Ze.jsx)(Ya,{})]}),Object(Ze.jsx)(jn,{edit:e.edit,create:function(){e.title_create?e.createRole():e.setVisibleFlag("inputRoleTitleChecked",!1)},save:function(){return e.seveEditRole(e.edit)},delete:function(){return e.deleteRole(e.edit)},close:function(){return e.setVisibleFlag("statusCreateNewRole",!1)}})]})})}));var Xa={editEmployee:ze,setVisibleFlag:Ne},Qa=Object(s.b)((function(e){return{employees:e.employee.employees,showDeleted:e.employee.showDeleted}}),Xa)((function(e){return Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ze.jsx)("th",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(Ze.jsx)("th",{children:"email"}),Object(Ze.jsx)("th",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(Ze.jsx)("th",{children:"\u0420\u043e\u043b\u044c"})]})}),Object(Ze.jsx)("tbody",{children:e.employees.filter((function(t){return e.showDeleted||!t.deleted})).map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){e.editEmployee(t),e.setVisibleFlag("statusEmployeeEditor",!0)},children:[Object(Ze.jsx)("td",{children:"".concat(t.last_name," ").concat(t.first_name)}),Object(Ze.jsx)("td",{children:t.login}),Object(Ze.jsx)("td",{children:t.email}),Object(Ze.jsx)("td",{children:t.phone?nn(t.phone):null}),Object(Ze.jsx)("td",{children:t.role.title})]},t.id)}))})]})}));var Za={editRole:function(e){return{type:"EDIT_ROLE",role:e}}},$a=Object(s.b)((function(e){return{roles:e.data.roles}}),Za)((function(e){return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsx)("tr",{children:Object(Ze.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})})}),Object(Ze.jsx)("tbody",{children:e.roles.map((function(t){return Object(Ze.jsx)("tr",{onDoubleClick:function(){return e.editRole(t)},children:Object(Ze.jsx)("td",{children:t.title})},t.id)}))})]}),Object(Ze.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",e.roles.length]})]})})),es={setVisibleFlag:Ne,addDiscountMargin:Be,addRoles:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_roles",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_ROLES",roles:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0440\u043e\u043b\u0435\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeEmployeeState:We,resetEmployee:function(){return{type:"RESET_EMPLOYEE"}}},ts=Object(s.b)((function(e){return{statusCreateNewRole:e.view.statusCreateNewRole,statusEmployeeEditor:e.view.statusEmployeeEditor,showDeleted:e.employee.showDeleted,permission:e.data.user.role.permissions}}),es)((function(e){return Object(r.useEffect)((function(){e.addDiscountMargin(),e.addRoles()}),[]),Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"})}),Object(Ze.jsxs)("div",{className:"settingPageBody",children:[e.permission.includes("setting_roles")?Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)("h3",{children:"\u0420\u043e\u043b\u0438"}),Object(Ze.jsx)("p",{children:"\u0420\u043e\u043b\u044c \u2014 \u044d\u0442\u043e \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0430\u0432 \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430."}),Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0420\u043e\u043b\u044c",onClick:function(){return e.setVisibleFlag("statusCreateNewRole",!0)}}),e.statusCreateNewRole?Object(Ze.jsx)(Ja,{}):null,Object(Ze.jsx)($a,{})]}):null,Object(Ze.jsx)("h3",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438"}),Object(Ze.jsx)("p",{children:"\u041a\u0430\u0436\u0434\u044b\u0439 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0438\u043c\u0435\u0435\u0442 \u0441\u0432\u043e\u0439 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 OneTwoService"}),Object(Ze.jsxs)("div",{className:"buttons",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",onClick:function(){e.resetEmployee(),e.setVisibleFlag("statusEmployeeEditor",!0)}}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(t){return e.changeEmployeeState({showDeleted:t.target.checked})},checked:e.showDeleted,invisible:!e.permission.includes("setting_see_employees")})]}),e.statusEmployeeEditor?Object(Ze.jsx)(Ba,{}):null,Object(Ze.jsx)(Qa,{})]})]})})),ns={changeShedule:function(e,t,n){return{type:"CHANGE_SCHEDULE",idx:e,field:t,value:n}}},rs=Object(s.b)((function(e){return{branch:e.branch}}),ns)((function(e){var t=["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0441\u0435\u043d\u0438\u0435"];return Object(Ze.jsxs)("div",{className:"schedule mr-rg-20",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0413\u0440\u0430\u0444\u0438\u043a \u0440\u0430\u0431\u043e\u0442\u044b \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),e.branch.schedule.sort((function(e,t){return e.week_day-t.week_day})).map((function(n,r){return Object(Ze.jsxs)("div",{className:"row mt15",children:[Object(Ze.jsx)(ai,{className:"w150",onChange:function(t){return e.changeShedule(r,"work_day",t.target.checked)},checked:n.work_day,label:t[r],disabled:e.branch.deleted}),e.branch.schedule[r].work_day?Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("input",{className:"w70",onChange:function(t){return e.changeShedule(r,"start_time",t.target.value)},value:n.start_time,disabled:e.branch.deleted}),Object(Ze.jsx)("div",{className:"w30 tac",children:"\u2014"}),Object(Ze.jsx)("input",{className:"w70",onChange:function(t){return e.changeShedule(r,"end_time",t.target.value)},value:n.end_time,disabled:e.branch.deleted})]}):null]},r)}))]})})),is={setVisibleFlag:Ne,changeBranchState:Je},cs=Object(s.b)((function(e){return{branch:e.branch,statusChooseIcon:e.view.statusChooseIcon}}),is)((function(e){var t=["#cccccc","#d70000","#f6c000","#2ab676","#0099e8","#3d4fb8","#9a33b4","#616161","#7784cd","#f8622b","#e87d6f","#038140"],n=[G,"M16 0c-5.523 0-10 4.477-10 10 0 10 10 22 10 22s10-12 10-22c0-5.523-4.477-10-10-10zM16 16.125c-3.383 0-6.125-2.742-6.125-6.125s2.742-6.125 6.125-6.125 6.125 2.742 6.125 6.125-2.742 6.125-6.125 6.125zM12.125 10c0-2.14 1.735-3.875 3.875-3.875s3.875 1.735 3.875 3.875c0 2.14-1.735 3.875-3.875 3.875s-3.875-1.735-3.875-3.875z","M31.342 25.559l-14.392-12.336c0.67-1.259 1.051-2.696 1.051-4.222 0-4.971-4.029-9-9-9-0.909 0-1.787 0.135-2.614 0.386l5.2 5.2c0.778 0.778 0.778 2.051 0 2.828l-3.172 3.172c-0.778 0.778-2.051 0.778-2.828 0l-5.2-5.2c-0.251 0.827-0.386 1.705-0.386 2.614 0 4.971 4.029 9 9 9 1.526 0 2.963-0.38 4.222-1.051l12.336 14.392c0.716 0.835 1.938 0.882 2.716 0.104l3.172-3.172c0.778-0.778 0.731-2-0.104-2.716z","M31.562 25.905l-9.423-9.423c-0.583-0.583-1.538-0.583-2.121 0l-0.707 0.707-5.75-5.75 9.439-9.439h-10l-4.439 4.439-0.439-0.439h-2.121v2.121l0.439 0.439-6.439 6.439 5 5 6.439-6.439 5.75 5.75-0.707 0.707c-0.583 0.583-0.583 1.538 0 2.121l9.423 9.423c0.583 0.583 1.538 0.583 2.121 0l3.535-3.535c0.583-0.583 0.583-1.538 0-2.121z","M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 20c-2.209 0-4-1.791-4-4s1.791-4 4-4c2.209 0 4 1.791 4 4s-1.791 4-4 4z","M31.397 14.575l-13.972-13.971c-0.804-0.805-2.109-0.805-2.915 0l-3.246 3.246 2.443 2.443c0.392-0.187 0.83-0.293 1.293-0.293 1.657 0 3 1.343 3 3 0 0.463-0.105 0.902-0.293 1.293l3.999 3.999c0.392-0.187 0.83-0.293 1.293-0.293 1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3c0-0.463 0.105-0.902 0.293-1.293l-3.999-3.999c-0.095 0.046-0.193 0.086-0.293 0.121v8.343c1.165 0.412 2 1.522 2 2.829 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-1.306 0.835-2.417 2-2.829v-8.343c-1.165-0.412-2-1.522-2-2.829 0-0.463 0.105-0.902 0.293-1.293l-2.443-2.443-9.247 9.246c-0.805 0.806-0.805 2.11 0 2.915l13.973 13.971c0.804 0.805 2.109 0.805 2.915 0l13.906-13.906c0.805-0.805 0.805-2.111-0-2.915z","M29 13c-0.888 0-1.686 0.386-2.236 1h-5.936l4.197-4.197c0.822 0.046 1.66-0.245 2.288-0.874 1.172-1.172 1.172-3.071 0-4.243s-3.071-1.172-4.243 0c-0.628 0.628-0.919 1.466-0.874 2.288l-4.197 4.197v-5.936c0.614-0.549 1-1.347 1-2.236 0-1.657-1.343-3-3-3s-3 1.343-3 3c0 0.888 0.386 1.686 1 2.236v5.936l-4.197-4.197c0.045-0.822-0.245-1.66-0.874-2.288-1.172-1.172-3.071-1.172-4.243 0s-1.172 3.071 0 4.243c0.628 0.628 1.466 0.919 2.288 0.874l4.197 4.197h-5.936c-0.549-0.614-1.347-1-2.236-1-1.657 0-3 1.343-3 3s1.343 3 3 3c0.888 0 1.686-0.386 2.236-1h5.936l-4.197 4.197c-0.822-0.046-1.66 0.245-2.288 0.874-1.172 1.172-1.172 3.071 0 4.243s3.071 1.172 4.243 0c0.628-0.628 0.919-1.466 0.874-2.288l4.197-4.197v5.936c-0.614 0.549-1 1.347-1 2.235 0 1.657 1.343 3 3 3s3-1.343 3-3c0-0.888-0.386-1.686-1-2.236v-5.936l4.197 4.197c-0.046 0.822 0.245 1.66 0.874 2.288 1.172 1.172 3.071 1.172 4.243 0s1.172-3.071 0-4.243c-0.628-0.628-1.466-0.919-2.288-0.874l-4.197-4.197h5.936c0.549 0.614 1.347 1 2.235 1 1.657 0 3-1.343 3-3s-1.343-3-3-3z"];return Object(Ze.jsx)("div",{className:"mt15",children:e.statusChooseIcon?Object(Ze.jsx)("div",{children:n.map((function(n,r){return Object(Ze.jsx)("div",{className:"row",children:t.map((function(t,r){return Object(Ze.jsx)("div",{onClick:function(){e.changeBranchState({color:t}),e.changeBranchState({icon:n}),e.setVisibleFlag("statusChooseIcon",!1)},children:Object(Ze.jsx)(ct,{icon:n,color:t})},r)}))},r)}))}):Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0426\u0432\u0435\u0442 \u0438 \u0438\u043a\u043e\u043d\u043a\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(Ze.jsx)("div",{onClick:e.branch.deleted?null:function(){return e.setVisibleFlag("statusChooseIcon","change")},children:Object(Ze.jsx)(ct,{icon:e.branch.icon,color:e.branch.color})})]})})})),as={setBranchEmployee:function(e){return{type:"SET_BRANCH_EMPLOYEE",id:e}}},ss=Object(s.b)((function(e){return{employees:e.employee.employees.filter((function(e){return!e.deleted&&0!==e.id})),branch:e.branch}}),as)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.employees.filter((function(t){return e.branch.employees.includes(t.id)}));n.length===e.employees.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.branch.employees]),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w30",children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{type:"checkbox",ref:t,onChange:e.branch.deleted?null:function(){return e.setBranchEmployee(e.employees.map((function(e){return e.id})))}}),Object(Ze.jsx)("label",{children:e.label})]})}),Object(Ze.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"})]})}),Object(Ze.jsx)("tbody",{children:e.employees.map((function(t){return Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)(ai,{onChange:function(){return e.setBranchEmployee([t.id])},checked:e.branch.employees.includes(t.id),disabled:e.branch.deleted})}),Object(Ze.jsx)("td",{children:"".concat(t.last_name," ").concat(t.first_name)})]},t.id)}))})]})})),os={changeVisibleState:we,changeBranchState:Je,createBranch:function(){var e=ve.getState(),t=Oe({name:e.branch.name,address:e.branch.address,phone:e.branch.phone,color:e.branch.color,icon:e.branch.icon,orders_type_id:e.branch.orders_type_id,orders_type_strategy:e.branch.orders_type_strategy,orders_prefix:e.branch.orders_prefix,documents_prefix:e.branch.documents_prefix,employees:e.branch.employees,deleted:e.branch.deleted,schedule:e.branch.schedule,filter:Xe()});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/branch",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BRANCH_STATE",data:{branches:e.branches}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusBranchEditor:!1}}),r({type:"RESET_BRANCH"}),Pe(r,"alert-success","\u0424\u0438\u043b\u0438\u0430\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveBranch:function(){var e=ve.getState(),t=Oe({id:e.branch.edit,name:e.branch.name,address:e.branch.address,phone:e.branch.phone,color:e.branch.color,icon:e.branch.icon,orders_type_id:e.branch.orders_type_id,orders_type_strategy:e.branch.orders_type_strategy,orders_prefix:e.branch.orders_prefix,documents_prefix:e.branch.documents_prefix,employees:e.branch.employees,deleted:e.branch.deleted,schedule:e.branch.schedule,filter:Xe()});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/branch",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BRANCH_STATE",data:{branches:e.branches}}),r({type:"CHANGE_VISIBLE_STATE",data:{statusBranchEditor:!1}}),r({type:"RESET_BRANCH"}),Pe(r,"alert-success","\u0424\u0438\u043b\u0438\u0430\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteBranch:function(e){var t=ve.getState(),n=Oe({id:t.branch.edit,deleted:e,filter:Xe()});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/branch",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_BRANCH_STATE",data:{branches:t.branches}}),i({type:"CHANGE_VISIBLE_STATE",data:{statusBranchEditor:!1}}),i({type:"RESET_BRANCH"}),Pe(i,"alert-success",e?"\u0424\u0438\u043b\u0438\u0430\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d":"\u0424\u0438\u043b\u0438\u0430\u043b \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u0438\u0430\u043b\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},resetBranch:function(){return{type:"RESET_BRANCH"}}},ls=Object(s.b)((function(e){return{branch:e.branch,view:e.view,order_type:e.data.order_type,counters:e.data.counters,permissions:e.data.user.role.permissions}}),os)((function(e){var t=function(){e.changeVisibleState({statusBranchEditor:!1,inputBranchNameChecked:!0,inputBranchPrefixChecked:!0,inputBranchPrefixDocChecked:!0}),e.resetBranch()},n=function(e){e.path.map((function(e){return e.id})).includes("BranchEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"BranchEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.branch.edit?e.branch.name:" \u041d\u043e\u0432\u0430\u044f \u043b\u043e\u043a\u0430\u0446\u0438\u044f"}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBranchState({name:t.target.value})},value:e.branch.name,checkedFlag:"inputBranchNameChecked",checked:e.view.inputBranchNameChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0410\u0434\u0440\u0435\u0441",onChange:function(t){return e.changeBranchState({address:t.target.value})},value:e.branch.address,disabled:e.branch.deleted}),Object(Ze.jsx)(En,{className:"textInput w250",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(t){return e.changeBranchState({phone:t})},value:e.branch.phone,disabled:e.branch.deleted,isPhone:!0}),Object(Ze.jsx)(rs,{}),Object(Ze.jsx)(cs,{}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"}),Object(Ze.jsx)(xn,{id:18,list:e.order_type,setElement:function(t){return e.changeBranchState({orders_type_id:t})},current_id:e.branch.orders_type_id,width:"250px",disabled:e.branch.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u043e\u043c\u0435\u0440\u0430 \u0437\u0430\u043a\u0430\u0437\u0430",onChange:function(t){return e.changeBranchState({orders_prefix:t.target.value})},value:e.branch.orders_prefix,checkedFlag:"inputBranchPrefixChecked",checked:e.view.inputBranchPrefixChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ze.jsxs)("p",{className:"mt0",children:["\u041f\u0440\u0438\u043c\u0435\u0440:"," ","".concat(e.branch.orders_prefix,"-").concat(e.counters.find((function(e){return 1===e.id})).count)]}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0428\u0430\u0431\u043b\u043e\u043d \u043d\u043e\u043c\u0435\u0440\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432",onChange:function(t){return e.changeBranchState({documents_prefix:t.target.value})},value:e.branch.documents_prefix,checkedFlag:"inputBranchPrefixDocChecked",checked:e.view.inputBranchPrefixDocChecked,redStar:!0,disabled:e.branch.deleted}),Object(Ze.jsxs)("p",{className:"mt0",children:["\u041f\u0440\u0438\u043c\u0435\u0440:"," ","".concat(e.branch.documents_prefix,"-").concat(e.counters.find((function(e){return 2===e.id})).count)]}),Object(Ze.jsx)(ss,{}),Object(Ze.jsx)(jn,{edit:e.branch.edit,create:function(){e.branch.name&&e.branch.orders_prefix&&e.branch.documents_prefix?e.createBranch():(e.branch.name||e.changeVisibleState({inputBranchNameChecked:!1}),e.branch.orders_prefix||e.changeVisibleState({inputBranchPrefixChecked:!1}),e.branch.documents_prefix||e.changeVisibleState({inputBranchPrefixDocChecked:!1}))},save:function(){e.branch.name&&e.branch.orders_prefix&&e.branch.documents_prefix?e.saveBranch():(e.branch.name||e.changeVisibleState({inputBranchNameChecked:!1}),e.branch.orders_prefix||e.changeVisibleState({inputBranchPrefixChecked:!1}),e.branch.documents_prefix||e.changeVisibleState({inputBranchPrefixDocChecked:!1}))},recover:function(){e.permissions.includes("setting_recover_branch")&&e.deleteBranch(!1)},delete:function(){return e.deleteBranch(!0)},close:t,deleted:e.branch.deleted})]})})})),ds={editBranch:function(e){return{type:"EDIT_BRANCH",branch:e}},changeVisibleState:we},us=Object(s.b)((function(e){return{branches:e.branch.branches,showDeleted:e.branch.showDeleted}}),ds)((function(e){return Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{}),Object(Ze.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(Ze.jsx)("th",{children:"\u0410\u0434\u0440\u0435\u0441"}),Object(Ze.jsx)("th",{children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})]})}),Object(Ze.jsx)("tbody",{children:e.branches.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.editBranch(t),e.changeVisibleState({statusBranchEditor:!0})}(t)},children:[Object(Ze.jsx)("td",{className:"w30",children:Object(Ze.jsx)(ct,{icon:t.icon,color:t.color})}),Object(Ze.jsx)("td",{children:t.name}),Object(Ze.jsx)("td",{children:t.address}),Object(Ze.jsx)("td",{children:nn(t.phone)})]},t.id)}))})]})})),ms={changeVisibleState:we,addCounters:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_counts",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"counters",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeBranchState:Je,addBranches:function(){var e=ve.getState(),t=Oe(Xe());return function(n){fetch(e.data.url_server+"/get_branch",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_BRANCH_STATE",data:{branches:e.data}}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0444\u0438\u043b\u0438\u0430\u043b\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},ps=Object(s.b)((function(e){return{statusBranchEditor:e.view.statusBranchEditor,showDeleted:e.branch.showDeleted,permissions:e.data.user.role.permissions,employees:e.employee.employees}}),ms)((function(e){Object(r.useEffect)((function(){e.addCounters()}),[]),Object(r.useEffect)((function(){e.addBranches()}),[e.showDeleted]);return Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"})}),Object(Ze.jsxs)("div",{className:"settingPageBody",children:[Object(Ze.jsx)("p",{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438. \u041a\u0430\u0436\u0434\u043e\u0439 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0438 \u0446\u0432\u0435\u0442."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"greenButton",onClick:function(){e.changeVisibleState({statusBranchEditor:!0}),e.changeBranchState({employees:e.employees.filter((function(e){return!e.deleted&&0!==e.id})).map((function(e){return e.id}))})},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e"}),e.permissions.includes("setting_see_branch")?Object(Ze.jsx)(ai,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeBranchState({showDeleted:t.target.checked})},checked:e.showDeleted}):null]}),Object(Ze.jsx)(us,{}),e.statusBranchEditor?Object(Ze.jsx)(ls,{}):null]})]})})),hs={editWarehouse:function(e){return{type:"EDIT_WAREHOUSE",warehouse:e}},setVisibleFlag:Ne},bs=Object(s.b)((function(e){return{warehouses:e.warehouse.warehouses,permissions:e.data.user.role.permissions}}),hs)((function(e){return Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w15",children:" "}),Object(Ze.jsx)("th",{className:"w150",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})}),Object(Ze.jsx)("tbody",{children:e.warehouses.filter((function(t){return e.showDeleted||!t.deleted})).map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_warehouse")&&(e.editWarehouse(t),e.setVisibleFlag("statusWarehouseEditor",!0))}(t)},children:[Object(Ze.jsx)("td",{className:"",children:Object(Ze.jsx)(ct,{className:"icon-s1",icon:t.branch.icon,color:t.branch.color})}),Object(Ze.jsx)("td",{className:"",children:t.title}),Object(Ze.jsx)("td",{className:"",children:t.description})]},t.id)}))})]})})),js={changeWarehouseForm:Bc,chooseWarehouseSelected:function(e,t){return{type:"SELECTED_WAREHOUSE",field:t,value:e}}},_s=Object(s.b)((function(e){return{warehouse:e.warehouse,branches:e.branch.branches.filter((function(e){return!e.deleted})),inputBookTitleChecked:e.view.inputBookTitleChecked}}),js)((function(e){return Object(Ze.jsxs)("div",{className:"",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.value,"title")},value:e.warehouse.title,checkedFlag:"inputWarehouseTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.warehouse.deleted}),Object(Ze.jsx)(wn,{className:"w250 mt15",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeWarehouseForm(t.target.value,"description")},value:e.warehouse.description,disabled:e.warehouse.deleted}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",name:["\u0421\u043a\u043b\u0430\u0434 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u0421\u043a\u043b\u0430\u0434 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"],func1:function(){return e.changeWarehouseForm(!0,"isGlobal")},func2:function(){return e.changeWarehouseForm(!1,"isGlobal")},disabled:e.warehouse.deleted,invisible:!1}),Object(Ze.jsx)(xn,{id:"brWH",title:"\u0424\u0438\u043b\u0438\u0430\u043b",className:"mt15",list:e.branches,field:"branch_id",setElement:e.changeWarehouseForm,current_id:e.warehouse.branch_id,disabled:e.warehouse.deleted,invisible:e.warehouse.isGlobal}),Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043a\u0430\u0441\u0441\u043e\u0439"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438",onChange:function(){return e.chooseWarehouseSelected(["show_warehouse_remains"],"permissions")},checked:e.warehouse.permissions.includes("show_warehouse_remains"),disabled:e.warehouse.deleted}),Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["warehouse_registration"],"permissions")},checked:e.warehouse.permissions.includes("warehouse_registration"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["move_in"],"permissions")},checked:e.warehouse.permissions.includes("move_in"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",onChange:function(){return e.chooseWarehouseSelected(["return_from_client"],"permissions")},checked:e.warehouse.permissions.includes("return_from_client"),disabled:e.warehouse.deleted})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["write_off"],"permissions")},checked:e.warehouse.permissions.includes("write_off"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.chooseWarehouseSelected(["move_out"],"permissions")},checked:e.warehouse.permissions.includes("move_out"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u043a\u0430\u0437",onChange:function(){return e.chooseWarehouseSelected(["add_to_order"],"permissions")},checked:e.warehouse.permissions.includes("add_to_order"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0443",onChange:function(){return e.chooseWarehouseSelected(["add_to_sale"],"permissions")},checked:e.warehouse.permissions.includes("add_to_sale"),disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443",onChange:function(){return e.chooseWarehouseSelected(["return_to_supplier"],"permissions")},checked:e.warehouse.permissions.includes("return_to_supplier"),disabled:e.warehouse.deleted})]})]})]})})),fs={setVisibleFlag:Ne,changeWarehousePermission:Mc},vs=Object(s.b)((function(e){return{employee:e.employee,roles:e.data.roles,warehouse:e.warehouse}}),fs)((function(e){var t=Object(r.useState)(e.warehouse.employees[e.warehouse.permissions_employee].like_warehouse),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(t){t.path.map((function(e){return e.id})).includes("warehouseEmployeeEditor")||e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)};return Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}})),Object(Ze.jsx)("div",{className:"centerBlock",children:Object(Ze.jsxs)("div",{className:"blockWindow",id:"warehouseEmployeeEditor",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"".concat(e.employee.last_name," ").concat(e.employee.first_name)}),Object(Ze.jsx)("div",{className:"createNewTitle mt0",children:e.employee.role_title}),Object(Ze.jsx)(ic,{text:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0441\u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0435\u0433\u043e \u0440\u043e\u043b\u0438",width:"500px"}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430",name:["\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0430","\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435"],func1:function(){c(!0),e.changeWarehousePermission(!0,"like_warehouse")},func2:function(){c(!1),e.changeWarehousePermission(!1,"like_warehouse")},checked:e.warehouse.employees[e.warehouse.permissions_employee].like_warehouse,disabled:e.warehouse.deleted}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u0438\u0434\u0435\u0442\u044c \u043e\u0441\u0442\u0430\u0442\u043a\u0438",onChange:function(){return e.changeWarehousePermission("show_warehouse_remains","permissions")},checked:i?e.warehouse.permissions.includes("show_warehouse_remains"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("show_warehouse_remains"),disabled:e.warehouse.deleted||i}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041e\u043f\u0440\u0438\u0445\u043e\u0434\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("warehouse_registration","permissions")},checked:i?e.warehouse.permissions.includes("warehouse_registration"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("warehouse_registration"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("move_in","permissions")},checked:i?e.warehouse.permissions.includes("move_in"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("move_in"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043e\u0442 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",onChange:function(){return e.changeWarehousePermission("return_from_client","permissions")},checked:i?e.warehouse.permissions.includes("return_from_client"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("return_from_client"),disabled:e.warehouse.deleted||i})]}),Object(Ze.jsxs)("div",{className:"ml30",children:[Object(Ze.jsx)("div",{className:"lableImput mt15",children:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438:"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("write_off","permissions")},checked:i?e.warehouse.permissions.includes("write_off"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("write_off"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",onChange:function(){return e.changeWarehousePermission("move_out","permissions")},checked:i?e.warehouse.permissions.includes("move_out"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("move_out"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u043a\u0430\u0437",onChange:function(){return e.changeWarehousePermission("add_to_order","permissions")},checked:i?e.warehouse.permissions.includes("add_to_order"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("add_to_order"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0443",onChange:function(){return e.changeWarehousePermission("add_to_sale","permissions")},checked:i?e.warehouse.permissions.includes("add_to_sale"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("add_to_sale"),disabled:e.warehouse.deleted||i}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443",onChange:function(){return e.changeWarehousePermission("return_to_supplier","permissions")},checked:i?e.warehouse.permissions.includes("return_to_supplier"):e.warehouse.employees[e.warehouse.permissions_employee].permissions.includes("return_to_supplier"),disabled:e.warehouse.deleted||i})]})]}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"blueButton mr-lf-0",onClick:function(){return e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Ze.jsx)("div",{className:"whiteBlueBotton",onClick:function(){return e.setVisibleFlag("statusWarehouseEmployeeEditor",!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})})),Os={changeWarehouseForm:Bc,editEmployee:ze,setVisibleFlag:Ne,changeWarehousePermission:Mc},gs=Object(s.b)((function(e){return{employees:e.employee.employees.filter((function(e){return!e.deleted})),warehouse:e.warehouse,statusWarehouseEmployeeEditor:e.view.statusWarehouseEmployeeEditor}}),Os)((function(e){return Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("table",{className:"mt15",children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w15"}),Object(Ze.jsx)("th",{children:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"}),Object(Ze.jsx)("th",{children:"\u041f\u0440\u0430\u0432\u0430"})]})}),Object(Ze.jsx)("tbody",{children:e.employees.map((function(t){return Object(Ze.jsxs)("tr",{onDoubleClick:function(){return function(t){e.changeWarehouseForm(t.id,"permissions_employee"),e.editEmployee(t),e.setVisibleFlag("statusWarehouseEmployeeEditor",!0)}(t)},children:[Object(Ze.jsx)("td",{children:Object(Ze.jsx)(ai,{onChange:function(n){return r=t.id,i=n.target.checked,e.changeWarehouseForm(r,"permissions_employee"),void e.changeWarehousePermission(i,"available");var r,i},checked:e.warehouse.employees[t.id].available,disabled:e.warehouse.deleted})}),Object(Ze.jsx)("td",{children:"".concat(t.first_name," ").concat(t.last_name)}),Object(Ze.jsx)("td",{children:e.warehouse.employees[t.id].available?e.warehouse.employees[t.id].like_warehouse?"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0441\u043a\u043b\u0430\u0434\u0430":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"})]},t.id)}))})]}),e.statusWarehouseEmployeeEditor?Object(Ze.jsx)(vs,{}):null]})})),xs={setVisibleFlag:Ne,changeWarehouseForm:Bc,resetWarehouse:Lc,createWarehouse:function(){var e=ve.getState(),t=Oe({title:e.warehouse.title,description:e.warehouse.description,deleted:e.warehouse.deleted,isGlobal:e.warehouse.isGlobal,permissions:e.warehouse.permissions,employees:e.warehouse.employees,branch_id:e.warehouse.branch_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/warehouse",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_warehouse",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveWarehouse:function(){var e=ve.getState(),t=Oe({id:e.warehouse.edit,title:e.warehouse.title,description:e.warehouse.description,deleted:e.warehouse.deleted,isGlobal:e.warehouse.isGlobal,permissions:e.warehouse.permissions,employees:e.warehouse.employees,branch_id:e.warehouse.branch_id});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/warehouse",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_warehouse",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteWarehouse:function(e){var t=ve.getState(),n=Oe({id:t.warehouse.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/warehouse",n).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_warehouse",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusWarehouseEditor",value:!1}),r({type:"RESET_WAREHOUSE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ys=Object(s.b)((function(e){return{warehouse:e.warehouse,employees:e.employee.employees.filter((function(e){return!e.deleted})),permissions:e.data.user.role.permissions}}),xs)((function(e){var t=function(){e.resetWarehouse(),e.setVisibleFlag("statusWarehouseEditor",!1),e.setVisibleFlag("inputWarehouseTitleChecked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("warehouseEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){if(!e.warehouse.edit){var t={};e.employees.forEach((function(e){t[e.id]={},t[e.id].available=!0,t[e.id].like_warehouse=!0,t[e.id].permissions=S})),e.changeWarehouseForm(t,"employees")}}),[]);var i=e.permissions.includes("setting_delete_warehouse"),c=e.permissions.includes("setting_recover_warehouse");return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"warehouseEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u044b\u0439 \u0441\u043a\u043b\u0430\u0434"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(zn,{className:"mt15",list:["\u041e\u0431\u0449\u0438\u0435","\u0414\u043e\u0441\u0442\u0443\u043f"],tab:e.warehouse.tabs,func:function(t){return e.changeWarehouseForm(t,"tabs")}}),0===e.warehouse.tabs?Object(Ze.jsx)(_s,{}):null,1===e.warehouse.tabs?Object(Ze.jsx)(gs,{}):null]}),Object(Ze.jsx)(jn,{edit:e.warehouse.edit,deleted:e.warehouse.deleted,create:function(){e.warehouse.title?e.createWarehouse():e.setVisibleFlag("inputWarehouseTitleChecked",!1)},save:function(){e.warehouse.title?e.saveWarehouse():e.setVisibleFlag("inputWarehouseTitleChecked",!1)},delete:i?function(){return e.deleteWarehouse(!0)}:null,recover:c?function(){return e.deleteWarehouse(!1)}:null,close:t})]})})})),Es={addWarehouse:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_warehouse",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"CHANGE_WAREHOUSE_FORM",field:"warehouses",value:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},setVisibleFlag:Ne},Ns=Object(s.b)((function(e){return{statusWarehouseEditor:e.view.statusWarehouseEditor,permissions:e.data.user.role.permissions}}),Es)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){e.addWarehouse()}),[]),Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0421\u043a\u043b\u0430\u0434\u044b"})}),Object(Ze.jsxs)("div",{className:"settingPageBody",children:[Object(Ze.jsx)("h3",{children:"\u0421\u043a\u043b\u0430\u0434\u044b \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0438\u043b\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"}),Object(Ze.jsx)("p",{children:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0441\u043a\u043b\u0430\u0434\u043e\u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u043e\u0432. \u0421\u043a\u043b\u0430\u0434\u044b \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u0432\u0441\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0421\u043a\u043b\u0430\u0434",onClick:function(){return e.setVisibleFlag("statusWarehouseEditor",!0)},invisible:!e.permissions.includes("setting_create_warehouse")}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return c(e.target.checked)},checked:i,invisible:!e.permissions.includes("setting_see_deleted_warehouse")})]}),e.statusWarehouseEditor?Object(Ze.jsx)(ys,{}):null,Object(Ze.jsx)(bs,{showDeleted:i})]})]})})),ws=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"settingContent",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),ks=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"settingContent",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0442\u0435\u0433\u043e\u0432"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})}));function Cs(e,t){return{type:"CHANGE_NOT_EVENT_FORM",field:t,value:e}}var Ss=[{id:"ORDER_CREATED",title:"\u0417\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d"},{id:"ORDER_STATUS_CHANGED",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f"},{id:"ORDER_STATUS_CHANGED_TO",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u043d\u0430"},{id:"ORDER_STATUS_SCHEDULED_FOR",title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u0442\u044c \u043d\u0430"}],Ts={setVisibleFlag:Ne,resetNotEvent:function(){return{type:"RESET_NOT_EVENT"}},createNotEvent:function(){var e=ve.getState(),t=Oe({event:e.notEvent.event,target_audience:e.notEvent.target_audience,notification_type:e.notEvent.notification_type,statuses:e.notEvent.statuses,notification_template_id:e.notEvent.notification_template_id,deleted:!1}),n=Oe({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_events",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_events",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},saveNotEvent:function(){var e=ve.getState(),t=Oe({id:e.notEvent.edit,event:e.notEvent.event,target_audience:e.notEvent.target_audience,statuses:e.notEvent.statuses,notification_template_id:e.notEvent.notification_template_id});t.method="PUT";var n=Oe({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_events",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_events",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteNotEvent:function(e){var t=ve.getState(),n=Oe({id:t.notEvent.edit,deleted:e});n.method="PUT";var r=Oe({deleted:t.notEvent.showDeleted,target_audience:t.notEvent.filter_target_audience});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/notification_events",n).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_notification_events",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotEventEditor",value:!1}),i({type:"RESET_NOT_EVENT"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeNotEventForm:Cs,selectedNotEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_NOT_EVENT",field:t,value:e,saveToApp:n}}},Fs=Object(s.b)((function(e){return{notEvent:e.notEvent,inputNotEventEventChecked:e.view.inputNotEventEventChecked,inputNotEventTemplateChecked:e.view.inputNotEventTemplateChecked,permissions:e.data.user.role.permissions,templates:e.notTemplate.templates}}),Ts)((function(e){var t=function(){e.setVisibleFlag("statusNotEventEditor",!1),e.setVisibleFlag("inputNotEventEventChecked",!0),e.setVisibleFlag("inputNotEventTemplateChecked",!0),e.resetNotEvent()},n=function(e){e.path.map((function(e){return e.id})).includes("NotTempEditorWindow")||e.path.map((function(e){return e.id})).includes("gb1")||e.path.map((function(e){return e.id})).includes("gb2")||e.path.map((function(e){return e.id})).includes("gb3")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("setting_delete_not_event"),c=e.permissions.includes("setting_recover_not_event");return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"NotTempEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle w515",children:e.notEvent.edit?e.notEvent.title:"\u041d\u043e\u0432\u043e\u0435 \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsx)(xn,{id:"chooseNotEventType",title:"\u041f\u0440\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0438",className:"mt15",list:Ss,field:"event",setElement:e.changeNotEventForm,current_id:e.notEvent.event,width:"250px",checkedFlag:"inputNotEventEventChecked",checked:e.inputNotEventEventChecked,noChoosed:"\u041d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e",disabled:e.notEvent.deleted}),Object(Ze.jsx)(Ii,{className:"mt15 ml15 h27",func:function(t){return e.selectedNotEvent(t,"statuses")},current_list:e.notEvent.statuses,invisible:"ORDER_STATUS_CHANGED_TO"!==e.notEvent.event})]}),Object(Ze.jsx)(_n,{className:"mt15",title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",name:["SMS","Email"],func1:function(){return e.changeNotEventForm(1,"notification_type")},func2:function(){return e.changeNotEventForm(2,"notification_type")},checked:!0,disabled:!1,invisible:!1}),Object(Ze.jsx)(xn,{id:"idChooseNotTemplate",title:"\u0428\u0430\u0431\u043b\u043e\u043d",className:"mt15",list:e.templates,field:"notification_template_id",setElement:e.changeNotEventForm,current_id:e.notEvent.notification_template_id,width:"250px",checkedFlag:"inputNotEventTemplateChecked",checked:e.inputNotEventTemplateChecked,noChoosed:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",disabled:e.notEvent.deleted})]}),Object(Ze.jsx)(jn,{edit:e.notEvent.edit,deleted:e.notEvent.deleted,create:function(){e.notEvent.event&&e.notEvent.notification_template_id?e.createNotEvent():(e.notEvent.event||e.setVisibleFlag("inputNotEventEventChecked",!1),e.notEvent.notification_template_id||e.setVisibleFlag("inputNotEventTemplateChecked",!1))},save:function(){e.notEvent.event&&e.notEvent.notification_template_id?e.saveNotEvent():(e.notEvent.event||e.setVisibleFlag("inputNotEventEventChecked",!1),e.notEvent.notification_template_id||e.setVisibleFlag("inputNotEventTemplateChecked",!1))},delete:i?function(){return e.deleteNotEvent(!0)}:null,recover:c?function(){return e.deleteNotEvent(!1)}:null,close:t})]})})})),As={setVisibleFlag:Ne,editNotEvent:function(e){return{type:"EDIT_NOT_EVENT",event:e}}},Ps=Object(s.b)((function(e){return{notEvent:e.notEvent,permissions:e.data.user.role.permissions,statuses:e.data.status}}),As)((function(e){return Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u041f\u0440\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0438"}),Object(Ze.jsx)("th",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),Object(Ze.jsx)("th",{children:"\u0428\u0430\u0431\u043b\u043e\u043d"})]})}),Object(Ze.jsx)("tbody",{children:e.notEvent.events.filter((function(t){return t.target_audience===e.target_audience})).map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_not_event")&&(e.editNotEvent(t),e.setVisibleFlag("statusNotEventEditor",!0))}(t)},children:[Object(Ze.jsxs)("td",{className:"noWr",children:[Object(Ze.jsx)("div",{children:Ss.find((function(e){return e.id===t.event})).title}),"ORDER_STATUS_CHANGED_TO"===t.event?Object(Ze.jsx)("div",{className:"row",children:e.statuses.filter((function(e){return t.statuses.includes(e.id)})).map((function(e){return Object(Ze.jsx)("div",{className:"stat",style:{backgroundColor:e.color},children:e.name},e.id)}))}):null]}),Object(Ze.jsx)("td",{className:"noWr",children:1===t.notification_type?"SMS":2===t.notification_type?"Email":"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"}),Object(Ze.jsx)("td",{className:"noWr",children:t.template_title})]},t.id)}))})]})})),Ds={setVisibleFlag:Ne,changeNotEventForm:Cs},Rs=Object(s.b)((function(e){return{statusNotEventEditor:e.view.statusNotEventEditor,showDeleted:e.notEvent.showDeleted,permissions:e.data.user.role.permissions}}),Ds)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)("h3",{children:"\u0414\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"}),Object(Ze.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043e \u0445\u043e\u0434\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442 \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{id:"gb1",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(1,"target_audience")},invisible:!e.permissions.includes("setting_create_not_event")}),Object(Ze.jsx)(ai,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeNotEventForm(t.target.checked,"showDeleted")},checked:e.showDeleted,invisible:!e.permissions.includes("setting_see_deleted_not_event")})]}),e.statusNotEventEditor?Object(Ze.jsx)(Fs,{}):null,Object(Ze.jsx)(Ps,{target_audience:1}),Object(Ze.jsx)("h3",{children:"\u0414\u043b\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432"}),Object(Ze.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0438 \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u0432\u0430\u0436\u043d\u043e\u0433\u043e."}),Object(Ze.jsx)(Br,{id:"gb2",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(2,"target_audience")}}),Object(Ze.jsx)("h3",{children:"\u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439"}),Object(Ze.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u0435\u0439, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0438 \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u0432\u0430\u0436\u043d\u043e\u0433\u043e."}),Object(Ze.jsx)(Br,{id:"gb3",className:"greenButton",title:"+ \u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435",onClick:function(){e.setVisibleFlag("statusNotEventEditor",!0),e.changeNotEventForm(3,"target_audience")}})]})}));function Is(e,t){return{type:"CHANGE_NOT_TEMPLATE_FORM",field:t,value:e}}var Bs=["#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u041d\u0410\u0417\u0412\u0410\u041d\u0418\u0415","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-EMAIL","#\u041a\u041e\u041c\u041f\u0410\u041d\u0418\u042f-\u0420\u0415\u041a\u0412\u0418\u0417\u0418\u0422\u042b"],Ls=["#\u041a\u041b\u0418\u0415\u041d\u0422-\u0418\u041c\u042f","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-EMAIL","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041a/\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0420/\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0414\u0418\u0420\u0415\u041a\u0422\u041e\u0420","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0411\u0418\u041a","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041d\u0410\u0417\u0412\u0410\u041d\u0418\u0415-\u0411\u0410\u041d\u041a\u0410","#\u041a\u041b\u0418\u0415\u041d\u0422-\u042e\u0420\u0418\u0414\u0418\u0427\u0415\u0421\u041a\u0418\u0419-\u0410\u0414\u0420\u0415\u0421","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041a\u041f\u041f","#\u041a\u041b\u0418\u0415\u041d\u0422-\u0418\u041d\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041e\u0413\u0420\u041d","#\u041a\u041b\u0418\u0415\u041d\u0422-\u041e\u0411\u0420\u0410\u0429\u0415\u041d\u0418\u0415"],Ms=["#\u0417\u0410\u041a\u0410\u0417-\u041d\u041e\u041c\u0415\u0420","#\u0426\u0415\u041d\u0410","#\u0417\u0410\u041c\u0415\u0422\u041a\u0418-\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420\u0410","#\u0417\u0410\u041c\u0415\u0422\u041a\u0418-\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042f","#\u0421\u0420\u041e\u0427\u041d\u041e","#\u0417\u0410\u041a\u0410\u0417-\u041d\u0415\u0418\u0421\u041f\u0420\u0410\u0412\u041d\u041e\u0421\u0422\u042c","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0411\u0423\u0414\u0415\u0422-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041f\u041b\u0410\u041d\u0418\u0420\u041e\u0412\u0410\u041d-\u041d\u0410","#\u0420\u0415\u041a\u041b\u0410\u041c\u041d\u0410\u042f-\u041a\u0410\u041c\u041f\u0410\u041d\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0422\u0418\u041f-\u0418\u0417\u0414\u0415\u041b\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0411\u0420\u0415\u041d\u0414","#\u0417\u0410\u041a\u0410\u0417-\u041c\u041e\u0414\u0423\u041b\u042c","#\u0417\u0410\u041a\u0410\u0417-\u041c\u041e\u0414\u0415\u041b\u042c","#\u0417\u0410\u041a\u0410\u0417-\u041a\u041e\u041c\u041f\u041b\u0415\u041a\u0422\u0410\u0426\u0418\u042f","#\u0417\u0410\u041a\u0410\u0417-\u0412\u041d\u0415\u0428\u041d\u0418\u0419-\u0412\u0418\u0414","#\u0417\u0410\u041a\u0410\u0417-\u0421\u0415\u0420\u0418\u0419\u041d\u042b\u0419-\u041d\u041e\u041c\u0415\u0420"],Vs=["#\u0417\u0410\u041a\u0410\u0417-\u0421\u041e\u0417\u0414\u0410\u041b","#\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c-\u0418\u041c\u042f","#\u0418\u0421\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420-\u0418\u041c\u042f","#\u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420-\u0422\u0415\u041b\u0415\u0424\u041e\u041d","#\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041a\u0420\u042b\u041b"],Gs=["#\u041e\u0420\u0418\u0415\u041d\u0422\u0418\u0420-\u0426\u0415\u041d\u0410","#\u041a-\u041e\u041f\u041b\u0410\u0422\u0415","#\u041e\u041f\u041b\u0410\u0427\u0415\u041d\u041e","#\u0417\u0410\u041a\u0410\u0417-\u0421\u0423\u041c\u041c\u0410"],Hs=["#\u0414\u0410\u0422\u0410-\u0421\u0415\u0413\u041e\u0414\u041d\u042f","#\u0414\u0410\u0422\u0410-\u0412\u0420\u0415\u041c\u042f-\u0421\u0415\u0413\u041e\u0414\u041d\u042f","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0421\u041e\u0417\u0414\u0410\u041d","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0411\u0423\u0414\u0415\u0422-\u0413\u041e\u0422\u041e\u0412","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041a\u0420\u042b\u0422","#\u0414\u0410\u0422\u0410-\u0417\u0410\u041a\u0410\u0417-\u0417\u0410\u041f\u041b\u0410\u041d\u0418\u0420\u041e\u0412\u0410\u041d-\u041d\u0410","#\u0414\u0410\u0422\u0410-\u0413\u0410\u0420\u0410\u041d\u0422\u0418\u042f"],qs=["#\u0417\u0410\u041a\u0410\u0417-\u0422\u0418\u041f","#\u0412\u0415\u0420\u0414\u0418\u041a\u0422","#\u041b\u041e\u041a\u0410\u0426\u0418\u042f","#\u0421\u0422\u0410\u0422\u0423\u0421"],Ws=function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{className:"boxVariable",children:[Object(Ze.jsx)("div",{className:"varLabel mr-tb-15 w200",onClick:function(){return c(!i)},children:e.title}),i?Object(Ze.jsx)("div",{children:e.list_var.map((function(t,n){return Object(Ze.jsx)("div",{className:"variableItem",onClick:function(){return e.func(t)},children:t},n)}))}):null]})},zs={setVisibleFlag:Ne,changeNotTemplateForm:Is,resetNotTemplate:function(){return{type:"RESET_NOT_TEMPLATE"}},createNotTemplate:function(){var e=ve.getState(),t=Oe({title:e.notTemplate.title,template:e.notTemplate.template,deleted:!1}),n=Oe({deleted:e.notTemplate.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_template",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_template",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},saveNotTemplate:function(){var e=ve.getState(),t=Oe({id:e.notTemplate.edit,title:e.notTemplate.title,template:e.notTemplate.template,deleted:!1});t.method="PUT";var n=Oe({deleted:e.notTemplate.showDeleted});return function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e.data.url_server+"/notification_template",t).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return r.next=4,fetch(e.data.url_server+"/get_notification_template",n).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteNotTemplate:function(e){var t=ve.getState(),n=Oe({id:t.notTemplate.edit,deleted:e});n.method="PUT";var r=Oe({deleted:t.notTemplate.showDeleted});return function(){var e=Object(m.a)(u.a.mark((function e(i){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/notification_template",n).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_notification_template",r).then((function(e){return e.json()})).then((function(e){e.success?(i({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}),i({type:"SET_VISIBLE_FLAG",field:"statusNotTemplateEditor",value:!1}),i({type:"RESET_NOT_TEMPLATE"})):console.warn(e.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0438\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Us=Object(s.b)((function(e){return{notTemplate:e.notTemplate,inputNotTempTitleChecked:e.view.inputNotTempTitleChecked,inputNotTempTempleChecked:e.view.inputNotTempTempleChecked,permissions:e.data.user.role.permissions}}),zs)((function(e){var t=function(){e.setVisibleFlag("statusNotTemplateEditor",!1),e.setVisibleFlag("inputNotTempTitleChecked",!0),e.setVisibleFlag("inputNotTempTempleChecked",!0),e.resetNotTemplate()},n=function(e){e.path.map((function(e){return e.id})).includes("NotTempEditorWindow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=e.permissions.includes("setting_delete_not_template"),c=e.permissions.includes("setting_recover_not_template");return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"NotTempEditorWindow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.notTemplate.edit?e.notTemplate.title:"\u041d\u043e\u0432\u044b\u0439 \u0428\u0430\u0431\u043b\u043e\u043d"}),Object(Ze.jsx)("div",{className:"contentEditor",children:Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeNotTemplateForm(t.target.value,"title")},value:e.notTemplate.title,checkedFlag:"inputNotTempTitleChecked",checked:e.inputNotTempTitleChecked,redStar:!0,disabled:e.notTemplate.deleted}),Object(Ze.jsx)(wn,{className:"w400 mt15",title:"\u0422\u0435\u043a\u0441\u0442",onChange:function(t){return e.changeNotTemplateForm(t.target.value,"template")},value:e.notTemplate.template,checkedFlag:"inputNotTempTempleChecked",checked:e.inputNotTempTempleChecked,redStar:!0,disabled:e.notTemplate.deleted})]}),Object(Ze.jsxs)("div",{className:"ml30",children:[Object(Ze.jsx)("h3",{children:"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"}),Object(Ze.jsx)(Ws,{title:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",list_var:Bs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u041a\u043b\u0438\u0435\u043d\u0442",list_var:Ls,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u0417\u0430\u043a\u0430\u0437",list_var:Ms,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",list_var:Vs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b",list_var:Gs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u0414\u0430\u0442\u0430",list_var:Hs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}}),Object(Ze.jsx)(Ws,{title:"\u041f\u0440\u043e\u0447\u0438\u0435",list_var:qs,func:function(t){return e.changeNotTemplateForm(e.notTemplate.template+t,"template")}})]})]})}),Object(Ze.jsx)(jn,{edit:e.notTemplate.edit,deleted:e.notTemplate.deleted,create:function(){e.notTemplate.title&&e.notTemplate.template?e.createNotTemplate():(e.notTemplate.title||e.setVisibleFlag("inputNotTempTitleChecked",!1),e.notTemplate.template||e.setVisibleFlag("inputNotTempTempleChecked",!1))},save:function(){e.notTemplate.title&&e.notTemplate.template?e.saveNotTemplate():(e.notTemplate.title||e.setVisibleFlag("inputNotTempTitleChecked",!1),e.notTemplate.template||e.setVisibleFlag("inputNotTempTempleChecked",!1))},delete:i?function(){return e.deleteNotTemplate(!0)}:null,recover:c?function(){return e.deleteNotTemplate(!1)}:null,close:t})]})})})),Ys={setVisibleFlag:Ne,editNotTemplate:function(e){return{type:"EDIT_NOT_TEMPLATE",template:e}}},Ks=Object(s.b)((function(e){return{notTemplate:e.notTemplate,permissions:e.data.user.role.permissions}}),Ys)((function(e){return Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{className:"w150",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{children:"\u0428\u0430\u0431\u043b\u043e\u043d"})]})}),Object(Ze.jsx)("tbody",{children:e.notTemplate.templates.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_not_template")&&(e.editNotTemplate(t),e.setVisibleFlag("statusNotTemplateEditor",!0))}(t)},children:[Object(Ze.jsx)("td",{className:"noWr",children:t.title}),Object(Ze.jsx)("td",{className:"noWr",children:t.template})]},t.id)}))})]})})),Js={setVisibleFlag:Ne,changeNotTemplateForm:Is},Xs=Object(s.b)((function(e){return{statusNotTemplateEditor:e.view.statusNotTemplateEditor,showDeleted:e.notTemplate.showDeleted,permissions:e.data.user.role.permissions}}),Js)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)("h3",{children:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b"}),Object(Ze.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0448\u0430\u0431\u043b\u043e\u043d \u0434\u043b\u044f \u043e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0439 \u0438\u043b\u0438 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0439."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0428\u0430\u0431\u043b\u043e\u043d",onClick:function(){return e.setVisibleFlag("statusNotTemplateEditor",!0)},invisible:e.permissions.includes("setting_create_notification")}),Object(Ze.jsx)(ai,{className:"ml10",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeNotTemplateForm(t.target.checked,"showDeleted")},checked:e.showDeleted,invisible:!e.permissions.includes("setting_see_deleted_not_template")})]}),e.statusNotTemplateEditor?Object(Ze.jsx)(Us,{}):null,Object(Ze.jsx)(Ks,{})]})})),Qs={changeNotEventForm:Cs,addNotTemplate:function(){var e=ve.getState(),t=Oe({deleted:e.notTemplate.showDeleted});return function(n){fetch(e.data.url_server+"/get_notification_template",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_NOT_TEMPLATE_FORM",field:"templates",value:e.data}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addNotEvent:function(){var e=ve.getState(),t=Oe({deleted:e.notEvent.showDeleted,target_audience:e.notEvent.filter_target_audience});return function(n){fetch(e.data.url_server+"/get_notification_events",t).then((function(e){return e.json()})).then((function(e){e.success?n({type:"CHANGE_NOT_EVENT_FORM",field:"events",value:e.data}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},Zs=Object(s.b)((function(e){return{notEvent:e.notEvent,notTemplate:e.notTemplate}}),Qs)((function(e){return Object(r.useEffect)((function(){e.addNotTemplate()}),[e.notTemplate.showDeleted]),Object(r.useEffect)((function(){e.addNotEvent()}),[e.notEvent.showDeleted]),Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"})}),Object(Ze.jsx)(zn,{className:"mt15",list:["\u0417\u0430\u043a\u0430\u0437\u044b","\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f","\u0417\u0430\u0434\u0430\u0447\u0438","\u0428\u0430\u0431\u043b\u043e\u043d\u044b"],tab:e.notEvent.tabs,func:function(t){return e.changeNotEventForm(t,"tabs")}}),0===e.notEvent.tabs?Object(Ze.jsx)(Rs,{}):null,(e.notEvent.tabs,null),(e.notEvent.tabs,null),3===e.notEvent.tabs?Object(Ze.jsx)(Xs,{}):null]})})),$s={changeDictServiceForm:Ae,resetGruopDictService:function(){return{type:"RESET_GROPE_DICT_SERVICE"}},createGroupDictService:function(){var e=ve.getState(),t=Oe({title:e.dictService.group_title,deleted:!1});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/group_dict_service",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_group_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setVisibleFlag:Ne,saveGroupDictService:function(){var e=ve.getState(),t=Oe({id:e.dictService.group_edit,title:e.dictService.group_title});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/group_dict_service",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_group_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteGroupDictService:function(e){var t=ve.getState(),n=Oe({id:t.dictService.group_edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/group_dict_service",n).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_group_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"group_dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusGroupServiceEditor",value:!1}),r({type:"RESET_GROPE_DICT_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},eo=Object(s.b)((function(e){return{dictService:e.dictService,inputDictServiceChecked:e.view.inputDictServiceChecked,permissions:e.data.user.role.permissions}}),$s)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("groupServiceEditorWiondow")||e.setVisibleFlag("statusGroupServiceEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"groupServiceEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.dictService.group_edit?e.dictService.group_title:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ze.jsx)("div",{className:"contentEditor",children:Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeDictServiceForm(t.target.value,"group_title")},value:e.dictService.group_title,checkedFlag:"inputDictServiceChecked",checked:e.inputDictServiceChecked,redStar:!0,disabled:e.dictService.group_deleted})}),Object(Ze.jsx)(jn,{edit:e.dictService.group_edit,deleted:e.dictService.group_deleted,create:function(){e.dictService.group_title?e.createGroupDictService():e.setVisibleFlag("inputDictServiceChecked",!1)},save:function(){e.dictService.group_title?e.saveGroupDictService():e.setVisibleFlag("inputDictServiceChecked",!1)},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteGroupDictService(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteGroupDictService(!1)}:null,close:function(){e.setVisibleFlag("statusGroupServiceEditor",!1),e.resetGruopDictService()}})]})})})),to={changeDictServiceForm:Ae,setVisibleFlag:Ne,resetService:function(){return{type:"RESET_SERVICE"}},createDictService:function(){var e=ve.getState(),t=Oe({title:e.dictService.title,price:e.dictService.price,cost:e.dictService.cost,warranty:e.dictService.warranty,code:e.dictService.code,earnings_percent:e.dictService.earnings_percent,earnings_summ:e.dictService.earnings_summ,deleted:!1,category_id:e.dictService.category_id});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/dict_service",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},saveDictService:function(){var e=ve.getState(),t=Oe({id:e.dictService.edit,title:e.dictService.title,price:e.dictService.price,cost:e.dictService.cost,warranty:e.dictService.warranty,code:e.dictService.code,earnings_percent:e.dictService.earnings_percent,earnings_summ:e.dictService.earnings_summ,deleted:e.dictService.deleted,category_id:e.dictService.category_id});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/dict_service",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteDictService:function(e){var t=ve.getState(),n=Oe({id:t.dictService.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/dict_service",n).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"dict_service",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusServiceEditor",value:!1}),r({type:"RESET_SERVICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},no=Object(s.b)((function(e){return{dictService:e.dictService,view:e.view,group_dict_service:e.data.group_dict_service,permissions:e.data.user.role.permissions}}),to)((function(e){var t=function(){e.setVisibleFlag("statusServiceEditor",!1),e.resetService()},n=function(e){e.path.map((function(e){return e.id})).includes("serviceEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}})),Object(r.useEffect)((function(){e.edit||e.changeDictServiceForm(e.dictService.seted_categiry,"category_id")}),[]);return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow mwp",id:"serviceEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.dictService.edit?e.dictService.title:"\u041d\u043e\u0432\u0430\u044f \u0443\u0441\u043b\u0443\u0433\u0430"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeDictServiceForm(t.target.value,"title")},value:e.dictService.title,checkedFlag:"inputServiceTitleChecked",checked:e.view.inputServiceTitleChecked,redStar:!0,disabled:e.dictService.deleted}),Object(Ze.jsx)(xn,{id:23,title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",className:"mt15",list:e.group_dict_service,field:"category_id",setElement:e.changeDictServiceForm,current_id:e.dictService.category_id,width:"250px",checkedFlag:"inputServiceCategoryIdChacked",checked:e.view.inputServiceCategoryIdChacked,disabled:e.dictService.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0426\u0435\u043d\u0430",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"price")},value:e.dictService.price,unit:"\u0440\u0443\u0431.",checkedFlag:"inputServicePriceChacked",checked:e.view.inputServicePriceChacked,redStar:!0,disabled:e.dictService.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u0435\u0431\u0435\u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"cost")},value:e.dictService.cost,unit:"\u0440\u0443\u0431.",disabled:e.dictService.deleted}),Object(Ze.jsxs)("div",{className:"row al-itm-fe",children:[Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0413\u0430\u0440\u0430\u043d\u0442\u0438\u044f",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9]/g,"")*e.dictService.warranty_value,"warranty")},value:parseInt(e.dictService.warranty/e.dictService.warranty_value),unit:" ",disabled:e.dictService.deleted}),Object(Ze.jsx)(_n,{className:"ml30",name:["\u0414\u043d\u0438","\u041c\u0435\u0441"],func1:function(){return e.changeDictServiceForm(86400,"warranty_value")},func2:function(){return e.changeDictServiceForm(2592e3,"warranty_value")},disabled:e.dictService.deleted})]}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434",onChange:function(t){return e.changeDictServiceForm(t.target.value,"code")},value:e.dictService.code,disabled:e.dictService.deleted}),Object(Ze.jsx)("h3",{children:"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044e"}),Object(Ze.jsx)(ic,{text:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u0438 \u043f\u043e\u043b\u044f, \u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430 \u044d\u0442\u0443 \u0443\u0441\u043b\u0443\u0433\u0443 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c \u043f\u043e\u043b\u0443\u0447\u0430\u043b \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u044d\u0442\u0438 \u043f\u043e\u043b\u044f \u043f\u0443\u0441\u0442\u044b\u043c\u0438, \u0438 \u043f\u0440\u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u0435 \u0417\u041f \u0431\u0443\u0434\u0443\u0442 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u0449\u0438\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f, \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044f"}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"earnings_percent")},value:e.dictService.earnings_percent,unit:"%",disabled:e.dictService.deleted}),Object(Ze.jsx)(En,{className:"w70 mt15",title:"\u0421\u0443\u043c\u043c\u0430",onChange:function(t){return e.changeDictServiceForm(t.target.value.replace(/[^0-9.]/g,""),"earnings_summ")},value:e.dictService.earnings_summ,unit:"\u0440\u0443\u0431",disabled:e.dictService.deleted})]}),Object(Ze.jsx)(jn,{edit:e.dictService.edit,deleted:e.dictService.deleted,create:function(){e.dictService.title&&e.dictService.category_id&&e.dictService.price?e.createDictService():(e.dictService.title||e.setVisibleFlag("inputServiceTitleChecked",!1),e.dictService.category_id||e.setVisibleFlag("inputServiceCategoryIdChacked",!1),e.dictService.price||e.setVisibleFlag("inputServicePriceChacked",!1))},save:function(){e.dictService.title&&e.dictService.category_id&&e.dictService.price?e.saveDictService():(e.dictService.title||e.setVisibleFlag("inputServiceTitleChecked",!1),e.dictService.category_id||e.setVisibleFlag("inputServiceCategoryIdChacked",!1),e.dictService.price||e.setVisibleFlag("inputServicePriceChacked",!1))},delete:e.permissions.includes("setting_delete_service")?function(){return e.deleteDictService(!0)}:null,recover:e.permissions.includes("setting_recover_service")?function(){return e.deleteDictService(!1)}:null,close:t})]})})})),ro={createSaveServicePrice:function(e,t,n,r){var i=ve.getState(),c=Oe({id:e,cost:t,discount_margin_id:n,service_id:r});return function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.data.url_server+"/service_prices",c).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(i.data.url_server+"/get_service_prices",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"service_prices",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043b\u0443\u0433 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},io=Object(s.b)((function(e){return{service_prices:e.data.service_prices}}),ro)((function(e){var t=e.service_prices.find((function(t){return t.discount_margin_id===e.margin_id&&t.service_id===e.service_id})),n=Object(r.useState)(!1),i=Object(it.a)(n,2),c=i[0],a=i[1],s=Object(r.useState)(t?t.cost:0),o=Object(it.a)(s,2),l=o[0],d=o[1],u=function(){a(!1),e.createSaveServicePrice(t?t.id:null,parseFloat(l),e.margin_id,e.service_id)};return Object(Ze.jsx)("td",{onDoubleClick:e.disabled?null:function(){return a(!0)},children:c?Object(Ze.jsx)("input",{className:"inputCell",onChange:function(e){return d(e.target.value.replace(/[^0-9.]/g,""))},value:l,autoFocus:!0,onBlur:u,onKeyPress:function(e){"Enter"===e.key&&u()}}):Object(Ze.jsx)("div",{children:t?t.cost:0})})})),co={addGroupeService:function(){var e=ve.getState();return function(){var t=Object(m.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.data.url_server+"/get_group_dict_service",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?n({type:"ADD_DATA",field:"group_dict_service",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(n,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setVisibleFlag:Ne,editGroupDictService:function(e){return{type:"EDIT_GRUOP_DICT_SERVICE",group:e}},addDictService:qe,changeDictServiceForm:Ae,selectedService:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"SELECTED_SERVICE",field:t,value:e,saveToApp:n}},addDiscountMargin:Be,addServicePrices:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_service_prices",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_DATA",field:"service_prices",data:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0446\u0435\u043d \u043d\u0430 \u0443\u0441\u043b\u0443\u0433\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},editDictService:function(e){return{type:"EDIT_SERVICE",service:e}}},ao=Object(s.b)((function(e){return{group_dict_service:e.data.group_dict_service,dict_service:e.data.dict_service,statusGroupServiceEditor:e.view.statusGroupServiceEditor,statusServiceEditor:e.view.statusServiceEditor,dictService:e.dictService,discount_margin:e.data.discount_margin,permissions:e.data.user.role.permissions}}),co)((function(e){Object(r.useEffect)((function(){return e.addGroupeService(),e.addDiscountMargin(),e.addServicePrices(),function(){e.changeDictServiceForm(null,"seted_categiry")}}),[]),Object(r.useEffect)((function(){e.addDictService()}),[e.dictService.seted_categiry]);var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=e.group_dict_service.filter((function(e){return i|!e.deleted})),s=a.length,o=e.dict_service.filter((function(e){return i|!e.deleted})),l=o.length,d=e.dictService.fields.filter((function(t){return e.dictService.chosed_fields.includes(t.id)})),u=e.discount_margin.filter((function(e){return 1===e.margin_type})).map((function(e,t){return{id:t+6,margin_id:e.id,title:e.title}})),m=u.filter((function(t){return e.dictService.chosed_fields.includes(t.id)}));return Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433"})}),Object(Ze.jsxs)("div",{className:"settingPageBody",children:[Object(Ze.jsx)("p",{children:"\u041f\u0440\u0435\u0439\u0441\u043a\u0443\u0440\u0430\u043d\u0442 \u0440\u0430\u0431\u043e\u0442 \u0438 \u0443\u0441\u043b\u0443\u0433 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0446\u0435\u043d\u044b \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443/\u0443\u0441\u043b\u0443\u0433\u0443"}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b\u0435",onChange:function(e){return c(e.target.checked)},value:i,invisible:!e.permissions.includes("setting_see_deleted_service")}),Object(Ze.jsxs)("div",{className:"row al-itm-bl",children:[Object(Ze.jsxs)("div",{className:"w250",children:[Object(Ze.jsx)(Br,{title:"+ \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",className:"greenButton",onClick:function(){return e.setVisibleFlag("statusGroupServiceEditor",!0)},invisible:!e.permissions.includes("setting_create_service")}),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(Ze.jsx)("th",{children:"\u041a\u043e\u043b-\u0432\u043e"})]})}),Object(Ze.jsx)("tbody",{children:a.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onClick:function(){return e.changeDictServiceForm(t.id,"seted_categiry")},onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_service")&&(e.editGroupDictService(t),e.setVisibleFlag("statusGroupServiceEditor",!0))}(t)},style:t.id===e.dictService.seted_categiry?{backgroundColor:"#cae1f5"}:null,children:[Object(Ze.jsx)("td",{children:t.title}),Object(Ze.jsx)("td",{children:t.count})]},t.id)}))})]}),Object(Ze.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",s]}),e.statusGroupServiceEditor?Object(Ze.jsx)(eo,{}):null]}),Object(Ze.jsxs)("div",{className:"ml10 w100",children:[Object(Ze.jsxs)("div",{className:"row jc-sb",children:[Object(Ze.jsx)(Br,{title:"+ \u0423\u0441\u043b\u0443\u0433\u0430",className:"greenButton",onClick:function(){return e.setVisibleFlag("statusServiceEditor",!0)},invisible:!e.permissions.includes("setting_create_service")}),Object(Ze.jsx)(mi,{id:"service",height:"185px",classNameMenu:"listOption",list:e.dictService.fields.concat(u),checked_list:e.dictService.chosed_fields,func:e.selectedService,field:"chosed_fields"})]}),Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[d.map((function(e){return Object(Ze.jsx)("th",{children:e.title},e.id)})),m.map((function(e){return Object(Ze.jsx)("th",{children:e.title},e.id)}))]})}),Object(Ze.jsx)("tbody",{children:o.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,children:[d.map((function(n){return Object(Ze.jsx)("td",{onDoubleClick:function(){return function(t){e.permissions.includes("setting_edit_service")&&(e.editDictService(t),e.setVisibleFlag("statusServiceEditor",!0))}(t)},children:t[n.field]},n.id)})),m.map((function(n){return Object(Ze.jsx)(io,{margin_id:n.margin_id,service_id:t.id,disabled:!e.permissions.includes("setting_edit_service")},n.id)}))]},t.id)}))})]}),Object(Ze.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",l]}),e.statusServiceEditor?Object(Ze.jsx)(no,{}):null]})]})]})]})})),so={changeBookForm:Et},oo=Object(s.b)((function(e){return{icon:e.book.icon}}),so)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1];return Object(Ze.jsxs)("div",{className:"mt15",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0438\u043a\u043e\u043d\u043a\u0443"}),i?Object(Ze.jsx)("div",{className:"w250",children:["nothing.svg","airconditioner.svg","chip1.svg","chip2.svg","cleaner.svg","cleaner2.svg","coffee-machine.svg","coffee-maker.svg","computer_chip.svg","cooler.svg","desktop.svg","dish-dishwash.svg","fan.svg","fridge.svg","fridge2.svg","graphic_card2.svg","hairdrier.svg","jar.svg","laundry_press.svg","microwave.svg","mixer.svg","refrigerator.svg","stove.svg","toaster.svg","washer-washing.svg","washing_machine1.svg","washing_machine.svg"].map((function(t,n){return Object(Ze.jsx)("img",{className:"icon_equipment",src:"".concat("","/data/icon_equipments/").concat(t),alt:"icon equipment",onClick:function(){e.changeBookForm("nothing.svg"===t?null:"data/icon_equipments/".concat(t),"icon"),c(!1)}},n)}))}):Object(Ze.jsx)("img",{className:"icon_equipment",src:e.icon?"".concat("","/").concat(e.icon):"".concat("","/data/icon_equipments/nothing.svg"),alt:"icon equipment",onClick:e.disabled?null:function(){return c(!0)}})]})})),lo={changeBookForm:Et,chooseBookSelected:kt},uo=Object(s.b)((function(e){return{book:e.book}}),lo)((function(e){var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=function(e){e.path.map((function(e){return e.id})).includes("setEquipment")||e.path.map((function(e){return e.id})).includes("listSetEquipments")||i&&c(!1)};Object(r.useEffect)((function(){return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}));var s=["filter_type","filter_brand","filter_subtype","filter_model"],o=["page_type","page_brand","page_subtype","page_model"],l=e.book[["equipment_types","equipment_brands","equipment_subtypes","equipment_models"][e.book.type]].filter((function(e){return!e.deleted})).filter((function(t){return t.id!==e.book.edit})).filter((function(t){return!e.book.list_for_join.some((function(e){return e.id===t.id}))}));return e.invisible?Object(Ze.jsx)("div",{}):Object(Ze.jsxs)("div",{className:"mt15 w250",children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0441:"}),Object(Ze.jsx)("div",{className:"blockImput",children:Object(Ze.jsx)("div",{id:"setEquipment",className:"orderInputBox",onClick:function(){return c(!0)},children:Object(Ze.jsx)("input",{className:"optionFilterInput",onChange:function(t){e.changeBookForm(t.target.value,s[e.book.type]),e.changeBookForm(1,o[e.book.type])},velue:e.book[s[e.book.type]],disabled:!1})})}),i?Object(Ze.jsx)("div",{className:"listFilter",id:"listSetEquipments",children:l.map((function(t){return Object(Ze.jsx)("div",{className:"rowGropList",onClick:function(){e.chooseBookSelected([t],"list_for_join"),c(!1)},children:t.title},t.id)}))}):null,Object(Ze.jsx)("table",{className:"w250",children:Object(Ze.jsx)("tbody",{children:e.book.list_for_join.map((function(t,n){return Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{className:"w10",children:n+1}),Object(Ze.jsx)("td",{className:"noWr",children:t.title}),Object(Ze.jsx)("td",{onClick:function(){return e.chooseBookSelected([t],"list_for_join")},children:Object(Ze.jsx)(ct,{className:"icon-s1",icon:V,color:"red"})})]},t.id)}))})})]})})),mo={setVisibleFlag:Ne,changeBookForm:Et,chooseEquipmentBranches:function(e){return{type:"CHOOSE_EQUIPMENT_BRANCHES",id:e}},seveEquipmentType:function(){var e=ve.getState(),t=Oe({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u0422\u0438\u043f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentBrand:function(){var e=ve.getState(),t=Oe({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_type_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u0411\u0440\u0435\u043d\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0431\u0440\u0435\u043d\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentSubtype:function(){var e=ve.getState(),t=Oe({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,img:e.book.img,equipment_brand_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u041c\u043e\u0434\u0443\u043b\u044c/\u0441\u0435\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0443\u043b\u044f/\u0441\u0435\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},seveEquipmentModel:function(){var e=ve.getState(),t=Oe({id:e.book.edit,title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_model_id:e.book.parent_id,branches:e.book.branches,list_for_join:e.book.list_for_join.map((function(e){return e.id})),filter:{title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted}});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_model_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteEquipmentType:function(e){var t=ve.getState(),n=Oe({id:t.book.edit,deleted:e,filter:{title:t.book.filter_type,deleted:t.book.showDeleted}});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/equipment_type",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:t.data}),i({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:t.count}),i({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),i({type:"RESET_BOOK_EQUIPMENT"}),Pe(i,"alert-success",e?"\u0422\u0438\u043f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d":"\u0422\u0438\u043f \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u043e\u0432 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteEquipmentBrand:function(e){var t=ve.getState(),n=Oe({id:t.book.edit,deleted:e,filter:{title:t.book.filter_brand,equipment_type_id:t.book.equipment_type.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/equipment_brand",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:t.data}),i({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:t.count}),i({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),i({type:"RESET_BOOK_EQUIPMENT"}),Pe(i,"alert-success",e?"\u0411\u0440\u0435\u043d\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d":"\u0411\u0440\u0435\u043d\u0434 \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u0435\u043d\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteEquipmentSubtype:function(e){var t=ve.getState(),n=Oe({id:t.book.edit,deleted:e,filter:{title:t.book.filter_subtype,equipment_brand_id:t.book.equipment_brand.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/equipment_subtype",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:t.data}),i({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:t.count}),i({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),i({type:"RESET_BOOK_EQUIPMENT"}),Pe(i,"alert-success",e?"\u041c\u043e\u0434\u0443\u043b\u044c/\u0441\u0435\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430":"\u041c\u043e\u0434\u0443\u043b\u044c/\u0441\u0435\u0440\u0438\u044f \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0434\u0443\u043b\u044f/\u0441\u0435\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},deleteEquipmentModel:function(e){var t=ve.getState(),n=Oe({id:t.book.edit,deleted:e,filter:{title:t.book.filter_model,equipment_subtype_id:t.book.equipment_subtype.id,deleted:t.book.showDeleted}});return n.method="PUT",function(){var r=Object(m.a)(u.a.mark((function r(i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t.data.url_server+"/equipment_model",n).then((function(e){return e.json()})).then((function(t){t.success?(i({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:t.data}),i({type:"CHANGE_BOOK_FORM",field:"equipment_model_count",value:t.count}),i({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),i({type:"RESET_BOOK_EQUIPMENT"}),Pe(i,"alert-success",e?"\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430":"\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(e){return ge(i,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435/\u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},createEType:function(){var e=ve.getState(),t=Oe({title:e.book.title,icon:e.book.icon,url:e.book.url,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_type,page:e.book.page_type-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_type",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_types",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_type_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u0422\u0438\u043f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0442\u0438\u0445\u0435\u043d\u0438\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createEbrand:function(){var e=ve.getState(),t=Oe({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_type_id:e.book.parent_id,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_brand,equipment_type_id:e.book.equipment_type.id,page:e.book.page_brand-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_brand",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_brands",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_brand_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u0411\u0440\u0435\u043d\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u0435\u043d\u0434\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createESubtype:function(){var e=ve.getState(),t=Oe({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_brand_id:e.book.parent_id,branches:e.book.branches,deleted:!1,img:e.book.img,filter:{title:e.book.filter_subtype,equipment_brand_id:e.book.equipment_brand.id,page:e.book.page_subtype-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_subtype",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_subtypes",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_subtype_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u041c\u043e\u0434\u0443\u043b\u044c/\u0441\u0435\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0443\u043b\u044f/\u0441\u0435\u0440\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},createEModel:function(){var e=ve.getState(),t=Oe({title:e.book.title,icon:e.book.icon,url:e.book.url,equipment_subtype_id:e.book.parent_id,branches:e.book.branches,deleted:!1,filter:{title:e.book.filter_model,equipment_subtype_id:e.book.equipment_subtype.id,page:e.book.page_model-1,deleted:e.book.showDeleted}});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/equipment_model",t).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"CHANGE_BOOK_FORM",field:"equipment_models",value:e.data}),r({type:"CHANGE_BOOK_FORM",field:"equipment_models_count",value:e.count}),r({type:"SET_VISIBLE_FLAG",field:"statusEquipmentEditor",value:!1}),r({type:"RESET_BOOK_EQUIPMENT"}),Pe(r,"alert-success","\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetBookEquipment:wt},po=Object(s.b)((function(e){return{book:e.book,inputBookTitleChecked:e.view.inputBookTitleChecked,branches:e.branch.branches,permissions:e.data.user.role.permissions}}),mo)((function(e){var t=function(){e.setVisibleFlag("statusEquipmentEditor",!1),e.resetBookEquipment(),e.setVisibleFlag("inputBookTitleChecked",!0)},n=function(e){e.path.map((function(e){return e.id})).includes("equipmentEditorWiondow")||t()};Object(r.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}));var i=Object(r.useState)(e.branches.filter((function(e){return!e.deleted})).every((function(t){return e.book.branches.includes(t.id)}))),c=Object(it.a)(i,2),a=c[0],s=c[1];return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"equipmentEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.book.edit?e.book.title:["\u041d\u043e\u0432\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430","\u041d\u043e\u0432\u044b\u0439 \u0431\u0440\u0435\u043d\u0434","\u041d\u043e\u0432\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044f","\u041d\u043e\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c"][e.book.type]}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBookForm(t.target.value,"title")},value:e.book.title,checkedFlag:"inputBookTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.book.deleted}),2===e.book.type?Object(Ze.jsx)(Jc,{className:"mt15",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",url:e.book.url,onChange:function(t){return e.changeBookForm(t,"img")},value:e.book.img,disabled:e.book.deleted}):null,e.book.type?Object(Ze.jsx)(xn,{id:20,className:"mt15",title:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442",list:e.book.choose_list,setElement:e.changeBookForm,field:"parent_id",current_id:e.book.parent_id,width:"200px",disabled:e.book.deleted}):null,0===e.book.type?Object(Ze.jsx)(oo,{disabled:e.book.deleted}):null,Object(Ze.jsx)(_n,{className:"mt15",title:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f",name:["\u0412\u0441\u0435","\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435"],func1:function(){return s(!0)},func2:function(){return s(!1)},checked:e.branches.filter((function(e){return!e.deleted})).every((function(t){return e.book.branches.includes(t.id)})),disabled:e.book.deleted}),a?null:Object(Ze.jsx)(Bi,{className:"mt15",mainLable:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",list:e.branches.filter((function(e){return!e.deleted})),checked_list:e.book.branches,func:e.chooseEquipmentBranches,disabled:e.book.deleted}),Object(Ze.jsx)(uo,{invisible:!e.book.edit||3===e.book.type||!e.permissions.includes("setting_join_equipment")})]}),Object(Ze.jsx)(jn,{edit:e.book.edit,create:function(){e.book.title?(0===e.book.type&&e.createEType(),1===e.book.type&&e.createEbrand(),2===e.book.type&&e.createESubtype(),3===e.book.type&&e.createEModel()):e.setVisibleFlag("inputBookTitleChecked",!1)},save:function(){e.book.title?(0===e.book.type&&e.seveEquipmentType(),1===e.book.type&&e.seveEquipmentBrand(),2===e.book.type&&e.seveEquipmentSubtype(),3===e.book.type&&e.seveEquipmentModel()):e.setVisibleFlag("inputBookTitleChecked",!1)},delete:function(){0===e.book.type&&e.deleteEquipmentType(!0),1===e.book.type&&e.deleteEquipmentBrand(!0),2===e.book.type&&e.deleteEquipmentSubtype(!0),3===e.book.type&&e.deleteEquipmentModel(!0)},recover:function(){e.permissions.includes("setting_recover_equipment")&&(0===e.book.type&&e.deleteEquipmentType(!1),1===e.book.type&&e.deleteEquipmentBrand(!1),2===e.book.type&&e.deleteEquipmentSubtype(!1),3===e.book.type&&e.deleteEquipmentModel(!1))},close:t,deleted:e.book.deleted})]})})})),ho=(n(44),function(e){for(var t=Object(r.useState)(1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=e.allItems%e.onPage>0?(e.allItems-e.allItems%e.onPage)/e.onPage+1:(e.allItems-e.allItems%e.onPage)/e.onPage,s=[],o=0;o<a;o++)s[o]=o+1;var l=function(t){if(t==i)return t;if(Math.abs(i-t)<e.count)return t;if(Math.abs(i-t)==e.count)return"...";for(var n=0;n<e.count_start_end;n++){if(t==s[n])return t;if(t==s[s.length-1-n])return t}},d=function(t){c(t),e.func(t)};return Object(Ze.jsxs)("div",{className:"row",children:[e.navigation?Object(Ze.jsx)("div",{className:"pages-pagination",onClick:function(){return d(i-1<1?i:i-1)},children:"<"}):null,s.map((function(t){return function(t){if(Math.abs(i-t)<=e.count)return!0;for(var n=0;n<e.count_start_end;n++){if(t==s[n])return t;if(t==s[s.length-1-n])return t}return!1}(t)?Object(Ze.jsxs)("div",{className:i==t?"active":"pages-pagination",onClick:function(){return d(t)},children:[l(t)," "]},t):null})),e.navigation?Object(Ze.jsx)("div",{className:"pages-pagination",onClick:function(){return d(i+1>s.length?i:i+1)},children:">"}):null]})}),bo=function(e){return Object(Ze.jsxs)("div",{className:"searchBox ".concat(e.className),children:[Object(Ze.jsx)("input",{className:"searchInput ".concat(e.disabled?"ds":null),style:{width:e.width?e.width:"100%"},name:e.name,onChange:e.onChange,value:e.value,disabled:e.disabled}),Object(Ze.jsx)(ct,{className:"icon-s4",icon:"M31.008 27.231l-7.58-6.447c-0.784-0.705-1.622-1.029-2.299-0.998 1.789-2.096 2.87-4.815 2.87-7.787 0-6.627-5.373-12-12-12s-12 5.373-12 12 5.373 12 12 12c2.972 0 5.691-1.081 7.787-2.87-0.031 0.677 0.293 1.515 0.998 2.299l6.447 7.58c1.104 1.226 2.907 1.33 4.007 0.23s0.997-2.903-0.23-4.007zM12 20c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z",color:"grey"})]})},jo={changeBookForm:Et,setVisibleFlag:Ne,editEquipment:function(e){return{type:"EDIT_EQUIPMENT",equipment:e}},resetBookEquipment:wt,addEquipmentType:Ct,addEquipmentBrand:St,addEquipmentSubtype:Tt,addEquipmentModel:Ft},_o=Object(s.b)((function(e){return{book:e.book,statusEquipmentEditor:e.view.statusEquipmentEditor,branches:e.branch.branches,permissions:e.data.user.role.permissions}}),jo)((function(e){Object(r.useEffect)((function(){e.changeBookForm("","filter_type"),e.changeBookForm("","filter_brand"),e.changeBookForm("","filter_subtype"),e.changeBookForm("","filter_model")}),[]),Object(r.useEffect)((function(){e.addEquipmentType()}),[e.book.filter_type,e.book.page_type,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentBrand()}),[e.book.equipment_type,e.book.filter_brand,e.book.page_brand,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentSubtype()}),[e.book.equipment_brand,e.book.filter_subtype,e.book.page_subtype,e.book.showDeleted]),Object(r.useEffect)((function(){e.addEquipmentModel()}),[e.book.equipment_subtype,e.book.filter_model,e.book.page_model,e.book.showDeleted]);var t=!!Object.values(e.book.equipment_type).length,n=!!Object.values(e.book.equipment_brand).length,i=!!Object.values(e.book.equipment_subtype).length;return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)("h4",{className:"mt15",children:"\u0418\u0437\u0434\u0435\u043b\u0438\u044f"}),Object(Ze.jsx)("p",{children:"\u041c\u043d\u043e\u0433\u043e\u0443\u0440\u043e\u0432\u043d\u0435\u0432\u044b\u0439 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0438\u0437\u0434\u0435\u043b\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u043d\u0430 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)(ai,{className:"mt15",label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435",onChange:function(t){return e.changeBookForm(t.target.checked,"showDeleted")},checked:e.book.showDeleted,invisible:!e.permissions.includes("setting_see_equipment")}),Object(Ze.jsxs)("div",{className:"bookEquipment mt15",children:[Object(Ze.jsxs)("div",{className:"columnEquipment",children:[Object(Ze.jsx)(Br,{className:"whiteButton mwmc",title:"+ \u0413\u0440\u0443\u043f\u043f\u0430",onClick:function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches")}}),Object(Ze.jsx)("div",{className:"thead",children:"\u0413\u0440\u0443\u043f\u043f\u0430"}),Object(Ze.jsx)(bo,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_type"),void e.changeBookForm(n,"filter_type");var n},value:e.book.filter_type}),Object(Ze.jsx)("div",{className:"tbody",children:e.book.equipment_types.map((function(t){return Object(Ze.jsxs)("div",{className:"row tr \n                                    ".concat(e.book.equipment_type.id===t.id?"rowChoosed":null," \n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_type"),e.changeBookForm({},"equipment_brand"),e.changeBookForm({},"equipment_subtype"),e.changeBookForm({},"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"type")}(t)},children:[Object(Ze.jsx)("img",{className:"icon_equipment",style:{display:t.icon?null:"none"},src:t.icon?"".concat("","/").concat(t.icon):null,alt:"icon equipment"}),Object(Ze.jsx)("div",{className:"td",children:t.title})]},t.id)}))}),Object(Ze.jsx)(ho,{allItems:e.book.equipment_type_count,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_type")}}),Object(Ze.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",e.book.equipment_type_count]})]}),Object(Ze.jsxs)("div",{className:"columnEquipment",children:[Object(Ze.jsx)(Br,{className:"whiteButton mwmc",title:"+ \u0411\u0440\u0435\u043d\u0434",onClick:t?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(1,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_types,"choose_list"),e.changeBookForm(e.book.equipment_type.id,"parent_id")}:null}),Object(Ze.jsx)("div",{className:"thead",children:"\u0411\u0440\u0435\u043d\u0434"}),Object(Ze.jsx)(bo,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_brand"),void e.changeBookForm(n,"filter_brand");var n},value:e.book.filter_brand}),Object(Ze.jsx)("div",{className:"tbody",children:t?e.book.equipment_brands.map((function(t){return Object(Ze.jsx)("div",{className:"row tr \n                                        ".concat(e.book.equipment_brand.id===t.id?"rowChoosed":null,"\n                                        ").concat(t.deleted?"rowDeleted":null,"\n                                    "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_brand"),e.changeBookForm(0,"equipment_subtype"),e.changeBookForm(0,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_brand"),e.changeBookForm(1,"type"),e.changeBookForm(e.book.equipment_types,"choose_list"),e.changeBookForm(e.book.equipment_type.id,"parent_id")}(t)},children:Object(Ze.jsx)("div",{className:"td",children:t.title})},t.id)})):Object(Ze.jsx)("div",{className:"clPage",children:Object(Ze.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443"})})}),Object(Ze.jsx)(ho,{allItems:t?e.book.equipment_brand_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_brand")}}),Object(Ze.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",t?e.book.equipment_brand_count:0]})]}),Object(Ze.jsxs)("div",{className:"columnEquipment",children:[Object(Ze.jsx)(Br,{className:"whiteButton mwmc",title:"+ \u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f",onClick:n?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(2,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_brands,"choose_list"),e.changeBookForm(e.book.equipment_brand.id,"parent_id")}:null}),Object(Ze.jsx)("div",{className:"thead",children:"\u041c\u043e\u0434\u0443\u043b\u044c / \u0421\u0435\u0440\u0438\u044f"}),Object(Ze.jsx)(bo,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_subtype"),void e.changeBookForm(n,"filter_subtype");var n},value:e.book.filter_subtype}),Object(Ze.jsx)("div",{className:"tbody",children:n?e.book.equipment_subtypes.map((function(t){return Object(Ze.jsxs)("div",{className:"row tr \n                                    ".concat(e.book.equipment_subtype.id===t.id?"rowChoosed":null,"\n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_subtype"),e.changeBookForm(0,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_subtype"),e.changeBookForm(2,"type"),e.changeBookForm(e.book.equipment_brands,"choose_list"),e.changeBookForm(e.book.equipment_brand.id,"parent_id")}(t)},children:[Object(Ze.jsx)("img",{style:{display:t.url?null:"none"},src:"".concat("","/").concat(t.url),className:"miniImg",alt:"subtype phote"}),Object(Ze.jsx)("div",{className:"td",children:t.title})]},t.id)})):Object(Ze.jsx)("div",{className:"clPage",children:Object(Ze.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0431\u0440\u0435\u043d\u0434"})})}),Object(Ze.jsx)(ho,{allItems:n?e.book.equipment_subtype_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_subtype")}}),Object(Ze.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",n?e.book.equipment_subtype_count:0]})]}),Object(Ze.jsxs)("div",{className:"columnEquipment",children:[Object(Ze.jsx)(Br,{className:"whiteButton mwmc",title:"+ \u041c\u043e\u0434\u0435\u043b\u044c",onClick:i?function(){e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(3,"type"),e.resetBookEquipment(),e.changeBookForm(e.branches.filter((function(e){return!e.deleted})).map((function(e){return e.id})),"branches"),e.changeBookForm(e.book.equipment_subtypes,"choose_list"),e.changeBookForm(e.book.equipment_subtype.id,"parent_id")}:null}),Object(Ze.jsx)("div",{className:"thead",children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),Object(Ze.jsx)(bo,{onChange:function(t){return n=t.target.value,e.changeBookForm(1,"page_model"),void e.changeBookForm(n,"filter_model");var n},value:e.book.filter_model}),Object(Ze.jsx)("div",{className:"tbody",children:i?e.book.equipment_models.map((function(t){return Object(Ze.jsx)("div",{className:"row tr \n                                    ".concat(e.book.equipment_model.id===t.id?"rowChoosed":null,"\n                                    ").concat(t.deleted?"rowDeleted":null,"\n                                "),onClick:function(){return function(t){e.changeBookForm(t,"equipment_model")}(t)},onDoubleClick:function(){return function(t){e.editEquipment(t),e.setVisibleFlag("statusEquipmentEditor",!0),e.changeBookForm(0,"equipment_model"),e.changeBookForm(3,"type"),e.changeBookForm(e.book.equipment_subtypes,"choose_list"),e.changeBookForm(e.book.equipment_subtype.id,"parent_id")}(t)},children:Object(Ze.jsx)("div",{className:"td",children:t.title})},t.id)})):Object(Ze.jsx)("div",{className:"clPage",children:Object(Ze.jsx)("div",{className:"tempContainer",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u043c\u043e\u0434\u0443\u043b\u044c / \u0441\u0435\u0440\u0438\u044e"})})}),Object(Ze.jsx)(ho,{allItems:i?e.book.equipment_models_count:0,onPage:50,count:2,count_start_end:0,navigation:!0,func:function(t){return e.changeBookForm(t,"page_model")}}),Object(Ze.jsxs)("div",{className:"tr",children:["\u0412\u0441\u0435\u0433\u043e - ",i?e.book.equipment_models_count:0]})]})]}),e.statusEquipmentEditor?Object(Ze.jsx)(po,{}):null]})})),fo={chooseBookSelected:kt},vo=Object(s.b)((function(e){return{}}),fo)((function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){var n=e.list.filter((function(t){return e.selected.includes(t.id)}));n.length===e.list.length?(t.current.indeterminate=!1,t.current.checked=!0):n.length?t.current.indeterminate=!0:(t.current.indeterminate=!1,t.current.checked=!1)}),[e.selected]),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("h4",{className:"mt15",children:e.title}),Object(Ze.jsx)("p",{children:e.description}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"greenButton",onClick:e.addElement,children:"+ \u042d\u043b\u0435\u043c\u0435\u043d\u0442"}),e.selected.length?Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)("div",{className:"whiteButton simbolBotton",onClick:e.delete,children:Object(Ze.jsx)("svg",{className:"icon-table-red-basket",viewBox:"0 0 32 32",children:Object(Ze.jsx)("path",{d:V})})}),Object(Ze.jsxs)("div",{children:["\u0412\u044b\u0431\u0440\u0430\u043d\u043e - ",e.selected.length]})]}):null]}),Object(Ze.jsx)("div",{className:"tableElement",children:Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:Object(Ze.jsxs)("div",{className:"checkbox",children:[Object(Ze.jsx)("input",{ref:t,type:"checkbox",onChange:function(){return e.chooseBookSelected(e.list.map((function(e){return e.id})),e.selected_field)}}),Object(Ze.jsx)("label",{})]})}),Object(Ze.jsx)("th",{className:"wm500",children:e.title}),Object(Ze.jsx)("th",{className:"wm50",children:e.title2?e.title2:"\u0427\u0430\u0441\u0442\u043e\u0442\u0430"})]})}),Object(Ze.jsx)("tbody",{children:e.list.map((function(t){return Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("td",{className:"w30",children:Object(Ze.jsx)(ai,{onChange:function(){return e.chooseBookSelected([t.id],e.selected_field)},checked:e.selected.includes(t.id)})}),Object(Ze.jsx)("td",{children:t.title}),Object(Ze.jsxs)("td",{children:[t.count,1===t.direction?Object(Ze.jsx)("div",{className:"redDirection",children:"\u0420\u0430\u0441\u0445\u043e\u0434"}):null,2===t.direction?Object(Ze.jsx)("div",{className:"greenDirection",children:"\u041f\u0440\u0438\u0445\u043e\u0434"}):null]})]},t.id)}))})]})}),Object(Ze.jsx)(dt.a,{pageCount:e.count%20>0?e.count/20:e.count/20-1,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.onPageChange,forcePage:e.page,previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"pages-pagination",containerClassName:"pagination",pageClassName:"pages-pagination",activeClassName:"active",nextClassName:"pages-pagination",previousClassName:"pages-pagination"}),Object(Ze.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",e.count]})]})})),Oo={setVisibleFlag:Ne,changeBookForm:Et,createBookElement:function(){var e=ve.getState(),t=["malfunction","packagelist","item_payments"],n=["dictMalfunction","dictPackagelist","item_payments"],r=Oe({title:e.book.title,direction:e.book.direction});return function(){var i=Object(m.a)(u.a.mark((function i(c){return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(e.data.url_server+"/".concat(t[e.book.type]),r).catch((function(e){return ge(c,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return i.next=4,fetch(e.data.url_server+"/get_".concat(t[e.book.type]),Oe()).then((function(e){return e.json()})).then((function(r){r.success?(c({type:"ADD_DATA",field:n[e.book.type],data:r.data}),c({type:"ADD_DATA",field:"count_".concat(t[e.book.type]),data:r.count})):console.warn(r.message)})).catch((function(e){return ge(c,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}},go=Object(s.b)((function(e){return{book:e.book,inputBookTitleChecked:e.view.inputBookTitleChecked}}),Oo)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("elementEditorWiondow")||e.setVisibleFlag("statusElementEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"elementEditorWiondow",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"\u041d\u043e\u0432\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changeBookForm(t.target.value,"title")},value:e.book.title,checkedFlag:"inputBookTitleChecked",checked:e.inputBookTitleChecked,redStar:!0,disabled:e.book.deleted}),2===e.book.type?Object(Ze.jsx)(xn,{id:"21",className:"mt15",width:"250px",title:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",list:[{id:1,title:"\u0420\u0430\u0441\u0445\u043e\u0434"},{id:2,title:"\u041f\u0440\u0438\u0445\u043e\u0434"}],current_id:e.book.direction,setElement:e.changeBookForm,field:"direction"}):null]}),Object(Ze.jsx)(jn,{create:function(){e.book.title?(e.createBookElement(),e.setVisibleFlag("statusElementEditor",!1)):e.setVisibleFlag("inputBookTitleChecked",!1)},close:function(){return e.setVisibleFlag("statusElementEditor",!1)}})]})})})),xo={addDictMalfunction:Me,changeBookForm:Et,setVisibleFlag:Ne,resetBookEquipment:wt,deleteBookElements:Ve},yo=Object(s.b)((function(e){return{dictMalfunction:e.data.dictMalfunction,count_malfunction:e.data.count_malfunction,dictPackagelist:e.data.dictPackagelist,count_packagelist:e.data.count_packagelist,book:e.book,statusElementEditor:e.view.statusElementEditor}}),xo)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)(vo,{title:"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0442\u0438\u043f\u043e\u0432\u044b\u0445 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0435\u0439",list:e.dictMalfunction,count:e.count_malfunction,page:e.book.page_malfunction,selected:e.book.selected_malfunction,selected_field:"selected_malfunction",onPageChange:function(t){e.changeBookForm(t.selected,"page_malfunction"),e.addDictMalfunction()},addElement:function(){e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0),e.changeBookForm(0,"type")},delete:function(){e.changeBookForm(0,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ze.jsx)(go,{}):null]})})),Eo={changeBookForm:Et,setVisibleFlag:Ne,resetBookEquipment:wt,deleteBookElements:Ve,addDictPackagelist:Ge},No=Object(s.b)((function(e){return{dictMalfunction:e.data.dictMalfunction,count_malfunction:e.data.count_malfunction,dictPackagelist:e.data.dictPackagelist,count_packagelist:e.data.count_packagelist,book:e.book,statusElementEditor:e.view.statusElementEditor}}),Eo)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)(vo,{title:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438",list:e.dictPackagelist,count:e.count_packagelist,page:e.book.page_packagelist,selected:e.book.selected_packagelist,selected_field:"selected_packagelist",onPageChange:function(t){e.changeBookForm(t.selected,"page_packagelist"),e.addDictPackagelist()},addElement:function(){e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0),e.changeBookForm(1,"type")},delete:function(){e.changeBookForm(1,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ze.jsx)(go,{}):null]})})),wo={changeBookForm:Et,setVisibleFlag:Ne,resetBookEquipment:wt,deleteBookElements:Ve,addItemPayments:He},ko=Object(s.b)((function(e){return{item_payments:e.data.item_payments,count_item_payments:e.data.count_item_payments,book:e.book,statusElementEditor:e.view.statusElementEditor}}),wo)((function(e){return Object(Ze.jsxs)("div",{className:"contentTab",children:[Object(Ze.jsx)(vo,{title:"\u0421\u0442\u0430\u0442\u044c\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432",title2:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",description:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0441\u0442\u0430\u0442\u0435\u0439 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f \u0434\u0435\u043d\u0435\u0436\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0434\u043b\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0434\u043e\u0445\u043e\u0434\u043e\u0432 \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c",list:e.item_payments,count:e.count_item_payments,page:e.book.page_item_payments,selected:e.book.selected_item_payments,selected_field:"selected_item_payments",onPageChange:function(t){e.changeBookForm(t.selected,"page_item_payments"),e.addItemPayments()},addElement:function(){e.changeBookForm(2,"type"),e.resetBookEquipment(),e.setVisibleFlag("statusElementEditor",!0)},delete:function(){e.changeBookForm(2,"type"),e.deleteBookElements(),e.resetBookEquipment()}}),e.statusElementEditor?Object(Ze.jsx)(go,{}):null]})})),Co={changeBookState:Nt,addEquipment:Ie,addDictMalfunction:Me,addDictPackagelist:Ge,addItemPayments:He},So=Object(s.b)((function(e){return{tabs:e.book.tabs}}),Co)((function(e){Object(r.useEffect)((function(){e.addEquipment(),e.addDictMalfunction(),e.addDictPackagelist(),e.addItemPayments()}),[]);return Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0438"})}),Object(Ze.jsx)("div",{className:"settingPageBody"}),Object(Ze.jsx)(zn,{list:["\u0418\u0437\u0434\u0435\u043b\u0438\u044f","\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438","\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f","\u0421\u0442\u0430\u0442\u044c\u0438 \u0414\u0414\u0421"],func:function(t){return e.changeBookState({tabs:t})},tab:e.tabs}),0===e.tabs?Object(Ze.jsx)(_o,{}):null,1===e.tabs?Object(Ze.jsx)(yo,{}):null,2===e.tabs?Object(Ze.jsx)(No,{}):null,3===e.tabs?Object(Ze.jsx)(ko,{}):null]})})),To=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"settingContent",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})}));var Fo={editPrice:function(e){return{type:"EDIT_PRICE",price:e}},setVisibleFlag:Ne},Ao=Object(s.b)((function(e){return{discount_margin:e.data.discount_margin,permissions:e.data.user.role.permissions}}),Fo)((function(e){var t=e.discount_margin.filter((function(t){return!t.deleted|e.showDeleted&&t.margin_type===e.type}));return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsxs)("table",{children:[Object(Ze.jsx)("thead",{children:Object(Ze.jsxs)("tr",{children:[Object(Ze.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Ze.jsx)("th",{className:"w150",children:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430/\u0421\u043a\u0438\u0434\u043a\u0430"})]})}),Object(Ze.jsx)("tbody",{children:t.map((function(t){return Object(Ze.jsxs)("tr",{className:t.deleted?"rowDeleted":null,onDoubleClick:e.permissions.includes("setting_edit_price")?function(){e.editPrice(t),e.setVisibleFlag("statusPriceEditor",!0)}:null,children:[Object(Ze.jsx)("td",{children:t.title}),Object(Ze.jsx)("td",{children:t.margin})]},t.id)}))})]}),Object(Ze.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e - ",t.length]})]})})),Po={setVisibleFlag:Ne,changePriceForm:Fe,createPrice:function(){var e=ve.getState(),t=Oe({title:e.price.title,margin:e.price.margin,margin_type:e.price.margin_type,deleted:e.price.deleted});return function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/discount_margin",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0430\u0446\u0435\u043d\u043a\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_discount_margin",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},resetPrice:function(){return{type:"RESET_PRICE"}},savePrice:function(){var e=ve.getState(),t=Oe({id:e.price.edit,title:e.price.title,margin:e.price.margin,margin_type:e.price.margin_type,deleted:e.price.deleted});return t.method="PUT",function(){var n=Object(m.a)(u.a.mark((function n(r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e.data.url_server+"/discount_margin",t).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0446\u0435\u043d\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return n.next=4,fetch(e.data.url_server+"/get_discount_margin",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deletePrice:function(e){var t=ve.getState(),n=Oe({id:t.price.edit,deleted:e});return n.method="PUT",function(){var e=Object(m.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.data.url_server+"/discount_margin",n).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u044b\u0435\u043d\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 2:return e.next=4,fetch(t.data.url_server+"/get_discount_margin",Oe({})).then((function(e){return e.json()})).then((function(e){e.success?(r({type:"ADD_DATA",field:"discount_margin",data:e.data}),r({type:"SET_VISIBLE_FLAG",field:"statusPriceEditor",value:!1}),r({type:"RESET_PRICE"})):console.warn(e.message)})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430\u0446\u0435\u043d\u043e\u043a \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Do=Object(s.b)((function(e){return{price:e.price,inputPriceTitleChecked:e.view.inputPriceTitleChecked,permissions:e.data.user.role.permissions}}),Po)((function(e){var t=function(t){t.path.map((function(e){return e.id})).includes("priceEditor")||e.setVisibleFlag("statusPriceEditor",!1)};Object(r.useEffect)((function(){return window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}));return Object(Ze.jsx)("div",{className:"rightBlock",children:Object(Ze.jsxs)("div",{className:"rightBlockWindow",id:"priceEditor",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:e.price.edit?e.price.title:" \u041d\u043e\u0432\u0430\u044f \u0446\u0435\u043d\u0430"}),Object(Ze.jsxs)("div",{className:"contentEditor",children:[Object(Ze.jsx)(En,{className:"mt15",title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",onChange:function(t){return e.changePriceForm(t.target.value,"title")},value:e.price.title,checkedFlag:"inputPriceTitleChecked",checked:e.inputPriceTitleChecked,disabled:e.price.deleted,redStar:!0}),Object(Ze.jsx)(En,{className:"mt15",width:"70px",title:"\u041d\u0430\u0446\u0435\u043d\u043a\u0430",onChange:function(t){return e.changePriceForm(t.target.value.replace(/[^0-9]/g,""),"margin")},value:e.price.margin,unit:"%",disabled:e.price.deleted}),Object(Ze.jsx)(xn,{id:22,title:"\u0422\u0438\u043f \u043d\u0430\u0446\u0435\u043d\u043a\u0438",className:"mt15",list:e.price.list_type_margin,field:"margin_type",setElement:e.changePriceForm,current_id:e.price.margin_type,width:"250px",disabled:e.price.deleted})]}),Object(Ze.jsx)(jn,{edit:e.price.edit,deleted:e.price.deleted,create:function(){e.price.title?e.createPrice():e.setVisibleFlag("inputPriceTitleChecked",!1)},save:function(){e.price.title?e.savePrice():e.setVisibleFlag("inputPriceTitleChecked",!1)},delete:e.permissions.includes("setting_price_delete")?function(){return e.deletePrice(!0)}:null,recover:e.permissions.includes("setting_price_recover_deleted")?function(){return e.deletePrice(!1)}:null,close:function(){e.setVisibleFlag("statusPriceEditor",!1),e.resetPrice()}})]})})})),Ro={addDiscountMargin:Be,setVisibleFlag:Ne,changePriceForm:Fe},Io=Object(s.b)((function(e){return{statusPriceEditor:e.view.statusPriceEditor,permissions:e.data.user.role.permissions}}),Ro)((function(e){Object(r.useEffect)((function(){e.addDiscountMargin()}),[]);var t=Object(r.useState)(!1),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(!1),s=Object(it.a)(a,2),o=s[0],l=s[1];return Object(Ze.jsxs)("div",{className:"settingContent",children:[Object(Ze.jsx)("div",{className:"Header",children:Object(Ze.jsx)("span",{className:"headerTitle",children:"\u0426\u0435\u043d\u044b \u0438 \u0441\u043a\u0438\u0434\u043a\u0438"})}),Object(Ze.jsxs)("div",{className:"settingPageBody",children:[Object(Ze.jsx)("h3",{children:"\u0426\u0435\u043d\u044b \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b"}),Object(Ze.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0446\u0435\u043d \u043d\u0430 \u0442\u043e\u0432\u0430\u0440\u044b."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0426\u0435\u043d\u0430",onClick:function(){e.setVisibleFlag("statusPriceEditor",!0),e.changePriceForm(2,"margin_type")},invisible:!e.permissions.includes("setting_create_price")}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return c(e.target.checked)},checked:i,invisible:!e.permissions.includes("setting_price_show_deleted")})]}),e.statusPriceEditor?Object(Ze.jsx)(Do,{}):null,Object(Ze.jsx)(Ao,{type:2,showDeleted:i}),Object(Ze.jsx)("h3",{children:"\u0426\u0435\u043d\u044b \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(Ze.jsx)("p",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0446\u0435\u043d \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(Ze.jsxs)("div",{className:"row",children:[Object(Ze.jsx)(Br,{className:"greenButton",title:"+ \u0426\u0435\u043d\u0430",onClick:function(){e.setVisibleFlag("statusPriceEditor",!0),e.changePriceForm(1,"margin_type")},invisible:!e.permissions.includes("setting_create_price")}),Object(Ze.jsx)(ai,{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445",onChange:function(e){return l(e.target.checked)},checked:o,invisible:!e.permissions.includes("setting_price_show_deleted")})]}),Object(Ze.jsx)(Ao,{type:1,showDeleted:o})]})]})})),Bo=Object(s.b)((function(e){return{}}))((function(e){return Object(Ze.jsx)("div",{className:"settingContent",children:Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsxs)("div",{className:"tempContainer",children:[Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433"}),Object(Ze.jsx)("p",{className:"tempDescription",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 \u0441\u0442\u0430\u0434\u0438\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438"})]})})})})),Lo=Object(s.b)((function(e){return{}}),{})(Object(l.h)((function(e){return Object(Ze.jsxs)("div",{className:"settingPage",children:[Object(Ze.jsx)(Na,{}),Object(Ze.jsxs)(l.d,{children:[Object(Ze.jsx)(l.b,{path:"/settings/generally",component:Ca}),Object(Ze.jsx)(l.b,{path:"/settings/employees",component:ts}),Object(Ze.jsx)(l.b,{path:"/settings/branches",component:ps}),Object(Ze.jsx)(l.b,{path:"/settings/wherehouse",component:Ns}),Object(Ze.jsx)(l.b,{path:"/settings/status",component:ws}),Object(Ze.jsx)(l.b,{path:"/settings/tags",component:ks}),Object(Ze.jsx)(l.b,{path:"/settings/alerts",component:Zs}),Object(Ze.jsx)(l.b,{path:"/settings/services_pricelist",component:ao}),Object(Ze.jsx)(l.b,{path:"/settings/books",component:So}),Object(Ze.jsx)(l.b,{path:"/settings/document-templates",component:To}),Object(Ze.jsx)(l.b,{path:"/settings/prices",component:Io}),Object(Ze.jsx)(l.b,{path:"/settings/marketing",component:Bo}),Object(Ze.jsx)(l.a,{from:"/settings",to:"/settings/generally"})]})]})}))),Mo=[{id:1,title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",url:"/user/profile",group_name:"user_setting",permission_key:"user_setting"},{id:2,title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",url:"/user/personality",group_name:"user_setting",permission_key:"user_setting"},{id:3,title:"\u0412\u044b\u0445\u043e\u0434",url:"/user/logout",group_name:"user_setting",permission_key:"user_setting"}],Vo=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsx)("div",{className:"settingMenuMain",children:Mo.map((function(e){return Object(Ze.jsx)(ya,{row:e},e.id)}))})})),Go=(n(29),Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsxs)("div",{className:"".concat(e.className," rangebox"),children:[Object(Ze.jsx)("input",{type:"range",className:"participants",min:"0",max:"100",value:e.value,onChange:function(t){return e.onChange(t.target.value)},disabled:e.disabled}),Object(Ze.jsx)("span",{className:"rangeslider",style:{top:"-8px",left:"".concat(e.value-.15*e.value,"%"),display:e.disabled?"none":"flex"},children:e.value}),Object(Ze.jsx)("div",{className:"rangeline"})]})}))),Ho={changeEmployeeState:We,saveAvatar:function(e){var t=ve.getState(),n=Oe({employee_id:t.employee.edit,left:e.avaPosition[0],top:e.avaPosition[1],size:e.size,img:t.employee.img});return function(e){fetch(t.data.url_server+"/change_avatar",n).then((function(e){return e.json()})).then((function(t){t.success?(e({type:"CHANGE_DATA_STATE",data:{user:t.user}}),Pe(e,"alert-success","\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u0443\u0441\u043f\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.warn(t.message)})).catch((function(t){return ge(e,t,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}}},qo=Object(s.b)((function(e){return{employee:e.employee}}),Ho)((function(e){var t=Object(r.useState)([0,0]),n=Object(it.a)(t,2),i=n[0],c=n[1],a=Object(r.useState)(),s=Object(it.a)(a,2),o=s[0],l=s[1],d=Object(r.useRef)(null),u=function(t){var n=e.employee.avaStartPosition,r=t.pageX-n[0],a=t.pageY-n[1];c([i[0]+r,i[1]+a])},m=function e(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",e)};Object(r.useEffect)((function(){d.current&&d.current.clientWidth&&l(d.current.clientWidth)}),[e.employee.img]),Object(r.useEffect)((function(){o&&(d.current.style.width="".concat(e.employee.scale_img/100*o,"px"))}),[e.employee.scale_img]);var p=function(){e.changeEmployeeState({img:"",avatar:""}),c([0,0]),e.changeEmployeeState({scale_img:100})};return Object(Ze.jsxs)("div",{className:"".concat(e.className," boxAvatar"),children:[Object(Ze.jsx)("div",{className:"lableImput",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(Ze.jsx)("div",{children:"Size: ".concat(d.current?d.current.clientWidth:0,"x").concat(d.current?d.current.clientHeight:0)}),Object(Ze.jsxs)("div",{className:"borderMask",children:[Object(Ze.jsx)("div",{className:"mask",draggable:!1,onMouseDown:function(t){e.employee.img&&(e.changeEmployeeState({avaStartPosition:[t.pageX,t.pageY]}),window.addEventListener("mousemove",u),window.addEventListener("mouseup",m))}}),Object(Ze.jsx)("img",{style:{left:i[0],top:i[1]},src:e.employee.img||"".concat("http://onetwonline.ru","/").concat(e.employee.avatar),ref:d,className:"editAvaImg"})]}),Object(Ze.jsx)(Go,{className:"mt15",onChange:function(t){return e.changeEmployeeState({scale_img:t})},value:e.employee.scale_img,disabled:!e.employee.img}),Object(Ze.jsxs)("div",{className:"row mt15",children:[Object(Ze.jsxs)("label",{className:"labelAva",children:[" \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",Object(Ze.jsx)("input",{className:"addAva",type:"file",accept:".jpg,.jpeg",onChange:function(t){if(t.target.files[0]){d.current.style.width="initial",p();var n=new FileReader;n.onload=function(t){e.changeEmployeeState({img:t.target.result})},n.readAsDataURL(t.target.files[0])}},disabled:e.disabled})]}),Object(Ze.jsx)(Br,{className:"greenButton bcr ml15",title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",onClick:p}),Object(Ze.jsx)(Br,{className:"blueButton ",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClick:function(){e.employee.img&&e.saveAvatar({avaPosition:i,size:[d.current?d.current.clientWidth:0,d.current?d.current.clientHeight:0]})}})]})]})})),Wo={changeEmployeeState:We,editEmployee:ze,saveEditEmployee:Ke},zo=Object(s.b)((function(e){return{employee:e.employee,view:e.view,user:e.data.user}}),Wo)((function(e){Object(r.useEffect)((function(){Object.values(e.user).length&&e.editEmployee(e.user)}),[e.user]);return Object(Ze.jsx)("div",{className:"settingContent jc-c df",children:Object(Ze.jsxs)("div",{className:"profbox",children:[Object(Ze.jsx)(qo,{className:"ml15 mt15"}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0418\u043c\u044f",onChange:function(t){return e.changeEmployeeState({first_name:t.target.value})},value:e.employee.first_name,checkedFlag:"inputEmployeeNameChecked",checked:e.view.inputEmployeeNameChecked,redStar:!0,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",onChange:function(t){return e.changeEmployeeState({last_name:t.target.value})},value:e.employee.last_name,disabled:e.employee.deleted}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"email",onChange:function(t){return e.changeEmployeeState({email:t.target.value})},value:e.employee.email,checkedFlag:"inputEmployeeEmailChecked",checked:e.view.inputEmployeeEmailChecked,redStar:!0,disabled:e.employee.deleted}),e.view.errorSameMail?Object(Ze.jsx)("div",{className:"errorMassageInput",children:"\u0422\u0430\u043a\u043e\u0439 email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):null,Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(t){return e.changeEmployeeState({phone:t})},value:e.employee.phone,disabled:e.employee.deleted,isPhone:!0}),Object(Ze.jsx)(En,{className:"w250 mt15",title:"\u0418\u041d\u041d",onChange:function(t){return e.changeEmployeeState({inn:t.target.value})},value:e.employee.inn,disabled:e.employee.deleted}),Object(Ze.jsx)(Br,{className:"blueButton mt15 m0",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onClick:function(){e.employee.first_name&&e.employee.email?e.saveEditEmployee():(e.employee.first_name||e.changeVisibleState({inputEmployeeNameChecked:!1}),e.employee.email||e.changeVisibleState({inputEmployeeEmailChecked:!1}))}})]})})})),Uo={logout:function(){return function(e){fetch("http://onetwonline.ru/logout")}},changeDataState:Qe},Yo=Object(s.b)((function(e){return{}}),Uo)((function(e){return Object(r.useEffect)((function(){e.logout(),e.changeDataState({login_status:!1}),e.history.push("/")})),Object(Ze.jsx)("div",{className:"tempPage",children:Object(Ze.jsx)("div",{className:"tempContainer",children:Object(Ze.jsx)("h1",{className:"tempTitle",children:"\u0412\u044b\u0445\u043e\u0434"})})})})),Ko=Object(s.b)((function(e){return{}}),{})((function(e){return Object(Ze.jsxs)("div",{className:"settingPage",children:[Object(Ze.jsx)(Vo,{}),Object(Ze.jsxs)(l.d,{children:[Object(Ze.jsx)(l.b,{path:"/user/profile",component:zo}),Object(Ze.jsx)(l.b,{path:"/user/logout",component:Yo}),Object(Ze.jsx)(l.a,{from:"/user",to:"/user/profile"})]})]})})),Jo=function(e){var t,n;return"alert-success"===e.type&&(t="M27 4l-15 15-7-7-5 5 12 12 20-20z",n="#155724"),"alert-warning"===e.type&&(t=H,n="#856404"),"alert-danger"===e.type&&(t=$,n="#721c24"),Object(Ze.jsxs)("div",{className:"alert ".concat(e.type),children:[Object(Ze.jsx)(ct,{icon:t,color:n,className:"icon-s2 mr5"}),Object(Ze.jsx)("div",{children:e.text})]})},Xo=Object(s.b)((function(e){return{alerts:e.data.alerts}}),{})((function(e){return Object(Ze.jsx)("div",{className:"alertAria",children:e.alerts.length?e.alerts.map((function(e){return Object(Ze.jsx)(Jo,{text:e.text,type:e.type},e.id)})):null})}));var Qo={addEmployees:Ye,addStatus:function(){var e=ve.getState();return function(t){fetch(e.data.url_server+"/get_status",Oe()).then((function(e){return e.json()})).then((function(e){e.success?t({type:"ADD_STATUS",status:e.data}):console.warn(e.message)})).catch((function(e){return ge(t,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},addMainData:Le,addData:function(e,t){return{type:"ADD_DATA",data:e,field:t}},changeBranchState:Je},Zo=Object(s.b)((function(e){return{statusCreateNewClient:e.view.statusCreateNewClient,user_id:e.data.user.id,branches:e.branch.branches}}),Qo)(Object(l.h)((function(e){return Object(r.useEffect)((function(){e.addMainData(),e.addStatus()}),[]),Object(r.useEffect)((function(){e.changeBranchState({current_branch:e.branches.filter((function(t){return t.employees.includes(e.user_id)}))[0]||{}})}),[e.branches]),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)(ot,{}),Object(Ze.jsxs)("div",{className:"contentMain",children:[Object(Ze.jsx)(Xo,{}),Object(Ze.jsxs)(l.d,{children:[Object(Ze.jsx)(l.b,{path:"/tasks",component:$i}),Object(Ze.jsx)(l.b,{path:"/leans",component:ec}),Object(Ze.jsx)(l.b,{path:"/orders",component:Zi}),Object(Ze.jsx)(l.b,{path:"/shops",component:tc}),Object(Ze.jsx)(l.b,{path:"/payments",component:Ic}),Object(Ze.jsx)(l.b,{path:"/wherehouse",component:ha}),Object(Ze.jsx)(l.b,{path:"/clients",component:fa}),Object(Ze.jsx)(l.b,{path:"/analytics",component:va}),Object(Ze.jsx)(l.b,{path:"/reports",component:Oa}),Object(Ze.jsx)(l.b,{path:"/telephony",component:ga}),Object(Ze.jsx)(l.b,{path:"/settings",component:Lo}),Object(Ze.jsx)(l.b,{path:"/user",component:Ko}),Object(Ze.jsx)(l.a,{from:"/",to:"/leans"})]})]}),Object(Ze.jsx)(l.d,{children:Object(Ze.jsx)(l.b,{exact:!0,path:"/orders/:id",component:fi})})]})})));var $o={log_in:function(e,t){var n=ve.getState();return function(r){fetch(n.data.url_server+"/flogin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n.data.csrfToken},credentials:n.data.credentials,body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){e.success?r({type:"CHANGE_DATA_STATE",data:{login_status:!0}}):(r({type:"CHANGE_DATA_STATE",data:{error_message:e.message,login_status:!1}}),console.warn(e.message))})).catch((function(e){return ge(r,e,"\u0417\u0430\u043f\u0440\u043e\u0441 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d")}))}},changeDataState:Qe},el=Object(s.b)((function(e){return{serverUrl:e.data.url_server,error_message:e.data.error_message,csrfToken:e.data.csrfToken}}),$o)((function(e){var t=function(t){var n=t.target.form;e.log_in(n.login.value,n.password.value)};return Object(Ze.jsx)("div",{className:"mainLoginContaner",children:Object(Ze.jsxs)("div",{className:"loginContanier",children:[Object(Ze.jsx)("h2",{children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),e.error_message?Object(Ze.jsx)("span",{className:"errorMessageLogin",children:e.error_message}):null,Object(Ze.jsxs)("form",{id:"loginForm",children:[Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("label",{className:"loginFormLable",children:"\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 Email"}),Object(Ze.jsx)("input",{id:"login",className:"loginFormInput",type:"text",onKeyPress:function(e){"Enter"===e.key&&t(e)}})]}),Object(Ze.jsxs)("div",{children:[Object(Ze.jsx)("label",{className:"loginFormLable",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(Ze.jsx)("input",{id:"password",className:"loginFormInput",type:"password",onKeyPress:function(e){"Enter"===e.key&&t(e)}})]}),Object(Ze.jsx)("div",{children:Object(Ze.jsx)("button",{className:"loginButtom",type:"button",onClick:t,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})})})),tl=function(e){return Object(Ze.jsx)("div",{className:"centerBlockFix",children:Object(Ze.jsxs)("div",{className:"blockWindowFix wmx750 wmn750 al-itm-ct",children:[Object(Ze.jsx)("div",{className:"createNewTitle",children:"\u0412\u0440\u0435\u043c\u044f \u0441\u0435\u0441\u0441\u0438 \u0438\u0441\u0442\u0435\u043a\u043b\u043e, \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),Object(Ze.jsx)("div",{className:"jc-c m30",children:Object(Ze.jsx)(Br,{className:"greenButton",title:"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",onClick:function(){window.location.reload()}})})]})})};var nl={addMainData:Le,changeDataState:Qe,csrf:function(){var e=ve.getState();return"include"===e.data.credentials?function(t){fetch(e.data.url_server+"/getcsrf",{credentials:e.data.credentials}).then((function(e){t({type:"CHANGE_DATA_STATE",data:{csrfToken:e.headers.get(["X-CSRFToken"])}})})).catch((function(e){console.log(e)}))}:function(e){e({type:"CHANGE_DATA_STATE",data:{csrfToken:document.getElementsByName("csrf-token")[0].content}})}}},rl=Object(s.b)((function(e){return{login_status:e.data.login_status,user:e.data.user,url_server:e.data.url_server,csrfToken:e.data.csrfToken,statusRefreshPage:e.view.statusRefreshPage}}),nl)((function(e){return Object(r.useEffect)((function(){return e.csrf()}),[]),Object(r.useEffect)((function(){e.login_status&&e.csrfToken&&e.addMainData()}),[e.login_status]),Object(Ze.jsxs)("div",{children:[Object.values(e.user).length&&e.login_status&&e.csrfToken?Object(Ze.jsx)(Zo,{}):null,e.login_status?null:Object(Ze.jsx)(el,{}),e.statusRefreshPage?Object(Ze.jsx)(tl,{}):null]})})),il=Object(Ze.jsx)(i.a.StrictMode,{children:Object(Ze.jsx)(s.a,{store:ve,children:Object(Ze.jsx)(o.a,{children:Object(Ze.jsx)(rl,{})})})});a.a.render(il,document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.1b6f1803.chunk.js.map